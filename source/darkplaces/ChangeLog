------------------------------------------------------------------------
r7382 | divverent | 2007-05-30 10:52:15 +0200 (Wed, 30 May 2007) | 2 lines

OS X: make unknown char/keycode just a DPrint, reportedly some mouse drivers work fine apart from that they also send weird key codes

------------------------------------------------------------------------
r7381 | divverent | 2007-05-29 01:40:25 +0200 (Tue, 29 May 2007) | 2 lines

ignore r_glsl_contrastboost in range 0..1 (it breaks overbright pixels in that range), that is, the cvar now only does anything when > 1 (brighten up image) or < 0 (threshold effect)

------------------------------------------------------------------------
r7380 | divverent | 2007-05-28 23:46:15 +0200 (Mon, 28 May 2007) | 2 lines

contrast boost: change 1 to myhvec3(1, 1, 1) to make ATI driver happy (doesn't change fps on nvidia)

------------------------------------------------------------------------
r7379 | divverent | 2007-05-28 23:01:55 +0200 (Mon, 28 May 2007) | 2 lines

make degrading shaders actually WORK

------------------------------------------------------------------------
r7378 | divverent | 2007-05-28 15:35:07 +0200 (Mon, 28 May 2007) | 6 lines

glsl doesn't allow dividing by zero (result is undefined, although sane on nvidia), so...
-"      color.rgb = SceneBrightness / (ContrastBoostCoeff + 1 / color.rgb);\n"
+"      color.rgb = color.rgb * SceneBrightness / (ContrastBoostCoeff * color.rgb + 1);\n"
also gains some fps apparently (7600GT here)
Weirdly, *= seems to be by 3fps slower than using = and *

------------------------------------------------------------------------
r7377 | divverent | 2007-05-28 14:29:48 +0200 (Mon, 28 May 2007) | 2 lines

new cvar r_glsl_contrastboost to do something similar to gamma in the GLSL shader... costs some fps when enabled, but works everywhere, and doesn't grey out as much as gamma (see http://hector.rbi.informatik.uni-frankfurt.de/nex/img/r_ambient4r_hdr_scenebrightness2r_glsl_contrastboost2.jpg vs http://hector.rbi.informatik.uni-frankfurt.de/nex/img/v_gamma2.jpg)

------------------------------------------------------------------------
r7376 | divverent | 2007-05-27 11:22:07 +0200 (Sun, 27 May 2007) | 2 lines

that was missing in 7372 (TAB should also hide the centerprinting of finale)

------------------------------------------------------------------------
r7375 | havoc | 2007-05-27 08:46:44 +0200 (Sun, 27 May 2007) | 5 lines

added polygonoffset as a texture property, used on submodels (such as
doors in q1bsp maps) to prevent zfighting if they exactly overlap a
wall, consistent with software quake (which intentionally removed the
portions of the door overlapping a wall)

------------------------------------------------------------------------
r7374 | havoc | 2007-05-27 08:42:10 +0200 (Sun, 27 May 2007) | 3 lines

default sv_gameplayfix_blowupfallenzombies to 0 in -hipnotic mode as it
messes up the friendly monsters

------------------------------------------------------------------------
r7373 | havoc | 2007-05-27 07:57:48 +0200 (Sun, 27 May 2007) | 3 lines

fixed recently introduced bug that made lightmapintensity affect dlights
and rtlights

------------------------------------------------------------------------
r7372 | havoc | 2007-05-27 00:15:27 +0200 (Sun, 27 May 2007) | 5 lines

make showscores work while finale is up in all game modes
(this should not have been implemented as a nexuiz specific feature)
made monsters and secrets display check the STAT_TOTAL values to decide
whether to draw, rather than a nexuiz check

------------------------------------------------------------------------
r7371 | divverent | 2007-05-26 13:42:33 +0200 (Sat, 26 May 2007) | 2 lines

change noise4f to a function that does not crash

------------------------------------------------------------------------
r7370 | divverent | 2007-05-26 12:19:37 +0200 (Sat, 26 May 2007) | 4 lines

intermission: store the current time to completed_time only on the first svc_intermission-like command (Nexuiz switches to svc_intermission for final scoreboard display and to svc_finale for the voting screen);
intermission: in GAME_NEXUIZ, display standard scoreboard instead of intermission overlay, and allow showscores (TAB) to override svc_finale overlay
scoreboard: in intermission, show the time when the game ended, not the current time

------------------------------------------------------------------------
r7369 | havoc | 2007-05-25 22:32:05 +0200 (Fri, 25 May 2007) | 3 lines

reorganized rgbgen/alphagen/tcgen fields into their own structs to clean
up the code somewhat

------------------------------------------------------------------------
r7368 | havoc | 2007-05-25 10:03:48 +0200 (Fri, 25 May 2007) | 3 lines

implemented deformvertexes (previously autosprite/autosprite2 had been
supported as a special case, but now all deformvertexes modes work)

------------------------------------------------------------------------
r7367 | havoc | 2007-05-25 09:57:11 +0200 (Fri, 25 May 2007) | 2 lines

added a 4D noise function for use by shaders

------------------------------------------------------------------------
r7366 | divverent | 2007-05-25 08:40:21 +0200 (Fri, 25 May 2007) | 2 lines

ask for generated normals when usign Q3TCGEN_ENVIRONMENT

------------------------------------------------------------------------
r7365 | havoc | 2007-05-24 22:12:21 +0200 (Thu, 24 May 2007) | 2 lines

added parsing of rgbgen wave and alphagen wave

------------------------------------------------------------------------
r7364 | havoc | 2007-05-24 09:35:30 +0200 (Thu, 24 May 2007) | 2 lines

support multiple tcmod commands on a single layer

------------------------------------------------------------------------
r7363 | havoc | 2007-05-24 08:43:28 +0200 (Thu, 24 May 2007) | 2 lines

implemented tcgen

------------------------------------------------------------------------
r7362 | havoc | 2007-05-24 07:55:41 +0200 (Thu, 24 May 2007) | 2 lines

implemented tcmod (all forms)

------------------------------------------------------------------------
r7361 | havoc | 2007-05-24 05:37:44 +0200 (Thu, 24 May 2007) | 2 lines

added loading of rgbgen/alphagen/tcgen/tcmod

------------------------------------------------------------------------
r7360 | havoc | 2007-05-24 03:49:26 +0200 (Thu, 24 May 2007) | 2 lines

remove unused rsurface.modelneighbor3i

------------------------------------------------------------------------
r7359 | havoc | 2007-05-24 03:36:13 +0200 (Thu, 24 May 2007) | 6 lines

eliminated rsurface.model, so there is now no dependence on having an
actual model in the material renderer
(except transparent surface queuing still needing an entity)
this cleanup means that the material renderer could be called from other
places without an entity (effects such as particles and lightning beams)

------------------------------------------------------------------------
r7358 | havoc | 2007-05-24 00:41:52 +0200 (Thu, 24 May 2007) | 2 lines

moved rsurface_ variables into rsurface struct as a minor cleanup

------------------------------------------------------------------------
r7356 | havoc | 2007-05-24 00:36:08 +0200 (Thu, 24 May 2007) | 6 lines

added DP_QC_CVAR_DEFSTRING extension
corrected function descriptions of DP_QC_STRING_CASE_FUNCTIONS extension
to indicate that they are in that extension, previously they broke the
formatting convention by saying what they were for instead of the
extension they belong to

------------------------------------------------------------------------
r7355 | havoc | 2007-05-24 00:24:53 +0200 (Thu, 24 May 2007) | 2 lines

forgot to commit this change

------------------------------------------------------------------------
r7354 | havoc | 2007-05-24 00:07:18 +0200 (Thu, 24 May 2007) | 5 lines

changed DP_SV_MODELFLAGS_AS_EFFECTS extension, now using any of the MF_
flags will override the model's flags
added EF_NOMODELFLAGS effect to disable model flags without replacing
them with anything new

------------------------------------------------------------------------
r7352 | havoc | 2007-05-23 22:51:31 +0200 (Wed, 23 May 2007) | 3 lines

removed rsurface_entity field, and copied all fields that were accessed
through it into rsurface_* fields

------------------------------------------------------------------------
r7350 | havoc | 2007-05-23 19:15:21 +0200 (Wed, 23 May 2007) | 3 lines

remove stupid int casts of pitch/yaw in beam code, yet another instance
of this legacy from quake that I hadn't killed yet

------------------------------------------------------------------------
r7349 | havoc | 2007-05-23 19:05:10 +0200 (Wed, 23 May 2007) | 7 lines

changed server to not send pingplreport in response to "ping" command,
because it confuses non-DP clients and older DP clients (resulting in
the message "unknown command pingplreport" flooding the console)
changed client to send "pings" command to DP7 protocol servers so that
it gets only the pingplreport output, avoiding any potential misparsing
of ping reports and reducing bandwidth a little.

------------------------------------------------------------------------
r7348 | havoc | 2007-05-23 19:03:07 +0200 (Wed, 23 May 2007) | 2 lines

hide ping reports in demos

------------------------------------------------------------------------
r7347 | divverent | 2007-05-23 18:26:59 +0200 (Wed, 23 May 2007) | 2 lines

replace funky !!a ^ !!b XOR usage by a new boolxor(a, b) macro that does that internally - should be more readable

------------------------------------------------------------------------
r7346 | divverent | 2007-05-23 13:31:54 +0200 (Wed, 23 May 2007) | 2 lines

in v_flipped mode, invert the sense of snd_swapstereo

------------------------------------------------------------------------
r7344 | havoc | 2007-05-23 05:51:42 +0200 (Wed, 23 May 2007) | 2 lines

added support for "rgbgen lightingdiffuse" as a type of lighting

------------------------------------------------------------------------
r7343 | divverent | 2007-05-23 02:23:30 +0200 (Wed, 23 May 2007) | 2 lines

damn, committed the old version of my patch... this now is the REAL v_flipped

------------------------------------------------------------------------
r7342 | divverent | 2007-05-23 02:11:40 +0200 (Wed, 23 May 2007) | 3 lines

cvar: v_flipped flips all 3D view except sprites and flips input to compensate,
basically a poor man's left handed mode

------------------------------------------------------------------------
r7341 | havoc | 2007-05-22 22:17:21 +0200 (Tue, 22 May 2007) | 2 lines

call FS_ClearSearchPath in FS_Shutdown

------------------------------------------------------------------------
r7340 | havoc | 2007-05-22 22:15:24 +0200 (Tue, 22 May 2007) | 2 lines

close packs when clearing search path

------------------------------------------------------------------------
r7339 | havoc | 2007-05-22 22:07:56 +0200 (Tue, 22 May 2007) | 2 lines

renamed snd_reload to snd_unloadallsounds to clarify its purpose

------------------------------------------------------------------------
r7338 | havoc | 2007-05-22 20:46:56 +0200 (Tue, 22 May 2007) | 4 lines

enable svc_pointparticles1 protocol, because the pointparticles
extension is so new that compatibility with month-old clients that never
officially supported the DP_SV_POINTPARTICLES feature is not a concern

------------------------------------------------------------------------
r7337 | havoc | 2007-05-22 12:08:34 +0200 (Tue, 22 May 2007) | 5 lines

fixed bug in autosprite setup code that made it malfunction badly on any
non-world entity
rewrote autosprite code to make it a bit cleaner
rewrote autosprite2 code to make it work properly

------------------------------------------------------------------------
r7336 | divverent | 2007-05-22 10:07:34 +0200 (Tue, 22 May 2007) | 2 lines

Win32: ioctl SIO_UDP_CONNRESET <- FALSE

------------------------------------------------------------------------
r7335 | divverent | 2007-05-22 09:39:05 +0200 (Tue, 22 May 2007) | 3 lines

Reject clc_stringcmd with \r and \n in them; when developer is set, hex dump these commands.
Exception: \r and \n are allowed at the end of a clc_stringcmd, but get cut off before processing (DP builds from before yesterday did that with sentcvar commands).

------------------------------------------------------------------------
r7334 | havoc | 2007-05-22 07:50:19 +0200 (Tue, 22 May 2007) | 2 lines

q3 shaders are now supported on all model and map formats

------------------------------------------------------------------------
r7333 | havoc | 2007-05-22 04:37:06 +0200 (Tue, 22 May 2007) | 2 lines

fix typo

------------------------------------------------------------------------
r7331 | havoc | 2007-05-22 01:08:37 +0200 (Tue, 22 May 2007) | 3 lines

added DP_SV_POINTPARTICLES extension string (the functions already
existed)

------------------------------------------------------------------------
r7330 | havoc | 2007-05-22 00:13:46 +0200 (Tue, 22 May 2007) | 4 lines

added svc_pointparticles1 for next protocol bump (uses 15 bytes instead
of 29 bytes for the potentially common case of zero velocity and a count
of 1)

------------------------------------------------------------------------
r7329 | divverent | 2007-05-21 23:14:34 +0200 (Mon, 21 May 2007) | 2 lines

make ASCII 10 and ASCII 13 terminate messagemode too (fixes Ctrl-J, Ctrl-M, Num-Enter)

------------------------------------------------------------------------
r7328 | divverent | 2007-05-21 23:08:24 +0200 (Mon, 21 May 2007) | 2 lines

sentcvar: don't append a \n, it's a clc_stringcmd, these are not separated by \n!

------------------------------------------------------------------------
r7327 | havoc | 2007-05-21 00:42:39 +0200 (Mon, 21 May 2007) | 3 lines

removed r_shadow_realtime_world_dlightshadows cvar, now the
r_shadow_realtime_dlight_shadows setting applies even in rtworld mode

------------------------------------------------------------------------
r7326 | havoc | 2007-05-21 00:32:51 +0200 (Mon, 21 May 2007) | 2 lines

renamed r_shadow_shadow_polygon* cvars to r_shadow_polygon*

------------------------------------------------------------------------
r7325 | havoc | 2007-05-21 00:28:18 +0200 (Mon, 21 May 2007) | 3 lines

validate r_shadow_frontsidecasting each frame and correct it to a valid
value if invalid

------------------------------------------------------------------------
r7324 | havoc | 2007-05-21 00:26:48 +0200 (Mon, 21 May 2007) | 4 lines

made the effect of the r_shadow_shadow_polygonoffset cvar reverse when
r_shadow_frontsidecasting is off, so that only one setting needs
changing to toggle between the two modes

------------------------------------------------------------------------
r7323 | havoc | 2007-05-20 18:16:02 +0200 (Sun, 20 May 2007) | 2 lines

send input for every client frame in singleplayer

------------------------------------------------------------------------
r7322 | divverent | 2007-05-20 18:02:27 +0200 (Sun, 20 May 2007) | 2 lines

DP_PRELOAD_DEPENDENCIES=yes makefile option: when set, link against the libraries needed using -l dynamically so they won't get loaded at runtime using dlopen

------------------------------------------------------------------------
r7321 | divverent | 2007-05-20 16:59:03 +0200 (Sun, 20 May 2007) | 7 lines

new option -capturedemo to capture a demo to an AVI file;
new cvars cl_capturevideo_width, cl_capturevideo_height to scale down video capture
when capturing >1GB, don't write an index chunk (in that case, an ix00/ix01 chunk has to be written, but that's not yet implemented)
when capturing, write a "dmlh" header to store the total number of frames, and store the partial number of frames in the "avih" header, as specified by OpenDML
when capturing, store the aspect ratio in a "vprp" header chunk (OpenDML)
make Host_Quit_f do nothing when already quitting (fixes "quit" issue while playing back a demo); note that Host_Quit_f is only used by the console and by -benchmark/-demo/-capturedemo

------------------------------------------------------------------------
r7320 | havoc | 2007-05-19 21:24:19 +0200 (Sat, 19 May 2007) | 2 lines

don't send svc_statubyte or any stat index over 32 to old clients

------------------------------------------------------------------------
r7319 | havoc | 2007-05-19 21:23:34 +0200 (Sat, 19 May 2007) | 2 lines

don't send empty unreliable packets

------------------------------------------------------------------------
r7318 | havoc | 2007-05-19 20:42:03 +0200 (Sat, 19 May 2007) | 3 lines

fix bug that caused server to send incorrect format of .velocity in
svc_clientdata when using "QUAKEDP" protocol

------------------------------------------------------------------------
r7317 | havoc | 2007-05-19 14:01:02 +0200 (Sat, 19 May 2007) | 6 lines

reworked newmouseparms[] code
removed -noforcemspd and -noforcemaccel options as they didn't make
sense when comparing to the MSDN documentation (-noforcemparms remains)
fixed any possible bugs with restoring originalmouseparms[]
added comments explaining the meaning of newmouseparms[] components

------------------------------------------------------------------------
r7316 | divverent | 2007-05-19 11:19:52 +0200 (Sat, 19 May 2007) | 2 lines

kill mouse accel using IOHIDSetAccelerationWithKey(mouseDev, CFSTR(kIOHIDMouseAccelerationType), -1.0) instead, this is what System Preferences uses (otherwise, mouse accel doesn't get restored right on exit)

------------------------------------------------------------------------
r7315 | divverent | 2007-05-18 23:11:39 +0200 (Fri, 18 May 2007) | 2 lines

more of these

------------------------------------------------------------------------
r7314 | divverent | 2007-05-18 23:08:47 +0200 (Fri, 18 May 2007) | 5 lines

foo *var;
sizeof(var) is the size of the POINTER
sizeof(*var) is the size of the TYPE
Now it should work...

------------------------------------------------------------------------
r7313 | divverent | 2007-05-18 23:05:19 +0200 (Fri, 18 May 2007) | 2 lines

only memcpy the suggested format if the failure is not permanent! Otherwise, it can lead to endless loops

------------------------------------------------------------------------
r7312 | havoc | 2007-05-18 17:26:11 +0200 (Fri, 18 May 2007) | 2 lines

implemented support for \" in console command parsing code

------------------------------------------------------------------------
r7311 | havoc | 2007-05-18 00:01:55 +0200 (Fri, 18 May 2007) | 2 lines

changed default of cl_netinputpacketsperserverpacket to 1.0

------------------------------------------------------------------------
r7310 | havoc | 2007-05-17 23:23:03 +0200 (Thu, 17 May 2007) | 2 lines

allow non-integer cl_netinputpacketsperserverpacket values

------------------------------------------------------------------------
r7309 | havoc | 2007-05-17 21:19:38 +0200 (Thu, 17 May 2007) | 2 lines

fix descriptions on cl_netinputpacketsper* cvars

------------------------------------------------------------------------
r7308 | havoc | 2007-05-17 21:14:36 +0200 (Thu, 17 May 2007) | 4 lines

added a cvar which allows the client to send more than one packet per
server packet, by default 2, this results in smoother demos when packet
loss is occurring with predicted movement

------------------------------------------------------------------------
r7307 | havoc | 2007-05-17 21:04:55 +0200 (Thu, 17 May 2007) | 2 lines

don't limit lerps to 100ms in demo playback

------------------------------------------------------------------------
r7306 | havoc | 2007-05-17 20:58:54 +0200 (Thu, 17 May 2007) | 7 lines

moved the code that applies slowmo to demo playback so that it reacts
immediately to changes, not at the next packet read (which may never
come if slowmo was set to 0 at any point)
made pausedemo command freeze demo playback in a way that time does not
advance, preventing the problem where it fast forwards to catch up with
where it would have been if not paused after unpausing the demo

------------------------------------------------------------------------
r7303 | divverent | 2007-05-17 17:53:57 +0200 (Thu, 17 May 2007) | 2 lines

cvar apple_mouse_noaccel (1 default) disables mouse acceleration

------------------------------------------------------------------------
r7302 | divverent | 2007-05-17 17:50:10 +0200 (Thu, 17 May 2007) | 2 lines

setting skinframe to R_SkinFrame_LoadMissing for animmap too!

------------------------------------------------------------------------
r7301 | havoc | 2007-05-17 16:14:19 +0200 (Thu, 17 May 2007) | 2 lines

fix 3 typos

------------------------------------------------------------------------
r7300 | havoc | 2007-05-17 15:49:39 +0200 (Thu, 17 May 2007) | 2 lines

renamed vid_dga to vid_dgamouse

------------------------------------------------------------------------
r7299 | havoc | 2007-05-17 15:45:35 +0200 (Thu, 17 May 2007) | 2 lines

renamed vid_dga to vid_dgamouse

------------------------------------------------------------------------
r7298 | havoc | 2007-05-17 15:44:12 +0200 (Thu, 17 May 2007) | 3 lines

cleaned up vid_dga code, removed vid_dga_mouseaccel cvar as it did the
same thing as sensitivity (and was not saved, and defaulted to 1)

------------------------------------------------------------------------
r7297 | havoc | 2007-05-17 13:55:41 +0200 (Thu, 17 May 2007) | 2 lines

improved coreaudio initialization code to suggest more changes

------------------------------------------------------------------------
r7296 | havoc | 2007-05-17 13:43:53 +0200 (Thu, 17 May 2007) | 3 lines

fix CoreAudio support so that it suggests a proper sound speed when the
hardware returns a different value

------------------------------------------------------------------------
r7295 | divverent | 2007-05-17 12:16:58 +0200 (Thu, 17 May 2007) | 2 lines

enable apple multithreaded GL by default; let's see when the first one complains

------------------------------------------------------------------------
r7294 | divverent | 2007-05-17 11:38:46 +0200 (Thu, 17 May 2007) | 2 lines

libcurl-4; vid_glx: RTLD_GLOBAL (apparently FreeBSD users need it)

------------------------------------------------------------------------
r7293 | havoc | 2007-05-16 19:15:09 +0200 (Wed, 16 May 2007) | 3 lines

trace corona checks from eye to light origin, this fixes light coronas
being seen inside walls in quake mission pack 2 on lightning traps

------------------------------------------------------------------------
r7292 | havoc | 2007-05-16 19:11:35 +0200 (Wed, 16 May 2007) | 2 lines

fix some unused variables

------------------------------------------------------------------------
r7291 | havoc | 2007-05-16 19:11:04 +0200 (Wed, 16 May 2007) | 4 lines

changed 1-frame warm-up period to 3 frames before time begins advancing
in the timedemo playback (meaning 3 identical frames are rendered first)
this should improve consistency of timedemo results

------------------------------------------------------------------------
r7290 | havoc | 2007-05-16 15:45:39 +0200 (Wed, 16 May 2007) | 3 lines

changed an error when fighting the end boss of Nehahra to merely a
warning, the qc should be fixed though

------------------------------------------------------------------------
r7289 | havoc | 2007-05-16 13:47:15 +0200 (Wed, 16 May 2007) | 2 lines

hopefully fixed a bug in line/sphere collision code (not used)

------------------------------------------------------------------------
r7288 | havoc | 2007-05-16 11:27:04 +0200 (Wed, 16 May 2007) | 3 lines

optimized the Mod_Q3BSP_LightPoint pitch/yaw math by using the
mod_md3_sin table rather than a lot of angle math to feed to cos/sin

------------------------------------------------------------------------
r7287 | divverent | 2007-05-16 01:16:06 +0200 (Wed, 16 May 2007) | 2 lines

only print Set: and SetA: for developer >= 100 (as only then, a Cvar_Get function call line always follows)

------------------------------------------------------------------------
r7286 | divverent | 2007-05-16 01:12:54 +0200 (Wed, 16 May 2007) | 4 lines

calling VM_SetTraceGlobals can create a tempstring for the texture name; thus,
make sure that the tempstring gets freed when VM_SetTraceGlobals gets called
from outside QC (before calling the touch function)

------------------------------------------------------------------------
r7285 | havoc | 2007-05-15 12:14:06 +0200 (Tue, 15 May 2007) | 2 lines

renamed QUAKEWORLD protocol to QW to shorten connect string

------------------------------------------------------------------------
r7284 | havoc | 2007-05-15 12:08:23 +0200 (Tue, 15 May 2007) | 3 lines

fix a bug that caused the DP server to only report the first two
protocols it supports rather than all

------------------------------------------------------------------------
r7280 | havoc | 2007-05-14 16:34:53 +0200 (Mon, 14 May 2007) | 4 lines

added a proper gl_lightmaps rendering path, previously the gl_lightmaps
option did not work with r_glsl 1 and affected sprites (which it was not
meant to)

------------------------------------------------------------------------
r7279 | divverent | 2007-05-14 16:31:57 +0200 (Mon, 14 May 2007) | 2 lines

oops, forgot to remove it...

------------------------------------------------------------------------
r7278 | divverent | 2007-05-14 16:25:46 +0200 (Mon, 14 May 2007) | 2 lines

need to explicitly load vorbis_comment_query from libvorbis, not libvorbisfile, on Win32

------------------------------------------------------------------------
r7277 | havoc | 2007-05-14 16:20:00 +0200 (Mon, 14 May 2007) | 2 lines

remove a piece of debugging code

------------------------------------------------------------------------
r7276 | havoc | 2007-05-14 16:07:27 +0200 (Mon, 14 May 2007) | 3 lines

fixed lightmap merging bugs and added a special simplified case for
the case of no merging (mainly for testing)

------------------------------------------------------------------------
r7275 | havoc | 2007-05-14 14:24:55 +0200 (Mon, 14 May 2007) | 4 lines

reworked lightmap merging code to determine optimal texture size for
each merged lightmap texture (which basically means the last one is now
smaller than the rest in most cases)

------------------------------------------------------------------------
r7274 | divverent | 2007-05-14 14:03:07 +0200 (Mon, 14 May 2007) | 2 lines

LOOP_START tag in vorbis files now gives the sample number to loop from

------------------------------------------------------------------------
r7273 | havoc | 2007-05-14 12:28:00 +0200 (Mon, 14 May 2007) | 4 lines

restored the old lightmap batching code that I removed when adding the
lightmap merging, this helps a lot on maps that don't fit in one
1024x1024 lightmap

------------------------------------------------------------------------
r7272 | havoc | 2007-05-14 11:33:26 +0200 (Mon, 14 May 2007) | 3 lines

changed loopstart from signed to unsigned, now un-looped sounds are
represented with loopstart == total_length

------------------------------------------------------------------------
r7271 | havoc | 2007-05-14 11:12:25 +0200 (Mon, 14 May 2007) | 6 lines

removed channel_t->end and lastptime, now only pos governs playback
position, this should make the playback code safer
reworked S_PaintChannels to advance channel pos regardless of volume
changed S_StartSound to delay sounds rather than skip them, which may be
important on short sound effects

------------------------------------------------------------------------
r7270 | havoc | 2007-05-12 12:26:15 +0200 (Sat, 12 May 2007) | 2 lines

don't use cl_nettimesync code when playing a demo

------------------------------------------------------------------------
r7269 | havoc | 2007-05-12 12:02:06 +0200 (Sat, 12 May 2007) | 6 lines

added a keyname for backslash which is now used instead of the literal \
character, avoiding issues with bind "\" "something" which was parsing
wrongly, also removed the quotes around the bind keyname, and changed
the keyname code to prefer using the override names (such as tilde
instead of ~) in binds when saving the config

------------------------------------------------------------------------
r7268 | havoc | 2007-05-12 11:46:58 +0200 (Sat, 12 May 2007) | 3 lines

patch from David Cristian which adds a "browse mods" menu which seems to
work quite well

------------------------------------------------------------------------
r7267 | divverent | 2007-05-11 10:45:14 +0200 (Fri, 11 May 2007) | 2 lines

fix description of cl_movement_wateraccelerate; make air movement use movevars_airaccelerate (fixes movement in Nexuiz Pro)

------------------------------------------------------------------------
r7266 | divverent | 2007-05-11 10:20:56 +0200 (Fri, 11 May 2007) | 2 lines

if .gravity field is zero, it means the same as one (see also: SV_AddGravity)

------------------------------------------------------------------------
r7265 | divverent | 2007-05-11 10:14:11 +0200 (Fri, 11 May 2007) | 2 lines

also send friction/waterfriction as stats

------------------------------------------------------------------------
r7264 | divverent | 2007-05-11 09:47:31 +0200 (Fri, 11 May 2007) | 2 lines

fix typo in r_q1bsp_skymasking cvar name

------------------------------------------------------------------------
r7263 | havoc | 2007-05-11 03:17:24 +0200 (Fri, 11 May 2007) | 4 lines

added back cl_netsyncboundmode 5 (4 with sub-millisecond adjustment when
very near the correct value)
added new default cl_nettimesyncboundmode 6, this is a hybrid of 1 and 5

------------------------------------------------------------------------
r7262 | havoc | 2007-05-11 03:04:45 +0200 (Fri, 11 May 2007) | 5 lines

moved almost all server cvars to sv_main.c and added corresponding
externs in server.h
removed cl_gravity and cl_slowmo cvars
renamed cl.movevars_slowmo to cl.movevars_timescale

------------------------------------------------------------------------
r7261 | havoc | 2007-05-11 02:00:29 +0200 (Fri, 11 May 2007) | 4 lines

added friction and waterfriction movevars stats
corrected sv_airaccel_qw and sv_airaccel_sideways_friction cvars (they
had the wrong name string)

------------------------------------------------------------------------
r7257 | havoc | 2007-05-09 13:09:07 +0200 (Wed, 09 May 2007) | 3 lines

added back support for {}()[]: special characters in
COM_ParseToken_VM_Tokenize

------------------------------------------------------------------------
r7256 | havoc | 2007-05-09 13:00:14 +0200 (Wed, 09 May 2007) | 5 lines

renamed COM_ParseTokenConsole to COM_ParseToken_Console
split COM_ParseToken into COM_ParseToken_Simple, COM_ParseToken_QuakeC
and COM_ParseToken_VM_Tokenize which have different support for special
characters

------------------------------------------------------------------------
r7255 | havoc | 2007-05-09 11:53:11 +0200 (Wed, 09 May 2007) | 2 lines

fixed several critical bugs in VM_tokenizebyseparator

------------------------------------------------------------------------
r7254 | havoc | 2007-05-09 11:29:56 +0200 (Wed, 09 May 2007) | 3 lines

fix broken OFS_PARM0 + index code in VM_M_callfunction and
VM_tokenizebyseparator, these were not multiplying by 3 as is required

------------------------------------------------------------------------
r7253 | havoc | 2007-05-09 02:17:21 +0200 (Wed, 09 May 2007) | 2 lines

removed a wasted normalize in fragment shader for model lighting

------------------------------------------------------------------------
r7252 | havoc | 2007-05-09 02:13:21 +0200 (Wed, 09 May 2007) | 2 lines

scale demo playback speed by slowmo cvar

------------------------------------------------------------------------
r7251 | divverent | 2007-05-08 01:19:14 +0200 (Tue, 08 May 2007) | 2 lines

GAME_NEXUIZ: move the key up a bit for keyhunt, looks better

------------------------------------------------------------------------
r7250 | divverent | 2007-05-07 23:36:32 +0200 (Mon, 07 May 2007) | 2 lines

Impossible combination of GAME_NEXUIZ CTF status icons ("have red flag | have blue flag") now displays an alternate image for the new keyhunt game mode

------------------------------------------------------------------------
r7249 | havoc | 2007-05-07 22:50:22 +0200 (Mon, 07 May 2007) | 2 lines

fix crash when loading progs/null.spr in nehahra, which has 0x0 size

------------------------------------------------------------------------
r7248 | divverent | 2007-05-07 20:23:22 +0200 (Mon, 07 May 2007) | 3 lines

fix glsl model lighting on unlit maps (normal vector was calculated as (0,0,0) as there was no contribution from the map -> GLSL calls normalize() on that -> (nan,nan,nan), which apparently counts as black).
The fix replaces these zero normal vectors by (0,0,1) (which vector is actually chosen does not matter, as its contribution is scaled by zero anyway).

------------------------------------------------------------------------
r7247 | divverent | 2007-05-07 19:17:38 +0200 (Mon, 07 May 2007) | 2 lines

let the slowmo cvar override the server/demo's idea of slowmo when it is != 1; makes slowmo work again for demo playback

------------------------------------------------------------------------
r7246 | havoc | 2007-05-07 10:46:37 +0200 (Mon, 07 May 2007) | 2 lines

reduced uninitialized memory a bit more

------------------------------------------------------------------------
r7245 | havoc | 2007-05-07 09:28:00 +0200 (Mon, 07 May 2007) | 4 lines

reduced uninitialized data size by 13MB by moving some temporary arrays
used by outdated protocols into their database struct, also moved some
other arrays

------------------------------------------------------------------------
r7244 | havoc | 2007-05-07 08:46:04 +0200 (Mon, 07 May 2007) | 2 lines

replaced mod_known array with a memexpandablearray_t, this saves 11.5MB

------------------------------------------------------------------------
r7243 | havoc | 2007-05-07 07:37:08 +0200 (Mon, 07 May 2007) | 7 lines

rewrote server sendstates building code, no longer builds two
entity_state_t arrays (where one of them is global and one per-client),
this is a slight efficiency loss but saves a few megabytes and makes the
customizeentityforclient code more straightforward
merged some global variables into cl. and sv. structs, and others became
arrays on the stack

------------------------------------------------------------------------
r7242 | havoc | 2007-05-07 05:41:11 +0200 (Mon, 07 May 2007) | 5 lines

now sends player physics variables as stats, including slowmo, gravity,
and sys_ticrate, this avoids the need to stuffcmd cl_movement cvars
on servers that provide the ticrate stat the cl_netinputpacketspersecond
cvar is no longer important, this also seems to improve demo recording

------------------------------------------------------------------------
r7241 | havoc | 2007-05-07 05:01:40 +0200 (Mon, 07 May 2007) | 2 lines

removed PRVM_EDICT_NUM_UNSIGNED (PRVM_EDICT_NUM now casts to unsigned)

------------------------------------------------------------------------
r7240 | havoc | 2007-05-07 04:49:41 +0200 (Mon, 07 May 2007) | 3 lines

changed rain to spawn particles without collisions and implemented
delayed spawning of splashes to facilitate this

------------------------------------------------------------------------
r7239 | havoc | 2007-05-07 04:49:10 +0200 (Mon, 07 May 2007) | 2 lines

increased tolerance on warnings in DEBUGMOVES code

------------------------------------------------------------------------
r7238 | havoc | 2007-05-07 04:48:43 +0200 (Mon, 07 May 2007) | 3 lines

fixed a reference to sv.models in client code (should have been
cl.model_precache)

------------------------------------------------------------------------
r7237 | havoc | 2007-05-07 00:46:43 +0200 (Mon, 07 May 2007) | 4 lines

rewrote most of wad system, this eliminated 512KB of static arrays for
hlwad lumpinfo
added W_UnloadAll function which is now called by FS_Rescan

------------------------------------------------------------------------
r7236 | havoc | 2007-05-06 14:23:19 +0200 (Sun, 06 May 2007) | 2 lines

made r_depthfirst a saved cvar

------------------------------------------------------------------------
r7235 | havoc | 2007-05-06 13:37:04 +0200 (Sun, 06 May 2007) | 2 lines

added support for \" in console

------------------------------------------------------------------------
r7234 | havoc | 2007-05-06 12:38:31 +0200 (Sun, 06 May 2007) | 5 lines

added r_depthfirst option which defaults to 1 (render depth of world
into scene before rendering color), and also offers 2 (render depth of
world and models), this saves shader fillrate on intensive shaders or
texturing techniques (deluxemapping, anisotropic filtering, etc)

------------------------------------------------------------------------
r7233 | havoc | 2007-05-06 12:13:43 +0200 (Sun, 06 May 2007) | 4 lines

reworked sound mixing code to fix a bug that caused sound to stop
working after a timedemo (or anything else that overrode the normal
sound timing)

------------------------------------------------------------------------
r7232 | havoc | 2007-05-06 12:12:19 +0200 (Sun, 06 May 2007) | 3 lines

fix a bug that caused GL20 render path to always ask for tangents and
normals when rendering models

------------------------------------------------------------------------
r7230 | divverent | 2007-05-04 13:40:58 +0200 (Fri, 04 May 2007) | 2 lines

oops, the r_picmipworld should be CVAR_SAVE of course. Sorry for that.

------------------------------------------------------------------------
r7229 | divverent | 2007-05-04 11:29:57 +0200 (Fri, 04 May 2007) | 2 lines

r_picmipworld - when 0, gl_picmip does not apply to world models (because they tend to use much less texture memory than player models in Nexuiz)

------------------------------------------------------------------------
r7228 | havoc | 2007-05-04 09:01:34 +0200 (Fri, 04 May 2007) | 6 lines

fixed broken trails (introduced by my attempt to fix them)
fixed a bug where attachments to viewmodelforclient entities would show
up in the world in chase_active 1 mode near 0 0 0
rain particles now trace ahead at spawn and only begin collision
checking when near the impact time

------------------------------------------------------------------------
r7227 | havoc | 2007-05-04 03:17:16 +0200 (Fri, 04 May 2007) | 2 lines

reenabled code that unloads unused models on level change

------------------------------------------------------------------------
r7226 | havoc | 2007-05-03 09:40:58 +0200 (Thu, 03 May 2007) | 3 lines

fix bug where attached models spawn a trail from their non-attached
start location to their new location on the first frame

------------------------------------------------------------------------
r7225 | divverent | 2007-05-02 15:49:57 +0200 (Wed, 02 May 2007) | 2 lines

damn, I can't convert hex/dec...

------------------------------------------------------------------------
r7224 | divverent | 2007-05-02 15:20:35 +0200 (Wed, 02 May 2007) | 2 lines

made palette colors more readable

------------------------------------------------------------------------
r7223 | havoc | 2007-05-02 06:36:28 +0200 (Wed, 02 May 2007) | 3 lines

a slight cleanup of PaintAndSubmit conditions and S_Update early out
conditions

------------------------------------------------------------------------
r7222 | havoc | 2007-05-01 08:11:48 +0200 (Tue, 01 May 2007) | 6 lines

significant cleanup of input networking code (reorganized and now uses
frametimes rather than timestamps for queued moves) and some refinements
to prediction code
tried to reimplement the anti-pogostick code and it's partially working
but not completely (mispredicts for one frame each time)

------------------------------------------------------------------------
r7221 | havoc | 2007-05-01 04:25:32 +0200 (Tue, 01 May 2007) | 3 lines

default vid_grabkeyboard to 0, it's already forced to 1 on fullscreen so
this should do no harm

------------------------------------------------------------------------
r7220 | divverent | 2007-05-01 01:00:58 +0200 (Tue, 01 May 2007) | 2 lines

make SV_PushMove push by playerclip faces too (by using the right contents mask for each pushed entity)

------------------------------------------------------------------------
r7219 | havoc | 2007-05-01 00:44:19 +0200 (Tue, 01 May 2007) | 3 lines

mvdsv sucks (changed *ver from showing a string like DarkPlaces Linux
14:15:44 Apr 30 2007, to simply \*ver\dp)

------------------------------------------------------------------------
r7218 | dresk | 2007-04-30 23:59:19 +0200 (Mon, 30 Apr 2007) | 1 line

Applied KadaverJack's patch on my cl_sound_ric_gunshot code that provides a small optimization by using bitwise operations instead of numerical calculations.
------------------------------------------------------------------------
r7216 | dresk | 2007-04-30 19:27:16 +0200 (Mon, 30 Apr 2007) | 1 line

Added DP_QC_STRING_CASE_FUNCTIONS extension, providing VM functions strtolower and strtoupper which return the lowercase and uppercase of strings respectively, available across the CL, SV and MENU VMs.
------------------------------------------------------------------------
r7215 | havoc | 2007-04-30 19:22:47 +0200 (Mon, 30 Apr 2007) | 2 lines

fix pl% calculation for QW servers (was using [i] instead of [j])

------------------------------------------------------------------------
r7214 | havoc | 2007-04-30 19:02:10 +0200 (Mon, 30 Apr 2007) | 2 lines

fix nettimesync bug after the recent cleanup

------------------------------------------------------------------------
r7213 | havoc | 2007-04-30 07:39:56 +0200 (Mon, 30 Apr 2007) | 3 lines

implemented QW skin support, it's broken on skins that are not the same
size as the model skin though

------------------------------------------------------------------------
r7212 | havoc | 2007-04-30 07:39:00 +0200 (Mon, 30 Apr 2007) | 2 lines

count empty packets in rate limiting

------------------------------------------------------------------------
r7211 | havoc | 2007-04-30 07:28:29 +0200 (Mon, 30 Apr 2007) | 3 lines

fix a bug in texture path identification (the nopath case was occurring
even when there was a path, because it was checking the wrong variable)

------------------------------------------------------------------------
r7210 | havoc | 2007-04-30 07:27:03 +0200 (Mon, 30 Apr 2007) | 7 lines

removed cl_nettimesyncboundmode 5 because it seems to print many more
time warnings than 4 does when developer is on
now sets cls.servermovesequence to cls.netcon->qw_incoming_sequence
now keeps around qw player entities if a packet does not contain any
(an fteqw server I was testing on sometimes sent packets containing
large reliable message groups but no player entities at all)

------------------------------------------------------------------------
r7209 | dresk | 2007-04-30 05:58:20 +0200 (Mon, 30 Apr 2007) | 1 line

Updated cl_sound_ric_gunshot CVar to support multiple modes.  0 plays no sounds, 1 plays sounds on TE_GUNSHOT, 2 plays sounds on TE_GUNSHOTQUAD and 3 plays sounds on both TE_GUNSHOT and TE_GUNSHOTQUAD.  This is not bloat because the Crylink in Nexuiz uses TE_GUNSHOTQUAD, and most people don't want ricochet sounds on that (though if you do, all the merrier).
------------------------------------------------------------------------
r7208 | havoc | 2007-04-30 00:15:44 +0200 (Mon, 30 Apr 2007) | 3 lines

increased IP + UDP header overhead estimate from 18 bytes to 28 bytes
based on tcpdump results

------------------------------------------------------------------------
r7207 | divverent | 2007-04-29 21:36:05 +0200 (Sun, 29 Apr 2007) | 2 lines

store into *colorindex again

------------------------------------------------------------------------
r7206 | dresk | 2007-04-28 01:25:47 +0200 (Sat, 28 Apr 2007) | 1 line

Added cl_sound_ric_gunshot which specifies if the related cl_sound_ric and cl_sound_tink CVars will apply to te_gunshot and te_gunshotquad calls.  The default value is 0 and it is not saved.
------------------------------------------------------------------------
r7205 | divverent | 2007-04-28 00:57:01 +0200 (Sat, 28 Apr 2007) | 2 lines

make COM_StringLengthNoColors and COM_StringDecolorize get an additional length parameter to just work on part of a string (if set to 0, it means use the whole string); use that in centerprint drawing to fix centering issues in some odd situations like "^^^^^^^^^^^^^^^^^^^^^^^^^^".

------------------------------------------------------------------------
r7203 | havoc | 2007-04-26 22:20:20 +0200 (Thu, 26 Apr 2007) | 2 lines

clarified descriptions of r_mipsprites and r_mipskins

------------------------------------------------------------------------
r7202 | havoc | 2007-04-26 18:19:42 +0200 (Thu, 26 Apr 2007) | 3 lines

split cl_netpacketloss into cl_netpacketloss_send and
cl_netpacketloss_receive to allow more network testing

------------------------------------------------------------------------
r7197 | havoc | 2007-04-25 20:17:38 +0200 (Wed, 25 Apr 2007) | 4 lines

fixed bug where animated mdl skins (such as Tomaz's health box and
explobox models in dpmod) were getting freed because they were not
properly counted in the model->num_textures

------------------------------------------------------------------------
r7194 | havoc | 2007-04-25 18:41:34 +0200 (Wed, 25 Apr 2007) | 2 lines

changed default cl_movement_minping from 1 to 0

------------------------------------------------------------------------
r7193 | havoc | 2007-04-25 18:41:02 +0200 (Wed, 25 Apr 2007) | 2 lines

changed default cl_movement_minping from 50 to 1

------------------------------------------------------------------------
r7192 | havoc | 2007-04-25 16:47:02 +0200 (Wed, 25 Apr 2007) | 4 lines

added tracking of memory usage of VBO/EBO buffers
added gl_vbostats command to list VBO/EBO buffers
added total VBO/EBO usage information in memstats

------------------------------------------------------------------------
r7191 | havoc | 2007-04-25 12:15:55 +0200 (Wed, 25 Apr 2007) | 3 lines

fix bugs in Mod_Q3BSP_Loadtextures that caused crashes and other
sillyness

------------------------------------------------------------------------
r7190 | divverent | 2007-04-25 10:38:40 +0200 (Wed, 25 Apr 2007) | 2 lines

prevent abuse by ending netname with a ^: if the name is not a valid colored string, add a ^ if possible, and if there is no space for it, remove the trailing ^

------------------------------------------------------------------------
r7189 | divverent | 2007-04-25 09:18:16 +0200 (Wed, 25 Apr 2007) | 7 lines

fix strlennocol/strdecolorize on unusual strings like "foo^";
now strlennocol returns the visible width (like before) and strdecolorize
returns a string that can be safely printed and that looks like the original,
just without the colors.

Moved decolorizing and counting to common.c.

------------------------------------------------------------------------
r7188 | havoc | 2007-04-25 01:17:36 +0200 (Wed, 25 Apr 2007) | 3 lines

isolated more of the texture loading code from the rest of model
loading, to avoid potential for crashes in dedicated servers

------------------------------------------------------------------------
r7187 | havoc | 2007-04-25 00:55:20 +0200 (Wed, 25 Apr 2007) | 2 lines

fixed crash in sprite loaders on dedicated servers

------------------------------------------------------------------------
r7186 | havoc | 2007-04-24 23:29:59 +0200 (Tue, 24 Apr 2007) | 6 lines

added DP_SV_MODELFLAGS_AS_EFFECTS extension, this adds EF_ROCKET and
friends as effect bits in the protocol, the QC can use these constants
directly or can use the new .modelflags field to set them without float
precision issues caused by the large values, this basically means that
you can make an entity leave a blood trail, or look like a rocket

------------------------------------------------------------------------
r7185 | havoc | 2007-04-24 22:33:32 +0200 (Tue, 24 Apr 2007) | 3 lines

reverted dresk's DP_SV_ALLOWTOUCHWITHOWNER patch as it adds unnecessary
bloat when there is a well-known QuakeC approach to do this already

------------------------------------------------------------------------
r7184 | dresk | 2007-04-24 22:28:42 +0200 (Tue, 24 Apr 2007) | 1 line

Added QC float .allowtouchwithowner .  Setting this to true allow an entity to touch its owner (ie. missile or grenade).  Be careful where you spawn your projectiles and assign this value, as you may end up detonating the projectile immediately.
------------------------------------------------------------------------
r7183 | havoc | 2007-04-24 21:24:32 +0200 (Tue, 24 Apr 2007) | 2 lines

allow model flags to work on attached entities

------------------------------------------------------------------------
r7182 | havoc | 2007-04-24 19:11:32 +0200 (Tue, 24 Apr 2007) | 3 lines

expanded texture name buffer so that names don't get clipped in
r_texturestats output

------------------------------------------------------------------------
r7181 | havoc | 2007-04-24 19:08:54 +0200 (Tue, 24 Apr 2007) | 2 lines

don't crash in Mod_BuildAliasSkinFromSkinFrame on dedicated servers

------------------------------------------------------------------------
r7180 | dresk | 2007-04-24 18:27:21 +0200 (Tue, 24 Apr 2007) | 1 line

Added standard color escapes to "changed name to" broadcast prints
------------------------------------------------------------------------
r7179 | dresk | 2007-04-24 18:11:13 +0200 (Tue, 24 Apr 2007) | 1 line

Updated console command description of prvm_edicts (it had the description of prvm_edictset)
------------------------------------------------------------------------
r7178 | dresk | 2007-04-24 17:47:51 +0200 (Tue, 24 Apr 2007) | 1 line

Added return to standard color coding in "status" command player listing
------------------------------------------------------------------------
r7177 | dresk | 2007-04-24 17:40:38 +0200 (Tue, 24 Apr 2007) | 1 line

Added check for MAX_MODELS in cl_modelindexlist command
------------------------------------------------------------------------
r7176 | dresk | 2007-04-24 17:37:47 +0200 (Tue, 24 Apr 2007) | 3 lines

Removed modelindexlist command from cmd.c, shifted function as cl_modelindexlist into cl_main.c

Started modelindex at 1
------------------------------------------------------------------------
r7175 | dresk | 2007-04-24 17:30:47 +0200 (Tue, 24 Apr 2007) | 1 line

Added return to standard color coding in the "Player entered the game" and "Client "Player" Dropped" messages
------------------------------------------------------------------------
r7174 | dresk | 2007-04-24 17:21:56 +0200 (Tue, 24 Apr 2007) | 1 line

Implemented console command 'modelindexlist' which lists all the models and their corresponding model index numbers
------------------------------------------------------------------------
r7173 | havoc | 2007-04-24 17:02:02 +0200 (Tue, 24 Apr 2007) | 2 lines

fixed missing sprite textures caused by purging code

------------------------------------------------------------------------
r7172 | havoc | 2007-04-24 16:41:57 +0200 (Tue, 24 Apr 2007) | 3 lines

fix bug that made all textures without a shader definition have
numskinframes = 0, which caused purging to eliminate their textures

------------------------------------------------------------------------
r7171 | havoc | 2007-04-24 16:41:27 +0200 (Tue, 24 Apr 2007) | 2 lines

check if skinframe is NULL in R_SkinFrame_MarkUsed

------------------------------------------------------------------------
r7170 | havoc | 2007-04-24 16:23:25 +0200 (Tue, 24 Apr 2007) | 2 lines

fix a line I forgot to commit

------------------------------------------------------------------------
r7169 | dresk | 2007-04-24 15:25:23 +0200 (Tue, 24 Apr 2007) | 1 line

Fixed a typo by not putting a whitespace after the DP_SV_NETADDRESS
------------------------------------------------------------------------
r7168 | havoc | 2007-04-24 15:19:07 +0200 (Tue, 24 Apr 2007) | 8 lines

replaced Mod_LoadSkinFrame functions with R_SkinFrame system, this
allows multiple models to share textures in a given level, as well as
models using the same texture multiple times (often the case in md3
where meshes have a vertex limit, and q3bsp where texture structs
describe surface properties and multiple may exist referring to the same
texture set)
this reduced Nexuiz video memory usage by over 150MB

------------------------------------------------------------------------
r7167 | havoc | 2007-04-24 15:12:35 +0200 (Tue, 24 Apr 2007) | 2 lines

fix MAX_CHANNELS, it was too low with the expanded MAX_DYNAMIC_CHANNELS

------------------------------------------------------------------------
r7166 | havoc | 2007-04-24 12:14:46 +0200 (Tue, 24 Apr 2007) | 2 lines

fix crash when freeing an expandable array caused by a typo

------------------------------------------------------------------------
r7165 | havoc | 2007-04-24 08:56:37 +0200 (Tue, 24 Apr 2007) | 3 lines

audited all Sys_Quit calls and gave them return values indicating
whether the game quit normally, so shell scripts get a useful value

------------------------------------------------------------------------
r7164 | havoc | 2007-04-23 22:44:45 +0200 (Mon, 23 Apr 2007) | 5 lines

replaced qglArrayElement calls with qglVertex3f calls in showtris code,
this avoids issues with abysmal gl_vbo 1 performance on NVIDIA cards
(which seem to use a software fallback for drawing lines for some
reason)

------------------------------------------------------------------------
r7162 | dresk | 2007-04-23 22:32:12 +0200 (Mon, 23 Apr 2007) | 1 line

Added new extension for .string netaddress (DP_SV_NETADDRESS)
------------------------------------------------------------------------
r7161 | dresk | 2007-04-23 22:25:05 +0200 (Mon, 23 Apr 2007) | 1 line

Implemented .string netaddress to SVQC, providing the IP Address of the associated client entity (string is "null/botclient is client is not valid)
------------------------------------------------------------------------
r7160 | havoc | 2007-04-23 21:39:18 +0200 (Mon, 23 Apr 2007) | 4 lines

modified Mod_LoadSkinFrame to not attempt to generate a fogging mask if
not given the TEXF_ALPHA flag (in which case the fog mask would not be
used anyway)

------------------------------------------------------------------------
r7159 | havoc | 2007-04-23 21:13:39 +0200 (Mon, 23 Apr 2007) | 2 lines

cleaned up Mod_LoadSkinFrame now that image_loadskin is gone

------------------------------------------------------------------------
r7158 | havoc | 2007-04-23 20:11:15 +0200 (Mon, 23 Apr 2007) | 2 lines

merged image_loadskin and image_freeskin into Mod_LoadSkinFrame

------------------------------------------------------------------------
r7157 | havoc | 2007-04-23 18:20:31 +0200 (Mon, 23 Apr 2007) | 2 lines

fix some unintentional math on a void pointer

------------------------------------------------------------------------
r7154 | havoc | 2007-04-22 15:04:35 +0200 (Sun, 22 Apr 2007) | 3 lines

batch by lightmap rather than by use of lightmaps (batching by use of
lightmaps is no longer necessary with the lightmap merging)

------------------------------------------------------------------------
r7153 | havoc | 2007-04-22 13:24:17 +0200 (Sun, 22 Apr 2007) | 3 lines

added r_showbboxes cvar and accompanying code to render server entity
bounding boxes

------------------------------------------------------------------------
r7152 | havoc | 2007-04-22 11:52:01 +0200 (Sun, 22 Apr 2007) | 2 lines

fix a bug in the last commit pertaining to lightning beam fogging

------------------------------------------------------------------------
r7151 | havoc | 2007-04-22 11:48:18 +0200 (Sun, 22 Apr 2007) | 4 lines

fixed several bugs in fog code, it basically wasn't working in the
r_glsl 0 case at all, it still doesn't work with rtlights in gl_combine
1 mode though

------------------------------------------------------------------------
r7150 | havoc | 2007-04-22 11:02:23 +0200 (Sun, 22 Apr 2007) | 3 lines

fixed bug where items would not fall if pushed off a ledge by a
MOVETYPE_PUSH entity

------------------------------------------------------------------------
r7149 | havoc | 2007-04-22 07:13:06 +0200 (Sun, 22 Apr 2007) | 3 lines

correct a couple error messages which said "Map downloads", changed to
"cURL downloads"

------------------------------------------------------------------------
r7148 | divverent | 2007-04-21 00:36:23 +0200 (Sat, 21 Apr 2007) | 2 lines

oops... sorry for that one. Copypaste without testing never works...

------------------------------------------------------------------------
r7147 | divverent | 2007-04-21 00:22:59 +0200 (Sat, 21 Apr 2007) | 2 lines

fix multithreaded OpenGL support; actually load CGL functions from OpenGL.framework

------------------------------------------------------------------------
r7146 | divverent | 2007-04-20 17:59:28 +0200 (Fri, 20 Apr 2007) | 3 lines

compare the right values for host cache masks;
use -1 bots to indicate unknown bot count

------------------------------------------------------------------------
r7145 | divverent | 2007-04-20 13:43:24 +0200 (Fri, 20 Apr 2007) | 2 lines

new cvar fs_empty_files_in_pack_mark_deletions: when set, a pk3 with empty files can effectively "delete" a file in an earlier pk3

------------------------------------------------------------------------
r7144 | havoc | 2007-04-20 08:25:06 +0200 (Fri, 20 Apr 2007) | 2 lines

upped MAX_DYNAMIC_CHANNELS from 128 to 512

------------------------------------------------------------------------
r7143 | havoc | 2007-04-19 15:17:06 +0200 (Thu, 19 Apr 2007) | 2 lines

changed VERTEXFOGTABLE macro to not use a global variable

------------------------------------------------------------------------
r7142 | havoc | 2007-04-19 14:50:45 +0200 (Thu, 19 Apr 2007) | 6 lines

significant cleanup of reliefmapping shader, now uses step() function
instead of if's, this might improve compatibility with ATI cards, but
not sure, in any case I improved the stepping math a little bit which
saves some time, minor fps improvement on reliefmapping compared to
before

------------------------------------------------------------------------
r7141 | havoc | 2007-04-19 09:32:00 +0200 (Thu, 19 Apr 2007) | 3 lines

adjusted netgraph code to draw the latest netgraph column on the right
rather than the left

------------------------------------------------------------------------
r7140 | havoc | 2007-04-19 02:44:52 +0200 (Thu, 19 Apr 2007) | 2 lines

correct a typo (numbotss)

------------------------------------------------------------------------
r7134 | divverent | 2007-04-18 13:38:57 +0200 (Wed, 18 Apr 2007) | 2 lines

sv_public -2 now allows the local: client to connect

------------------------------------------------------------------------
r7133 | havoc | 2007-04-18 13:15:58 +0200 (Wed, 18 Apr 2007) | 2 lines

fix a bug in the RENDER_EXTERIORMODEL check in the last commit

------------------------------------------------------------------------
r7132 | havoc | 2007-04-18 13:13:57 +0200 (Wed, 18 Apr 2007) | 4 lines

changed protocol code to always send origin as low precision if
possible, except for exteriormodel's (such as the player itself),
this means the only effect of EF_LOWPRECISION is lower precision angles

------------------------------------------------------------------------
r7131 | havoc | 2007-04-18 12:35:30 +0200 (Wed, 18 Apr 2007) | 4 lines

removed the forced LOWPRECISION flag on entities because it messes up
angles too much, and it is hard to decide what origins warrant high
precision or low precision

------------------------------------------------------------------------
r7130 | havoc | 2007-04-18 12:20:09 +0200 (Wed, 18 Apr 2007) | 4 lines

improved entity unsticking code, it now uses a trace from the offset
position back to the original position, and uses the impact point, this
makes it correct significantly less than before

------------------------------------------------------------------------
r7129 | havoc | 2007-04-18 11:59:06 +0200 (Wed, 18 Apr 2007) | 6 lines

try unstick offsets in a certain order, preferring horizontal offsets
and then vertical, and never doing horizontal + vertical, this fixes
problems where you would 'creep' along the floor diagonally at certain
frametimes at certain plane distances where precision error causes
problems, now you only teleport upward 1 unit and fall repeatedly

------------------------------------------------------------------------
r7128 | havoc | 2007-04-18 11:29:50 +0200 (Wed, 18 Apr 2007) | 3 lines

added Mem_ExpandableArray_IndexRange and
Mem_ExpandableArray_RecordAtIndex which allow iterating the array

------------------------------------------------------------------------
r7127 | havoc | 2007-04-18 11:17:54 +0200 (Wed, 18 Apr 2007) | 3 lines

added Mem_ExpandableArray functions, which are not currently used but
may be useful

------------------------------------------------------------------------
r7126 | havoc | 2007-04-18 11:17:33 +0200 (Wed, 18 Apr 2007) | 2 lines

added cl_nettimesyncboundmode 5 which is div0's slight refinement of 4

------------------------------------------------------------------------
r7125 | havoc | 2007-04-18 10:08:31 +0200 (Wed, 18 Apr 2007) | 4 lines

added numbots and numhumans in server info parsing, serverlist filtering
can also mask by these, and the 'player empty' check for the engine's
own server listings now uses numhumans rather than numplayers

------------------------------------------------------------------------
r7124 | havoc | 2007-04-18 09:51:11 +0200 (Wed, 18 Apr 2007) | 4 lines

added reporting of number of bots in getinfo/getstatus replies (they are
counted as clients also, so something parsing the info can deduct them
if it wishes)

------------------------------------------------------------------------
r7123 | havoc | 2007-04-18 09:00:49 +0200 (Wed, 18 Apr 2007) | 3 lines

fix bug introduced in last patch that made all text print one character
to the left

------------------------------------------------------------------------
r7122 | havoc | 2007-04-18 08:45:31 +0200 (Wed, 18 Apr 2007) | 2 lines

further optimized space skipping in DrawQ_String

------------------------------------------------------------------------
r7121 | havoc | 2007-04-18 08:20:32 +0200 (Wed, 18 Apr 2007) | 3 lines

changed weapons bar in nexuiz hud to use alpha rather than additive
blend, and have full opacity for 1 second and then fade over half a second

------------------------------------------------------------------------
r7120 | havoc | 2007-04-18 07:52:36 +0200 (Wed, 18 Apr 2007) | 5 lines

refactored DrawQ_Pic to actually do the drawing rather than wasting time
on a DrawQ_SuperPic call
added DrawQ_Fill as an optimized case of DrawQ_Pic
this significantly improved performance of shownetgraph

------------------------------------------------------------------------
r7119 | havoc | 2007-04-18 07:33:17 +0200 (Wed, 18 Apr 2007) | 9 lines

changed r_textshadow behavior to always draw a black shadow, but with
alpha dependent on the brightness of the primary text color, this means
you don't get white shadows under black text, but do get black shadows
under white text
rewrote DrawQ_String and friends to be one combined function that draws
colored strings more efficiently by batching characters with differing
colors together, and it even batches the shadow with the text which can
help performance significantly with r_textshadow on

------------------------------------------------------------------------
r7118 | havoc | 2007-04-17 13:59:40 +0200 (Tue, 17 Apr 2007) | 2 lines

renamed client netgraphs back to incoming and outgoing

------------------------------------------------------------------------
r7117 | havoc | 2007-04-17 13:51:02 +0200 (Tue, 17 Apr 2007) | 6 lines

added shownetgraph 2 mode which shows netgraphs for all clients when
hosting a listen server
tweaked shownetgraph separator spacing a bit so that it is only 2 pixels
between incoming/outgoing graphs, and 4 pixels between netgraphs
relabeled incoming/outgoing graphs to world/input

------------------------------------------------------------------------
r7116 | havoc | 2007-04-17 13:50:04 +0200 (Tue, 17 Apr 2007) | 6 lines

moved calls of CL_ReadDemoMessage and CL_SendMove from CL_ReadFromServer
to the main loop
renamed CL_ReadFromServer to CL_UpdateWorld, and it is now called even
if not connected (to clear the r_refdef entities/lights info, and the
num_brushmodels)

------------------------------------------------------------------------
r7115 | havoc | 2007-04-17 13:48:51 +0200 (Tue, 17 Apr 2007) | 3 lines

no longer sends nearly-empty input packets when cl.time is less than the
previous move time

------------------------------------------------------------------------
r7114 | havoc | 2007-04-17 11:32:44 +0200 (Tue, 17 Apr 2007) | 6 lines

replaced cl_nettimesyncmode with 3 cvars cl_nettimesyncfactor,
cl_nettimesyncboundmode, cl_nettimesyncboundtolerance
the new default time sync method is from Quake3 and slowly adjusts 1ms
forward each packet received, or falls back 2ms if it found itself ahead
of time

------------------------------------------------------------------------
r7113 | havoc | 2007-04-17 10:03:27 +0200 (Tue, 17 Apr 2007) | 5 lines

fix a crash reported by Lardarse when using more skin textures for a
.mdl model than skins exist in the model, this was caused by texture_t
containing pointers to itself that were broken by the reallocation of
the array

------------------------------------------------------------------------
r7112 | havoc | 2007-04-17 07:54:26 +0200 (Tue, 17 Apr 2007) | 2 lines

moved shownetgraph to right side of screen

------------------------------------------------------------------------
r7111 | divverent | 2007-04-16 23:51:29 +0200 (Mon, 16 Apr 2007) | 2 lines

in X11, keypad * is KP_MULTIPLY, not '*'

------------------------------------------------------------------------
r7110 | havoc | 2007-04-16 15:37:42 +0200 (Mon, 16 Apr 2007) | 3 lines

server no longer calls networking on each physics frame (since sv.datagram
is no longer important)

------------------------------------------------------------------------
r7109 | havoc | 2007-04-16 15:36:31 +0200 (Mon, 16 Apr 2007) | 4 lines

disable some debugging code that caused an empty packet to be sent each
server frame even if CanSend returned false (which was done just to see
when the CanSend blocking was occurring, since it was hard to tell)

------------------------------------------------------------------------
r7108 | havoc | 2007-04-16 15:08:38 +0200 (Mon, 16 Apr 2007) | 7 lines

implemented shownetgraph
major overhaul of rate limiting code
implemented packet-frequency rate limiting (like qw/q2/q3) as a fallback
when packet size limiting fails (such as packet sizes below 100 bytes
causing all sorts of issues, so now the minimum bound on maxsize is 100,
and another good example is reliable messages exceeding the rate limit)

------------------------------------------------------------------------
r7107 | havoc | 2007-04-16 15:05:26 +0200 (Mon, 16 Apr 2007) | 8 lines

fixed several issues in the recent effect rate limiting code (situations
where it could get stuck and stop sending them entirely due to too low a
rate setting)
fixed issues introduced in recent stats code (was not resetting them on
a level change, leading to very broken stats for the client)
this includes a missing part of the LOWPRECISION-on-all-entities patch so
that now works

------------------------------------------------------------------------
r7106 | havoc | 2007-04-16 14:21:00 +0200 (Mon, 16 Apr 2007) | 7 lines

EF_LOWPRECISION is now default on all entities except the player, this
saves quite a bit of bandwidth (bad side effect: rotating bmodels are
less smooth, need another workaround for that...)
fixed a bug in entity priorities which caused entities to be sent with
no change bits set (which did nothing useful, just wasted bandwidth),
saving quite a bit more bandwidth

------------------------------------------------------------------------
r7105 | havoc | 2007-04-16 09:57:51 +0200 (Mon, 16 Apr 2007) | 9 lines

sv.datagram is now flushed to client->unreliablemsg buffers, along with
logging of good split points so that each effect can be issued to
different packets as space allows (sending some each packet), this makes
effects finally obey the rate limit
cleaned up sending of csqc stats in pre-DP6 protocols and renamed the
autosentstats stuff to customstats to better represent what it does
implemented stats updates in pre-DP6 protocols (mostly for sake of
customstats code cleanlyness)

------------------------------------------------------------------------
r7104 | havoc | 2007-04-16 01:37:17 +0200 (Mon, 16 Apr 2007) | 2 lines

made cl_joinbeforedownloadsfinish a saved cvar

------------------------------------------------------------------------
r7103 | havoc | 2007-04-16 01:36:43 +0200 (Mon, 16 Apr 2007) | 2 lines

made cl_nettimesyncmode a saved cvar

------------------------------------------------------------------------
r7102 | havoc | 2007-04-16 00:13:01 +0200 (Mon, 16 Apr 2007) | 2 lines

added cl_nettimesyncmode 7 (adaptive + loose sync)

------------------------------------------------------------------------
r7101 | havoc | 2007-04-15 23:59:02 +0200 (Sun, 15 Apr 2007) | 3 lines

added cl_nettimesyncmode 6 (adaptive sync, gradually adapts to server
sync)

------------------------------------------------------------------------
r7100 | havoc | 2007-04-15 23:42:45 +0200 (Sun, 15 Apr 2007) | 3 lines

increased cl_nettimesyncmode 5 tolerance to 25% of time delta to better
accomodate german ADSL

------------------------------------------------------------------------
r7099 | havoc | 2007-04-15 23:36:53 +0200 (Sun, 15 Apr 2007) | 5 lines

changed cl_nettimesyncmode 2 to use tighter tolerances again (1 frame,
not 2)
added cl_nettimesyncmode 5 (new default) which is like 2 but has very
tight tolerances (1/8th of frame delta)

------------------------------------------------------------------------
r7098 | havoc | 2007-04-15 22:52:08 +0200 (Sun, 15 Apr 2007) | 3 lines

sp2 loader no longer errors if an image is missing
(WHY did it do this before??)

------------------------------------------------------------------------
r7097 | divverent | 2007-04-15 22:01:38 +0200 (Sun, 15 Apr 2007) | 3 lines

New console commands sv_cmd, menu_cmd, cl_cmd, that call GameCommand(string s) in the server, menu, client program with the remainder of the command line as argument. Extension: DP_QC_CMD for all of them, DP_SV_CMD for sv_cmd.


------------------------------------------------------------------------
r7096 | divverent | 2007-04-15 11:21:17 +0200 (Sun, 15 Apr 2007) | 2 lines

adds a cvar r_picmipsprites that, when set to 0, makes gl_picmip not affect sprites

------------------------------------------------------------------------
r7095 | divverent | 2007-04-14 22:44:36 +0200 (Sat, 14 Apr 2007) | 2 lines

fix segfault sendcvar for non existing cvars introduced in r6933

------------------------------------------------------------------------
r7094 | havoc | 2007-04-14 20:27:13 +0200 (Sat, 14 Apr 2007) | 3 lines

changed default cl_autodemo_nameformat to put demos in an autodemos/
directory (they clutter the id1 directory too much)

------------------------------------------------------------------------
r7093 | havoc | 2007-04-14 03:11:00 +0200 (Sat, 14 Apr 2007) | 3 lines

removed all commandline checks for the option "-safe" except for the
OpenGL extension checks, this makes -safe actually playable

------------------------------------------------------------------------
r7092 | havoc | 2007-04-14 00:53:33 +0200 (Sat, 14 Apr 2007) | 4 lines

saved a little more memory by not keeping around the basebonepose data
after loading (it can be regenerated by inverting the inverse array
anyway)

------------------------------------------------------------------------
r7091 | havoc | 2007-04-14 00:41:27 +0200 (Sat, 14 Apr 2007) | 3 lines

fix broken allocation code for skeletal models that was allocating too
much memory for basebonepose arrays (thanks to Vic for reporting this)

------------------------------------------------------------------------
r7090 | havoc | 2007-04-14 00:20:03 +0200 (Sat, 14 Apr 2007) | 3 lines

removed cl_nettimesyncmode 5 code, changed default to 1 (5 had no
theoretical advantages over 1)

------------------------------------------------------------------------
r7089 | havoc | 2007-04-14 00:08:32 +0200 (Sat, 14 Apr 2007) | 3 lines

added cl_nettimesyncmode 5 (now the default), this is very similar to
cl_nettimesyncmode 1 but allows up to 1 millisecond fluctuations

------------------------------------------------------------------------
r7088 | havoc | 2007-04-13 17:32:41 +0200 (Fri, 13 Apr 2007) | 5 lines

changed .viewzoom field to scale view frustum slopes rather than fov
angle, this makes zooming more fluid and straightforward, and causes a 1
to 1 correspondence between the sensitivity decrease and the view size
decrease

------------------------------------------------------------------------
r7082 | havoc | 2007-04-12 02:39:30 +0200 (Thu, 12 Apr 2007) | 2 lines

changed descriptions of r_ambient and r_fullbright cvars to no longer say that they don't work in multiplayer (because they do currently)

------------------------------------------------------------------------
r7081 | havoc | 2007-04-12 02:38:14 +0200 (Thu, 12 Apr 2007) | 2 lines

removed some unnecessary code in CL_TimeRefresh_f

------------------------------------------------------------------------
r7080 | havoc | 2007-04-12 02:37:20 +0200 (Thu, 12 Apr 2007) | 2 lines

implemented two more checks for cls.timedemo to bypass snd_blocked

------------------------------------------------------------------------
r7079 | havoc | 2007-04-11 13:52:34 +0200 (Wed, 11 Apr 2007) | 2 lines

added cls.timedemo check in S_PaintAndSubmit to use cl.mtime[0] for sound sync when doing timedemos, this greatly improves the accuracy of benchmarks with respect to sound mixing time

------------------------------------------------------------------------
r7074 | havoc | 2007-04-07 23:29:03 +0200 (Sat, 07 Apr 2007) | 2 lines

patch from div0 to fix nexuiz ctf flag icon code so it works with vid_conwidth values other than 640

------------------------------------------------------------------------
r7073 | havoc | 2007-04-07 22:52:25 +0200 (Sat, 07 Apr 2007) | 2 lines

fixed a third instance of the length(CubeVector) attenuation code bug (passing a single float to a 2D texture fetch)

------------------------------------------------------------------------
r7072 | havoc | 2007-04-07 22:27:31 +0200 (Sat, 07 Apr 2007) | 2 lines

the value of r_textshadow now controls the amount of offset for the shadow in pixels (formerly it was 25% of text size which typically meant 2 pixels)

------------------------------------------------------------------------
r7071 | havoc | 2007-04-07 20:02:45 +0200 (Sat, 07 Apr 2007) | 2 lines

somehow forgot to save this file before committing the RENDER_NOSELFSHADOW patch

------------------------------------------------------------------------
r7070 | havoc | 2007-04-07 14:36:25 +0200 (Sat, 07 Apr 2007) | 3 lines

player model no longer shadows gun model
technical explanation: this was done by adding a RENDER_NOSELFSHADOW flag which is used on view models, this flag prevents any entities using the flag from shadowing themselves or eachother...  then another hack was added to queue the shadowing of the RENDER_EXTERIORMODEL entities in the RENDER_NOSELFSHADOW batch (so it does not shadow other RENDER_NOSELFSHADOW entities), but still have it receive shadows by lighting it in the normal self-shadowing batch...   In more general use the RENDER_NOSELFSHADOW flag could be used to make characters not shadow themselves (like in Doom3), however r_shadow_frontsidecasting 0 is a better approach to that problem (partial self-shadowing characters)

------------------------------------------------------------------------
r7069 | havoc | 2007-04-07 10:09:47 +0200 (Sat, 07 Apr 2007) | 2 lines

added clearstencil parameter to R_Shadow_RenderMode_StencilShadowVolumes

------------------------------------------------------------------------
r7068 | havoc | 2007-04-07 10:07:08 +0200 (Sat, 07 Apr 2007) | 5 lines

added GL_DepthRange function and MATERIALFLAG_SHORTDEPTHRANGE (now used by viewmodels), this prevents viewmodels from poking into walls
changed EF_NODEPTHTEST code to set MATERIALFLAG_SHORTDEPTHRANGE instead of MATERIALFLAG_NODEPTHTEST, this causes proper rendering of opaque models (such as the held item in prydon gate)
this also reenabled stencil shadows on view models but they render as if they are very very small (due to MATERIALFLAG_SHORTDEPTHRANGE)
changed default value of cl_viewmodel_scale from 0.3 to 1, this makes stereo rendering look better (small gun model looks silly when you can actually see that it is small) and makes rtlight cubemaps affect the gun more realistically

------------------------------------------------------------------------
r7065 | havoc | 2007-04-06 14:48:52 +0200 (Fri, 06 Apr 2007) | 2 lines

view models no longer receive stencil shadows (only basic light visibility culling like transparent surfaces receive), this makes the gun much more visible and protects it the player's own shadow, this change may is a major one and may get further changes (such as better culling perhaps)

------------------------------------------------------------------------
r7064 | havoc | 2007-04-06 14:39:53 +0200 (Fri, 06 Apr 2007) | 2 lines

fix one more case of EF_NODEPTHTEST not being checked

------------------------------------------------------------------------
r7063 | havoc | 2007-04-06 14:31:00 +0200 (Fri, 06 Apr 2007) | 3 lines

removed MATERIALFLAG_TRANSPARENT
added MATERIALFLAGMASK_DEPTHSORTED - this solved a lack of sorting on EF_NODEPTHTEST entities

------------------------------------------------------------------------
r7062 | havoc | 2007-04-06 13:29:03 +0200 (Fri, 06 Apr 2007) | 3 lines

check vid_activewindow in several spammy prints that occur when the client is running slower than the server
changed cl.time warnings from developer 10 to developer 100 and check vid_activewindow

------------------------------------------------------------------------
r7061 | havoc | 2007-04-06 12:29:06 +0200 (Fri, 06 Apr 2007) | 2 lines

added cl_nettimesyncmode 4, this is not the default, just another option to experiment with

------------------------------------------------------------------------
r7060 | havoc | 2007-04-06 11:48:52 +0200 (Fri, 06 Apr 2007) | 6 lines

made the following changes to CL_NetworkTimeReceived:
changed cl_nettimesyncmode 2 to be more tolerant of out of bounds values, this fixes occasional choppyness
now prints warnings if time is out of bounds if developer is 10 or higher
simplified some code
disabled time interpolation code during signon process, this should give better starting values for cl.time

------------------------------------------------------------------------
r7059 | havoc | 2007-04-06 11:42:43 +0200 (Fri, 06 Apr 2007) | 2 lines

changed "new engine string" prints to also include the current text stored in the string, to aid in understanding what engine strings are being used

------------------------------------------------------------------------
r7058 | havoc | 2007-04-06 11:41:58 +0200 (Fri, 06 Apr 2007) | 2 lines

changed "sample frames missing" and similar warnings to require developer 1000 or higher

------------------------------------------------------------------------
r7057 | havoc | 2007-04-06 07:25:18 +0200 (Fri, 06 Apr 2007) | 4 lines

fixed a bug where the loading plaque caused front buffer rendering of all later stereo views (glDrawBuffer was not being set in stereo rendering, except when vid_stereobuffer was used)
swapped left/right views so that positive values for r_stereo_separation produce normal stereo, not cross-eyed
added r_stereo_angle cvar based on a patch from Thomas Spriggs, this allows you to make the views look different directions, in addition to the existing offset capability

------------------------------------------------------------------------
r7056 | havoc | 2007-04-06 07:22:01 +0200 (Fri, 06 Apr 2007) | 2 lines

cl_bobmodel_side and cl_bobmodel_up cvars now are scaled by cl_viewmodel_scale so that cl_viewmodel_scale can be changed without affecting the amount of viewmodel movement on the screen

------------------------------------------------------------------------
r7055 | havoc | 2007-04-05 12:31:42 +0200 (Thu, 05 Apr 2007) | 2 lines

fix bug with cl_nolerp 1 that caused playdemo to play back at timedemo speeds

------------------------------------------------------------------------
r7054 | havoc | 2007-04-05 10:47:17 +0200 (Thu, 05 Apr 2007) | 2 lines

fixed bug where dpmod weapons fired twice as often as intended (frametime is now 0 in calls to PlayerPreThink/PlayerPostthink on input moves)

------------------------------------------------------------------------
r7053 | havoc | 2007-04-05 10:25:54 +0200 (Thu, 05 Apr 2007) | 2 lines

fix another prediction issue (physics code was being called per input frame and per server frame)

------------------------------------------------------------------------
r7052 | havoc | 2007-04-05 10:21:19 +0200 (Thu, 05 Apr 2007) | 2 lines

reworked predicted player physics to call PlayerPreThink before the move and PlayerPostThink after the move, in addition to calling those surrounding the regular physics code, hopefully this doesn't break anything, it fixes the jumping bug introduced in the recent changes

------------------------------------------------------------------------
r7051 | havoc | 2007-04-05 09:50:22 +0200 (Thu, 05 Apr 2007) | 2 lines

changed sv.time to realtime in name change time limit code

------------------------------------------------------------------------
r7050 | havoc | 2007-04-05 09:14:09 +0200 (Thu, 05 Apr 2007) | 2 lines

eliminated most calls to Sys_DoubleTime (using realtime instead, or in one case a different sort of check)

------------------------------------------------------------------------
r7049 | havoc | 2007-04-05 09:02:29 +0200 (Thu, 05 Apr 2007) | 2 lines

fix severe timing issues regarding the global variable realtime which governs many things in the engine

------------------------------------------------------------------------
r7048 | havoc | 2007-04-05 07:09:59 +0200 (Thu, 05 Apr 2007) | 2 lines

fix bug with players not moving during the input timeout after prediction is intentionally disabled

------------------------------------------------------------------------
r7047 | havoc | 2007-04-04 21:06:54 +0200 (Wed, 04 Apr 2007) | 2 lines

fixed compile error in GLSL shader with the new textured attenuation code

------------------------------------------------------------------------
r7046 | havoc | 2007-04-04 17:22:02 +0200 (Wed, 04 Apr 2007) | 2 lines

implemented vbo rendering of map, models, and compiled shadow volumes

------------------------------------------------------------------------
r7045 | havoc | 2007-04-04 17:21:34 +0200 (Wed, 04 Apr 2007) | 2 lines

added gl_vbo cvar to allow disabling of vbo rendering (and vbo creation while loading models) for immediate comparison of framerates with/without vbo

------------------------------------------------------------------------
r7044 | havoc | 2007-04-04 13:54:05 +0200 (Wed, 04 Apr 2007) | 2 lines

now creates EBOs and VBOs containing static model geometry, map geometry, and compiled shadows

------------------------------------------------------------------------
r7043 | havoc | 2007-04-04 12:18:14 +0200 (Wed, 04 Apr 2007) | 2 lines

added bufferobject and bufferoffset parameters to all R_Mesh_*Pointer functions and R_Mesh_Draw

------------------------------------------------------------------------
r7042 | havoc | 2007-04-04 10:32:31 +0200 (Wed, 04 Apr 2007) | 2 lines

the beginnings of VBO support in the rendering backend

------------------------------------------------------------------------
r7041 | havoc | 2007-04-04 09:16:15 +0200 (Wed, 04 Apr 2007) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r7040 | havoc | 2007-04-04 06:28:28 +0200 (Wed, 04 Apr 2007) | 2 lines

corrected showturtle cvar description (it said it was unused, it actually does work)

------------------------------------------------------------------------
r7039 | havoc | 2007-04-04 06:27:17 +0200 (Wed, 04 Apr 2007) | 2 lines

fixed two timing flaws where cl.realframetime was used instead of (cl.time - cl.oldtime), one being centerprint fade time, and the other being ambient sky/water noise fading

------------------------------------------------------------------------
r7038 | havoc | 2007-04-03 06:09:11 +0200 (Tue, 03 Apr 2007) | 2 lines

fix bug in the previous movement patch where moves were not applied to the QC fields when not MOVETYPE_WALK

------------------------------------------------------------------------
r7037 | havoc | 2007-04-03 04:44:30 +0200 (Tue, 03 Apr 2007) | 2 lines

changed PlayerPrethink/think/PlayerPostThink to occur regardless of movement prediction, so they are guarenteed to run every server frame like in quake/quakeworld, only the movement itself is done elsewhere and only for MOVETYPE_WALK cases, this means that animations keep proper sync regardless of prediction timing

------------------------------------------------------------------------
r7036 | havoc | 2007-04-03 04:40:06 +0200 (Tue, 03 Apr 2007) | 2 lines

added detection of VBO extension

------------------------------------------------------------------------
r7035 | havoc | 2007-03-31 11:56:59 +0200 (Sat, 31 Mar 2007) | 2 lines

patch from div0 to fix the fixangle logic (my fix apparently didn't work properly either)

------------------------------------------------------------------------
r7034 | havoc | 2007-03-31 11:42:34 +0200 (Sat, 31 Mar 2007) | 2 lines

patch from div0 that improves mac keyboard support in the AGL client, this includes a copy of SDL_mackeys.h (as vid_agl_mackeys.h), it should be kept up to date as appropriate

------------------------------------------------------------------------
r7032 | havoc | 2007-03-30 22:42:13 +0200 (Fri, 30 Mar 2007) | 3 lines

added back bullet impact sparks due to complaints
made grenade smoke trails only last 2/3rd as long (this matches the quake grenade trail vs the quake rocket trail length)

------------------------------------------------------------------------
r7031 | havoc | 2007-03-30 21:59:40 +0200 (Fri, 30 Mar 2007) | 2 lines

slight improvement to the new bullet smoke

------------------------------------------------------------------------
r7030 | havoc | 2007-03-30 10:48:11 +0200 (Fri, 30 Mar 2007) | 2 lines

make timedemo and -benchmark use srand(0) to get more predictable results

------------------------------------------------------------------------
r7029 | havoc | 2007-03-30 10:47:12 +0200 (Fri, 30 Mar 2007) | 2 lines

disabled cl_beams_instantaimhack by default, and disabled it in every Effects: preset in the options menu

------------------------------------------------------------------------
r7028 | havoc | 2007-03-30 10:31:10 +0200 (Fri, 30 Mar 2007) | 2 lines

removed restrictions on r_fullbright and r_ambient cvars (they can now be used in multiplayer)

------------------------------------------------------------------------
r7027 | havoc | 2007-03-30 10:26:37 +0200 (Fri, 30 Mar 2007) | 2 lines

fix the corona view distance culling checks, had the values swapped between rtlight/dlight cases

------------------------------------------------------------------------
r7026 | havoc | 2007-03-30 10:25:12 +0200 (Fri, 30 Mar 2007) | 4 lines

changed cl_particles_quake mode to use size 1.5 for particles rather than size 1.0, this makes them about as visible as in glquake
changed explosion sparks to not be affected by gravity and some other differences in how they are spawned
removed sparks on bullet/nail impact effects, made smoke bigger and a bit darker so it's not just small white puffs, it now looks rather nice, and more true to the original quake gunshot/spike/superspike effect

------------------------------------------------------------------------
r7025 | havoc | 2007-03-30 05:33:29 +0200 (Fri, 30 Mar 2007) | 2 lines

fix bug that caused blood stainmaps to not appear when decals were off

------------------------------------------------------------------------
r7024 | havoc | 2007-03-30 05:28:56 +0200 (Fri, 30 Mar 2007) | 3 lines

cleaned up R_DrawCoronas code to be more readable/maintainable
modified R_DrawCoronas to use a spherical distance check on coronas rather than a view-direction dependent one, and changed the distance checks, this should get rid of the 'seeing your own muzzleflash corona when looking down' issue

------------------------------------------------------------------------
r7023 | havoc | 2007-03-30 05:26:51 +0200 (Fri, 30 Mar 2007) | 2 lines

fix bug which caused CL_Move to not see any network bmodels (doors, etc), which caused particles, blood, and coronas to ignore doors and such

------------------------------------------------------------------------
r7022 | havoc | 2007-03-30 03:41:00 +0200 (Fri, 30 Mar 2007) | 2 lines

fixed specularscale calculation

------------------------------------------------------------------------
r7021 | havoc | 2007-03-29 22:23:20 +0200 (Thu, 29 Mar 2007) | 2 lines

fix warning

------------------------------------------------------------------------
r7020 | havoc | 2007-03-29 11:18:03 +0200 (Thu, 29 Mar 2007) | 4 lines

changed Sys_Sleep functions to take microseconds instead of milliseconds (this may mildly improve sleep accuracy on Linux dedicated servers)
modified the host main loop to check for server packets each iteration of the loop rather than at the server framerate (this doesn't accomplish much yet but has potential)
added sv_checkforpacketsduringsleep cvar to enable use of select() instead of Sys_Sleep()

------------------------------------------------------------------------
r7018 | havoc | 2007-03-29 03:39:52 +0200 (Thu, 29 Mar 2007) | 2 lines

added DP_QC_TOKENIZEBYSEPARATOR extension

------------------------------------------------------------------------
r7017 | havoc | 2007-03-29 02:39:50 +0200 (Thu, 29 Mar 2007) | 3 lines

added r_shadow_usenormalmap cvar which allows you to disable directional shading on rtlights, looking a bit more like glquake lights, this also renders somewhat faster so it may be of use as a performance tweak for some cards
added an optimized ambient-without-diffuse path in the GLSL shader to help r_shadow_usenormalmap 0 performance

------------------------------------------------------------------------
r7016 | havoc | 2007-03-29 02:33:16 +0200 (Thu, 29 Mar 2007) | 2 lines

added NetConn_SleepMicroseconds function, and LHNET_SleepUntilPacket_Microseconds function, this uses select() to wait for a specified amount of time or until a packet is received

------------------------------------------------------------------------
r7015 | havoc | 2007-03-29 02:31:57 +0200 (Thu, 29 Mar 2007) | 2 lines

cl_bob* cvars are now saved

------------------------------------------------------------------------
r7014 | havoc | 2007-03-28 02:42:28 +0200 (Wed, 28 Mar 2007) | 2 lines

stop demo playback on connect command but do not disconnect

------------------------------------------------------------------------
r7013 | havoc | 2007-03-27 21:48:09 +0200 (Tue, 27 Mar 2007) | 4 lines

added .float disableclientprediction field for qc to use to disable prediction intentionally if it so wishes
added .movetype check to disable prediction whenever movetype is not MOVETYPE_WALK, this fixes unwanted prediction issues in all known cases
moved prediction disabling code from SV_ReadClientMove to SV_ExecuteClientMoves as a minor cleanup

------------------------------------------------------------------------
r7012 | havoc | 2007-03-27 21:43:56 +0200 (Tue, 27 Mar 2007) | 2 lines

remove unused variable

------------------------------------------------------------------------
r7011 | havoc | 2007-03-27 20:36:21 +0200 (Tue, 27 Mar 2007) | 2 lines

made scr_printspeed 0 also disable slow printing

------------------------------------------------------------------------
r7010 | havoc | 2007-03-27 20:30:44 +0200 (Tue, 27 Mar 2007) | 2 lines

changed default value of scr_printspeed from 8 to 1000000 to disable the slow printing entirely, as it is more annoying than useful

------------------------------------------------------------------------
r7009 | havoc | 2007-03-27 20:28:23 +0200 (Tue, 27 Mar 2007) | 2 lines

patch from div0 to make svc_finale text show up immediately if scr_printspeed is a very high value

------------------------------------------------------------------------
r7008 | havoc | 2007-03-26 06:45:19 +0200 (Mon, 26 Mar 2007) | 2 lines

remove unnecessary calculations of absmin/absmax in csqc builtins, they're not used by the engine and are updated by setorigin/setsize

------------------------------------------------------------------------
r7007 | havoc | 2007-03-26 06:39:47 +0200 (Mon, 26 Mar 2007) | 2 lines

slight optimization to CSQC_AddRenderEdict - don't fetch renderflags twice

------------------------------------------------------------------------
r7006 | havoc | 2007-03-26 04:40:26 +0200 (Mon, 26 Mar 2007) | 2 lines

fix bug in the last commit

------------------------------------------------------------------------
r7005 | havoc | 2007-03-26 04:04:42 +0200 (Mon, 26 Mar 2007) | 2 lines

patch from div0 to fix issues with libcurl on old nexuiz servers

------------------------------------------------------------------------
r7004 | havoc | 2007-03-25 01:49:42 +0100 (Sun, 25 Mar 2007) | 2 lines

eliminated dependency on quakedef.h, this file now compile standalone without any problems

------------------------------------------------------------------------
r7003 | havoc | 2007-03-25 00:04:58 +0100 (Sun, 25 Mar 2007) | 2 lines

changed default value of cl_netinputpacketlosstolerance from 4 to 1, matching Quake3, as it's actually quite rare for more than every other packet to be lost

------------------------------------------------------------------------
r7002 | havoc | 2007-03-24 18:55:42 +0100 (Sat, 24 Mar 2007) | 2 lines

as requested by div0, sprint to world now behaves like print

------------------------------------------------------------------------
r7001 | havoc | 2007-03-24 18:46:19 +0100 (Sat, 24 Mar 2007) | 2 lines

moved clearing of self.fixangle to SV_Physics_ClientEntity so that it is only cleared each time PlayerPreThink is called, fixing bugs with irregular move times causing spectating smoothing to fail

------------------------------------------------------------------------
r7000 | havoc | 2007-03-19 18:53:06 +0100 (Mon, 19 Mar 2007) | 2 lines

added glFinish() call to loading screen (which uses front buffer rendering) to make it work on Windows Vista

------------------------------------------------------------------------
r6999 | havoc | 2007-03-19 15:10:19 +0100 (Mon, 19 Mar 2007) | 2 lines

added leaf culling using the shadow-caster frustum, this got a very small gain

------------------------------------------------------------------------
r6998 | havoc | 2007-03-18 23:44:59 +0100 (Sun, 18 Mar 2007) | 2 lines

changed bestweapon command to match the one in proquake - taking each weapon identifier as a separate parameter, rather than one string of them, I don't know why the person asking for bestweapon support gave me an example of a single parameter as no other engine seems to do it that way

------------------------------------------------------------------------
r6997 | havoc | 2007-03-18 18:52:32 +0100 (Sun, 18 Mar 2007) | 2 lines

added iplog support (iplog_list command, iplog_name cvar, and automatic gathering of ip addresses from status commands)

------------------------------------------------------------------------
r6996 | havoc | 2007-03-18 18:04:28 +0100 (Sun, 18 Mar 2007) | 2 lines

added cl_movement_minping cvar, default 50, this shuts off prediction when your ping time is below 50ms, such as in local games or lan games

------------------------------------------------------------------------
r6995 | havoc | 2007-03-17 14:27:02 +0100 (Sat, 17 Mar 2007) | 2 lines

changed some prints to dprints

------------------------------------------------------------------------
r6994 | havoc | 2007-03-17 14:19:00 +0100 (Sat, 17 Mar 2007) | 2 lines

reenabled vid_grabkeyboard by default until the focus issue is figured out

------------------------------------------------------------------------
r6993 | havoc | 2007-03-17 14:08:52 +0100 (Sat, 17 Mar 2007) | 2 lines

play a different sound (sound/misc/talk2.wav) for team chat messages (only if the file exists of course), to accomplish this the team chat messages now have () around the player name, which is compatible with other engines with this feature

------------------------------------------------------------------------
r6992 | havoc | 2007-03-16 13:35:53 +0100 (Fri, 16 Mar 2007) | 2 lines

cl_autodemo and cl_autodemo_nameformat are now saved cvars

------------------------------------------------------------------------
r6991 | havoc | 2007-03-16 10:37:04 +0100 (Fri, 16 Mar 2007) | 2 lines

fixed cl_autodemo

------------------------------------------------------------------------
r6990 | havoc | 2007-03-16 10:34:24 +0100 (Fri, 16 Mar 2007) | 3 lines

fixed bug where every name/color/playermodel/playerskin/etc property change was sent twice
removed some autodemo code

------------------------------------------------------------------------
r6989 | havoc | 2007-03-16 10:29:11 +0100 (Fri, 16 Mar 2007) | 2 lines

corrected name of gl_ext_separatestencil server (it was missing the second s)

------------------------------------------------------------------------
r6988 | havoc | 2007-03-16 04:13:22 +0100 (Fri, 16 Mar 2007) | 2 lines

reenabled keyboard grab when fullscreen - this is just a temporary solution, the window should be focused but isn't

------------------------------------------------------------------------
r6987 | havoc | 2007-03-16 01:36:27 +0100 (Fri, 16 Mar 2007) | 2 lines

fix a double typo (thanks Willis)

------------------------------------------------------------------------
r6985 | havoc | 2007-03-15 15:29:41 +0100 (Thu, 15 Mar 2007) | 2 lines

fix an error

------------------------------------------------------------------------
r6984 | havoc | 2007-03-15 15:06:03 +0100 (Thu, 15 Mar 2007) | 3 lines

disabled cl_movement prediction when cls.servermovesequence is 0 (either a protocol that does not support move synchronization, or prediction is disabled)
removed cl_movement_latency cvar as it no longer serves any purpose with the removal of support for prediction on unsynchronized move protocols

------------------------------------------------------------------------
r6983 | havoc | 2007-03-15 14:54:37 +0100 (Thu, 15 Mar 2007) | 2 lines

rewrote stringlist stuff, now uses a (dynamically resizing) array of pointers rather than a linked list, and uses a selection sort rather than a bubble sort, this has changed the "maps" command from taking about 7 seconds on my system to about 70ms

------------------------------------------------------------------------
r6982 | havoc | 2007-03-15 13:49:57 +0100 (Thu, 15 Mar 2007) | 2 lines

fix a crash in maps command

------------------------------------------------------------------------
r6981 | havoc | 2007-03-15 13:10:27 +0100 (Thu, 15 Mar 2007) | 2 lines

aligned menu options to not cover the quake logo plaque on the left side

------------------------------------------------------------------------
r6980 | havoc | 2007-03-15 12:34:14 +0100 (Thu, 15 Mar 2007) | 3 lines

main options menu now has only the most frequently used options, and contains several presets for effects and lighting (renamed Graphics Options to Lighting)
main options menu now fits on a 320x240 display

------------------------------------------------------------------------
r6979 | havoc | 2007-03-15 12:32:01 +0100 (Thu, 15 Mar 2007) | 2 lines

updated with new default value of con_closeontoggleconsole

------------------------------------------------------------------------
r6978 | havoc | 2007-03-15 12:23:50 +0100 (Thu, 15 Mar 2007) | 2 lines

reworked quake query code (CCREQ_/CCREP_ handling) to use MSG_Read functions, it was previously using a mixture of these and direct packet parsing, which was not working, this means quake query tools work again

------------------------------------------------------------------------
r6977 | havoc | 2007-03-15 11:34:24 +0100 (Thu, 15 Mar 2007) | 4 lines

separated the code that sends player name and such into CL_SendPlayerInfo
moved call to CL_SendPlayerInfo from signon 2 to signon 1
moved cl_begindownloads from signon 2 to signon 1, this fixes the 'no ambient sounds' bug

------------------------------------------------------------------------
r6976 | havoc | 2007-03-15 11:32:11 +0100 (Thu, 15 Mar 2007) | 2 lines

changed default snd_soundradius from 1000 to 2000, matching proquake (which attempts to match dos quake), this means you can fire a rocket across the outdoor pent area in dm3 and hear the explosion

------------------------------------------------------------------------
r6975 | havoc | 2007-03-15 11:12:52 +0100 (Thu, 15 Mar 2007) | 2 lines

implemented support for fuhquake macros in fuhquake/QIZMO format .loc files, hardcoded the strings for these rather than using cvars (unlike fuhquake) because excess settings is silly

------------------------------------------------------------------------
r6974 | havoc | 2007-03-15 09:34:05 +0100 (Thu, 15 Mar 2007) | 2 lines

made cl_bob 0 also disable cl_bobmodel

------------------------------------------------------------------------
r6973 | havoc | 2007-03-15 09:28:10 +0100 (Thu, 15 Mar 2007) | 2 lines

changed default value of con_closeontoggleconsole due to a never ending stream of complaints about the ~ key not closing the console

------------------------------------------------------------------------
r6972 | havoc | 2007-03-15 09:10:30 +0100 (Thu, 15 Mar 2007) | 2 lines

set pmodel/emodel keys in userinfo for qw servers

------------------------------------------------------------------------
r6971 | havoc | 2007-03-14 11:33:43 +0100 (Wed, 14 Mar 2007) | 2 lines

add apple_multithreadedgl cvar (offloads OpenGL driver to a second thread if possible), off by default (may change to on if I get feedback from testers)

------------------------------------------------------------------------
r6970 | havoc | 2007-03-14 09:48:51 +0100 (Wed, 14 Mar 2007) | 2 lines

added cl_particles_rain and cl_particles_snow cvars to allow disabling of these types of particles, based on a patch from esteel

------------------------------------------------------------------------
r6969 | havoc | 2007-03-14 09:48:00 +0100 (Wed, 14 Mar 2007) | 2 lines

added a missing return statement in the 'any-dimension' bspline example code (which is in a comment so this has no effect on code)

------------------------------------------------------------------------
r6968 | havoc | 2007-03-14 04:09:29 +0100 (Wed, 14 Mar 2007) | 2 lines

fix bug where transparent models used an out of date material (generated earlier in the same frame), which caused problems when multiple instances of the same model exist in the same frame and one or more of them are transparent

------------------------------------------------------------------------
r6967 | havoc | 2007-03-14 03:08:28 +0100 (Wed, 14 Mar 2007) | 3 lines

loc file parsing now supports whitespace following commas (I did not previously have such a test file)
now rejects malformed proquake-format loc file lines that do not have a quoted string directly after the 6 numbers

------------------------------------------------------------------------
r6966 | havoc | 2007-03-12 13:30:57 +0100 (Mon, 12 Mar 2007) | 2 lines

removed duplicate entries in the cvar list

------------------------------------------------------------------------
r6965 | havoc | 2007-03-12 13:28:00 +0100 (Mon, 12 Mar 2007) | 3 lines

removed "Future supported games" section as it really serves no purpose
sorted cvar list

------------------------------------------------------------------------
r6964 | havoc | 2007-03-12 12:39:11 +0100 (Mon, 12 Mar 2007) | 2 lines

442

------------------------------------------------------------------------
r6963 | havoc | 2007-03-12 12:29:40 +0100 (Mon, 12 Mar 2007) | 2 lines

446

------------------------------------------------------------------------
r6962 | havoc | 2007-03-12 12:29:20 +0100 (Mon, 12 Mar 2007) | 2 lines

updated readme

------------------------------------------------------------------------
r6961 | havoc | 2007-03-12 07:21:21 +0100 (Mon, 12 Mar 2007) | 2 lines

multiline cvar_t descriptions cause problems when building the readme

------------------------------------------------------------------------
r6960 | havoc | 2007-03-12 06:58:29 +0100 (Mon, 12 Mar 2007) | 2 lines

removed trailing comments on cvar declarations and Cmd_AddCommand calls

------------------------------------------------------------------------
r6959 | havoc | 2007-03-12 06:44:45 +0100 (Mon, 12 Mar 2007) | 2 lines

corrected some comments

------------------------------------------------------------------------
r6958 | havoc | 2007-03-12 06:31:02 +0100 (Mon, 12 Mar 2007) | 3 lines

removed -demolooponly commandline option as it did precisely the same thing as -demo, and I don't feel like implementing the feature its name implies
corrected a mention of host_maxfps to cl_maxfps in host_framerate cvar description

------------------------------------------------------------------------
r6957 | havoc | 2007-03-12 06:26:59 +0100 (Mon, 12 Mar 2007) | 2 lines

added vid_grabkeyboard cvar which defaults to 0, this means that the glx client no longer locks out window manager hotkeys (such as volume control and music player control keys, as well as alt-tab)

------------------------------------------------------------------------
r6956 | havoc | 2007-03-12 05:18:32 +0100 (Mon, 12 Mar 2007) | 2 lines

implemented proper handling of .frame2/.lerpfrac/.frame1time/.frame2time fields in csqc entities

------------------------------------------------------------------------
r6955 | havoc | 2007-03-12 03:33:27 +0100 (Mon, 12 Mar 2007) | 2 lines

added support for locs/something.loc naming in loc file loading code, for proquake filename compatibility

------------------------------------------------------------------------
r6954 | havoc | 2007-03-12 03:28:15 +0100 (Mon, 12 Mar 2007) | 2 lines

disable interpolation of predicted movement locations when a teleport occurred (just like unpredicted movement is not interpolated in this case)

------------------------------------------------------------------------
r6953 | havoc | 2007-03-12 00:56:44 +0100 (Mon, 12 Mar 2007) | 2 lines

don't abort a download if a level change occurs during the download, instead just wait for it to finish before signing in to the new level

------------------------------------------------------------------------
r6952 | havoc | 2007-03-12 00:54:14 +0100 (Mon, 12 Mar 2007) | 2 lines

make gamedir command work on dedicated servers

------------------------------------------------------------------------
r6951 | havoc | 2007-03-12 00:53:31 +0100 (Mon, 12 Mar 2007) | 2 lines

increased minimum developer cvar level for several spammy messages (new engine string, sample frames missing) from 100 to 200, to make 100 more usable

------------------------------------------------------------------------
r6950 | havoc | 2007-03-11 08:41:47 +0100 (Sun, 11 Mar 2007) | 3 lines

implemented .loc file support, including some editing (add command, and removenearest command) and viewing capability (r_speeds now shows the current location name, and locs_show 1 displays the actual boxes/points as translucent boxes)
implemented proquake message macros (%l, %d, %h, %a, etc), can be disabled by locs_enable 0

------------------------------------------------------------------------
r6949 | havoc | 2007-03-11 04:34:50 +0100 (Sun, 11 Mar 2007) | 3 lines

changed brightness of unlit q1bsp maps from 2x white to 1x white (so textures show as their true colors rather than twice as bright)
fixed bug that made models black in unlit q1bsp maps

------------------------------------------------------------------------
r6948 | havoc | 2007-03-09 11:41:10 +0100 (Fri, 09 Mar 2007) | 2 lines

fix incorrect parameter count check on setspawnparms, this was causing coop servers to suddenly quit when someone respawned

------------------------------------------------------------------------
r6947 | havoc | 2007-03-09 03:39:07 +0100 (Fri, 09 Mar 2007) | 2 lines

removed master 12.166.196.192 (run by Venim) because it hasn't been responding for a long time

------------------------------------------------------------------------
r6946 | havoc | 2007-03-09 01:13:19 +0100 (Fri, 09 Mar 2007) | 2 lines

added cl_dlights_decayradius and cl_dlights_decaybrightness cvars, both default on, this brings back the quake-style radius decay, and keeps the more recently added brightness decay, benchmarks suffered when radius decay was removed, so its return should restore any losses associated with that

------------------------------------------------------------------------
r6945 | havoc | 2007-03-09 00:50:28 +0100 (Fri, 09 Mar 2007) | 2 lines

implemented shadow caster culling by creating a frustum plane set that includes the light origin, any object that is not within this frustum (which encloses the screen and a triangular-shaped volume extending to the light origin) can not possibly cast a shadow onto the visible geometry, this reduces cpu work in a few cases (off-screen explosion with several entities further off-screen)

------------------------------------------------------------------------
r6944 | havoc | 2007-03-09 00:39:14 +0100 (Fri, 09 Mar 2007) | 2 lines

fixed bug in portal culling code that allowed a leaf to be revisited multiple times, causing it to be counted multiple times, and wasting a small amount of time marking surfaces redundantly

------------------------------------------------------------------------
r6943 | havoc | 2007-03-09 00:36:23 +0100 (Fri, 09 Mar 2007) | 2 lines

reworked prediction code to work better when riding lifts

------------------------------------------------------------------------
r6942 | havoc | 2007-03-09 00:33:57 +0100 (Fri, 09 Mar 2007) | 3 lines

refactored csqc entity sending code so that it properly obeys msg->maxsize, undoing writes that could not fit
added comment about how csqc entity sending code needs some changes to avoid packet loss problems

------------------------------------------------------------------------
r6941 | havoc | 2007-03-09 00:32:45 +0100 (Fri, 09 Mar 2007) | 2 lines

added a few more Vector4 macros

------------------------------------------------------------------------
r6940 | havoc | 2007-03-03 23:06:57 +0100 (Sat, 03 Mar 2007) | 2 lines

changed entity networking prioritization code to use the center of the model rather than the origin, this fixes prioritization of doors and lifts which typically have their origin near '0 0 0' rather than inside the entity box

------------------------------------------------------------------------
r6939 | havoc | 2007-03-03 22:59:03 +0100 (Sat, 03 Mar 2007) | 2 lines

fix weapon jitters when walking up ramps, and prediction failures when doing rampjumps, unfortunately this also ends up predicting quake2-style double jumps (which do not occur on the server)

------------------------------------------------------------------------
r6938 | havoc | 2007-03-03 18:47:15 +0100 (Sat, 03 Mar 2007) | 2 lines

patch from div0 fixing his previous patch that he told me had prediction visibility tests but actually lacked it

------------------------------------------------------------------------
r6937 | havoc | 2007-03-03 02:49:43 +0100 (Sat, 03 Mar 2007) | 2 lines

quick hack to get rid of twitchy onground state in prediction when running up ramps, this really needs a better fix sometime

------------------------------------------------------------------------
r6936 | havoc | 2007-03-03 02:37:22 +0100 (Sat, 03 Mar 2007) | 2 lines

fixed bug that was causing prediction to fail periodically in singleplayer games, especially with cl_maxfps 125 (negative packet times were causing sv_clmovement_minping 0 tests to pass occasionally, disabling prediction, and causing a major stall in input handling)

------------------------------------------------------------------------
r6935 | havoc | 2007-03-03 01:57:01 +0100 (Sat, 03 Mar 2007) | 2 lines

server now executes predicted moves of more than 50ms as two separate moves like QWSV does (the client prediction expects this)

------------------------------------------------------------------------
r6934 | havoc | 2007-03-03 01:51:48 +0100 (Sat, 03 Mar 2007) | 3 lines

minor cleanup of CL_SendMove comments regarding packet timing
changed predicted move sending code to not care about the value of cls.signon

------------------------------------------------------------------------
r6933 | havoc | 2007-03-02 23:37:36 +0100 (Fri, 02 Mar 2007) | 2 lines

changed sendcvar command to send a reply (with no value parameter) if the cvar does not exist

------------------------------------------------------------------------
r6932 | havoc | 2007-03-02 23:23:08 +0100 (Fri, 02 Mar 2007) | 2 lines

reworked cvar checks in VID_UpdateGamma to simply set gamma_forcenextframe if they have changed, this is somewhat in preparation for eventual use of cvar callbacks

------------------------------------------------------------------------
r6931 | havoc | 2007-03-02 16:33:59 +0100 (Fri, 02 Mar 2007) | 2 lines

less hacky solution to resetting movesequence on a level change

------------------------------------------------------------------------
r6930 | havoc | 2007-03-02 14:05:39 +0100 (Fri, 02 Mar 2007) | 2 lines

fix really stupid bug introduced in sv_user.c revision 1.83 (sv_waterfriction was being used, even if it's -1 which means use sv_friction instead), now properly uses sv_friction if sv_waterfriction < 0

------------------------------------------------------------------------
r6929 | havoc | 2007-03-02 00:11:26 +0100 (Fri, 02 Mar 2007) | 2 lines

fixed problems with playing on QW server caused by the use of _cl_name and similar config variables

------------------------------------------------------------------------
r6928 | havoc | 2007-03-01 22:36:55 +0100 (Thu, 01 Mar 2007) | 2 lines

fix bug where only the first portal to see a surface was able to mark triangles as worth of receiving light

------------------------------------------------------------------------
r6927 | havoc | 2007-03-01 21:07:20 +0100 (Thu, 01 Mar 2007) | 3 lines

implemented r_shadow_culltriangles cvar (on by default), this improves lighting performance by reducing the amount of geometry to render, it does not add any additional cpu w
ork because similar forms of culling were already used on shadow casting triangles (which are now replaced by this), this just applies the same already computed culling to the lighting as well as the shadowing

------------------------------------------------------------------------
r6926 | havoc | 2007-03-01 19:49:26 +0100 (Thu, 01 Mar 2007) | 2 lines

fix bug that was causing r_editlights light indicators to not render

------------------------------------------------------------------------
r6925 | havoc | 2007-02-28 17:49:54 +0100 (Wed, 28 Feb 2007) | 2 lines

remove stray \n characters in Cmd_AddCommand calls

------------------------------------------------------------------------
r6924 | havoc | 2007-02-28 12:08:30 +0100 (Wed, 28 Feb 2007) | 5 lines

eliminated RENDER_NOCULLFACE (now uses MATERIALFLAG_NOCULLFACE on a texture)
eliminated RENDER_TRANSPARENT (it was only used by the client code briefly, it did not need to be stored, it only turned off RENDER_SHADOW)
added TriangleOverlapsBox macro (and changed several pieces of code to use it)
changed some code to use the BoxInsideBox macro

------------------------------------------------------------------------
r6923 | havoc | 2007-02-28 10:50:36 +0100 (Wed, 28 Feb 2007) | 2 lines

improved detection of q3 terrain blend shaders to reduce chances of a misidentification

------------------------------------------------------------------------
r6922 | havoc | 2007-02-28 10:35:29 +0100 (Wed, 28 Feb 2007) | 2 lines

remove an unused extern

------------------------------------------------------------------------
r6921 | havoc | 2007-02-28 10:34:34 +0100 (Wed, 28 Feb 2007) | 2 lines

fix a cvar name

------------------------------------------------------------------------
r6920 | havoc | 2007-02-27 22:15:48 +0100 (Tue, 27 Feb 2007) | 2 lines

fix missing { character

------------------------------------------------------------------------
r6919 | havoc | 2007-02-27 20:24:48 +0100 (Tue, 27 Feb 2007) | 2 lines

use CVAR_SAVE not 1 for flags on curl cvars

------------------------------------------------------------------------
r6918 | havoc | 2007-02-24 11:05:38 +0100 (Sat, 24 Feb 2007) | 2 lines

allow 0 parameters in VM_SV_makestatic due to a bug in id1 qc

------------------------------------------------------------------------
r6917 | havoc | 2007-02-24 08:12:56 +0100 (Sat, 24 Feb 2007) | 2 lines

added optimized case in R_Q1BSP_GetLightInfo surface culling that skips checking individual triangle bounding boxes if the entire surface is inside the light bounding box (as is often the case)

------------------------------------------------------------------------
r6916 | havoc | 2007-02-24 08:09:31 +0100 (Sat, 24 Feb 2007) | 2 lines

optimized entity culling loop for shadow casting entities that are not directly seen

------------------------------------------------------------------------
r6915 | havoc | 2007-02-23 16:31:06 +0100 (Fri, 23 Feb 2007) | 2 lines

added BoxInsideBox macro

------------------------------------------------------------------------
r6914 | havoc | 2007-02-23 14:49:12 +0100 (Fri, 23 Feb 2007) | 2 lines

minor optimization of R_Q1BSP_RecursiveLightInfo

------------------------------------------------------------------------
r6913 | havoc | 2007-02-23 14:48:42 +0100 (Fri, 23 Feb 2007) | 2 lines

minor optimization

------------------------------------------------------------------------
r6912 | havoc | 2007-02-23 14:09:11 +0100 (Fri, 23 Feb 2007) | 2 lines

forgot to re-sort the todo

------------------------------------------------------------------------
r6911 | havoc | 2007-02-23 14:07:36 +0100 (Fri, 23 Feb 2007) | 4 lines

audited R_Mesh_Matrix calls and RSurf_ActiveEntity calls and moved them to more appropriate locations in some cases
split R_DrawSurfaces into R_DrawWorldSurfaces and R_DrawModelSurfaces to make profile reports more useful
split RSurf_ActiveEntity into RSurf_ActiveWorldEntity and RSurf_ActiveModelEntity to make profile reports more useful, and very slightly improve performance

------------------------------------------------------------------------
r6910 | havoc | 2007-02-23 13:53:07 +0100 (Fri, 23 Feb 2007) | 2 lines

remove ; that was causing crashes/breakage

------------------------------------------------------------------------
r6909 | havoc | 2007-02-23 13:47:02 +0100 (Fri, 23 Feb 2007) | 2 lines

remove unused variables

------------------------------------------------------------------------
r6908 | havoc | 2007-02-23 13:45:35 +0100 (Fri, 23 Feb 2007) | 2 lines

fixed bug that caused the wrong texture to be used on rtlight lighting when two or more textures were involved in a single batch

------------------------------------------------------------------------
r6907 | havoc | 2007-02-23 13:05:14 +0100 (Fri, 23 Feb 2007) | 2 lines

small cleanup of R_DrawSurfaces (separated r_showcollisionbrushes and r_showtris/r_shownormals code into functions)

------------------------------------------------------------------------
r6906 | havoc | 2007-02-23 12:43:03 +0100 (Fri, 23 Feb 2007) | 2 lines

split model_brushq3_t num_lightmaps field into num_originallightmaps (for lightmapindex checking) and num_mergedlightmaps (for loops), this fixes lightmap indexing errors on deluxemapped maps

------------------------------------------------------------------------
r6905 | havoc | 2007-02-23 11:46:00 +0100 (Fri, 23 Feb 2007) | 2 lines

patch from div0 that makes curl downloads stay connected to the game server while downloading (like the direct downloads)

------------------------------------------------------------------------
r6904 | havoc | 2007-02-23 10:36:47 +0100 (Fri, 23 Feb 2007) | 2 lines

patch from div0 that adds clientside culling of entities by TraceLineOfSight (like sv_cullentities_trace does), and merges the client and server code for this culling, this also adds traces for predicted player movement on the server to reduce the "items popping up" problem when running into a new room

------------------------------------------------------------------------
r6903 | havoc | 2007-02-23 10:19:36 +0100 (Fri, 23 Feb 2007) | 2 lines

memset arrays before writing skeletal vertices into them (as the code did long ago), this is an 8% improvement in Mod_Alias_GetMesh_Vertices in my benchmarking (7.58 seconds in profile before, 6.95 seconds after)

------------------------------------------------------------------------
r6902 | havoc | 2007-02-23 10:02:48 +0100 (Fri, 23 Feb 2007) | 2 lines

further optimizations to batching code, not much gain if any from these, but it may play nicer with cpu cache

------------------------------------------------------------------------
r6901 | havoc | 2007-02-23 06:12:05 +0100 (Fri, 23 Feb 2007) | 2 lines

check __GNUC__ version before defining printf attribute, only define it on gcc 3 and later

------------------------------------------------------------------------
r6900 | havoc | 2007-02-22 16:22:37 +0100 (Thu, 22 Feb 2007) | 2 lines

changed default mod_q3bsp_lightmapmergepower from 5 (4096x4096) to 4 (2048x2048), this means that the textures won't use more than 16MB each, which is a bit friendlier to 128MB cards than a 64MB texture  (note: this is only the upper limit, if the map does not need this much lightmap space it already picks a smaller size)

------------------------------------------------------------------------
r6899 | havoc | 2007-02-22 16:17:24 +0100 (Thu, 22 Feb 2007) | 2 lines

fix dedicated server crashes caused by new lightmap merging

------------------------------------------------------------------------
r6898 | havoc | 2007-02-22 15:37:43 +0100 (Thu, 22 Feb 2007) | 2 lines

fixed bug that made some models invisible in nexuiz (if they have skin != 0 and skin 0 was never rendered yet on this model, they were using skin 0, which was often uninitialized)

------------------------------------------------------------------------
r6897 | havoc | 2007-02-22 12:55:01 +0100 (Thu, 22 Feb 2007) | 2 lines

disabled collision_enternudge by default again, due to intermittent problems with getting stuck on ramps

------------------------------------------------------------------------
r6896 | havoc | 2007-02-22 12:45:12 +0100 (Thu, 22 Feb 2007) | 2 lines

changed light attenuation equation in the default.glsl shader in the engine

------------------------------------------------------------------------
r6895 | havoc | 2007-02-22 12:30:29 +0100 (Thu, 22 Feb 2007) | 2 lines

added r_shadow_lightradiusscale cvar (similar to r_shadow_lightintensityscale)

------------------------------------------------------------------------
r6894 | havoc | 2007-02-22 12:29:38 +0100 (Thu, 22 Feb 2007) | 2 lines

don't compute tangents or normals on non-deluxemapped world surfaces, or tangents on models if the shader does not use normalmapping

------------------------------------------------------------------------
r6893 | havoc | 2007-02-22 12:25:51 +0100 (Thu, 22 Feb 2007) | 2 lines

really fixed deluxemapping this time

------------------------------------------------------------------------
r6892 | havoc | 2007-02-22 12:19:51 +0100 (Thu, 22 Feb 2007) | 2 lines

fixed deluxemapping detection bug that made it never work

------------------------------------------------------------------------
r6891 | havoc | 2007-02-22 09:45:28 +0100 (Thu, 22 Feb 2007) | 2 lines

now merges all q3bsp lightmap textures into one huge lightmap texture if possible, this doubled benchmark framerates for me

------------------------------------------------------------------------
r6890 | havoc | 2007-02-22 09:44:01 +0100 (Thu, 22 Feb 2007) | 2 lines

added some debugging code to RSurf_DrawBatch_WithLightmapSwitching to print out how many surfaces are rendered in each batch and each subbatch by lightmap (this revealed that q3map2's surface sorting is horrible)

------------------------------------------------------------------------
r6889 | havoc | 2007-02-22 05:42:10 +0100 (Thu, 22 Feb 2007) | 2 lines

split RSurf_DrawBatch_Lightmap function into 4 main functions (previously there were only 3 modes, causing rendering problems) and 2 utility functions, this cleaned up the code somewhat

------------------------------------------------------------------------
r6888 | havoc | 2007-02-22 04:42:25 +0100 (Thu, 22 Feb 2007) | 2 lines

fix a bug in transparent mesh rendering which often caused crashes

------------------------------------------------------------------------
r6887 | havoc | 2007-02-22 02:13:31 +0100 (Thu, 22 Feb 2007) | 2 lines

reorganized surface batching to batch visible surfaces first, and then pass them to a function that breaks the list down by texture, also reorganized batching code to use a forward-search approach rather than state machine approach, this got a small (2%) speed gain in benchmarks

------------------------------------------------------------------------
r6886 | havoc | 2007-02-22 01:39:49 +0100 (Thu, 22 Feb 2007) | 2 lines

some cleanup of GL20 code (removed rsurface_glsl_texture and rsurface_glsl_uselightmaptexture caching, because with the change to not batching by lightmap texture there are no longer redundant batches)

------------------------------------------------------------------------
r6885 | havoc | 2007-02-22 01:34:20 +0100 (Thu, 22 Feb 2007) | 2 lines

merged some surface rendering setup code

------------------------------------------------------------------------
r6884 | havoc | 2007-02-21 12:56:29 +0100 (Wed, 21 Feb 2007) | 2 lines

default gl_lockarrays to 0, I'm not aware of any cards that actually benefit from it

------------------------------------------------------------------------
r6883 | havoc | 2007-02-21 12:55:37 +0100 (Wed, 21 Feb 2007) | 2 lines

modified surface renderer batching to batch all lightmapped surfaces with the same texture together, rather than a separate batch for each lightmap texture, this means that the lightmap switching overhead is lower than before, no apparent improvement in benchmarks though

------------------------------------------------------------------------
r6882 | havoc | 2007-02-21 05:38:56 +0100 (Wed, 21 Feb 2007) | 2 lines

fixed bug that was causing seta commands to usually not save to config.cfg (due to the value being copied to their default when they are created, causing the default matching to prevent them from being saved before)

------------------------------------------------------------------------
r6881 | havoc | 2007-02-21 04:23:13 +0100 (Wed, 21 Feb 2007) | 2 lines

changed collision nudging to behave like quake2/3, properly handling shallow impacts (not allowing them to go any deeper if they are within epsilon)

------------------------------------------------------------------------
r6880 | havoc | 2007-02-20 13:34:38 +0100 (Tue, 20 Feb 2007) | 2 lines

added model->brush.TraceLineOfSight function, this traces the rendering hull and treats leafs with no pvs as solid (meaning it traces the structural rendering hull in q3bsp, ignoring detail brushes and patches), this function is now used by sv_cullentities_trace for higher performance, and it does not stop at solid transparent surfaces such as the chainlink fences in the nexuiz map toxic.bsp

------------------------------------------------------------------------
r6879 | havoc | 2007-02-20 13:32:03 +0100 (Tue, 20 Feb 2007) | 2 lines

fix some crashes related to particles when csqc is not active

------------------------------------------------------------------------
r6878 | havoc | 2007-02-20 09:07:48 +0100 (Tue, 20 Feb 2007) | 3 lines

added mleaf_t->containscollisionsurfaces variable which indicates if the leafsurfaces array contains any q3 patches to collide against, checking this saves a substantial amount of time on collision detection in q3bsp (as few leafs actually contain patches, but many contain other kinds of surfaces)
added combinedsupercontents variable to mnode_t and mleaf_t, this was intended for collision culling but is not actually used (checks are implemented but commented out, because there was no measurable speed increase, and it could cause inconsistent results for startcontents when tracing objects larger than a point test - since point tests are always about contents there is no such culling performed in that case)

------------------------------------------------------------------------
r6877 | havoc | 2007-02-20 09:04:28 +0100 (Tue, 20 Feb 2007) | 2 lines

added scr_refresh cvar which is similar to r_render but disables the entire render code rather than merely disabling the glDraw calls

------------------------------------------------------------------------
r6876 | havoc | 2007-02-20 04:27:08 +0100 (Tue, 20 Feb 2007) | 2 lines

changed reconnect command description

------------------------------------------------------------------------
r6875 | havoc | 2007-02-20 04:25:24 +0100 (Tue, 20 Feb 2007) | 2 lines

made reconnect command reconnect to the last server you were on, even if it was an nq server (previously this only worked on qw servers)

------------------------------------------------------------------------
r6874 | havoc | 2007-02-20 02:18:22 +0100 (Tue, 20 Feb 2007) | 2 lines

changed Q3SURFACEPARM_ANTIPORTAL to be an unsigned constant

------------------------------------------------------------------------
r6873 | havoc | 2007-02-20 01:25:57 +0100 (Tue, 20 Feb 2007) | 3 lines

added parsing of surfaceparm antiportal
added support of "noshader" (treated the same as nodraw, basically)

------------------------------------------------------------------------
r6872 | havoc | 2007-02-20 00:17:21 +0100 (Tue, 20 Feb 2007) | 2 lines

moved cl.movesequence/cl.servermovesequence to cls. struct, this keeps the movesequence from level to level and fixes level change problems on old servers

------------------------------------------------------------------------
r6871 | havoc | 2007-02-20 00:05:27 +0100 (Tue, 20 Feb 2007) | 2 lines

reenabled network culling of bmodels (optional however), this should improve network performance in some nexuiz levels, and a few quake levels, it means that blood and decals do not interact with bmodels in other rooms however

------------------------------------------------------------------------
r6870 | havoc | 2007-02-19 11:15:11 +0100 (Mon, 19 Feb 2007) | 2 lines

reworked packet sending code a bit more, this is mostly just a cleanup, not a change in logic, except that cl_movement 0 now reports the correct ping time to the server, so local players get ping 0 as they used to

------------------------------------------------------------------------
r6869 | havoc | 2007-02-19 10:08:16 +0100 (Mon, 19 Feb 2007) | 3 lines

fixed stair smoothing code so it no longer jitters when riding lifts
added support for cl_stairsmoothspeed 0 as a means of disabling stair smoothing

------------------------------------------------------------------------
r6868 | havoc | 2007-02-19 08:48:09 +0100 (Mon, 19 Feb 2007) | 3 lines

changed FL_ONGROUND handling for pushers (lifts for example) so you now ride down lifts, rather than repeatedly falling and hitting the lift
cleaned up FL_ONGROUND handling for items riding pushers, so they now only lose their FL_ONGROUND status if the move is blocked

------------------------------------------------------------------------
r6867 | havoc | 2007-02-19 07:21:30 +0100 (Mon, 19 Feb 2007) | 2 lines

changed how CL_PrintEntities_f prints the model name, this seems to fix the garbage characters bug

------------------------------------------------------------------------
r6866 | havoc | 2007-02-19 06:53:32 +0100 (Mon, 19 Feb 2007) | 2 lines

fix broken SOLID_CORPSE collisions

------------------------------------------------------------------------
r6865 | havoc | 2007-02-19 06:53:11 +0100 (Mon, 19 Feb 2007) | 2 lines

fix two 'wrong number of parameters' errors

------------------------------------------------------------------------
r6864 | havoc | 2007-02-19 02:52:37 +0100 (Mon, 19 Feb 2007) | 2 lines

fix an uninitialized variable

------------------------------------------------------------------------
r6863 | havoc | 2007-02-19 02:46:44 +0100 (Mon, 19 Feb 2007) | 2 lines

fixed parmcount check on VM_SV_AddStat from 2 parameters to 3

------------------------------------------------------------------------
r6862 | havoc | 2007-02-19 02:33:38 +0100 (Mon, 19 Feb 2007) | 7 lines

this patch may break things and needs testing
major cleanup of csqc and ssqc builtin tables
minimized differences between csqc and ssqc builtin tables (everything that can be implemented in both is implemented in both)
added VM_SAFEPARMCOUNTRANGE to allow a function to have, for example, 2-4 parameters (where as VM_SAFEPARMCOUNT requires it to be an exact match)
added VM_SAFEPARMCOUNT or VM_SAFEPARMCOUNTRANGE to ALL builtins, this may break buggy qc (and it's possible that one or more of these checks are wrong)
replaced CL_TraceBox with CL_Move, this is a proper csqc-entity aware version akin to SV_Move, it has a ton of parameters due to support for network entity collisions as well (ideally this needs cleanup somehow but I have no idea how, as non-csqc network entities do not share the prvm_edict_t system and do not have entity numbers in the csqc world)

------------------------------------------------------------------------
r6861 | havoc | 2007-02-19 02:24:44 +0100 (Mon, 19 Feb 2007) | 2 lines

fix shading seams along uv seams on compiled frame zero of mdl/md2/md3 models

------------------------------------------------------------------------
r6860 | havoc | 2007-02-19 02:15:58 +0100 (Mon, 19 Feb 2007) | 2 lines

fixed support of progs.dat files with important global and field names removed, such as omicron bot reporting that OP_STATE is not supported because it removed the field names

------------------------------------------------------------------------
r6858 | havoc | 2007-02-19 01:10:39 +0100 (Mon, 19 Feb 2007) | 3 lines

removed vm_cl_extensions (now uses vm_sv_extensions)
cleaned up fieldoffsets/globaloffsets/funcoffsets fetching code (including removal of some duplicates) and sorted the contents of the structs to match the new order of the code

------------------------------------------------------------------------
r6857 | havoc | 2007-02-19 00:39:54 +0100 (Mon, 19 Feb 2007) | 2 lines

fixed an evil ent->fields.vp access that was not using PRVM_EDICTFIELDVALUE

------------------------------------------------------------------------
r6856 | havoc | 2007-02-19 00:10:19 +0100 (Mon, 19 Feb 2007) | 2 lines

added an error message stating if an image file was loaded but decoding failed

------------------------------------------------------------------------
r6855 | havoc | 2007-02-18 13:57:43 +0100 (Sun, 18 Feb 2007) | 2 lines

added svc_trailparticles and svc_pointparticles, these are written by the trailparticles and pointparticles server builtins (matching the csqc ones), these can utilize any effect defined in effectinfo.txt without using csqc

------------------------------------------------------------------------
r6854 | havoc | 2007-02-18 13:49:24 +0100 (Sun, 18 Feb 2007) | 2 lines

renamed CL_Move to CL_Input to avoid confusion with the CL_Move that will be added (similar to SV_Move)

------------------------------------------------------------------------
r6853 | havoc | 2007-02-18 13:47:17 +0100 (Sun, 18 Feb 2007) | 2 lines

added generic collision functions Collision_ClipToGenericEntity, Collision_ClipToWorld, and Collision_CombineTraces to allow reduction of similar code in csqc and ssqc

------------------------------------------------------------------------
r6852 | havoc | 2007-02-18 13:45:26 +0100 (Sun, 18 Feb 2007) | 2 lines

changed fieldoffsets and globaloffsets to be integer array indices instead of byte offsets, this basically means d->ofs is no longer multiplied by 4 in PRVM_ED_FindFieldOffset and PRVM_ED_FindGlobalOffset

------------------------------------------------------------------------
r6851 | havoc | 2007-02-18 13:41:11 +0100 (Sun, 18 Feb 2007) | 4 lines

a cosmetic change as suggested by div0:
renamed PRVM_GETEDICTFIELDVALUE to PRVM_EDICTFIELDVALUE
renamed PRVM_GETGLOBALFIELDVALUE to PRVM_GLOBALFIELDVALUE

------------------------------------------------------------------------
r6850 | havoc | 2007-02-18 13:35:52 +0100 (Sun, 18 Feb 2007) | 2 lines

allow non-integer framerates for q3 shader animmap commands

------------------------------------------------------------------------
r6849 | havoc | 2007-02-18 12:53:09 +0100 (Sun, 18 Feb 2007) | 2 lines

fixed a bug with png loading on x86_64 platforms caused by libpng retardedness (it defines png_uint_32 as unsigned long, which is 64bit on such architectures, AND to make it worse this can be modified in pngconf.h on a per platform basis, so we detect the problem on big endian 64bit architectures and fix it there too)

------------------------------------------------------------------------
r6848 | black | 2007-02-17 12:27:09 +0100 (Sat, 17 Feb 2007) | 4 lines

Hopefully this fixes a bug introduced with the latest cleanup by LH.
Changed the menu code to always show the old quake menu if forceqmenu is set
(even if it lacks the gfx files).

------------------------------------------------------------------------
r6847 | havoc | 2007-02-16 23:25:44 +0100 (Fri, 16 Feb 2007) | 2 lines

reduced r_shadow_glossintensity from 2 to 1 by default

------------------------------------------------------------------------
r6846 | havoc | 2007-02-16 03:26:48 +0100 (Fri, 16 Feb 2007) | 2 lines

the record command now disconnects you if starting a new map, this fixes a crash if doing "playdemo demo1;record test;stop"

------------------------------------------------------------------------
r6845 | havoc | 2007-02-15 22:41:07 +0100 (Thu, 15 Feb 2007) | 2 lines

changed SCR_DrawConsole call in csqc mode to match non-csqc mode (now draws after sbar)

------------------------------------------------------------------------
r6844 | havoc | 2007-02-15 08:55:14 +0100 (Thu, 15 Feb 2007) | 2 lines

fix an uninitialized variable warnign

------------------------------------------------------------------------
r6843 | havoc | 2007-02-15 01:13:49 +0100 (Thu, 15 Feb 2007) | 3 lines

cleaned up client qc, menu qc, and server qc VM initialization a bit so they have shared field/global/function lookup code,
changed world.c to not be server specific, moved server-specific functions to sv_phys.c

------------------------------------------------------------------------
r6842 | havoc | 2007-02-15 01:11:29 +0100 (Thu, 15 Feb 2007) | 2 lines

added gl_lockarrays_minimumvertices cvar for testing

------------------------------------------------------------------------
r6841 | havoc | 2007-02-15 01:07:21 +0100 (Thu, 15 Feb 2007) | 2 lines

removed unused world_cs.c code

------------------------------------------------------------------------
r6840 | havoc | 2007-02-14 22:22:16 +0100 (Wed, 14 Feb 2007) | 3 lines

added a check for level changes which blocks prediction for 100ms at the beginning of the new level, and clears ping time and other information
refactored input parsing to buffer moves in sv_readmoves array, this means that it can now always trust the last move in the packet, never ignored like earlier ones (which are clearly repeats of earlier input)

------------------------------------------------------------------------
r6839 | havoc | 2007-02-14 22:09:55 +0100 (Wed, 14 Feb 2007) | 2 lines

some initial changes to support terrain texture blending someday

------------------------------------------------------------------------
r6838 | havoc | 2007-02-14 07:54:24 +0100 (Wed, 14 Feb 2007) | 2 lines

added bounding of info->particleaccumulator so that bogus values won't cause a very long loop

------------------------------------------------------------------------
r6837 | havoc | 2007-02-14 07:53:36 +0100 (Wed, 14 Feb 2007) | 2 lines

fix bug that caused trails to not appear at the right place

------------------------------------------------------------------------
r6836 | havoc | 2007-02-13 00:38:01 +0100 (Tue, 13 Feb 2007) | 2 lines

added cl_nettimesyncmode cvar to choose the method of synchronizing cl.time, it defaults to resetting the cl.time to the previous packet's time, but only when it is out of bounds (meaning it increases it if it is falling behind, and snaps it back to the previous packet time if it exceeds this packet's time, which eliminates accumulated error)

------------------------------------------------------------------------
r6835 | havoc | 2007-02-13 00:24:09 +0100 (Tue, 13 Feb 2007) | 2 lines

sendcvar now quotes the resulting sentcvar value

------------------------------------------------------------------------
r6834 | havoc | 2007-02-12 21:36:11 +0100 (Mon, 12 Feb 2007) | 2 lines

removed cl.timenonlerp (reverted to using cl.time)

------------------------------------------------------------------------
r6833 | havoc | 2007-02-12 20:27:57 +0100 (Mon, 12 Feb 2007) | 2 lines

changed particleaccumulator check to use >= 1 instead of > 0, hopefully this will fix an infinite loop I encountered in testing

------------------------------------------------------------------------
r6832 | havoc | 2007-02-12 17:44:09 +0100 (Mon, 12 Feb 2007) | 2 lines

fixed problems with network entity viewmodels not following csqc_origin (as set by csqc)

------------------------------------------------------------------------
r6831 | havoc | 2007-02-12 17:43:15 +0100 (Mon, 12 Feb 2007) | 2 lines

minor cleaning

------------------------------------------------------------------------
r6830 | havoc | 2007-02-12 17:42:46 +0100 (Mon, 12 Feb 2007) | 2 lines

disabled saveconfig when doing -benchmark

------------------------------------------------------------------------
r6828 | havoc | 2007-02-12 00:08:29 +0100 (Mon, 12 Feb 2007) | 2 lines

downloads of .cfg and dlcache/ files are now forbidden by default (cvar controlled)

------------------------------------------------------------------------
r6827 | havoc | 2007-02-11 23:43:43 +0100 (Sun, 11 Feb 2007) | 2 lines

reworked Image_HeightmapToNormalmap to use a somewhat blurrier but more consistent algorithm

------------------------------------------------------------------------
r6826 | havoc | 2007-02-11 18:44:59 +0100 (Sun, 11 Feb 2007) | 4 lines

modified Mod_LoadSkinFrame to set base = r_texture_notexture on failure, this reduced fallback code elsewhere
reworked Mod_BuildAliasSkinsFromSkinFiles, it no longer tries fallbacks if a skin texture fails to load
fixed a crash on missing meshes in a skin file (which are intentionally nodraw, just like in Quake3)

------------------------------------------------------------------------
r6825 | havoc | 2007-02-11 16:52:17 +0100 (Sun, 11 Feb 2007) | 2 lines

disabled cl.stairoffset adjustments when airborn

------------------------------------------------------------------------
r6824 | havoc | 2007-02-11 16:27:18 +0100 (Sun, 11 Feb 2007) | 2 lines

some optimizations of CL_UpdateNetworkEntity to lower cpu overhead of the client

------------------------------------------------------------------------
r6823 | havoc | 2007-02-11 03:12:16 +0100 (Sun, 11 Feb 2007) | 2 lines

fix gamedir error when connecting to quakeworld servers

------------------------------------------------------------------------
r6822 | havoc | 2007-02-11 02:59:02 +0100 (Sun, 11 Feb 2007) | 2 lines

added an extern for r_bloom_brighten to fix menu.c compilation

------------------------------------------------------------------------
r6821 | havoc | 2007-02-10 23:44:46 +0100 (Sat, 10 Feb 2007) | 2 lines

fixed r_bloom_brighten to use the correct range

------------------------------------------------------------------------
r6820 | havoc | 2007-02-10 23:43:41 +0100 (Sat, 10 Feb 2007) | 3 lines

added r_bloom_brighten modification in graphics options menu, this was already displayed but wasn't working, messing up all options after it
updated graphics options item count from 19 to 20

------------------------------------------------------------------------
r6819 | havoc | 2007-02-10 23:01:19 +0100 (Sat, 10 Feb 2007) | 2 lines

fix graphics options menu editing of bloom/scene brightness settings (they were swapped)

------------------------------------------------------------------------
r6818 | havoc | 2007-02-10 22:17:06 +0100 (Sat, 10 Feb 2007) | 3 lines

fix stupid bug in last patch that made entities not update
reworked priorities some more

------------------------------------------------------------------------
r6817 | havoc | 2007-02-10 21:31:19 +0100 (Sat, 10 Feb 2007) | 3 lines

fixed bug from lingering code that was resetting entity priority every frame
more tweaks to entity priority code

------------------------------------------------------------------------
r6816 | havoc | 2007-02-10 21:06:49 +0100 (Sat, 10 Feb 2007) | 2 lines

fix a stupid bug in transparent water detection for q1bsp, it now works

------------------------------------------------------------------------
r6815 | havoc | 2007-02-09 22:17:37 +0100 (Fri, 09 Feb 2007) | 2 lines

changed entity priority code again, it should have less 'starvation' issues now (high priority entities causing others to be missed)

------------------------------------------------------------------------
r6814 | havoc | 2007-02-09 05:36:48 +0100 (Fri, 09 Feb 2007) | 2 lines

reenabled exact portal culling of surface triangles, because it was not bugged after all

------------------------------------------------------------------------
r6813 | havoc | 2007-02-09 05:24:27 +0100 (Fri, 09 Feb 2007) | 2 lines

some minor state change optimizations on GL20 path, it now does even less per batch

------------------------------------------------------------------------
r6812 | havoc | 2007-02-09 04:26:24 +0100 (Fri, 09 Feb 2007) | 2 lines

made r_shadow_frontsidecasting cvar disable the portal culling features when it is casting from back sides (which portal culling can't work with)

------------------------------------------------------------------------
r6811 | havoc | 2007-02-09 04:22:34 +0100 (Fri, 09 Feb 2007) | 2 lines

added back portal culling to rtlights because svbsp code is not working as well as it's supposed to

------------------------------------------------------------------------
r6810 | havoc | 2007-02-09 02:19:05 +0100 (Fri, 09 Feb 2007) | 2 lines

fix Q3BSP map loader's sky surface detection so that it doesn't assume all submodels have sky if the base model does, this improves rendering performance a bit (by not scanning for sky in submodels that claim to have it but don't)

------------------------------------------------------------------------
r6809 | havoc | 2007-02-08 16:57:21 +0100 (Thu, 08 Feb 2007) | 12 lines

removed CL_UpdateEntities call in CSQC rendering code
changed r_refdef.lights from dlight_t * to rtlight_t (no longer a pointer)
modified CL_UpdateLights to setup the r_refdef.lights[] entry instead of merely pointing to the rtlight_t in the dlight_t struct
changed csqc dlight handling to comply with the spec (R_ClearScene resets r_refdef.numlights, then VM_R_AddEntities adds all engine-based entities and lights)
moved single-frame dlight spawning for rocket glow and such from CL_UpdateNetworkEntity to CL_LinkNetworkEntity (which is called by VM_R_AddEntities)
replaced all single-frame uses of CL_AllocDLight with R_RTLight_Update(&r_refdef.lights[r_refdef.numlights++], ...) calls, this includes lights such as muzzleflash, rocket glow, .glow_size lights, tenebrae dlights, etc
renamed CL_AllocDlight to CL_AllocLightFlash
renamed CL_DecayLights to CL_DecayLightFlashes
renamed CL_UpdateLights to CL_RelinkLightFlashes
renamed CL_ParticleEffect to CL_ParticleTrail and added spawndlight/spawnparticles boolean parameters, then added a CL_ParticleEffect which calls this with true for both
removed cubemapnum field from dlight_t

------------------------------------------------------------------------
r6808 | havoc | 2007-02-08 16:56:40 +0100 (Thu, 08 Feb 2007) | 2 lines

added DP_QC_STRFTIME extension to menu vm (somehow I missed this when committing earlier)

------------------------------------------------------------------------
r6807 | havoc | 2007-02-08 16:56:10 +0100 (Thu, 08 Feb 2007) | 2 lines

reworked entity priority handling in DP6/7 protocols to better utilize limited bandwidth and just be cleaner code in general

------------------------------------------------------------------------
r6806 | havoc | 2007-02-08 16:37:08 +0100 (Thu, 08 Feb 2007) | 2 lines

disabled use of certain prediction code when the server has blocked prediction

------------------------------------------------------------------------
r6805 | havoc | 2007-02-08 16:13:27 +0100 (Thu, 08 Feb 2007) | 2 lines

lowered minimum maxpacketsize from 100 bytes to 50 bytes (this means rate 1000 will be honored at the default sys_ticrate 0.05)

------------------------------------------------------------------------
r6803 | havoc | 2007-02-08 11:15:36 +0100 (Thu, 08 Feb 2007) | 2 lines

added DP_QC_STRFTIME extension

------------------------------------------------------------------------
r6802 | havoc | 2007-02-07 19:39:41 +0100 (Wed, 07 Feb 2007) | 2 lines

added a check for move->sequence that is more than 16 packets old to avoid having frozen players after a level change

------------------------------------------------------------------------
r6801 | havoc | 2007-02-06 09:43:08 +0100 (Tue, 06 Feb 2007) | 2 lines

some slight cleanup of CL_LerpPoint, and now does a bound() on cl.time as well as cl.timenonlerp whenever cl.mtime[] is updated

------------------------------------------------------------------------
r6800 | havoc | 2007-02-06 09:36:14 +0100 (Tue, 06 Feb 2007) | 2 lines

tolerate clients living up to one frame in the future, just to be more flexible with client prediction

------------------------------------------------------------------------
r6799 | havoc | 2007-02-06 09:18:50 +0100 (Tue, 06 Feb 2007) | 4 lines

no longer sends moves if time is not moving forward, except when paused (this fixes some bugs causing cl_movement 0 to lose impulse/buttons)
no longer repeats old moves if cl_movement is off (because they would serve no purpose)
eliminated cl.movemessages (now uses cl.movesequence for the same purpose)

------------------------------------------------------------------------
r6798 | havoc | 2007-02-06 06:38:08 +0100 (Tue, 06 Feb 2007) | 2 lines

fix very stupid typo in input merging when cl_movement is 0

------------------------------------------------------------------------
r6797 | havoc | 2007-02-05 18:53:30 +0100 (Mon, 05 Feb 2007) | 2 lines

disabled debug print I forgot about

------------------------------------------------------------------------
r6796 | havoc | 2007-02-05 18:45:59 +0100 (Mon, 05 Feb 2007) | 6 lines

redesigned input networking code (still same protocol) and did a lot of cleaning, now predicts movement even if server packets are lost
added cl_netinputpacketlosstolerance cvar (default 4, qw used 2, can be up to 16) to repeat old input messages in each packet so that they can only be lost by heavy packet loss
changed sv_clmovement_waitforinput default to 16 to match this capability
reworked a lot of timing code related to input networking
fixed some bugs when frametime is 0 in player physics

------------------------------------------------------------------------
r6795 | havoc | 2007-02-05 16:47:55 +0100 (Mon, 05 Feb 2007) | 2 lines

thanks to morfar for updating the Dev-C++ project file

------------------------------------------------------------------------
r6794 | havoc | 2007-02-05 14:32:09 +0100 (Mon, 05 Feb 2007) | 2 lines

changed default sv_clmovement_minping from 100 to 0

------------------------------------------------------------------------
r6793 | havoc | 2007-02-05 10:04:01 +0100 (Mon, 05 Feb 2007) | 2 lines

fixed double-jump bug in prediction when jumping up sides of crates or on stairs

------------------------------------------------------------------------
r6792 | havoc | 2007-02-05 09:55:12 +0100 (Mon, 05 Feb 2007) | 2 lines

fix q1bsp detection of stuck entities (needed some more parentheses)

------------------------------------------------------------------------
r6791 | havoc | 2007-02-05 09:41:34 +0100 (Mon, 05 Feb 2007) | 2 lines

removed an unneeded extern prototype

------------------------------------------------------------------------
r6790 | havoc | 2007-02-05 09:39:49 +0100 (Mon, 05 Feb 2007) | 2 lines

removed an unneeded cl.movement_replay = true; line

------------------------------------------------------------------------
r6789 | havoc | 2007-02-04 13:55:09 +0100 (Sun, 04 Feb 2007) | 2 lines

fix a couple printf format string warnings that only occur with COLLISIONPARANOID on

------------------------------------------------------------------------
r6788 | havoc | 2007-02-04 13:54:09 +0100 (Sun, 04 Feb 2007) | 2 lines

refactored end code in Collision_Trace*BrushFloat functions to fix a severe logic bug that caused players to get stuck inside eachother in nexuiz

------------------------------------------------------------------------
r6787 | havoc | 2007-02-04 12:27:42 +0100 (Sun, 04 Feb 2007) | 4 lines

minor optimization of surface scanning
minor optimization of leaf recursion
added a leafstack overflow check to visibility flooding

------------------------------------------------------------------------
r6786 | havoc | 2007-02-04 09:32:57 +0100 (Sun, 04 Feb 2007) | 2 lines

added r_showsurfaces 2 mode which shorts triangle draw order (to analyze whether models are optimized for vertex cache)

------------------------------------------------------------------------
r6785 | havoc | 2007-02-03 14:01:36 +0100 (Sat, 03 Feb 2007) | 2 lines

revised sv_clmovement_waitforinput default from 2 to 5 frames to have more tolerance for inconsistent packet timing

------------------------------------------------------------------------
r6782 | havoc | 2007-02-03 13:10:03 +0100 (Sat, 03 Feb 2007) | 2 lines

added DP_SV_PRINT extension

------------------------------------------------------------------------
r6781 | havoc | 2007-02-03 13:08:54 +0100 (Sat, 03 Feb 2007) | 2 lines

made CL_SetInfo check for more forbidden characters (key now refuses any form of whitespace, value now refuses \r and \n) and refactored the checking code to make it a bit cleaner

------------------------------------------------------------------------
r6780 | havoc | 2007-02-03 13:07:59 +0100 (Sat, 03 Feb 2007) | 2 lines

moved DP_QC_UNLIMITEDTEMPSTRINGS in extensions list to its proper place

------------------------------------------------------------------------
r6779 | havoc | 2007-02-03 09:49:02 +0100 (Sat, 03 Feb 2007) | 2 lines

added r_shadow_frontsidecasting cvar (default 1), this allows switching to back-side casting instead, however this has proven buggy so it is not to be used yet

------------------------------------------------------------------------
r6778 | havoc | 2007-02-03 09:40:38 +0100 (Sat, 03 Feb 2007) | 2 lines

optimized trimesh collision culling (this mostly affects patches)

------------------------------------------------------------------------
r6777 | havoc | 2007-02-03 07:33:07 +0100 (Sat, 03 Feb 2007) | 2 lines

fix really stupid typo in previous patch that caused a memory smash

------------------------------------------------------------------------
r6776 | havoc | 2007-02-03 06:19:55 +0100 (Sat, 03 Feb 2007) | 2 lines

fix bug in Collision_SnapCopyPoints that made it only snap the first vertex

------------------------------------------------------------------------
r6775 | havoc | 2007-02-03 05:03:01 +0100 (Sat, 03 Feb 2007) | 2 lines

removed single-quoted string support in console parser because it breaks the maplist in nexuiz

------------------------------------------------------------------------
r6774 | havoc | 2007-02-03 04:36:26 +0100 (Sat, 03 Feb 2007) | 2 lines

fixed two bugs that caused a constant state of "player stuck" (one was that it always thought this was a q1bsp/hlbsp map, and the other was that the q1bsp/hlbsp corner checking was checking the wrong locations)

------------------------------------------------------------------------
r6773 | havoc | 2007-02-03 04:08:57 +0100 (Sat, 03 Feb 2007) | 2 lines

fixed bug in AVI RIFF chunk 1GB size limiting code (it was not accounting for the index buffer size which will be written afterward) which was causing the chunk to often exceed 1GB

------------------------------------------------------------------------
r6772 | havoc | 2007-02-02 15:39:13 +0100 (Fri, 02 Feb 2007) | 2 lines

moved interpolation of viewangles when playing back demos or spectating someone to a better place, this should work better with csqc

------------------------------------------------------------------------
r6771 | tomaz | 2007-01-29 22:32:09 +0100 (Mon, 29 Jan 2007) | 2 lines

Updated the workspaces to include svbsp.c and svbsp.h

------------------------------------------------------------------------
r6770 | havoc | 2007-01-29 11:33:33 +0100 (Mon, 29 Jan 2007) | 2 lines

497

------------------------------------------------------------------------
r6769 | havoc | 2007-01-29 11:31:14 +0100 (Mon, 29 Jan 2007) | 2 lines

reverted r_bloom_colorsubtract and r_shadow_brighten defaults to 0.125 and 2

------------------------------------------------------------------------
r6768 | havoc | 2007-01-29 11:20:05 +0100 (Mon, 29 Jan 2007) | 2 lines

changed default r_shadow_gloss2intensity from 0.5 to 0.125, now looks more like tenebrae again (except a little better)

------------------------------------------------------------------------
r6767 | havoc | 2007-01-29 10:52:31 +0100 (Mon, 29 Jan 2007) | 2 lines

fix very stupid bug in svbsp calls that made only the first triangle of an occluding surface polygon be inserted into the svbsp, and some other cleanup/corrections

------------------------------------------------------------------------
r6766 | havoc | 2007-01-29 10:51:20 +0100 (Mon, 29 Jan 2007) | 2 lines

some minor optimizations, comment corrections, and changed debug polygon colors

------------------------------------------------------------------------
r6765 | havoc | 2007-01-29 08:51:07 +0100 (Mon, 29 Jan 2007) | 2 lines

fix stupid bug in insertion of occluder triangles in the svbsp code (it was stopping after adding the first one)

------------------------------------------------------------------------
r6763 | havoc | 2007-01-28 09:25:15 +0100 (Sun, 28 Jan 2007) | 2 lines

corrected OPTIONS_ITEMS and OPTIONS_GRAPHICS_ITEMS constants (the last 3 items of the graphics options submenu were not reachable)

------------------------------------------------------------------------
r6762 | havoc | 2007-01-28 05:14:59 +0100 (Sun, 28 Jan 2007) | 2 lines

fix stupid bug (dynamic shadowing from models was checking if NOSHADOW was set, not if it was clear)

------------------------------------------------------------------------
r6761 | havoc | 2007-01-28 03:57:51 +0100 (Sun, 28 Jan 2007) | 2 lines

implemented Shadow Volume BSP based culling of lit surfaces, this is slightly better than the existing portal culling code (or much better in the case of detail brush terrain in q3bsp where little culling was performed previously), and is now the only culling method used by rtlight compilation

------------------------------------------------------------------------
r6760 | havoc | 2007-01-28 03:55:15 +0100 (Sun, 28 Jan 2007) | 2 lines

added MATERIALFLAG_NOSHADOW in an effort to clean up the material checking in shadow code a bit

------------------------------------------------------------------------
r6759 | havoc | 2007-01-28 03:52:41 +0100 (Sun, 28 Jan 2007) | 3 lines

patch from Tomaz adding a proper matrix inverter, it should be able to invert any matrix that is possible to invert, but is VERY slow, and consequently Matrix4x4_Invert_Simple has been kept for speed reasons
it is probably possible to optimize this function significantly, and it would also be possible to add non-uniform-scaling inversion to Matrix4x4_Invert_Simple to make it more flexible

------------------------------------------------------------------------
r6758 | havoc | 2007-01-28 03:50:32 +0100 (Sun, 28 Jan 2007) | 2 lines

added Debug_Polygon functions for testing, these are currently abusing the CSQC polygon queue and have many stupid limitations which should be cleaned up at some point, but it is now possible to call these to draw things for debugging purposes

------------------------------------------------------------------------
r6757 | havoc | 2007-01-26 06:58:43 +0100 (Fri, 26 Jan 2007) | 3 lines

changed sbar stats (Monsters/Secrets/Time/map title) around a bit, inspired by a patch from steven a but not directly based on it
specific changes: Monsters/Secrets are now on top row (rather than left side), map filename (minus path/extension) and map title are shown, time moved to far right of second row

------------------------------------------------------------------------
r6756 | havoc | 2007-01-25 17:27:19 +0100 (Thu, 25 Jan 2007) | 2 lines

fixed renderflags handling in CSQC_AddRenderEdict

------------------------------------------------------------------------
r6755 | havoc | 2007-01-25 17:07:30 +0100 (Thu, 25 Jan 2007) | 2 lines

clients who are downloading can now receive chat messages and other notices

------------------------------------------------------------------------
r6754 | havoc | 2007-01-24 22:27:06 +0100 (Wed, 24 Jan 2007) | 2 lines

disabled use of Portal_PortalThroughPortalPlanes on triangles in exact triangle culling mode because it was falsely culling some polygons (particularly in start.bsp), this makes the culling less exact unfortunately

------------------------------------------------------------------------
r6753 | havoc | 2007-01-24 22:26:13 +0100 (Wed, 24 Jan 2007) | 2 lines

fixed bug where toggling r_shadow_realtime_world_compile would alter the culling boxes of the compiled rtlights when in the non-compiled state

------------------------------------------------------------------------
r6750 | havoc | 2007-01-24 19:40:26 +0100 (Wed, 24 Jan 2007) | 2 lines

added BX_WAL_SUPPORT to extensions list and documented it (.wal texture support has been in for a long time before this)

------------------------------------------------------------------------
r6749 | havoc | 2007-01-24 18:48:49 +0100 (Wed, 24 Jan 2007) | 5 lines

some cleanup of shader permutation handling
expanded shader permutation system to allow multiple shader source files (not sure if this will ever be used) rather than just "glsl/default.glsl"
added code support for geometry shaders (not actually hooked up because there's no GL_ARB_geometry_shader extension yet)
added flagging of which shader objects are needed by a given permutation (to allow vertex-only shaders for shadow volume projection and such, also not implemented)

------------------------------------------------------------------------
r6748 | havoc | 2007-01-24 15:21:05 +0100 (Wed, 24 Jan 2007) | 2 lines

fix a few typos in comments

------------------------------------------------------------------------
r6747 | havoc | 2007-01-24 15:19:39 +0100 (Wed, 24 Jan 2007) | 2 lines

replaced prvm_tempstringmemory cvar with automatic buffer growth (with a limit of 256MB)

------------------------------------------------------------------------
r6746 | havoc | 2007-01-24 05:15:45 +0100 (Wed, 24 Jan 2007) | 4 lines

redesigned tempstring system, now uses a fixed size buffer based on the prvm_tempstringmemory cvar (this is probably safe to automatically resize in the future but is not currently resized)
audited PRVM_G_STRING use in the engine (eliminated many NULL checks in functions because it never returns NULL)
added DP_QC_UNLIMITEDTEMPSTRINGS extension to indicate this new tempstring system's wonderous features (not yet documented)

------------------------------------------------------------------------
r6745 | havoc | 2007-01-24 04:56:16 +0100 (Wed, 24 Jan 2007) | 3 lines

added r_hdr_range cvar (which just divides r_bloom_colorscale and multiplies r_bloom_brighten)
changed default r_bloom_brighten from 2 to 1 and r_bloom_colorsubtract from 0.125 to 0, this gives a more color-preserving bloom effect and actually seems brighter in many cases

------------------------------------------------------------------------
r6744 | havoc | 2007-01-23 20:36:14 +0100 (Tue, 23 Jan 2007) | 2 lines

another minor cleanup for static entities related to delayed model loading (no bugs involved though)

------------------------------------------------------------------------
r6743 | havoc | 2007-01-23 20:34:20 +0100 (Tue, 23 Jan 2007) | 2 lines

fixed bug in CL_RelinkStaticEntities related to delayed model loading, now calls CL_UpdateRenderEntity so the culling box is correct

------------------------------------------------------------------------
r6742 | havoc | 2007-01-23 17:58:57 +0100 (Tue, 23 Jan 2007) | 2 lines

changed Cmd_StuffCmds_f to combine the entire set of commandline arguments into one string before calling Cbuf_InsertText, this fixes the reverse order execution bug (where +deathmatch 7 +map dpdm2 would execute deathmatch 7 AFTER starting the map, which was useless until a restart command was issued)

------------------------------------------------------------------------
r6741 | havoc | 2007-01-23 17:51:26 +0100 (Tue, 23 Jan 2007) | 2 lines

fix bug in GL_CullFace which was causing it to often malfunction

------------------------------------------------------------------------
r6740 | havoc | 2007-01-23 04:12:39 +0100 (Tue, 23 Jan 2007) | 2 lines

504 (-7)

------------------------------------------------------------------------
r6739 | havoc | 2007-01-23 04:02:53 +0100 (Tue, 23 Jan 2007) | 2 lines

changed the not-very-useful min/avg/max part of timedemo results to one-second min/avg/max

------------------------------------------------------------------------
r6738 | havoc | 2007-01-23 02:40:36 +0100 (Tue, 23 Jan 2007) | 3 lines

fixed bug in CSQC_AddRenderEdict (it was using the tempentity's modelindex rather than the vm entity, meaning that csqc entities never had a visible model)
reduced code by merging cl.csqc_model_precache lookups into CSQC_GetModelByIndex and CSQC_GetModelFromEntity functions

------------------------------------------------------------------------
r6737 | havoc | 2007-01-23 01:43:51 +0100 (Tue, 23 Jan 2007) | 2 lines

eliminated cl.csqc_entities array and related fields

------------------------------------------------------------------------
r6736 | havoc | 2007-01-23 01:27:49 +0100 (Tue, 23 Jan 2007) | 3 lines

significant cleanup of CL_UpdateEntities, GL_UpdateNetworkEntity, CL_LinkNetworkEntity, V_CalcRefdef handling, and CSQC issues related to these
eliminated linkframe from entity_t (this means CL_UpdateNetworkEntity may sometimes process an entity twice, and CL_LinkNetworkEntity is no longer recursive as it does not need to be)

------------------------------------------------------------------------
r6735 | havoc | 2007-01-23 00:16:00 +0100 (Tue, 23 Jan 2007) | 2 lines

fix a couple warnings (one of them more serious than the other)

------------------------------------------------------------------------
r6734 | havoc | 2007-01-22 23:14:47 +0100 (Mon, 22 Jan 2007) | 2 lines

added support for single-quoted strings in COM_ParseTokenConsole

------------------------------------------------------------------------
r6733 | havoc | 2007-01-22 23:13:51 +0100 (Mon, 22 Jan 2007) | 2 lines

removed \ escape character support from COM_ParseTokenConsole because it breaks \ bindings in configs and may have other issues

------------------------------------------------------------------------
r6732 | havoc | 2007-01-22 23:01:27 +0100 (Mon, 22 Jan 2007) | 3 lines

implemented csprogs.dat downloading with special dlcache/name.size.crc file naming, this is in need of testing
added csqc_progsize cvar to csqc signon process (still compatible with old servers)

------------------------------------------------------------------------
r6731 | havoc | 2007-01-22 20:31:49 +0100 (Mon, 22 Jan 2007) | 5 lines

two improvements to vid_restart in the SDL client: hardware gamma is now
restored after vid_restart, and the brief fullscreen window (used to reset
the SDL GL attributes) is now only used during vid_restart, not the initial
client startup

------------------------------------------------------------------------
r6730 | havoc | 2007-01-22 19:34:13 +0100 (Mon, 22 Jan 2007) | 2 lines

STAT_TOTALSECRETS and STAT_TOTALMONSTERS are now networked so deathmatch 7 mode in dpmod shows the total monsters now

------------------------------------------------------------------------
r6729 | havoc | 2007-01-22 19:20:05 +0100 (Mon, 22 Jan 2007) | 3 lines

modified droptofloor to treat trace.startsolid as an acceptable situation, this prevents many items falling out of various user-made maps (including a critial item in level x2m4 of X-Men: Ravages of Apocalypse)
added sv_gameplayfix_droptofloorstartsolid cvar to control this behavior

------------------------------------------------------------------------
r6728 | havoc | 2007-01-22 15:59:47 +0100 (Mon, 22 Jan 2007) | 2 lines

added framecount and framerate checks to PF_effect

------------------------------------------------------------------------
r6727 | havoc | 2007-01-22 15:53:52 +0100 (Mon, 22 Jan 2007) | 2 lines

added \' and \\ support to parsers, and added such escape code support to ' quoted strings and regular words

------------------------------------------------------------------------
r6726 | havoc | 2007-01-22 15:51:05 +0100 (Mon, 22 Jan 2007) | 2 lines

implemented \" and \n support in quoted string parsers (console and otherwise)

------------------------------------------------------------------------
r6725 | havoc | 2007-01-22 15:42:05 +0100 (Mon, 22 Jan 2007) | 4 lines

moved EF_MUZZLEFLASH checking to CL_MoveLerpEntityStates to make muzzleflashes reliably work when the client is running slower than the server
made muzzleflash 1.5x as large and 4x as bright as before, and fade in 50ms instead of 100ms
changed dlight decay to scale color instead of radius

------------------------------------------------------------------------
r6722 | havoc | 2007-01-22 14:37:39 +0100 (Mon, 22 Jan 2007) | 2 lines

tweaked default TE_TELEPORT effect, it now spawns one large very bright particle in the middle and 1/8th as many small particles, this should improve multiplayer performance on slow graphics cards, also doubled the brightness of the dlight created, and made it last a bit longer

------------------------------------------------------------------------
r6721 | havoc | 2007-01-22 14:22:46 +0100 (Mon, 22 Jan 2007) | 3 lines

improved SV_TestEntityPosition in q1bsp/hlbsp by checking the 8 corner points of the box, this fixes the misaligned double-doors bug in the Prydon Gate expansion "The Dark Age"
changed Stuck entity warning from developer 1 to developer 100 because it's annoying and not very helpful

------------------------------------------------------------------------
r6720 | havoc | 2007-01-22 14:20:29 +0100 (Mon, 22 Jan 2007) | 2 lines

client no longer tries to download missing files from server if it is hosting the server

------------------------------------------------------------------------
r6719 | havoc | 2007-01-22 13:06:42 +0100 (Mon, 22 Jan 2007) | 4 lines

changed FS_ChangeGamedir to FS_ChangeGameDirs and made it fail if any of the gamedirs are missing (if the failmissing parameter is set) and detect various other failures
FS_Init now checks if game directories are found and does a Sys_Error if not
now does a Host_Error if a QW server specifies an invalid gamedir (missing gamedir is ok however, because QW downloads files)

------------------------------------------------------------------------
r6718 | havoc | 2007-01-22 11:40:58 +0100 (Mon, 22 Jan 2007) | 2 lines

changed ping report name matching to allow scoreboard names to be longer than ping report names (because recent versions of ClanRing CTF seem to append READY on the scoreboard but not the ping report)

------------------------------------------------------------------------
r6717 | havoc | 2007-01-22 11:38:06 +0100 (Mon, 22 Jan 2007) | 2 lines

CL_Effect (called by svc_effect parsing) now sanity checks framerate and framecount

------------------------------------------------------------------------
r6716 | havoc | 2007-01-22 00:12:20 +0100 (Mon, 22 Jan 2007) | 2 lines

autodetect whether a map supports transparent water at load time

------------------------------------------------------------------------
r6715 | havoc | 2007-01-21 21:27:36 +0100 (Sun, 21 Jan 2007) | 6 lines

implemented individual file downloads on darkplaces servers
deferred loading of files until signon 2 (necessary for download system)
made loading of files operate in two passes, first for existing files and then again for files that need to be downloaded
added cl_joinbeforedownloadsfinish cvar to cause the game to begin after the map is loaded, before other downloads finish (not entirely sure this is a good idea, but it's cool)
added sv_allowdownloads cvar to allow enabling/disabling of downloads, and sv_allowdownloads_inarchive and sv_allowdownloads_archive cvars to allow server administrators to enable downloading files from archives or even whole archives if so desired (however the client does not currently request archives)

------------------------------------------------------------------------
r6714 | havoc | 2007-01-21 15:21:53 +0100 (Sun, 21 Jan 2007) | 3 lines

reorganized view rendering setup code a bit to reduce potential for state bugs (more thorough and consistent state resets now)
added support for glStencilOpSeparate function in OpenGL 2.0 (or GL_ATI_separate_stencil extension prior to that), so ATI cards should get a speed boost now, this path is now also used on NVIDIA hardware, but support for GL_EXT_stencil_two_side extension has been retained to support several other vendors

------------------------------------------------------------------------
r6713 | havoc | 2007-01-21 12:53:08 +0100 (Sun, 21 Jan 2007) | 2 lines

added some comments in Mod_LoadModel

------------------------------------------------------------------------
r6712 | havoc | 2007-01-21 12:52:29 +0100 (Sun, 21 Jan 2007) | 2 lines

fixed negative time delta problem with sbar item flashing

------------------------------------------------------------------------
r6711 | havoc | 2007-01-21 12:51:27 +0100 (Sun, 21 Jan 2007) | 2 lines

added FS_FileSize and made FS_FileExtension public

------------------------------------------------------------------------
r6710 | havoc | 2007-01-21 12:39:19 +0100 (Sun, 21 Jan 2007) | 3 lines

r_textshadow is now a saved cvar
the r_textshadow shadow color is now 1-red-green-blue (basically meaning it is black except for black text where it is white)

------------------------------------------------------------------------
r6709 | havoc | 2007-01-20 23:52:03 +0100 (Sat, 20 Jan 2007) | 2 lines

very minor cleaning

------------------------------------------------------------------------
r6708 | havoc | 2007-01-20 10:27:05 +0100 (Sat, 20 Jan 2007) | 2 lines

fix a crash in R_SkyStartFrame when there is no worldmodel

------------------------------------------------------------------------
r6707 | havoc | 2007-01-20 10:16:17 +0100 (Sat, 20 Jan 2007) | 2 lines

added FS_CheckNastyPath prototype to fs.h so that it can be used elsewhere

------------------------------------------------------------------------
r6706 | havoc | 2007-01-20 10:14:02 +0100 (Sat, 20 Jan 2007) | 2 lines

S_PrecacheSound now clears the SFXFLAG_FILEMISSING flag so that loading will try again on previously missing files whenever the level changes (particularly important if downloads or gamedir changes have occurred)

------------------------------------------------------------------------
r6703 | havoc | 2007-01-18 12:08:11 +0100 (Thu, 18 Jan 2007) | 3 lines

increased M_MAX_EDICTS to 32768
note to Black: 640k ought to be enough for everybody using the nexuiz menu, right? ;)

------------------------------------------------------------------------
r6702 | havoc | 2007-01-18 12:04:31 +0100 (Thu, 18 Jan 2007) | 2 lines

changed CL_MAX_EDICTS to match MAX_EDICTS

------------------------------------------------------------------------
r6701 | havoc | 2007-01-18 11:58:03 +0100 (Thu, 18 Jan 2007) | 2 lines

applied div0's patch to the tell command adding player number support (as opposed to the hard-to-type player names) as well as fixing a bug with quoted player names containing spaces accidentally sending part of the player name to the recipient (similar to the quake tell bug which sent the entire player name)

------------------------------------------------------------------------
r6700 | havoc | 2007-01-18 11:44:24 +0100 (Thu, 18 Jan 2007) | 2 lines

added collision_prefernudgedfraction cvar (defaults to 1), which should improve collision stability in 'wedge corner' cases (such as creases in terrain)

------------------------------------------------------------------------
r6699 | havoc | 2007-01-18 11:41:26 +0100 (Thu, 18 Jan 2007) | 2 lines

renamed r_bloomstate.vertex3f to r_screenvertex3f and made it constant

------------------------------------------------------------------------
r6698 | havoc | 2007-01-18 11:39:02 +0100 (Thu, 18 Jan 2007) | 2 lines

fixed problems with cl.time stepping backwards causing a black fade-in and other problems

------------------------------------------------------------------------
r6697 | havoc | 2007-01-18 09:49:50 +0100 (Thu, 18 Jan 2007) | 2 lines

support partial IP addresses in the ipv4 address parser, this fixes the 20+ second delay when parsing status messages on some modified quake servers that report only partial addresses (hiding the last octet)

------------------------------------------------------------------------
r6696 | havoc | 2007-01-18 08:04:14 +0100 (Thu, 18 Jan 2007) | 2 lines

expanded the Replacement Content section with some example filenames and other information

------------------------------------------------------------------------
r6695 | havoc | 2007-01-14 12:18:17 +0100 (Sun, 14 Jan 2007) | 2 lines

changed extResponse handler to quote the address string when passing it to the menu qc

------------------------------------------------------------------------
r6694 | havoc | 2007-01-14 11:19:20 +0100 (Sun, 14 Jan 2007) | 3 lines

patch from div0 that enables printf format warnings in gcc
patch from div0 that fixes a lot of printf format warnings (some quite bad)

------------------------------------------------------------------------
r6693 | havoc | 2007-01-14 11:09:16 +0100 (Sun, 14 Jan 2007) | 2 lines

patch from div0 that adds sv_random_seed for benchmarking servers with bots the same way repeatedly

------------------------------------------------------------------------
r6692 | havoc | 2007-01-14 11:05:49 +0100 (Sun, 14 Jan 2007) | 2 lines

patch from div0 to add sv_adminnick cvar which overrides hostname as the name to use in chat from the dedicated server console (or via rcon say and such)

------------------------------------------------------------------------
r6691 | havoc | 2007-01-14 11:03:13 +0100 (Sun, 14 Jan 2007) | 2 lines

cast time of received moves to float to prevent negative ping estimates when timer is degraded severely

------------------------------------------------------------------------
r6690 | havoc | 2007-01-14 10:59:26 +0100 (Sun, 14 Jan 2007) | 2 lines

added DP_MENU_EXTRESPONSEPACKET to extensions list

------------------------------------------------------------------------
r6689 | havoc | 2007-01-14 10:56:30 +0100 (Sun, 14 Jan 2007) | 2 lines

patch from div0 that adds a special "extResponse " type of packet that can be returned to menu qc as a string (to query current version of Nexuiz or anything else of that nature, requires special servers that return such packets, the packets are sent using the "packet" command which already existed from qw support)

------------------------------------------------------------------------
r6688 | havoc | 2007-01-14 10:53:31 +0100 (Sun, 14 Jan 2007) | 2 lines

patch from div0 to make DrawQ_ColoredString return the length of the printed text

------------------------------------------------------------------------
r6687 | havoc | 2007-01-14 10:51:52 +0100 (Sun, 14 Jan 2007) | 2 lines

patch from div0 to clamp ping reports to 1-9999 range in getinfo server queries

------------------------------------------------------------------------
r6686 | havoc | 2007-01-14 10:50:42 +0100 (Sun, 14 Jan 2007) | 2 lines

added -Wdeclaration-after-statement to warn about any use of C99 lazy variable declaration (which is not supported by MSVC)

------------------------------------------------------------------------
r6685 | havoc | 2007-01-12 04:40:35 +0100 (Fri, 12 Jan 2007) | 4 lines

changed Cmd_AddCommand to only work for console commands, not client commands executed on the server, Cmd_AddCommand_WithClientCommand has been added to allow separate command functions for console commands and client commands, this got rid of a lot of cmd_source == src_command checks
this refactoring fixes a security vulnerability in the clcommand builtin provided by KRIMZON_SV_PARSECLIENTCOMMAND, which was able to execute many commands on the server console, and that put the burden on the QC code to validate command safety, which was not intended
in short: this fixes a remote console command execution vulnerability that affected a few games/mods

------------------------------------------------------------------------
r6684 | havoc | 2007-01-12 01:34:19 +0100 (Fri, 12 Jan 2007) | 4 lines

gamedir is now checked by FS_CheckNastyPath
added special isgamedir flag to FS_CheckNastyPath to validate gamedir using more stringent checks than for normal filenames
added additional checks in FS_CheckNastyPath for things like . in path elements (still allowed in filename at end but no longer allowed in path elements at all)

------------------------------------------------------------------------
r6683 | havoc | 2007-01-11 05:48:25 +0100 (Thu, 11 Jan 2007) | 4 lines

implemented new bloom code (still not using GLSL, but the new bloom is much nicer and more configurable)
added r_shadow_glossexponent cvar to control width of specular highlights
changed r_shadow_glossexponent default from 8 to 32 (looks more like metal or wet stone)

------------------------------------------------------------------------
r6682 | havoc | 2007-01-11 05:45:12 +0100 (Thu, 11 Jan 2007) | 2 lines

implemented detection of GL_EXT_blend_subtract

------------------------------------------------------------------------
r6681 | havoc | 2007-01-11 05:43:48 +0100 (Thu, 11 Jan 2007) | 2 lines

try harder to identify little endian cpus when BYTE_ORDER is undefined

------------------------------------------------------------------------
r6680 | havoc | 2007-01-04 22:25:05 +0100 (Thu, 04 Jan 2007) | 2 lines

corrected comment on savings of the optimized skeletal cases

------------------------------------------------------------------------
r6675 | havoc | 2006-12-31 20:38:46 +0100 (Sun, 31 Dec 2006) | 4 lines

added r_shadow_glossexponent cvar to control specular power (sharpness)
changed default r_shadow_glossintensity from 1 to 2, r_shadow_gloss2intensity from 0.25 to 0.5, r_shadow_glossexponent from 8 to 32 (gloss is now much more metallic looking)
moved some stencil operation reset code to after the GL_EXT_stencil_two_side extension is turned off (just to be safer)

------------------------------------------------------------------------
r6674 | havoc | 2006-12-30 21:28:06 +0100 (Sat, 30 Dec 2006) | 2 lines

fix bug that made some models not cast shadows from the correct location

------------------------------------------------------------------------
r6673 | havoc | 2006-12-30 17:30:18 +0100 (Sat, 30 Dec 2006) | 2 lines

added r_shadows cvar which renders Quake3 cg_shadows 2 style stencil shadows from models

------------------------------------------------------------------------
r6672 | havoc | 2006-12-30 17:28:26 +0100 (Sat, 30 Dec 2006) | 2 lines

I don't know how this got committed

------------------------------------------------------------------------
r6671 | havoc | 2006-12-30 17:07:18 +0100 (Sat, 30 Dec 2006) | 2 lines

fix default modellight_lightdir shading direction in q1bsp (this has no effect since diffuse is black)

------------------------------------------------------------------------
r6670 | havoc | 2006-12-30 16:55:42 +0100 (Sat, 30 Dec 2006) | 2 lines

added a missing const modifier

------------------------------------------------------------------------
r6669 | havoc | 2006-12-30 10:30:33 +0100 (Sat, 30 Dec 2006) | 2 lines

fix stupid bug in CL_SetInfo when checking for pmodel/emodel as key (it was using Cmd_Argv)

------------------------------------------------------------------------
r6668 | havoc | 2006-12-28 02:49:03 +0100 (Thu, 28 Dec 2006) | 2 lines

patch from div0 that adds sv_public modes -2 (do not allow players to connect) and -1 (do not respond to queries)

------------------------------------------------------------------------
r6667 | havoc | 2006-12-24 13:34:20 +0100 (Sun, 24 Dec 2006) | 2 lines

made brush loader trust q3map2 brushes completely, still falls out of terrain maps using .ase models

------------------------------------------------------------------------
r6666 | havoc | 2006-12-24 10:38:01 +0100 (Sun, 24 Dec 2006) | 3 lines

changed collision brush loader to not discard planes that don't produce a polygon, this fixes many terrain and ramp problems in q3bsp (q3map2 inserted planes to fix these edge cases but the engine was discarding them)
optimized brush collision code to have more early out cases

------------------------------------------------------------------------
r6665 | havoc | 2006-12-24 02:16:05 +0100 (Sun, 24 Dec 2006) | 2 lines

set world mins/maxs/absmin/absmax at server startup

------------------------------------------------------------------------
r6664 | black | 2006-12-23 17:04:52 +0100 (Sat, 23 Dec 2006) | 3 lines

Init gl_main before gl_draw to make DP start from anywhere without crashing. Additionally it's more logical that way.
(If this breaks something, you can try to stone me or whoever who wrote the code in the first place ;))

------------------------------------------------------------------------
r6663 | havoc | 2006-12-22 14:05:38 +0100 (Fri, 22 Dec 2006) | 3 lines

raised MAX_TEXTUREUNITS from 16 to 64
fixed bug with backendimageunits/backendarrayunits not being limited to MAX_TEXTUREUNITS (caused memory corruption on NVIDIA GeForce 8 series which have 32 texture image units), backendunits was already limited properly

------------------------------------------------------------------------
r6662 | havoc | 2006-12-21 10:12:21 +0100 (Thu, 21 Dec 2006) | 2 lines

removed Q3TEXTUREFLAG_ALPHATEST uses in the code, fixing a bug that made alpha test surfaces not be alpha tested (now checks shader->layers[0].alphatest)

------------------------------------------------------------------------
r6661 | havoc | 2006-12-19 07:47:27 +0100 (Tue, 19 Dec 2006) | 3 lines

support for GL_ARB_texture_non_power_of_two extension (makes quake textures look a bit sharper on cards that support it and saves video memory)
known to be supported on NVIDIA Geforce 6 and above

------------------------------------------------------------------------
r6660 | havoc | 2006-12-18 19:11:08 +0100 (Mon, 18 Dec 2006) | 2 lines

added a missing extern

------------------------------------------------------------------------
r6659 | havoc | 2006-12-18 18:21:02 +0100 (Mon, 18 Dec 2006) | 2 lines

patch from div0 to fix screenshot naming when -game is used

------------------------------------------------------------------------
r6658 | havoc | 2006-12-17 19:25:46 +0100 (Sun, 17 Dec 2006) | 2 lines

implemented QW gamedir switching and manual gamedir switching (via "gamedir" command in console, can also use +gamedir on commandline), this may have lingering bugs

------------------------------------------------------------------------
r6657 | havoc | 2006-12-17 19:20:24 +0100 (Sun, 17 Dec 2006) | 2 lines

improved Mod_Q3BSP_LightPoint function to use r_refdef.lightstylevalue[0] to scale the color contribution, this means that dpmod darkmode works in q3bsp now

------------------------------------------------------------------------
r6656 | havoc | 2006-12-17 19:14:02 +0100 (Sun, 17 Dec 2006) | 2 lines

added snd_reload command to reload all sounds

------------------------------------------------------------------------
r6655 | havoc | 2006-12-17 19:11:01 +0100 (Sun, 17 Dec 2006) | 2 lines

removed unused packlist variable and pack->next field

------------------------------------------------------------------------
r6654 | havoc | 2006-12-16 22:42:33 +0100 (Sat, 16 Dec 2006) | 2 lines

added Cvar_UnlockDefaults function (not console accessible)

------------------------------------------------------------------------
r6653 | havoc | 2006-12-15 20:43:12 +0100 (Fri, 15 Dec 2006) | 2 lines

removed an unused extern for fs_modified

------------------------------------------------------------------------
r6652 | havoc | 2006-12-15 20:42:10 +0100 (Fri, 15 Dec 2006) | 2 lines

modified "stuffcmds" command (which runs commandline arguments preceded by + characters) to only do so once, this allows the quake.rc to be executed multiple times without executing commandline arguments multiple times

------------------------------------------------------------------------
r6651 | havoc | 2006-12-15 20:32:10 +0100 (Fri, 15 Dec 2006) | 2 lines

corrected some svc_nop's to clc_nop's (same value but more correct)

------------------------------------------------------------------------
r6650 | havoc | 2006-12-15 18:38:52 +0100 (Fri, 15 Dec 2006) | 2 lines

removed NET_MAXRATE (as it served no useful purpose), changed description of rate to say bytespersecond instead of 500-25000 (which was wrong, the limit was 1000-150000)

------------------------------------------------------------------------
r6649 | havoc | 2006-12-14 13:12:02 +0100 (Thu, 14 Dec 2006) | 2 lines

add a newline at the end of each exec'd config file

------------------------------------------------------------------------
r6648 | havoc | 2006-12-13 12:18:35 +0100 (Wed, 13 Dec 2006) | 2 lines

updated Dev-C++ project file from Spirit

------------------------------------------------------------------------
r6647 | havoc | 2006-12-12 07:28:54 +0100 (Tue, 12 Dec 2006) | 2 lines

display loading plaque much sooner in startup process, and draw it to GL_FRONT buffer rather than drawing it to the GL_BACK buffer and swapping, as if triple buffering is used the GL_BACK buffer might not be shown for some time, but the GL_FRONT buffer is instantaneous

------------------------------------------------------------------------
r6646 | havoc | 2006-12-11 17:39:13 +0100 (Mon, 11 Dec 2006) | 2 lines

moved health counter in quake hud back to its original position, no longer overlapping hipnotic key icons (for some reason Black's patch to add the nexuiz hud in revision 1.27 also moved the quake health counter, I can't discern why...)

------------------------------------------------------------------------
r6645 | havoc | 2006-12-11 11:07:47 +0100 (Mon, 11 Dec 2006) | 2 lines

optimized Mod_Alias_GetMesh_Vertices to eliminate memset calls and process arrays independently of eachother in the skeletal blending code, it also has an optimized case for one-bone vertices (the most common case)

------------------------------------------------------------------------
r6644 | havoc | 2006-12-11 11:06:01 +0100 (Mon, 11 Dec 2006) | 2 lines

changed demo playback csqc mismatch error to a warning

------------------------------------------------------------------------
r6643 | havoc | 2006-12-10 14:30:16 +0100 (Sun, 10 Dec 2006) | 2 lines

fix crash when a client reconnects to the same client slot, thanks to div0 for reporting and investigating this bug

------------------------------------------------------------------------
r6641 | havoc | 2006-12-08 16:18:19 +0100 (Fri, 08 Dec 2006) | 2 lines

patch from div0 that fixes rate limiting code to make use of sv_maxrate (as it was supposed to)

------------------------------------------------------------------------
r6640 | havoc | 2006-12-06 14:12:57 +0100 (Wed, 06 Dec 2006) | 4 lines

fixed bug where non-autosprite transparencies rendered in the same batch as autosprite transparencies were not rendered (fixes light cones disappearing in q3dm0, among other things), this occurred because the code that handles q3 shaders using "deformvertexes autosprite" changed the array pointers but never changed them back when rendering another q3 shader that does not use deformvertexes
minor cleanup of RSurf_ActiveEntity (now uses RSurf_CleanUp rather than duplicating code)
moved RSurf_CleanUp above RSurf_ActiveEntity

------------------------------------------------------------------------
r6639 | havoc | 2006-12-06 14:08:44 +0100 (Wed, 06 Dec 2006) | 2 lines

corrected a misspelling in a comment

------------------------------------------------------------------------
r6638 | havoc | 2006-12-06 12:05:41 +0100 (Wed, 06 Dec 2006) | 2 lines

improved warnings from drawstring/drawpic/drawfill functions (they now state the correct function name, and print the full warning message, previously they were truncated if it was only one problem)

------------------------------------------------------------------------
r6637 | havoc | 2006-12-06 12:04:46 +0100 (Wed, 06 Dec 2006) | 2 lines

fix connect error when csqc is not present (oops!)

------------------------------------------------------------------------
r6636 | havoc | 2006-12-06 10:04:48 +0100 (Wed, 06 Dec 2006) | 2 lines

fixed black models when csqc is active

------------------------------------------------------------------------
r6635 | havoc | 2006-12-06 09:34:35 +0100 (Wed, 06 Dec 2006) | 3 lines

fixed bug that caused csqc to only load after a map restart
rearranged entity linking when csqc is active to fix the lagging weapon model bug

------------------------------------------------------------------------
r6634 | havoc | 2006-12-06 09:07:40 +0100 (Wed, 06 Dec 2006) | 2 lines

fixed a bug with cl_movement prediction being applied during demo playback

------------------------------------------------------------------------
r6633 | havoc | 2006-12-05 10:00:09 +0100 (Tue, 05 Dec 2006) | 2 lines

fixed a bug with blank frames in sprites failing to produce a texture (fixes painkeep exploding shotgun shell sprites which became white rectangles on certain frames)

------------------------------------------------------------------------
r6629 | havoc | 2006-12-01 02:40:16 +0100 (Fri, 01 Dec 2006) | 2 lines

added con_closeontoggleconsole cvar based on Dresk's patch, but reduced to a minimal set of changes to one file rather than two

------------------------------------------------------------------------
r6628 | havoc | 2006-12-01 00:51:51 +0100 (Fri, 01 Dec 2006) | 2 lines

funky interlacing-like rendering feature from div0 (scr_stipple cvar)

------------------------------------------------------------------------
r6627 | havoc | 2006-11-25 02:28:12 +0100 (Sat, 25 Nov 2006) | 2 lines

patch from Dresk which adds DP_SV_ENTITYCONTENTSTRANSITION extension which calls a .contentstransition(oldcontents, newcontents) when the quake physics code detects a contents transition (empty to water for example)

------------------------------------------------------------------------
r6626 | havoc | 2006-11-24 23:55:08 +0100 (Fri, 24 Nov 2006) | 2 lines

patch from Dresk for DP_QC_STRINGCOLORFUNCTIONS extension (strlennocol measures length of string with color chars removed (useful for centering text), strdecolorize returns a string with color codes stripped)

------------------------------------------------------------------------
r6625 | havoc | 2006-11-24 21:32:54 +0100 (Fri, 24 Nov 2006) | 2 lines

added proper support for q3 shader animmap commands

------------------------------------------------------------------------
r6624 | havoc | 2006-11-23 20:35:52 +0100 (Thu, 23 Nov 2006) | 2 lines

cleaned up GL_DepthTest and GL_CULL_FACE state management (by adding GL_CullFace), may fix some problems with rtlighting on EF_NODEPTHTEST entities

------------------------------------------------------------------------
r6622 | havoc | 2006-11-23 01:06:38 +0100 (Thu, 23 Nov 2006) | 2 lines

added DP_ASINACOSATANATAN2TAN extension which adds common trig functions missing from standard QuakeC

------------------------------------------------------------------------
r6621 | havoc | 2006-11-17 16:47:22 +0100 (Fri, 17 Nov 2006) | 2 lines

added #define _FILE_OFFSET_BITS 64 to reduce problems with video recording on 32bit unix platforms (64bit Linux builds do not seem to have problems with this to begin with)

------------------------------------------------------------------------
r6620 | havoc | 2006-11-15 12:23:55 +0100 (Wed, 15 Nov 2006) | 3 lines

made cl_viewmodel_scale apply to csqc and gettaginfo
fixed bug with concat order in stereo rendering (it was offseting along X in worldspace due to wrong concat order)

------------------------------------------------------------------------
r6619 | havoc | 2006-11-15 10:33:22 +0100 (Wed, 15 Nov 2006) | 3 lines

fixed view location bugs in csqc; it was reading the player entity's render.origin field, which was broken...  removed the origin and angles fields from entity_render_t and eliminated all references
renamed CL_BoundingBoxForEntity to CL_UpdateRenderEntity and made it update the entity_render_t inversematrix and scale according to the matrix, and also calls R_LerpAnimation, this reduced code elsewhere

------------------------------------------------------------------------
r6618 | havoc | 2006-11-12 13:55:06 +0100 (Sun, 12 Nov 2006) | 2 lines

patch from div0 to fix a segfault in curl support when canceling a file that isn't being downloaded

------------------------------------------------------------------------
r6617 | havoc | 2006-11-09 11:16:16 +0100 (Thu, 09 Nov 2006) | 2 lines

patch from div0 that removes connect flood ban when a player disconnects (this prevents people from getting connect-flood-banned for simply reconnecting after a pk3 autodownload in Nexuiz)

------------------------------------------------------------------------
r6616 | havoc | 2006-11-06 09:48:43 +0100 (Mon, 06 Nov 2006) | 2 lines

found MATRIX4x4_OPENGLORIENTATION to be a speed loss using gcc 4.1.0 with x86_64 architecture, disabled it by default

------------------------------------------------------------------------
r6615 | havoc | 2006-11-06 09:25:26 +0100 (Mon, 06 Nov 2006) | 2 lines

implemented MATRIX4X4_OPENGLORIENTATION #define option, this is on by default and may improve performance compared to the D3D-style matrix orientation that was used before

------------------------------------------------------------------------
r6614 | havoc | 2006-11-06 09:23:43 +0100 (Mon, 06 Nov 2006) | 2 lines

changed md3 tag storage to be the original float[12] OpenGL-orientation format rather than a matrix4x4 which was wasting some space

------------------------------------------------------------------------
r6613 | havoc | 2006-11-06 08:31:00 +0100 (Mon, 06 Nov 2006) | 2 lines

more cleaning of matrix4x4_t struct access

------------------------------------------------------------------------
r6612 | havoc | 2006-11-06 07:13:54 +0100 (Mon, 06 Nov 2006) | 3 lines

cleaned up almost all direct indexing of matrix4x4_t structures to go through proper Matrix4x4 functions
removed some weird scaling code in gettaginfo QC builtin

------------------------------------------------------------------------
r6609 | havoc | 2006-10-23 12:34:09 +0200 (Mon, 23 Oct 2006) | 4 lines

implemented connect flood blocking (100% effective on connect floods with an interval of 5 seconds or less between connects from the same IP address, and limits connect floods slower than that to occupying 2 slots at once due to a 10 second timeout)
cleaned up connect packet handling code to be more readable and consistent
reenabled rejoin code (allowing players to resume the game if their client crashes crashes but comes back with the same port number - rather rare unless cl_port is used, but could help people who do use cl_port)

------------------------------------------------------------------------
r6608 | havoc | 2006-10-23 12:22:07 +0200 (Mon, 23 Oct 2006) | 2 lines

got rid of cl.qw_spectator flag because it can be determined by cl.scores[cl.playerentity].qw_spectator instead

------------------------------------------------------------------------
r6607 | havoc | 2006-10-20 17:57:17 +0200 (Fri, 20 Oct 2006) | 2 lines

attempt to avoid some Mem_Free errors on NULL pointers if there are no surfaces in the map

------------------------------------------------------------------------
r6606 | havoc | 2006-10-20 17:16:19 +0200 (Fri, 20 Oct 2006) | 2 lines

don't crash in scoreboard code when connected to a qw server as a spectator

------------------------------------------------------------------------
r6605 | havoc | 2006-10-18 11:08:50 +0200 (Wed, 18 Oct 2006) | 2 lines

fix bug with autosprite shaders when deformvertexes is applied twice during render of the same batch (why?  dunno, but it shouldn't break like this!)

------------------------------------------------------------------------
r6604 | havoc | 2006-10-18 05:52:49 +0200 (Wed, 18 Oct 2006) | 2 lines

added vid_stereobuffer cvar based on patch from syschuck on the alientrap forums

------------------------------------------------------------------------
r6603 | havoc | 2006-10-18 05:45:23 +0200 (Wed, 18 Oct 2006) | 2 lines

some clean up of math used to generate trace start/end in prydon cursor code

------------------------------------------------------------------------
r6602 | havoc | 2006-10-18 05:34:34 +0200 (Wed, 18 Oct 2006) | 2 lines

added cl_viewmodel_scale cvar which controls gun model size

------------------------------------------------------------------------
r6597 | havoc | 2006-10-03 22:22:58 +0200 (Tue, 03 Oct 2006) | 2 lines

added snd_soundradius cvar (default 1000 as before) to allow games (Nexuiz for instance) and people (mostly fans of dos quake's different sound radius) to adjust the sound radius

------------------------------------------------------------------------
r6596 | havoc | 2006-09-30 22:52:54 +0200 (Sat, 30 Sep 2006) | 2 lines

implemented condump command (I was told by [515] that he implemented this command but he never sent me the code in his patch and so I was incorrectly under the impression that it was in the engine)

------------------------------------------------------------------------
r6595 | havoc | 2006-09-20 08:37:04 +0200 (Wed, 20 Sep 2006) | 2 lines

fixed a (hopefully rare) bug affecting shalrath missiles which caused multiple missiles to explode on successive frames due to the large bounding boxes of the MOVETYPE_FLYMISSILE explosions causing a touch event on the other flying missiles that were not yet near the player, which caused them to explode even though they were being touched by an explosion that was SOLID_NOT

------------------------------------------------------------------------
r6594 | havoc | 2006-09-19 10:45:13 +0200 (Tue, 19 Sep 2006) | 2 lines

fix bug that often made enforcer laser bolts 'stick' in the air if a player is standing right next to the enforcer when it fires, this was due to some internal confusion over what constitutes a 'startsolid' case, this has been clarified so that SV_PushEntity only uses trace.bmodelstartsolid, just like the toss/bounce/fly/flymissile/bouncemissile physics expect

------------------------------------------------------------------------
r6593 | havoc | 2006-09-19 07:12:07 +0200 (Tue, 19 Sep 2006) | 2 lines

added GAME_DARSANA and GAME_CONTAGIONTHEORY

------------------------------------------------------------------------
r6592 | havoc | 2006-09-16 12:42:44 +0200 (Sat, 16 Sep 2006) | 2 lines

disabled junk tag writer that I wrote for byte by byte comparisons to mencoder-processed copies of my AVI files

------------------------------------------------------------------------
r6591 | havoc | 2006-09-16 12:40:17 +0200 (Sat, 16 Sep 2006) | 2 lines

removed some unused variables

------------------------------------------------------------------------
r6590 | havoc | 2006-09-16 12:25:05 +0200 (Sat, 16 Sep 2006) | 4 lines

removed video capture formats other than AVI I420 as it is the only useful format in practice (lots of jpeg/tga files is annoying to deal with, and few programs support rgb/yv12 raw dumps), this means no more .wav saving either and cleans the code a bit
fixed several bugs in sound system when saving avi (lingering .wav code)
added cl_capturevideo_realtime cvar to allow realtime capture if desired (requires a fast machine and can have A/V sync issues)

------------------------------------------------------------------------
r6589 | havoc | 2006-09-16 11:52:43 +0200 (Sat, 16 Sep 2006) | 2 lines

496

------------------------------------------------------------------------
r6588 | havoc | 2006-09-16 11:50:21 +0200 (Sat, 16 Sep 2006) | 2 lines

implemented direct AVI video capture using the I420 colorspace (aka Intel(r) 4:2:0 codec) with interleaved PCM audio, and would like to thank Microsoft(r) for wasting many hours of my time with AVI format insanity

------------------------------------------------------------------------
r6587 | havoc | 2006-09-16 10:40:15 +0200 (Sat, 16 Sep 2006) | 2 lines

changed VM_fopen and VM_fclose announcements to require developer >= 100 like the VM_fputs/VM_fgets functions do, and made them console prints instead of VM_Warning calls (not sure why they were to begin with)

------------------------------------------------------------------------
r6586 | havoc | 2006-09-15 04:07:09 +0200 (Fri, 15 Sep 2006) | 2 lines

hide warnings about missing gfx/crosshair* images

------------------------------------------------------------------------
r6585 | black | 2006-09-13 23:07:04 +0200 (Wed, 13 Sep 2006) | 5 lines

Try to fix a dedicated server crash by moving the two csqc_ cvar initializations
into SV_Init. This is a hack, however, so someone else please clean this up :)
The VM's internal name now is always "client", so this should make life easier
when debugging (note: this doesn't affect the progs filename used).

------------------------------------------------------------------------
r6584 | havoc | 2006-09-12 09:22:40 +0200 (Tue, 12 Sep 2006) | 2 lines

changed deluxemapping detection code to deal with odd bsp files produced by q3map2 that contain two lightmaps but the second one is completely unused and blank and thus not suitable as a deluxemap, this fixes black (or very dim) surfaces in some small maps when GLSL is enabled

------------------------------------------------------------------------
r6583 | havoc | 2006-09-12 08:17:54 +0200 (Tue, 12 Sep 2006) | 2 lines

moved VM_FILES and VM_SEARCHLIST stuff to prvm_prog_t

------------------------------------------------------------------------
r6582 | havoc | 2006-09-12 07:56:26 +0200 (Tue, 12 Sep 2006) | 2 lines

remove some unsafe optimizations in VM_Files_Init and VM_Files_CloseAll (using memset on the return value of an indexing macro is generally a bad idea, and doesn't improve code readability)

------------------------------------------------------------------------
r6581 | havoc | 2006-09-12 06:35:31 +0200 (Tue, 12 Sep 2006) | 2 lines

increased PRVM_MAX_STACK_DEPTH and PRVM_LOCALSTACK_SIZE at div0's request to reduce qc crashes with recursive rocket explosions in Nexuiz

------------------------------------------------------------------------
r6577 | havoc | 2006-09-01 11:35:38 +0200 (Fri, 01 Sep 2006) | 2 lines

changed description for gl_finish cvar according to esteel's suggestion

------------------------------------------------------------------------
r6576 | havoc | 2006-08-29 14:58:45 +0200 (Tue, 29 Aug 2006) | 2 lines

another patch from div0 to improve ping parsing behavior in the event that multiple ping reports are received after a query (due to packets backlogging)

------------------------------------------------------------------------
r6575 | havoc | 2006-08-29 06:50:40 +0200 (Tue, 29 Aug 2006) | 2 lines

another patch from div0 to fix ping report parsing

------------------------------------------------------------------------
r6574 | havoc | 2006-08-27 12:13:24 +0200 (Sun, 27 Aug 2006) | 3 lines

patch from div0 to fix ping report parsing where the first player slots are empty
fixed bug in negative ping parser (it was not skipping the - when it was negative)

------------------------------------------------------------------------
r6573 | havoc | 2006-08-27 11:23:07 +0200 (Sun, 27 Aug 2006) | 2 lines

greatly improved chances of connecting to a proquake server on the first try, by sending an svc_nop immediately upon connect

------------------------------------------------------------------------
r6572 | havoc | 2006-08-27 10:53:29 +0200 (Sun, 27 Aug 2006) | 2 lines

fix bug with gun bobbing in demo playback (where input packets are not sent, and thus the prediction replay was not occurring...)

------------------------------------------------------------------------
r6571 | havoc | 2006-08-27 10:52:53 +0200 (Sun, 27 Aug 2006) | 2 lines

fix a bug with the divide by zero warning in the QC VM, it was not updating the relevant xfunction/xstatement variables

------------------------------------------------------------------------
r6570 | havoc | 2006-08-27 10:20:44 +0200 (Sun, 27 Aug 2006) | 2 lines

changed default timeformat (related to timestamps cvar for logging)

------------------------------------------------------------------------
r6569 | sajt | 2006-08-26 10:41:31 +0200 (Sat, 26 Aug 2006) | 2 lines

Fix for people with proper compilers :)

------------------------------------------------------------------------
r6568 | havoc | 2006-08-26 09:02:49 +0200 (Sat, 26 Aug 2006) | 7 lines

CSQC fixes (less broken, still not spec compliant)
CSQC can now link the same entity multiple times (each time modified differently) as per the CSQC spec (this is mainly useful for rendering multi-model players based on one csqc entity, like Quake3's cgame does)
changed DrawQ functions to automatically set up 2D rendering if previous rendering was of a 3D view (necessary change for proper CSQC support)
changed QuakeC rint builtin implementation to handle very large values (outside of int range) and possibly run a little bit faster, note that it still rounds toward the nearest integer, away from zero (as intended)
refactored gun bob, damage kick fade, and stair smoothing code to eliminate a 'multiple fade steps per frame' bug
renamed the misnamed VM_ftoi function to VM_ftoe, in accordance with the menu QC builtin ftoe

------------------------------------------------------------------------
r6567 | havoc | 2006-08-25 17:33:33 +0200 (Fri, 25 Aug 2006) | 2 lines

accidentally removed -fno-strict-aliasing

------------------------------------------------------------------------
r6566 | havoc | 2006-08-25 14:48:54 +0200 (Fri, 25 Aug 2006) | 2 lines

fix csqc support on dedicated servers (now CRC's the csqc_progname file at level start and sends that to clients, so it does not need to actually load the csqc_progname itself)

------------------------------------------------------------------------
r6565 | havoc | 2006-08-25 14:27:02 +0200 (Fri, 25 Aug 2006) | 2 lines

fix the jittery gun bug related to onground changing rapidly

------------------------------------------------------------------------
r6564 | havoc | 2006-08-25 14:18:13 +0200 (Fri, 25 Aug 2006) | 2 lines

disabled support for csqc entities in CL_SelectTraceLine

------------------------------------------------------------------------
r6563 | havoc | 2006-08-25 10:53:39 +0200 (Fri, 25 Aug 2006) | 2 lines

changed release optimizations from -O2 -ffast-math -funroll-loops to simply -O2, this produced a 0.3% fps loss in my most extreme testing on x86_64, which does not seem significant, and gcc 4.1.0 was breaking the Nexuiz menu with the -funsafe-math-optimizations option (part of -ffast-math)

------------------------------------------------------------------------
r6562 | black | 2006-08-21 13:19:41 +0200 (Mon, 21 Aug 2006) | 2 lines

Fix a stupid typo in the sbar's ctf flag icon filenames.

------------------------------------------------------------------------
r6561 | havoc | 2006-08-21 09:40:40 +0200 (Mon, 21 Aug 2006) | 2 lines

nexuiz hud change to show flag status in CTF

------------------------------------------------------------------------
r6560 | havoc | 2006-08-19 06:25:06 +0200 (Sat, 19 Aug 2006) | 2 lines

patch from div to fix icc warnings

------------------------------------------------------------------------
r6559 | havoc | 2006-08-16 09:17:21 +0200 (Wed, 16 Aug 2006) | 2 lines

changed several '^' checks to STRING_COLOR_TAG as they should be

------------------------------------------------------------------------
r6558 | havoc | 2006-08-16 09:13:29 +0200 (Wed, 16 Aug 2006) | 3 lines

reorganized Host_Init a bit, merged away a few functions (such as COM_CheckRegistered and COM_InitArgv) and changed some others, now registers several cvars earlier in the startup process
integrated patch from div0 for sys_colortranslation and sys_specialcharactertranslation cvars which control the translation of color codes and Quake characters for terminal output on stdout, this gets rid of the hideous ^7 on every line and makes colored text show up properly using ANSI color codes on most platforms (on windows the color codes are simply stripped because ANSI is not supported by windows terminals)

------------------------------------------------------------------------
r6557 | havoc | 2006-08-15 01:46:30 +0200 (Tue, 15 Aug 2006) | 2 lines

no longer has time or team columns in non-QW games

------------------------------------------------------------------------
r6556 | havoc | 2006-08-15 00:55:34 +0200 (Tue, 15 Aug 2006) | 2 lines

patch from div0: clamp "ping" reply valies in 0..9999 to prevent misparsing in case of uninitialized ping values

------------------------------------------------------------------------
r6555 | havoc | 2006-08-15 00:54:32 +0200 (Tue, 15 Aug 2006) | 2 lines

patch from div0: Send download requirements at an earlier time to cause less message spam with the disconnect-and-reconnect download method

------------------------------------------------------------------------
r6554 | havoc | 2006-08-15 00:54:01 +0200 (Tue, 15 Aug 2006) | 2 lines

oops forgot this from the cd loop/play named tracks patch

------------------------------------------------------------------------
r6553 | havoc | 2006-08-15 00:53:15 +0200 (Tue, 15 Aug 2006) | 6 lines

patch from div0:
instead of downloading in game and reloading the map when it is done (which
caused crashes because of multiple world models in the model list and didn't
also reload sounds and models), disconnect while downloading and execute the
connect command to reconnect later

------------------------------------------------------------------------
r6552 | havoc | 2006-08-15 00:51:43 +0200 (Tue, 15 Aug 2006) | 10 lines

patch from div0:
fix console weirdnesses:
* empty lines kill command history (instead don't add empty lines to the history)
* cursor position and history line length were done the wrong way, positioning
  the cursor outside of the line or only recalling part of a line

NOTE: maybe it is better to move the Con_Printf BELOW the return so an empty
prompt isn't even displayed? bash does not do it like that, IRC clients do it
like that, and personally I don't care

------------------------------------------------------------------------
r6551 | havoc | 2006-08-15 00:49:49 +0200 (Tue, 15 Aug 2006) | 2 lines

patch from div0: cd loop and cd play commands now support named tracks (explicitly specifying a music track to play) as well as numbered (cd/fake cd)

------------------------------------------------------------------------
r6549 | havoc | 2006-08-14 07:14:24 +0200 (Mon, 14 Aug 2006) | 2 lines

reenabled the quake 'fall out of level' bug, to make the scorpion near the start of hip1m2 fall out of the ceiling as it was meant to (this probably fixes a lot of other bugs in various broken maps)

------------------------------------------------------------------------
r6548 | havoc | 2006-08-10 11:35:30 +0200 (Thu, 10 Aug 2006) | 2 lines

494

------------------------------------------------------------------------
r6545 | havoc | 2006-08-05 22:03:21 +0200 (Sat, 05 Aug 2006) | 2 lines

hush warnings about strcat and other redefinitions by undefining them first

------------------------------------------------------------------------
r6544 | molivier | 2006-08-05 14:31:03 +0200 (Sat, 05 Aug 2006) | 2 lines

Removed all calls to strcpy; most of them are now calls to strlcpy or memcpy.

------------------------------------------------------------------------
r6543 | molivier | 2006-08-05 14:30:03 +0200 (Sat, 05 Aug 2006) | 2 lines

The inclusion of pthread.h was missing

------------------------------------------------------------------------
r6542 | molivier | 2006-08-04 13:37:32 +0200 (Fri, 04 Aug 2006) | 2 lines

Replaced all calls to str[n]cat and strncpy by calls to strlcat and strlcpy respectively

------------------------------------------------------------------------
r6541 | havoc | 2006-08-03 17:25:42 +0200 (Thu, 03 Aug 2006) | 2 lines

fix memory alignment issue when saving odd-width screenshots (set GL_PACK_ALIGNMENT to 1), thanks div0

------------------------------------------------------------------------
r6540 | havoc | 2006-07-31 20:39:19 +0200 (Mon, 31 Jul 2006) | 2 lines

more tweaks trying to improve precision on q3map2-compiled terrain models in q3bsp

------------------------------------------------------------------------
r6539 | havoc | 2006-07-31 15:57:42 +0200 (Mon, 31 Jul 2006) | 2 lines

trying to improve terrain collision brush issues in q3bsp

------------------------------------------------------------------------
r6538 | havoc | 2006-07-31 12:00:45 +0200 (Mon, 31 Jul 2006) | 2 lines

added gamepad/joystick support to the SDL client, this uses completely different cvars from the windows one, and is noticably less weird as a result :)

------------------------------------------------------------------------
r6537 | havoc | 2006-07-31 11:59:14 +0200 (Mon, 31 Jul 2006) | 2 lines

improved plane distance epsilon checking and improved precision when converting brush planes to polygons (by finding a roughly minimal bounding box for the plane to polygon projection), this should reduce collision brush issues on modeled terrain in q3bsp maps

------------------------------------------------------------------------
r6535 | havoc | 2006-07-26 15:57:58 +0200 (Wed, 26 Jul 2006) | 2 lines

491

------------------------------------------------------------------------
r6534 | havoc | 2006-07-26 15:51:03 +0200 (Wed, 26 Jul 2006) | 2 lines

fixed an improperly filed change request

------------------------------------------------------------------------
r6533 | havoc | 2006-07-26 15:43:53 +0200 (Wed, 26 Jul 2006) | 2 lines

495

------------------------------------------------------------------------
r6532 | black | 2006-07-26 12:35:38 +0200 (Wed, 26 Jul 2006) | 3 lines

'Catch' divisions by zero in the VM:
print a warning if developer >= 1 and return 0.0 as result of the operation.

------------------------------------------------------------------------
r6531 | havoc | 2006-07-26 07:24:48 +0200 (Wed, 26 Jul 2006) | 2 lines

498

------------------------------------------------------------------------
r6530 | havoc | 2006-07-26 07:19:31 +0200 (Wed, 26 Jul 2006) | 2 lines

use VM_Warning instead of Con_Printf+PRVM_PrintState

------------------------------------------------------------------------
r6529 | havoc | 2006-07-26 07:16:42 +0200 (Wed, 26 Jul 2006) | 4 lines

changed PF_WARNING to not do a return
changed PF_WARNING define to VM_Warning function
changed Con_Printf warnings in QC builtins to VM_Warning calls

------------------------------------------------------------------------
r6526 | havoc | 2006-07-25 12:38:17 +0200 (Tue, 25 Jul 2006) | 2 lines

print out profile report above runaway loop counter error

------------------------------------------------------------------------
r6525 | havoc | 2006-07-25 08:33:48 +0200 (Tue, 25 Jul 2006) | 2 lines

enabled player scoreboard in coop (note that this overrides the intermission screen)

------------------------------------------------------------------------
r6524 | havoc | 2006-07-24 06:03:36 +0200 (Mon, 24 Jul 2006) | 3 lines

some cleanups and improved warnings
added Prydon campaign to multiplayer setup menu, fixed a bizarre crash in game episode lookup code by rewriting it

------------------------------------------------------------------------
r6523 | havoc | 2006-07-23 13:41:34 +0200 (Sun, 23 Jul 2006) | 2 lines

Mathieu should have set the snd_* cvars properly, not poking .integer

------------------------------------------------------------------------
r6522 | havoc | 2006-07-23 13:00:35 +0200 (Sun, 23 Jul 2006) | 2 lines

disabled WAVE_FORMAT_EXTENSIBLE support as it does not seem to be working

------------------------------------------------------------------------
r6521 | havoc | 2006-07-22 12:36:47 +0200 (Sat, 22 Jul 2006) | 2 lines

added libpng.so fallback name, primarily for FreeBSD

------------------------------------------------------------------------
r6520 | havoc | 2006-07-22 00:55:51 +0200 (Sat, 22 Jul 2006) | 2 lines

remove testing prints (forgot to remove them before commiting)

------------------------------------------------------------------------
r6519 | havoc | 2006-07-21 12:19:31 +0200 (Fri, 21 Jul 2006) | 2 lines

fix bug with items in a trap door in the ceiling in some usermade maps that made them ride the door panels into the walls rather than fall

------------------------------------------------------------------------
r6518 | havoc | 2006-07-21 09:16:18 +0200 (Fri, 21 Jul 2006) | 2 lines

reverting DirectSound buffer position wrapping code to something similar to the old code (except using % instead of &)

------------------------------------------------------------------------
r6517 | havoc | 2006-07-20 06:29:54 +0200 (Thu, 20 Jul 2006) | 2 lines

changed SECONDARY_BUFFER_SIZE to be a multiple of 32768 so that it is roughly a power of 2...

------------------------------------------------------------------------
r6516 | havoc | 2006-07-19 11:44:04 +0200 (Wed, 19 Jul 2006) | 2 lines

471

------------------------------------------------------------------------
r6515 | havoc | 2006-07-19 06:50:45 +0200 (Wed, 19 Jul 2006) | 2 lines

changed Draw_CachePic to load both tga/png/jpg and lmp/wad images at once and take the pic size from the lmp/wad, and cleaned up parts of wad and lmp loading, eliminated SwapPic

------------------------------------------------------------------------
r6514 | havoc | 2006-07-19 00:27:06 +0200 (Wed, 19 Jul 2006) | 2 lines

don't crash if r_restart is used in startup scripts before anything starts the video system (fixed this by starting video system in r_restart if necessary)

------------------------------------------------------------------------
r6513 | havoc | 2006-07-18 01:24:30 +0200 (Tue, 18 Jul 2006) | 2 lines

enabled old quake-style connection/query packets when hosting servers for old protocols, this should allow DP to host compatible NQ servers and such

------------------------------------------------------------------------
r6512 | havoc | 2006-07-18 01:19:46 +0200 (Tue, 18 Jul 2006) | 2 lines

fix a buffer overflow bug in InfoString_SetValue (thanks div0!), and increase userinfo and serverinfo strings to 1280 bytes each (from 196 and 512 respectively)

------------------------------------------------------------------------
r6511 | havoc | 2006-07-10 09:56:26 +0200 (Mon, 10 Jul 2006) | 2 lines

added detection of 4 more surfaceparms to hush warnings

------------------------------------------------------------------------
r6510 | havoc | 2006-07-10 09:35:06 +0200 (Mon, 10 Jul 2006) | 2 lines

changed how ping report hiding operates, so that it only hides one ping report for each ping command issued by the scoreboard

------------------------------------------------------------------------
r6509 | havoc | 2006-07-10 08:58:17 +0200 (Mon, 10 Jul 2006) | 2 lines

fix bug where realtime was used instead of cl.time in player times on scoreboard

------------------------------------------------------------------------
r6508 | havoc | 2006-07-09 11:54:52 +0200 (Sun, 09 Jul 2006) | 2 lines

added bestweapon command

------------------------------------------------------------------------
r6507 | havoc | 2006-07-09 10:34:39 +0200 (Sun, 09 Jul 2006) | 2 lines

added ping and status command output parsing in the client, currently this is used to get pings in the scoreboard on Quake servers (and of course older DP servers), the server sends a pingplreport command after the human-readable ping report so that the packet loss display works (but only if the server supports this), changed client to send ping command instead of pings (at least until the next protocol version increase) and the client will not print ping report messages while the scoreboard is displayed.  the status command parsing is not actually used at this time but could be the basis of iplog support

------------------------------------------------------------------------
r6506 | havoc | 2006-07-09 10:28:43 +0200 (Sun, 09 Jul 2006) | 2 lines

cleaned up cl_netinputpacketspersecond code a little for more readability (no change in behavior)

------------------------------------------------------------------------
r6505 | havoc | 2006-07-08 11:34:54 +0200 (Sat, 08 Jul 2006) | 2 lines

hide ping and packetloss displays if the values are both 0 (bots and local player for instance)

------------------------------------------------------------------------
r6504 | havoc | 2006-07-08 11:24:58 +0200 (Sat, 08 Jul 2006) | 3 lines

added ping and packet loss display to scoreboard, and pings/pingplreport commands to make it work without changing protocol and without breaking demo compatibility either, this can work on any server that supports the pings command and replies with pingplreport
revised scoreboard layout and added column titles above it

------------------------------------------------------------------------
r6503 | molivier | 2006-07-08 10:59:55 +0200 (Sat, 08 Jul 2006) | 2 lines

Added 3D sound support to the Win32 backend (DirectSound and MMSYSTEM), i.e. to the WGL version

------------------------------------------------------------------------
r6502 | havoc | 2006-07-07 06:19:55 +0200 (Fri, 07 Jul 2006) | 2 lines

changed most COM_ParseToken calls to COM_ParseTokenConsole, this fixed the kills listing in the savegame menu

------------------------------------------------------------------------
r6501 | havoc | 2006-07-07 06:19:05 +0200 (Fri, 07 Jul 2006) | 2 lines

whitespace on blank lines removed

------------------------------------------------------------------------
r6499 | havoc | 2006-07-04 09:03:18 +0200 (Tue, 04 Jul 2006) | 2 lines

fixed transfusion data check (the mainmenu item numbering starts at 1, not 0)

------------------------------------------------------------------------
r6498 | molivier | 2006-07-03 21:46:07 +0200 (Mon, 03 Jul 2006) | 2 lines

Cleaned the ugly code I committed for DP_FS_BASEDIR support (the environment variable is now only defined when needed)

------------------------------------------------------------------------
r6496 | havoc | 2006-07-03 09:31:55 +0200 (Mon, 03 Jul 2006) | 2 lines

fix issue with DP_FS_BASEDIR on Mac

------------------------------------------------------------------------
r6495 | havoc | 2006-07-03 03:31:21 +0200 (Mon, 03 Jul 2006) | 2 lines

made nexuiz missing data fallback menu apply to all games when their main menu image is missing (the Open Console and Quit options are more useful than a bunch of checker squares)

------------------------------------------------------------------------
r6494 | havoc | 2006-07-03 02:56:42 +0200 (Mon, 03 Jul 2006) | 2 lines

force a gamma update if v_hwgamma value changes between 1 and 2

------------------------------------------------------------------------
r6493 | havoc | 2006-07-03 02:11:03 +0200 (Mon, 03 Jul 2006) | 2 lines

added v_hwgamma 2 (forced gamma, ignores driver returning failure) for testing

------------------------------------------------------------------------
r6492 | havoc | 2006-07-03 02:02:30 +0200 (Mon, 03 Jul 2006) | 3 lines

clean up of FL_ONGROUND checks in MOVE_TOSS/FLY/FLYMISSILE/BOUNCE/BOUNCEMISSILE/STEP code, this fixes items and monsters sometimes being left floating in the air after a trap door opens or when riding a func_train (most notably in the lava room of r1m5 of mission pack 2)
added sv_gameplayfix_upwardvelocityclearsongroundflag cvar to allow the upward velocity gameplay fix to be disabled if desired

------------------------------------------------------------------------
r6491 | havoc | 2006-07-03 00:50:20 +0200 (Mon, 03 Jul 2006) | 2 lines

fixed DP_FS_BASEDIR passing to gcc by adding single quotes around the entire contents of the -D parameter

------------------------------------------------------------------------
r6490 | sajt | 2006-07-01 00:45:58 +0200 (Sat, 01 Jul 2006) | 2 lines

Patch from div0 to fix autosprite

------------------------------------------------------------------------
r6489 | sajt | 2006-06-28 10:30:26 +0200 (Wed, 28 Jun 2006) | 2 lines

Patch from div0 to fix skyboxes in downloaded maps

------------------------------------------------------------------------
r6488 | sajt | 2006-06-28 10:11:31 +0200 (Wed, 28 Jun 2006) | 2 lines

Fixed a bug in Matrix4x4_CopyTranslateOnly... which is never called. Oh well.

------------------------------------------------------------------------
r6487 | molivier | 2006-06-25 19:42:37 +0200 (Sun, 25 Jun 2006) | 2 lines

Removed the extra definitions of hton[sl] and ntoh[sl] since apparently they are not necessary on any platform DP supports

------------------------------------------------------------------------
r6486 | molivier | 2006-06-25 19:35:17 +0200 (Sun, 25 Jun 2006) | 2 lines

You can now set a different default base directory at compile time, by defining DP_FS_BASEDIR to the new value (ex: make DP_FS_BASEDIR=/usr/local/games/quake release)

------------------------------------------------------------------------
r6485 | molivier | 2006-06-25 19:00:07 +0200 (Sun, 25 Jun 2006) | 2 lines

Decreased the OSS buffer size, and cleaned some code

------------------------------------------------------------------------
r6484 | molivier | 2006-06-23 21:51:29 +0200 (Fri, 23 Jun 2006) | 2 lines

The name of the SDL config program used by the makefiles is now configurable thanks to the SDL_CONFIG variable (ex: make SDL_CONFIG=sdl11-config sdl-release). Its default value is "sdl-config"

------------------------------------------------------------------------
r6483 | havoc | 2006-06-23 08:31:32 +0200 (Fri, 23 Jun 2006) | 2 lines

fix gamma 'flicker' bug caused by gamma_forcenextframe being repeatedly set when gamma fails

------------------------------------------------------------------------
r6482 | havoc | 2006-06-22 07:58:02 +0200 (Thu, 22 Jun 2006) | 2 lines

fix some stupid bugs in gamma update code (why didn't I remove the forcenextframe variable?)

------------------------------------------------------------------------
r6481 | molivier | 2006-06-20 21:38:20 +0200 (Tue, 20 Jun 2006) | 2 lines

Made S_ChooseCheaperFormat() a bit smarter

------------------------------------------------------------------------
r6480 | molivier | 2006-06-15 08:13:08 +0200 (Thu, 15 Jun 2006) | 2 lines

Fixed OGG Vorbis code when using OGGs with a sound frequency smaller than the sound output frequency (the code was wrongly using the OGG sound format instead of the output sound format to compute the streaming buffer size). Thanks to Dresk for reporting this problem

------------------------------------------------------------------------
r6479 | havoc | 2006-06-14 18:22:11 +0200 (Wed, 14 Jun 2006) | 2 lines

reduce runaway loop counter limit from 1 billion to 10 million, as 1 billion takes a while

------------------------------------------------------------------------
r6478 | havoc | 2006-06-14 15:48:27 +0200 (Wed, 14 Jun 2006) | 2 lines

added a section on replacement content, and some other edits

------------------------------------------------------------------------
r6477 | havoc | 2006-06-13 18:25:55 +0200 (Tue, 13 Jun 2006) | 2 lines

made FromString reject empty strings

------------------------------------------------------------------------
r6476 | havoc | 2006-06-13 15:09:23 +0200 (Tue, 13 Jun 2006) | 2 lines

changed r_gls_deluxemapping 2 to not attempt to do fake deluxemapping on vertex lit surfaces

------------------------------------------------------------------------
r6475 | havoc | 2006-06-13 11:15:36 +0200 (Tue, 13 Jun 2006) | 2 lines

patch from div0 to make universal-binary builds of darkplaces possible on Mac OS X

------------------------------------------------------------------------
r6474 | havoc | 2006-06-12 23:25:29 +0200 (Mon, 12 Jun 2006) | 2 lines

modified VID_RestoreSystemGamma to force a gamma update on next frame (if it turned off hardware gamma temporarily)

------------------------------------------------------------------------
r6473 | havoc | 2006-06-12 23:24:48 +0200 (Mon, 12 Jun 2006) | 2 lines

don't set vid_activewindow to false in Map/Unmap events, just in FocusIn/FocusOut

------------------------------------------------------------------------
r6472 | havoc | 2006-06-12 22:24:27 +0200 (Mon, 12 Jun 2006) | 2 lines

check if master server address string is empty when sending heartbeats and master queries

------------------------------------------------------------------------
r6471 | havoc | 2006-06-12 14:43:47 +0200 (Mon, 12 Jun 2006) | 2 lines

updated GLSL shader to match the one in Nexuiz 2.0, this fixes reliefmapping/offsetmapping on models, and improves performance on NVIDIA by using more half-precision math

------------------------------------------------------------------------
r6470 | sajt | 2006-06-12 05:38:04 +0200 (Mon, 12 Jun 2006) | 2 lines

Added libcurl.[ch] to MSVC project files

------------------------------------------------------------------------
r6469 | havoc | 2006-06-12 01:24:18 +0200 (Mon, 12 Jun 2006) | 2 lines

added HDR bloom feature, not very different from bloom but looks better, runs a bit slower

------------------------------------------------------------------------
r6468 | havoc | 2006-06-11 17:35:41 +0200 (Sun, 11 Jun 2006) | 2 lines

don't allow $ expansion or sendcvar on rcon_password (added CVAR_PRIVATE flag for this purpose)

------------------------------------------------------------------------
r6467 | havoc | 2006-06-11 17:35:08 +0200 (Sun, 11 Jun 2006) | 2 lines

don't draw notify lines while r_letterbox is on

------------------------------------------------------------------------
r6466 | molivier | 2006-06-11 16:13:09 +0200 (Sun, 11 Jun 2006) | 2 lines

Fixed audio capture when the sound engine wasn't restarted right before the capture (thanks to FrikaC for reporting the bug)

------------------------------------------------------------------------
r6465 | havoc | 2006-06-11 15:50:25 +0200 (Sun, 11 Jun 2006) | 3 lines

removed crosshair_static cvar (now only the hud crosshair remains)
merged r_crosshairs.c into sbar.c

------------------------------------------------------------------------
r6464 | havoc | 2006-06-11 15:23:40 +0200 (Sun, 11 Jun 2006) | 2 lines

removed team colored crosshair feature, removed crosshair brightness cvar, renamed crosshair_alpha to crosshair_color_alpha

------------------------------------------------------------------------
r6463 | havoc | 2006-06-11 15:18:01 +0200 (Sun, 11 Jun 2006) | 2 lines

removed crosshair_flashspeed and crosshair_flashrange cvars (flashing is now gone)

------------------------------------------------------------------------
r6462 | havoc | 2006-06-11 15:12:07 +0200 (Sun, 11 Jun 2006) | 2 lines

changed the default crosshair textures to use greyscale instead of alpha fading

------------------------------------------------------------------------
r6461 | havoc | 2006-06-11 15:03:45 +0200 (Sun, 11 Jun 2006) | 2 lines

added crosshair_useteamcolor, crosshair_color_red, crosshair_color_green, and crosshair_color_blue cvars

------------------------------------------------------------------------
r6460 | havoc | 2006-06-11 14:46:07 +0200 (Sun, 11 Jun 2006) | 2 lines

fixed 'slow gravity' bug when cl_movement players are not replying to all server frames

------------------------------------------------------------------------
r6459 | molivier | 2006-06-11 11:30:59 +0200 (Sun, 11 Jun 2006) | 2 lines

Fixed the 5.1 speaker layout when using SDL on Win32 (thanks to Willis for the report)

------------------------------------------------------------------------
r6458 | molivier | 2006-06-10 20:22:20 +0200 (Sat, 10 Jun 2006) | 2 lines

Added snd_channellayout to configure the speaker layout dynamically (0: auto, 1: standard, 2: ALSA)

------------------------------------------------------------------------
r6457 | molivier | 2006-06-10 16:23:26 +0200 (Sat, 10 Jun 2006) | 2 lines

When we're recording a demo, we must not stop rendering sound even when the application becomes inactive

------------------------------------------------------------------------
r6456 | molivier | 2006-06-10 16:00:25 +0200 (Sat, 10 Jun 2006) | 2 lines

Removed some debug printings, and made some others requiring developer >= 100. Reset the soundcard after opening in the OSS module.

------------------------------------------------------------------------
r6455 | havoc | 2006-06-10 14:19:57 +0200 (Sat, 10 Jun 2006) | 2 lines

disabled the broken cl_autodemo feature until Sajt fixes it

------------------------------------------------------------------------
r6454 | havoc | 2006-06-09 19:30:56 +0200 (Fri, 09 Jun 2006) | 3 lines

changed cvar default setup code such that cvar default strings are locked after executing default.cfg the first time (that is to say, their current values are copied into their default strings at this point), this fixes unsaved cvar problems in nexuiz caused by the default string being out of date on cvars that were modified by default.cfg
changed Reset To Defaults option in menu to use a newly added cvar_resettodefaults_all command before execing default.cfg to reset the binds

------------------------------------------------------------------------
r6453 | havoc | 2006-06-09 15:50:50 +0200 (Fri, 09 Jun 2006) | 2 lines

trust the q3bsp NODRAW flag rather than the shader

------------------------------------------------------------------------
r6451 | havoc | 2006-06-09 11:49:36 +0200 (Fri, 09 Jun 2006) | 3 lines

don't allocate a mempool or texture pool if a model file is not found (prevents buildup of 'progs/beam.mdl' memory/texture pools if it is not found)
audited 'if mod->loaded' checks to be more sure about unloading models even if they failed to load

------------------------------------------------------------------------
r6450 | havoc | 2006-06-09 09:50:42 +0200 (Fri, 09 Jun 2006) | 2 lines

fixed another C99 lazy variable declaration bug in div0's physics patch

------------------------------------------------------------------------
r6449 | havoc | 2006-06-09 09:35:41 +0200 (Fri, 09 Jun 2006) | 2 lines

another curl message patch from div0

------------------------------------------------------------------------
r6448 | havoc | 2006-06-09 09:34:12 +0200 (Fri, 09 Jun 2006) | 2 lines

libcurl.2.dylib is apparently compatible for our purposes and neatly adds Mac OS X Panther support

------------------------------------------------------------------------
r6447 | havoc | 2006-06-09 09:30:17 +0200 (Fri, 09 Jun 2006) | 2 lines

fix typo that caused crashes in detection of model animation in models with only one frame

------------------------------------------------------------------------
r6446 | havoc | 2006-06-09 09:04:40 +0200 (Fri, 09 Jun 2006) | 2 lines

another patch from div0 to curl messages

------------------------------------------------------------------------
r6445 | havoc | 2006-06-09 08:50:19 +0200 (Fri, 09 Jun 2006) | 2 lines

fix for continuously spewed curl error messages

------------------------------------------------------------------------
r6444 | havoc | 2006-06-09 07:28:07 +0200 (Fri, 09 Jun 2006) | 2 lines

oops, forgot these

------------------------------------------------------------------------
r6443 | havoc | 2006-06-09 04:03:34 +0200 (Fri, 09 Jun 2006) | 2 lines

web download patch from div0, this adds the "curl" console command, and the ability for servers to send a set of conditional curl commands which will download pk3 archives if specific files are missing

------------------------------------------------------------------------
r6442 | havoc | 2006-06-09 03:56:11 +0200 (Fri, 09 Jun 2006) | 2 lines

nexuiz prediction patch from div0, this adds two new cl_movement_airaccel_* cvars which change air control physics

------------------------------------------------------------------------
r6441 | molivier | 2006-06-08 23:39:20 +0200 (Thu, 08 Jun 2006) | 2 lines

The BSD audio module had the same bug as the OSS module (incorrectly reporting "audio can't keep up")

------------------------------------------------------------------------
r6440 | havoc | 2006-06-08 14:35:10 +0200 (Thu, 08 Jun 2006) | 2 lines

fixed r_drawportals

------------------------------------------------------------------------
r6439 | havoc | 2006-06-08 13:16:52 +0200 (Thu, 08 Jun 2006) | 2 lines

fixed collision bug on q3 light cones and other non-solid brushes that are not axial, now uses only the brush's supercontents value, not its surface textures

------------------------------------------------------------------------
r6438 | havoc | 2006-06-08 13:00:21 +0200 (Thu, 08 Jun 2006) | 2 lines

no longer converts vertex-morph model formats to float arrays, instead keeping their geometry in the original formats from disk, this saves 1.2MB of memory in e1m2 and might slightly improve load times, it also preserves vertex normals to get rid of shading artifacts on texcoord seams

------------------------------------------------------------------------
r6437 | havoc | 2006-06-08 12:57:55 +0200 (Thu, 08 Jun 2006) | 2 lines

added more image search paths so that md2 model skins load properly again, and to reduce problems for tenebrae model packs

------------------------------------------------------------------------
r6435 | havoc | 2006-06-07 10:49:56 +0200 (Wed, 07 Jun 2006) | 2 lines

don't crash if a quake button entity is on its alternate frames but doesn't actually have any to show

------------------------------------------------------------------------
r6434 | havoc | 2006-06-07 10:33:57 +0200 (Wed, 07 Jun 2006) | 2 lines

don't crash if key bindings functions are called with bogus keynums

------------------------------------------------------------------------
r6433 | havoc | 2006-06-07 10:33:21 +0200 (Wed, 07 Jun 2006) | 2 lines

fix a < 256 check that should have been < MAX_LIGHTSTYLES

------------------------------------------------------------------------
r6432 | havoc | 2006-06-07 08:34:11 +0200 (Wed, 07 Jun 2006) | 2 lines

ignore GL_EXT_texture3D extension if it reports a bogus GL_MAX_3D_TEXTURE_SIZE

------------------------------------------------------------------------
r6431 | havoc | 2006-06-07 08:30:49 +0200 (Wed, 07 Jun 2006) | 2 lines

extra check for gl_texture3d

------------------------------------------------------------------------
r6430 | havoc | 2006-06-07 08:28:30 +0200 (Wed, 07 Jun 2006) | 2 lines

fix typo

------------------------------------------------------------------------
r6429 | havoc | 2006-06-07 08:20:18 +0200 (Wed, 07 Jun 2006) | 2 lines

fix maps/ check to use 5 characters, not 4

------------------------------------------------------------------------
r6428 | havoc | 2006-06-07 08:19:54 +0200 (Wed, 07 Jun 2006) | 2 lines

prevent Image_MipReduce from getting stuck in an infinite loop on 3D textures

------------------------------------------------------------------------
r6427 | havoc | 2006-06-07 08:03:29 +0200 (Wed, 07 Jun 2006) | 2 lines

added stack trace printout to VM_remove warnings

------------------------------------------------------------------------
r6426 | havoc | 2006-06-07 08:02:59 +0200 (Wed, 07 Jun 2006) | 2 lines

don't save cvars that are at their default value

------------------------------------------------------------------------
r6425 | havoc | 2006-06-07 08:02:37 +0200 (Wed, 07 Jun 2006) | 2 lines

fixed an unregistered cvar

------------------------------------------------------------------------
r6424 | havoc | 2006-06-07 06:52:25 +0200 (Wed, 07 Jun 2006) | 2 lines

disabled loading of csprogs.dat if developer is less than 100

------------------------------------------------------------------------
r6423 | havoc | 2006-06-07 06:11:45 +0200 (Wed, 07 Jun 2006) | 2 lines

added DP_GFX_EXTERNALTEXTURES_PERMAP extension

------------------------------------------------------------------------
r6422 | havoc | 2006-06-06 13:12:52 +0200 (Tue, 06 Jun 2006) | 2 lines

commented out S_StartSound <whatever> not precached message because it happens constantly if the file could not be found

------------------------------------------------------------------------
r6421 | molivier | 2006-06-06 08:21:47 +0200 (Tue, 06 Jun 2006) | 2 lines

Attempt to fix speaker layout for 5.1 and 7.1 sound, on Windows and Mac OS X; the sound engine now builds its speaker layout based on the OS and the snd_swapstereo cvar. Plus a minor fix for the OSS sound module (was incorrectly reporting "audio can't keep up")

------------------------------------------------------------------------
r6420 | molivier | 2006-06-06 08:14:34 +0200 (Tue, 06 Jun 2006) | 2 lines

Use our usual defines for detecting the OS type

------------------------------------------------------------------------
r6416 | molivier | 2006-06-05 00:58:52 +0200 (Mon, 05 Jun 2006) | 2 lines

Fixed the "nosound" cvar. Thanks to Willis for having reported this bug

------------------------------------------------------------------------
r6415 | molivier | 2006-06-04 12:57:24 +0200 (Sun, 04 Jun 2006) | 25 lines

- the Linux sound modules (ALSA and OSS) are now write-based, instead of
mmap-based. It should fix the problems with inboard sound cards
- added 3 cvars controlling the sound output format: snd_speed,
snd_channels, and snd_width (default values: 48000, 2, and 2
respectively). They're saved in the config file.
- the checks for command line options and environment variables
modifying the sound output format are now common to all modules. The
command line options supported are: -sndmono, -sndstereo, -sndquad,
-sndspeed, and -sndbits. The environment variables supported are:
QUAKE_SOUND_CHANNELS, QUAKE_SOUND_SPEED, and QUAKE_SOUND_SAMPLEBITS.
- added a (still dumb) function to figure out a better sound format when
the initialization of the sound card failed
- sound modules can now suggest a sound format if the initialization of
the sound card failed
- you can now do a "snd_restart" while having modified snd_width and/or
snd_channel. Doing a snd_restart with a modified snd_speed isn't yet
supported, it will fall back to the previous speed
- The WGL video module was blocking the sound output when the
application window lost the focus. Now, this code is shared and the AGL,
GLX and SDL video modules implement such a mecanism
- A lot of minor fixes, changes, factorizations and rewrites all over
the sound engine code and its modules
- added CeilPowerOf2() in the math library
- fixed BSDmakefile for NetBSD

------------------------------------------------------------------------
r6414 | havoc | 2006-06-04 09:29:19 +0200 (Sun, 04 Jun 2006) | 2 lines

cl_bobmodel is now a saved cvar

------------------------------------------------------------------------
r6410 | havoc | 2006-06-01 08:59:30 +0200 (Thu, 01 Jun 2006) | 2 lines

removed TE_VORESPIKE, no idea how it came into existence and it was never used

------------------------------------------------------------------------
r6409 | havoc | 2006-05-30 22:53:57 +0200 (Tue, 30 May 2006) | 2 lines

don't allow runaway loops caused by Con_Print during notify/console drawing

------------------------------------------------------------------------
r6408 | havoc | 2006-05-30 12:42:21 +0200 (Tue, 30 May 2006) | 6 lines

fixed several crashes in video capture code when files fail to open
eliminated cl_capturevideo_sound cvar (now always on)
made sound capture non-realtime, by syncing sound mixer to capture frame while capture is active, this sounds horrible while recording but produces perfectly synced sound output to the .wav file
now numbers dpvideo files when saving, each one a higher number than the previous (the next number to use is saved to config), this allows capturing many short video clips without stopping to process the files
what this means: cl_capturevideo is now much more useful than before.

------------------------------------------------------------------------
r6407 | havoc | 2006-05-30 12:37:19 +0200 (Tue, 30 May 2006) | 2 lines

fix unintended use of alpha test on 2d graphics (hud/menu/etc)

------------------------------------------------------------------------
r6406 | molivier | 2006-05-29 13:59:46 +0200 (Mon, 29 May 2006) | 2 lines

Updated Dev-C++ project files

------------------------------------------------------------------------
r6405 | havoc | 2006-05-29 07:54:07 +0200 (Mon, 29 May 2006) | 2 lines

changed color control menu correction value to 0.5 (medium grey on linear color monitors)

------------------------------------------------------------------------
r6404 | havoc | 2006-05-29 07:51:24 +0200 (Mon, 29 May 2006) | 2 lines

fixed repeated gamma ramp setting attempts in case of failure (again)

------------------------------------------------------------------------
r6403 | havoc | 2006-05-28 23:19:45 +0200 (Sun, 28 May 2006) | 2 lines

fix bug that caused constant gamma ramp setting in windows in cases of failure

------------------------------------------------------------------------
r6402 | havoc | 2006-05-28 22:43:18 +0200 (Sun, 28 May 2006) | 2 lines

disable canjump check until it's fixed

------------------------------------------------------------------------
r6401 | havoc | 2006-05-28 21:38:41 +0200 (Sun, 28 May 2006) | 2 lines

further tweaks to prediction

------------------------------------------------------------------------
r6400 | havoc | 2006-05-28 21:36:23 +0200 (Sun, 28 May 2006) | 2 lines

fix a bug where dedicated servers might not respond to typing in the server console if no map is currently running (which is rare)

------------------------------------------------------------------------
r6399 | havoc | 2006-05-28 09:27:18 +0200 (Sun, 28 May 2006) | 2 lines

added a few more GLSL shader program setting calls in R_RenderScene just to prevent problems if a model/map rendering call leaves a GLSL program active

------------------------------------------------------------------------
r6398 | havoc | 2006-05-28 03:26:06 +0200 (Sun, 28 May 2006) | 2 lines

added sv_clmovement_* cvars to disable movement prediction of players, or disable it only when their ping is below a certain value (by default 100ms)

------------------------------------------------------------------------
r6397 | havoc | 2006-05-28 02:23:59 +0200 (Sun, 28 May 2006) | 2 lines

no longer sets model->loaded if the model file was not found, since the old Mod_CheckLoaded code is long gone

------------------------------------------------------------------------
r6396 | havoc | 2006-05-27 22:12:03 +0200 (Sat, 27 May 2006) | 2 lines

remove an unused variable

------------------------------------------------------------------------
r6395 | havoc | 2006-05-27 22:07:34 +0200 (Sat, 27 May 2006) | 2 lines

centering of notify lines in nexuiz now ignores color codes

------------------------------------------------------------------------
r6394 | havoc | 2006-05-27 21:58:53 +0200 (Sat, 27 May 2006) | 2 lines

centerprint no longer counts color codes when centering lines

------------------------------------------------------------------------
r6393 | havoc | 2006-05-26 05:09:02 +0200 (Fri, 26 May 2006) | 2 lines

don't hexdump png images while reading them (why did it do this??)

------------------------------------------------------------------------
r6392 | havoc | 2006-05-26 03:04:39 +0200 (Fri, 26 May 2006) | 2 lines

fix bug that was preventing rcon_address from working

------------------------------------------------------------------------
r6391 | havoc | 2006-05-26 03:00:09 +0200 (Fri, 26 May 2006) | 2 lines

implemented sv_gameplayfix_qwplayerphysics

------------------------------------------------------------------------
r6390 | havoc | 2006-05-26 01:46:11 +0200 (Fri, 26 May 2006) | 2 lines

fix a typo

------------------------------------------------------------------------
r6389 | havoc | 2006-05-26 01:28:03 +0200 (Fri, 26 May 2006) | 2 lines

try not to kick players for supposed speed cheating when float time degrades too much

------------------------------------------------------------------------
r6388 | havoc | 2006-05-26 01:27:24 +0200 (Fri, 26 May 2006) | 2 lines

fixed sv_waterfriction code so it is now used

------------------------------------------------------------------------
r6387 | havoc | 2006-05-26 01:22:06 +0200 (Fri, 26 May 2006) | 2 lines

added sv_waterfriction, sv_airaccelerate, sv_wateraccelerate cvars (and corresponding cl_movement_ cvars), now physics are about as configurable as quakeworld

------------------------------------------------------------------------
r6386 | havoc | 2006-05-25 09:48:33 +0200 (Thu, 25 May 2006) | 2 lines

patch from div0 that allows loading new pak/pk3 archives while running

------------------------------------------------------------------------
r6385 | havoc | 2006-05-25 09:41:38 +0200 (Thu, 25 May 2006) | 2 lines

patch from div0 that makes togglemenu support a parameter (either 1 or 0) to not toggle but instead set the menu on or off

------------------------------------------------------------------------
r6384 | havoc | 2006-05-25 09:39:44 +0200 (Thu, 25 May 2006) | 2 lines

changed matchpattern to take a const char *

------------------------------------------------------------------------
r6380 | havoc | 2006-05-25 06:12:05 +0200 (Thu, 25 May 2006) | 2 lines

replaced cl_beams_relative cvar with cl_beams_quakepositionhack and cl_beams_instantaimhack and rewrote the relevant code, it now works like quake (except with instant aiming in the case of the instantaimhack) and applies only to your player

------------------------------------------------------------------------
r6379 | havoc | 2006-05-25 05:57:50 +0200 (Thu, 25 May 2006) | 2 lines

changed qc profiling to use doubles instead of ints for profile counters, so it can now count beyond 4 billion

------------------------------------------------------------------------
r6378 | havoc | 2006-05-25 05:54:31 +0200 (Thu, 25 May 2006) | 2 lines

increased runaway jump count limit to 1000000000

------------------------------------------------------------------------
r6377 | havoc | 2006-05-25 05:49:59 +0200 (Thu, 25 May 2006) | 2 lines

calculate bounding box properly for psk models, and a cleanup of bounding box generation code for mdl/md2/md3 models

------------------------------------------------------------------------
r6376 | havoc | 2006-05-25 05:46:21 +0200 (Thu, 25 May 2006) | 4 lines

fixed crashes when changing a few settings while playing a demo
fixed repeated jumping bug in cl_movement code
fixed crashes that would occur if playing a QW demo (not yet supported)

------------------------------------------------------------------------
r6375 | havoc | 2006-05-25 05:43:58 +0200 (Thu, 25 May 2006) | 3 lines

fix crash when entering "color" command while playing a demo
fixed values printed by bottomcolor/topcolor commands (so bottomcolor no longer reports the whole color like color does, instead just the pants color)

------------------------------------------------------------------------
r6374 | havoc | 2006-05-25 05:41:51 +0200 (Thu, 25 May 2006) | 2 lines

fix playback of demos after playing on a quakeworld server

------------------------------------------------------------------------
r6373 | havoc | 2006-05-25 05:41:01 +0200 (Thu, 25 May 2006) | 3 lines

display qw spectators as spectators on the scoreboard
fix a crash if holding showscores while playing a demo

------------------------------------------------------------------------
r6372 | havoc | 2006-05-24 00:54:30 +0200 (Wed, 24 May 2006) | 2 lines

remove some r_render checks, and added an r_render check to vid_sdl.c VID_Finish

------------------------------------------------------------------------
r6370 | havoc | 2006-05-17 10:18:06 +0200 (Wed, 17 May 2006) | 2 lines

471

------------------------------------------------------------------------
r6369 | havoc | 2006-05-15 04:40:36 +0200 (Mon, 15 May 2006) | 2 lines

patch from Dresk that adds a doom3-like "toggle" console command

------------------------------------------------------------------------
r6368 | havoc | 2006-05-12 10:11:46 +0200 (Fri, 12 May 2006) | 2 lines

reorganized a lot of renderer variables into r_refdef, and split some things out of r_refdef into r_view and r_viewcache, this reorganization brings DP closer to being able to render to textures

------------------------------------------------------------------------
r6367 | havoc | 2006-05-12 09:33:09 +0200 (Fri, 12 May 2006) | 2 lines

undo something not meant to be committed yet

------------------------------------------------------------------------
r6366 | havoc | 2006-05-12 09:06:22 +0200 (Fri, 12 May 2006) | 2 lines

fix two implicit conversions

------------------------------------------------------------------------
r6365 | havoc | 2006-05-12 09:05:32 +0200 (Fri, 12 May 2006) | 2 lines

fix s->waterlevel = 0 and such

------------------------------------------------------------------------
r6364 | havoc | 2006-05-11 11:20:29 +0200 (Thu, 11 May 2006) | 2 lines

removed the clearing of the root bone in .psa animations, to fix bugs (sorry, this was experimental and apparently broken)

------------------------------------------------------------------------
r6363 | havoc | 2006-05-11 11:03:10 +0200 (Thu, 11 May 2006) | 2 lines

fix a warning

------------------------------------------------------------------------
r6362 | havoc | 2006-05-10 13:52:21 +0200 (Wed, 10 May 2006) | 2 lines

redesigned skeletal model loading and rendering to use matrix-palette animation (still in software, but that may change at some point), this improved nexuiz -benchmark demos/demo1 framerates by 11.3%

------------------------------------------------------------------------
r6361 | havoc | 2006-05-10 13:16:44 +0200 (Wed, 10 May 2006) | 2 lines

added Vector4Set macro

------------------------------------------------------------------------
r6360 | havoc | 2006-05-10 12:14:26 +0200 (Wed, 10 May 2006) | 4 lines

some clean up of packet parsing
merged most of the server info parsing code between the two cases (DP server and QW server), and reimplemented server info parsing for NQ servers
enabled ping/ack packet processing

------------------------------------------------------------------------
r6359 | havoc | 2006-05-10 10:26:44 +0200 (Wed, 10 May 2006) | 2 lines

setinfo *ip on every network connection (currently only meaningful to QW reconnect command, but potentially useful), and removed some unneeded setinfo's since the cvars/commands now work properly

------------------------------------------------------------------------
r6358 | havoc | 2006-05-10 10:24:54 +0200 (Wed, 10 May 2006) | 2 lines

improved setinfo handling so that quakeworld works much better now (name/topcolor/bottomcolor/skin/team/noaim are handled properly now), this means TeamFortress won't kick clients for not responding to team/skin cvars, and is fully playable

------------------------------------------------------------------------
r6357 | havoc | 2006-05-10 10:02:45 +0200 (Wed, 10 May 2006) | 2 lines

removed all 3 uses of the brown-text message prefix in the server

------------------------------------------------------------------------
r6356 | havoc | 2006-05-10 09:59:45 +0200 (Wed, 10 May 2006) | 2 lines

added a comment

------------------------------------------------------------------------
r6355 | havoc | 2006-05-10 08:02:04 +0200 (Wed, 10 May 2006) | 2 lines

cleanup of chat prefix character handling, this fixes a bug that was removing quake's brown characters at the beginning of a line

------------------------------------------------------------------------
r6354 | havoc | 2006-05-09 17:26:00 +0200 (Tue, 09 May 2006) | 2 lines

significantly reworked the cl_movement code, now predicts quakeworld almost completely correctly (only some issues with the different nature of stair stepping, and other differences compared to the FlyMove function on the servers which affect sliding in grooves)

------------------------------------------------------------------------
r6353 | havoc | 2006-05-09 17:22:46 +0200 (Tue, 09 May 2006) | 3 lines

don't shuffle servers around when pings come in later and are identical to the existing ones (I.E. made the sort be a stable sort)
fixed a bug that caused qwmaster query packets to be bigger than necessary (was writing 7 bytes, should have been 3 bytes)

------------------------------------------------------------------------
r6352 | havoc | 2006-05-09 17:18:50 +0200 (Tue, 09 May 2006) | 2 lines

do q1bsp lighting checks starting with + 0.125 unit Z offset to improve chances of finding a lighting value rather than returning black when a model origin is almost stuck in the floor

------------------------------------------------------------------------
r6351 | havoc | 2006-05-09 01:39:56 +0200 (Tue, 09 May 2006) | 2 lines

split R_DrawTextureSurfaceList code into several functions and added separate multitexture-combine/singletexture paths

------------------------------------------------------------------------
r6350 | havoc | 2006-05-08 12:35:32 +0200 (Mon, 08 May 2006) | 2 lines

fix NUL termination issue on the test string by not actually printing the packet

------------------------------------------------------------------------
r6349 | havoc | 2006-05-08 12:33:02 +0200 (Mon, 08 May 2006) | 2 lines

fixes to the test program

------------------------------------------------------------------------
r6348 | havoc | 2006-05-08 12:22:10 +0200 (Mon, 08 May 2006) | 2 lines

lhnet fixes - now calls WSAStartup during LHNET_Init and WSAShutdown during LHNET_Shutdown, so gethostbyname will work on windows without any sockets open (as long as LHNET_Init has been called of course), fixed a few things that were breaking compilation with -DSTANDALONETEST and added a new simpler and more useful standalone test program which is now used by default (edit the #if if you want the old one instead)

------------------------------------------------------------------------
r6347 | havoc | 2006-05-08 07:21:14 +0200 (Mon, 08 May 2006) | 2 lines

fix really stupid bug in qw download code which was saving the same file repeatedly (it wasn't resetting the buffer position on each new download)

------------------------------------------------------------------------
r6345 | havoc | 2006-05-01 14:30:03 +0200 (Mon, 01 May 2006) | 2 lines

fix bug with gl_combine 0 transparent water rendering in q1bsp (alpha was not being stored, leaving garbage (typically 0) in the vertex alpha, making the water disappear)

------------------------------------------------------------------------
r6344 | havoc | 2006-05-01 14:14:02 +0200 (Mon, 01 May 2006) | 2 lines

fix a type (description as part of value on r_textshadow)

------------------------------------------------------------------------
r6343 | havoc | 2006-05-01 14:05:34 +0200 (Mon, 01 May 2006) | 3 lines

optimized rtlighting passes by using RSurf_DrawBatch_Simple, this took a lot of code restructuring but the resulting code is definitely a lot faster
fixed bugs in RSurf_DrawBatch_Lightmap related changes

------------------------------------------------------------------------
r6342 | havoc | 2006-05-01 11:00:22 +0200 (Mon, 01 May 2006) | 4 lines

restructured RSurf_DrawLightmap to become RSurf_DrawBatch_Lightmap which processes all arrays and sets things up perfectly, then renders all the surfaces with a call to R_DrawBatch_Simple
added dynamic surface-merging to R_DrawBatch_Simple, depending on the new r_batchmode cvar it either renders surfaces individually (as before), consecutively (consecutively numbered surfaces are rendered with one call for their combined triangle elements range), or by memcpy merging elements into one array (this has rather chaotic vertex ranges so gl_lockarrays is disabled in this code because it is a consistent speed loss in this case)
this optimization increased fps by 4.7% in timedemo bigass1, and offers bigger gains in very high poly q1bsp and q3bsp maps

------------------------------------------------------------------------
r6341 | havoc | 2006-04-30 05:42:04 +0200 (Sun, 30 Apr 2006) | 3 lines

changed svc_setangle to cause interpolated turning when spectating (two or more consecutive frames with a svc_setangle message), and instant entity updates when teleporting (just one svc_setangle) so you no longer fly through the level when teleporting
changed cl_beams_relative to only apply to the local player (unless set to a value of 2 or higher)

------------------------------------------------------------------------
r6340 | havoc | 2006-04-28 03:21:54 +0200 (Fri, 28 Apr 2006) | 2 lines

treat AltGr key as ALT for bind purposes

------------------------------------------------------------------------
r6339 | black | 2006-04-27 22:23:42 +0200 (Thu, 27 Apr 2006) | 6 lines

Add _DrawQ_ProcessDrawFlag to clean-up the glblend setup code.
Add CL_Video_KeyEvent and support for it to Key_Event, now the the fullscreen video
is closed automatically when you hit enter, space or escape and the video system catches all
input (no more accidentially nagivating around in the menu).
(Please test this and report bugs to black@icculus.org if you find any)

------------------------------------------------------------------------
r6338 | havoc | 2006-04-27 04:54:45 +0200 (Thu, 27 Apr 2006) | 2 lines

fixed fullbright support in glsl path

------------------------------------------------------------------------
r6337 | sajt | 2006-04-27 02:58:09 +0200 (Thu, 27 Apr 2006) | 2 lines

Removed myself from all the todo items. I no longer mind if none of these are ever implemented/fixed, and I check the cvs often enough that I'll see if they ever are. Feel free to remove any of these altogether, e.g. mirrors, hub save, skyrooms...

------------------------------------------------------------------------
r6336 | sajt | 2006-04-27 02:49:46 +0200 (Thu, 27 Apr 2006) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r6335 | havoc | 2006-04-26 16:34:29 +0200 (Wed, 26 Apr 2006) | 2 lines

added proper liquidfriction support

------------------------------------------------------------------------
r6334 | havoc | 2006-04-26 16:22:55 +0200 (Wed, 26 Apr 2006) | 2 lines

optimized handling of decals, which increased timedemo bigass1.dem from 185fps to 191fps, also partially implemented airfriction and liquidfriction

------------------------------------------------------------------------
r6333 | havoc | 2006-04-26 15:12:43 +0200 (Wed, 26 Apr 2006) | 2 lines

a simple optimization to particle allocation, increased bigass1.dem performance from 184fps to 185fps

------------------------------------------------------------------------
r6332 | havoc | 2006-04-26 14:57:21 +0200 (Wed, 26 Apr 2006) | 2 lines

now does batching of transparent surfaces, such as particles, this raised performance in bigass1.dem from 143fps to 184fps (it uses a lot of particles)

------------------------------------------------------------------------
r6331 | havoc | 2006-04-26 12:20:45 +0200 (Wed, 26 Apr 2006) | 2 lines

added a lot more CHECKGLERROR macro calls, to identify precisely where any error occurs

------------------------------------------------------------------------
r6330 | havoc | 2006-04-26 11:09:19 +0200 (Wed, 26 Apr 2006) | 2 lines

changed back to 1 second intervals on fps math

------------------------------------------------------------------------
r6329 | havoc | 2006-04-26 11:08:55 +0200 (Wed, 26 Apr 2006) | 2 lines

changed the Cvar_Command: prints to developer.integer >= 100

------------------------------------------------------------------------
r6328 | havoc | 2006-04-25 15:21:24 +0200 (Tue, 25 Apr 2006) | 3 lines

reenabled support of find() with an empty string as the search value, this fixes the Blood Mage monster movement
slight optimization to findflags and findchainflags

------------------------------------------------------------------------
r6327 | havoc | 2006-04-25 15:20:05 +0200 (Tue, 25 Apr 2006) | 2 lines

added prvm_printfunction command which prints an assembly dump of the specified qc function, with coloring and optionally statement profiling to show how many times each statement has been executed (prvm_statementprofiling must be on for this), also heavily modified statement printing to be more readable

------------------------------------------------------------------------
r6326 | havoc | 2006-04-25 08:14:44 +0200 (Tue, 25 Apr 2006) | 3 lines

significant optimizations to the progs interpreter, changed the runaway loop counter to only count jump instructions (if/ifnot/goto), and redesigned the profile counting to use pointer math on batches of instructions instead of counting each instruction individually
changed prvm_profile report to show callcount before statements and builtincost, changed the sorting order to use summed callcount+statements+builtincost (and this made it print call counts for builtin functions as well)

------------------------------------------------------------------------
r6325 | havoc | 2006-04-25 02:34:02 +0200 (Tue, 25 Apr 2006) | 2 lines

reenabled the 'stick in place if stuck in a solid' code, but changed it to only apply for bmodelstartsolid, this prevents monsters from falling out of the level even if they're stuck in a wall, for consistency with stock quake

------------------------------------------------------------------------
r6324 | havoc | 2006-04-21 01:55:54 +0200 (Fri, 21 Apr 2006) | 3 lines

changed particle trail handling so that the TE_TEI_G3 effect can spawn particles along the beam just like trails can
cleaned up particle texture generation, no longer generates them if loading from disk, now also allows all 64 slots to be used (except the beam one) by generating generic texcoords for all of them

------------------------------------------------------------------------
r6323 | havoc | 2006-04-21 01:54:12 +0200 (Fri, 21 Apr 2006) | 2 lines

added keyup function for menu qc at Black's request

------------------------------------------------------------------------
r6322 | havoc | 2006-04-20 17:52:12 +0200 (Thu, 20 Apr 2006) | 2 lines

replaced rainsplash animation with just a single particle which expands over time to free up significant space in the particlefont (also added sizeincrease parameter support to effectinfo.txt accordingly)

------------------------------------------------------------------------
r6321 | havoc | 2006-04-20 17:48:55 +0200 (Thu, 20 Apr 2006) | 2 lines

don't complain about shaders with no layers

------------------------------------------------------------------------
r6320 | havoc | 2006-04-20 12:55:47 +0200 (Thu, 20 Apr 2006) | 2 lines

grab mouse when using menu while watching demos (important for nexuiz)

------------------------------------------------------------------------
r6319 | havoc | 2006-04-20 12:55:00 +0200 (Thu, 20 Apr 2006) | 2 lines

fix some model lighting bugs in the GLSL surface renderer related to stale lightmaps still being bound

------------------------------------------------------------------------
r6318 | havoc | 2006-04-20 11:17:21 +0200 (Thu, 20 Apr 2006) | 2 lines

allow changelevel to stop demos (necessary for nexuiz menu)

------------------------------------------------------------------------
r6317 | havoc | 2006-04-20 11:12:59 +0200 (Thu, 20 Apr 2006) | 2 lines

fix missing newline on unknown opcode warning in progs loader

------------------------------------------------------------------------
r6316 | havoc | 2006-04-20 09:57:38 +0200 (Thu, 20 Apr 2006) | 2 lines

renamed scr_screenshot_gamma to scr_screenshot_gammaboost and changed default to 1, this means all screenshots will be unmodified unless the user specifically changes the setting, rather than saving them very bright by default

------------------------------------------------------------------------
r6315 | havoc | 2006-04-20 09:46:09 +0200 (Thu, 20 Apr 2006) | 2 lines

optimized LoadTGA to have fast paths for all formats, rather than one unified loading loop that tried to support all formats, this saves 1.15 seconds of load time in nexuiz on my machine (before: 2.32 seconds spent in LoadTGA, after: 1.17 seconds)

------------------------------------------------------------------------
r6314 | havoc | 2006-04-20 05:43:20 +0200 (Thu, 20 Apr 2006) | 2 lines

significant surface renderer optimizations

------------------------------------------------------------------------
r6313 | havoc | 2006-04-20 03:47:26 +0200 (Thu, 20 Apr 2006) | 2 lines

added GL_AlphaTest function to enable/disable GL_ALPHA_TEST

------------------------------------------------------------------------
r6312 | havoc | 2006-04-19 15:33:05 +0200 (Wed, 19 Apr 2006) | 2 lines

precache scoreboard title, intermission pics, and finale pic

------------------------------------------------------------------------
r6311 | havoc | 2006-04-19 09:04:05 +0200 (Wed, 19 Apr 2006) | 2 lines

removed the flawed detection of modelspace deluxemaps (it was always concluding they were modelspace because of unused black pixels and such), now assumes q3bsp deluxemaps are always modelspace

------------------------------------------------------------------------
r6310 | havoc | 2006-04-18 13:24:19 +0200 (Tue, 18 Apr 2006) | 2 lines

another attempt to fix the warnings

------------------------------------------------------------------------
r6309 | havoc | 2006-04-18 13:19:02 +0200 (Tue, 18 Apr 2006) | 2 lines

attempting to fix a warning about setjmp clobbering variables

------------------------------------------------------------------------
r6308 | havoc | 2006-04-18 13:10:10 +0200 (Tue, 18 Apr 2006) | 2 lines

fix a bug in AUTOSPRITE2 code caused by overzealous optimization, thanks to Elric for reporting this

------------------------------------------------------------------------
r6307 | havoc | 2006-04-18 12:44:11 +0200 (Tue, 18 Apr 2006) | 5 lines

reworked most of q3bsp q3 shader loading, now supports more shader effects (the first layer's blendfunc is now used for rendering), still no multilayer stuff though, and still no tcgen environment so some surfaces now look worse because their first pass is an environment effect, but most others look better...
q3 fog shaders are usually invisible now (looks better than blinding white surfaces)
added support for more hacky q3 shaders (like sky shaders that don't have surfaceparm sky, and transparent shaders that don't have surfaceparm trans)
added support for alpha test in q3 shaders (improves some shaders)

------------------------------------------------------------------------
r6306 | havoc | 2006-04-18 12:37:43 +0200 (Tue, 18 Apr 2006) | 2 lines

reset a bit more state each frame

------------------------------------------------------------------------
r6305 | havoc | 2006-04-18 08:28:17 +0200 (Tue, 18 Apr 2006) | 2 lines

conback lives...  again!

------------------------------------------------------------------------
r6304 | havoc | 2006-04-18 08:19:10 +0200 (Tue, 18 Apr 2006) | 2 lines

removed showfps mode 2 (which was weird), modified showfps 1 to use 0.1 second polling intervals so it updates much more often

------------------------------------------------------------------------
r6303 | havoc | 2006-04-18 08:16:13 +0200 (Tue, 18 Apr 2006) | 2 lines

conback support is dead.

------------------------------------------------------------------------
r6301 | havoc | 2006-04-18 08:03:37 +0200 (Tue, 18 Apr 2006) | 2 lines

removed scr_conspeed, now always instantaneous console opening/closing

------------------------------------------------------------------------
r6300 | havoc | 2006-04-18 07:49:22 +0200 (Tue, 18 Apr 2006) | 8 lines

rewrote timing code, now a much better and very different sleeping method, no longer wastes any cpu time
changed timing code to have independent sleeping for client and server frames in a listen server
changed console execution to occur in sync with server frames if a server is running, this fixes frikbot loading of .way files
eliminated several host_* variables, replaced host_realframetime with cl.realframetime (which is how long since the last client frame)
removed the clamping of sys_ticrate to >= 0.1, so now sys_ticrate 0 is allowed (run as fast as possible), as well as silly values like 0.001
removed serverprofile cvar as it was not easy to preserve it in the rewritten timing
merged Host_FilterTime, Host_ServerFrame, Host_Frame, _Host_Frame into Host_Main (which also calls Host_Init), this eliminates some duplicate code in all the sys_ modules

------------------------------------------------------------------------
r6299 | havoc | 2006-04-17 03:58:32 +0200 (Mon, 17 Apr 2006) | 2 lines

batch by lightmap as well as texture, this cures problems with vertex lit surfaces in deluxemapped q3bsp files (the vertex lit surfaces can't be deluxemapped)

------------------------------------------------------------------------
r6298 | havoc | 2006-04-16 13:38:37 +0200 (Sun, 16 Apr 2006) | 2 lines

no longer recalculated q3bsp surface normals, this makes q3map2 'phong shading' features work, no more seams on terrain and such

------------------------------------------------------------------------
r6297 | havoc | 2006-04-16 13:37:07 +0200 (Sun, 16 Apr 2006) | 2 lines

fix crash when loading .dpm models

------------------------------------------------------------------------
r6296 | havoc | 2006-04-16 13:36:20 +0200 (Sun, 16 Apr 2006) | 2 lines

changed where vertex coloring is applied in the fragment shader, this fixes problems with vertex colored surfaces (note: does not help deluxemapping mode, there is another bug affecting that)

------------------------------------------------------------------------
r6295 | havoc | 2006-04-16 12:19:05 +0200 (Sun, 16 Apr 2006) | 2 lines

modified Mod_BuildTextureVectorsAndNormals to become Mod_BuildTextureVectorsFromNormals, this is in preparation for properly honoring the surface normals in models and maps (doesn't do anything yet)

------------------------------------------------------------------------
r6294 | havoc | 2006-04-16 11:34:02 +0200 (Sun, 16 Apr 2006) | 2 lines

commented out r_texture_fogintensity texture generation as it's not used anywhere

------------------------------------------------------------------------
r6293 | havoc | 2006-04-16 11:30:21 +0200 (Sun, 16 Apr 2006) | 2 lines

fix bug in glsl surface shader setup code which was breaking fog

------------------------------------------------------------------------
r6292 | havoc | 2006-04-16 11:21:17 +0200 (Sun, 16 Apr 2006) | 6 lines

eliminated rmeshstate_t .pointer_vertex and .pointer_color (now must use R_Mesh_VertexPointer and R_Mesh_ColorPointer instead - in a lot of code these don't need to be called as often)
renamed R_Mesh_State to R_Mesh_TextureState
made an alternate variant of R_Mesh_TextureState called R_Mesh_ResetTextureState which acts like it was given an empty rmeshstate_t (but is faster than R_Mesh_TextureState)
moved R_Mesh_VertexPointer and R_Mesh_TexCoordPointer calls out of the inner loops of the GLSL surface path
other related cleanups

------------------------------------------------------------------------
r6291 | havoc | 2006-04-16 08:44:17 +0200 (Sun, 16 Apr 2006) | 2 lines

redesigned some of the model animation code, should be a speed gain (no longer processes animation multiple times on models with multiple textures), and executes less code per surface (should speed up map rendering)

------------------------------------------------------------------------
r6290 | havoc | 2006-04-16 08:40:20 +0200 (Sun, 16 Apr 2006) | 2 lines

fixed zym loading bugs that made models lose surfaces

------------------------------------------------------------------------
r6289 | molivier | 2006-04-16 08:28:28 +0200 (Sun, 16 Apr 2006) | 2 lines

AGL fixes: fixed a crash when switching to and from fullscreen several times; explicitely release the display when closing the video module; fixed initial test in VID_Shutdown(); a bit of code cleaning

------------------------------------------------------------------------
r6288 | havoc | 2006-04-16 06:02:32 +0200 (Sun, 16 Apr 2006) | 2 lines

use entity bbox for network culling if model was not found (this allows dedicated servers to run properly without models installed)

------------------------------------------------------------------------
r6287 | havoc | 2006-04-16 03:08:00 +0200 (Sun, 16 Apr 2006) | 3 lines

some cleanup of Mod_Alias_GetMesh_Vertex3f
fixed md3 animation loading bug (this was causing all frames other than 0 to be corrupt)

------------------------------------------------------------------------
r6286 | molivier | 2006-04-15 13:33:29 +0200 (Sat, 15 Apr 2006) | 2 lines

Fixes and cleanups related to the recent AGL patches

------------------------------------------------------------------------
r6285 | havoc | 2006-04-15 10:24:35 +0200 (Sat, 15 Apr 2006) | 2 lines

added darkplaces-agl to .cvsignore

------------------------------------------------------------------------
r6284 | havoc | 2006-04-15 10:14:55 +0200 (Sat, 15 Apr 2006) | 2 lines

fix more warnings

------------------------------------------------------------------------
r6283 | havoc | 2006-04-15 10:13:14 +0200 (Sat, 15 Apr 2006) | 2 lines

added -framework AGL to the Mac OSX client libs to make it compile

------------------------------------------------------------------------
r6282 | havoc | 2006-04-15 10:04:10 +0200 (Sat, 15 Apr 2006) | 2 lines

fix some warnings

------------------------------------------------------------------------
r6281 | havoc | 2006-04-15 09:53:27 +0200 (Sat, 15 Apr 2006) | 2 lines

fix really stupid typo in SV_Move code, this cures the 'monsters walking through walls' bug

------------------------------------------------------------------------
r6280 | havoc | 2006-04-15 08:46:09 +0200 (Sat, 15 Apr 2006) | 2 lines

fix clientside bmodel collisions (now can walk around on the start.bsp main room floor, lifts, be blocked by doors, etc)

------------------------------------------------------------------------
r6279 | havoc | 2006-04-15 08:45:12 +0200 (Sat, 15 Apr 2006) | 2 lines

prints entity number of MOVETYPE_PUSH entities without models (this is mostly useful to level designers who accidentally left a brushless door lying around)

------------------------------------------------------------------------
r6278 | havoc | 2006-04-15 08:44:03 +0200 (Sat, 15 Apr 2006) | 2 lines

additional debugging code

------------------------------------------------------------------------
r6277 | havoc | 2006-04-15 08:41:22 +0200 (Sat, 15 Apr 2006) | 2 lines

fixed stair step up bug in cl_movement code which caused prediction to go through walls in some cases

------------------------------------------------------------------------
r6276 | havoc | 2006-04-15 08:38:09 +0200 (Sat, 15 Apr 2006) | 3 lines

fixed really stupid typo in CL_TraceBox regarding bmodel entity collisions (doors and such) which was breaking their collisions
eliminated CL_PointQ1Contents

------------------------------------------------------------------------
r6275 | havoc | 2006-04-14 05:46:39 +0200 (Fri, 14 Apr 2006) | 2 lines

audit of checkstuck/unstickentity code and relates stuff, this seems to fix the falling out of level bug

------------------------------------------------------------------------
r6274 | havoc | 2006-04-14 05:45:43 +0200 (Fri, 14 Apr 2006) | 3 lines

better SUPERCONTENTS masks for a few TraceBox and PointContents calls
slight cleanups

------------------------------------------------------------------------
r6273 | havoc | 2006-04-13 18:48:09 +0200 (Thu, 13 Apr 2006) | 2 lines

moved SVC_PARTICLE code to fallback code, this does allow effectinfo.txt to override SVC_PARTICLE but that isn't recommended

------------------------------------------------------------------------
r6272 | havoc | 2006-04-13 18:41:23 +0200 (Thu, 13 Apr 2006) | 2 lines

stop complaining about SVC_PARTICLE

------------------------------------------------------------------------
r6271 | havoc | 2006-04-13 18:33:19 +0200 (Thu, 13 Apr 2006) | 2 lines

two Mac OSX fixes from ds01 on alientrap forums - input fixed, and fullscren fixed

------------------------------------------------------------------------
r6270 | havoc | 2006-04-13 00:41:27 +0200 (Thu, 13 Apr 2006) | 2 lines

changed cshifts[] to use floats instead of ints, this reduces framerate dependence (where damage flashes faded faster at lower framerates)

------------------------------------------------------------------------
r6269 | havoc | 2006-04-13 00:40:32 +0200 (Thu, 13 Apr 2006) | 2 lines

Sys_Sleep more to save cpu time

------------------------------------------------------------------------
r6268 | havoc | 2006-04-13 00:40:14 +0200 (Thu, 13 Apr 2006) | 2 lines

don't hide console when entering a map, only do so for timedemo

------------------------------------------------------------------------
r6266 | havoc | 2006-04-11 23:47:51 +0200 (Tue, 11 Apr 2006) | 2 lines

MacOSX g++ setjmp fix from div0

------------------------------------------------------------------------
r6265 | black | 2006-04-11 13:31:04 +0200 (Tue, 11 Apr 2006) | 3 lines

This works for me, works on Windows according to MSDN and should also work
everywhere else according to the C standard.

------------------------------------------------------------------------
r6264 | havoc | 2006-04-11 00:03:40 +0200 (Tue, 11 Apr 2006) | 2 lines

reverted Black's change to the effectinfo.txt color command

------------------------------------------------------------------------
r6263 | black | 2006-04-10 22:41:57 +0200 (Mon, 10 Apr 2006) | 3 lines

An attempt to fix the particle color bug (it coudlnt read hex values).
Also extend it to make it support "R G B" color pairs.

------------------------------------------------------------------------
r6262 | havoc | 2006-04-09 03:11:39 +0200 (Sun, 09 Apr 2006) | 2 lines

do apply mixahead math as int

------------------------------------------------------------------------
r6261 | havoc | 2006-04-08 22:02:56 +0200 (Sat, 08 Apr 2006) | 2 lines

fix cl.completed_time math after that last commit

------------------------------------------------------------------------
r6260 | havoc | 2006-04-08 20:56:35 +0200 (Sat, 08 Apr 2006) | 3 lines

made darkplaces able to compile as C++ again, and fixed all conversion warnings when doing so
changed several malloc and free calls to Z_Malloc and Z_Free

------------------------------------------------------------------------
r6259 | havoc | 2006-04-08 18:17:06 +0200 (Sat, 08 Apr 2006) | 2 lines

default sv_gameplayfix_stepdown to 0 because it's generally undesirable

------------------------------------------------------------------------
r6258 | havoc | 2006-04-04 21:08:45 +0200 (Tue, 04 Apr 2006) | 2 lines

466

------------------------------------------------------------------------
r6251 | havoc | 2006-04-04 16:01:23 +0200 (Tue, 04 Apr 2006) | 2 lines

increased sv_maxrate limit to 150000 from 25000

------------------------------------------------------------------------
r6249 | havoc | 2006-04-04 15:51:22 +0200 (Tue, 04 Apr 2006) | 2 lines

added particle effect scripting using effectinfo.txt, this means configurable effects in any game that wishes to do so

------------------------------------------------------------------------
r6248 | havoc | 2006-04-04 15:49:12 +0200 (Tue, 04 Apr 2006) | 2 lines

don't render skymasking polygons when noclipping

------------------------------------------------------------------------
r6247 | havoc | 2006-04-04 15:36:21 +0200 (Tue, 04 Apr 2006) | 2 lines

added some extra prints to net_slistqw to figure out which masters are working, and removed a few duplicate references to the id qw masters from the list

------------------------------------------------------------------------
r6228 | havoc | 2006-04-02 10:12:44 +0200 (Sun, 02 Apr 2006) | 4 lines

some cleanup of the GLSL shader, no longer uses #ifdef variable declarations because the shader compiler removes unused variables anyway, and now always calculates the eye vector for simplicity reasons
removed the SURFACENORMALIZE option (now always on, since it doesn't cost much render time and was on by default)
removed all use and detection of half floats (these were originally around 11% speedup on GF6 hardware but but in more recent drivers they've dropped to around 3-6%, and spit out a lot of warnings during shader compilation with no apparent way to fix the warnings)

------------------------------------------------------------------------
r6227 | havoc | 2006-04-02 10:05:42 +0200 (Sun, 02 Apr 2006) | 2 lines

removed a piece of debugging code

------------------------------------------------------------------------
r6220 | havoc | 2006-04-01 15:49:46 +0200 (Sat, 01 Apr 2006) | 2 lines

rewrote much of SV_Trace_Toss to fix bugs (it basically wasn't working, though I was unable to figure out why)

------------------------------------------------------------------------
r6216 | havoc | 2006-03-31 05:38:34 +0200 (Fri, 31 Mar 2006) | 2 lines

print out the contents of the GLSL shader when it is compiled when using developer 100 or higher

------------------------------------------------------------------------
r6215 | havoc | 2006-03-29 15:25:09 +0200 (Wed, 29 Mar 2006) | 2 lines

fix a crash in r_showsurfaces

------------------------------------------------------------------------
r6214 | havoc | 2006-03-29 14:54:11 +0200 (Wed, 29 Mar 2006) | 2 lines

optimizations to surface rendering setup

------------------------------------------------------------------------
r6212 | havoc | 2006-03-29 13:11:46 +0200 (Wed, 29 Mar 2006) | 3 lines

eliminated model->meshlist, replaced with an embedded model->surfmesh to cut down on pointer indirections, this also eliminated surface->groupmesh
some minor optimizations of code to keep track of ent->model in a local variable rather than dereferencing ent every time

------------------------------------------------------------------------
r6211 | havoc | 2006-03-29 13:08:11 +0200 (Wed, 29 Mar 2006) | 2 lines

very very minor optimization

------------------------------------------------------------------------
r6210 | havoc | 2006-03-29 13:04:08 +0200 (Wed, 29 Mar 2006) | 2 lines

added LDFLAGS_SDL to the pmake file

------------------------------------------------------------------------
r6209 | havoc | 2006-03-29 12:54:31 +0200 (Wed, 29 Mar 2006) | 2 lines

remove a superfluous -L

------------------------------------------------------------------------
r6208 | havoc | 2006-03-29 12:52:14 +0200 (Wed, 29 Mar 2006) | 2 lines

merged special SUNOS LDFLAGS_UNIXCL into LDFLAGS_SUNOSCL to eliminate an ifeq which was breaking on pmake

------------------------------------------------------------------------
r6207 | havoc | 2006-03-29 12:51:31 +0200 (Wed, 29 Mar 2006) | 2 lines

remove the -f makefile.bsd

------------------------------------------------------------------------
r6206 | havoc | 2006-03-29 12:37:23 +0200 (Wed, 29 Mar 2006) | 2 lines

renamed makefile.bsd to BSDmakefile so that pmake will automatically find it (no -f necessary), thanks to div0 for the tip

------------------------------------------------------------------------
r6205 | havoc | 2006-03-29 11:18:50 +0200 (Wed, 29 Mar 2006) | 3 lines

no longer uses multiple meshes for model loading, they each use one mesh for all surfaces combined
now puts all q3bsp map geometry into one mesh at load rather than splitting it into 65536 vertex meshes to crutch up broken drivers (they've been fixed already so this is no longer necessary)

------------------------------------------------------------------------
r6204 | havoc | 2006-03-29 11:14:28 +0200 (Wed, 29 Mar 2006) | 2 lines

in Host_ServerFrame, give the server a bit more execution time

------------------------------------------------------------------------
r6203 | havoc | 2006-03-29 08:50:53 +0200 (Wed, 29 Mar 2006) | 2 lines

default scr_menuforcewhiledisconnected to 0

------------------------------------------------------------------------
r6202 | havoc | 2006-03-29 02:31:12 +0200 (Wed, 29 Mar 2006) | 2 lines

added rampsize parameter to BuildGammaTable8 and 16

------------------------------------------------------------------------
r6201 | havoc | 2006-03-28 15:09:42 +0200 (Tue, 28 Mar 2006) | 2 lines

an optimization to call XF86VidModeGetGammaRampSize only when opening the window, and assume the rampsize doesn't change after that

------------------------------------------------------------------------
r6200 | havoc | 2006-03-28 15:02:06 +0200 (Tue, 28 Mar 2006) | 3 lines

modified gamma handling, now VID_UpdateGamma is only called from VID_Finish, and VID_SetGamma/VID_GetGamma/VID_UpdateGamma take rampsize parameters
VID_UpdateGamma now supports ramp sizes other than 256, and automatically allocates memory accordingly, this allows hardware gamma on X11 to work on Quadro cards (which report 1024 gamma entries according to div0), and allows any other platform to do whatever it wishes

------------------------------------------------------------------------
r6199 | havoc | 2006-03-28 12:17:21 +0200 (Tue, 28 Mar 2006) | 2 lines

added loading of hmap2 .dlit tangentspace deluxemap files and a rather lame method of lightstyle support (blending the deluxemaps according to lightstyles, not rendering them separately like it should)

------------------------------------------------------------------------
r6196 | havoc | 2006-03-28 05:01:52 +0200 (Tue, 28 Mar 2006) | 2 lines

added two more psk/psa versions reported by Kazashi

------------------------------------------------------------------------
r6195 | havoc | 2006-03-28 03:04:23 +0200 (Tue, 28 Mar 2006) | 2 lines

patch from div0 to fix disappearing items in nexuiz (trace_* globals in qc were not being cleared before calling touch)

------------------------------------------------------------------------
r6194 | havoc | 2006-03-26 10:09:45 +0200 (Sun, 26 Mar 2006) | 2 lines

fixed r_speeds stats with r_showsurfaces 1 mode

------------------------------------------------------------------------
r6193 | havoc | 2006-03-26 09:17:32 +0200 (Sun, 26 Mar 2006) | 3 lines

added r_showsurfaces rendering mode which illustrates how many surfaces are on screen (and renders REALLY FAST)
moved r_showcollisionbrushes code to gl_rmain.c

------------------------------------------------------------------------
r6192 | havoc | 2006-03-26 08:43:50 +0200 (Sun, 26 Mar 2006) | 4 lines

eliminated the hacky r_showtris code, now r_glsl 1 mode works with r_showtris
rewrote r_showtris and r_shownormals to use opaque lines that write to the depth buffer, this makes them show up quite clearly in all cases
moved r_showtris and r_shownormals code into R_DrawSurfaces

------------------------------------------------------------------------
r6191 | havoc | 2006-03-26 05:28:37 +0200 (Sun, 26 Mar 2006) | 2 lines

disable skymasking in q3bsp because it causes issues with q3map2 sky tricks (and reenabled the skipping of skymasking on hlbsp also)

------------------------------------------------------------------------
r6190 | havoc | 2006-03-26 04:26:44 +0200 (Sun, 26 Mar 2006) | 2 lines

fixed bug that was preventing some deluxemapped q3bsp files from being identified as deluxemapped

------------------------------------------------------------------------
r6189 | havoc | 2006-03-25 23:31:21 +0100 (Sat, 25 Mar 2006) | 2 lines

448

------------------------------------------------------------------------
r6188 | sajt | 2006-03-25 11:56:16 +0100 (Sat, 25 Mar 2006) | 2 lines

452

------------------------------------------------------------------------
r6187 | sajt | 2006-03-25 08:58:18 +0100 (Sat, 25 Mar 2006) | 4 lines

cl_autodemo, when set to true, automatically records every game you play. The filename of the demo is determined by cl_autodemo_nameformat (UNIX time string) and the map name.

Note - I'm pretty sure this currently lumps all games played successively into one demo. Feel free to fix that :)

------------------------------------------------------------------------
r6186 | sajt | 2006-03-25 08:25:45 +0100 (Sat, 25 Mar 2006) | 3 lines

'Cruft' removal (removed GAME_FNIGGIUM)
Fixed a very minor 'potential' leak in JPEG loading

------------------------------------------------------------------------
r6185 | havoc | 2006-03-23 13:34:27 +0100 (Thu, 23 Mar 2006) | 2 lines

fix some TraceBox calls that weren't updated like they should have been, so they were using a totally bogus bounding box

------------------------------------------------------------------------
r6184 | havoc | 2006-03-23 13:33:46 +0100 (Thu, 23 Mar 2006) | 2 lines

fix EF_SELECTABLE flickering bug with prydon cursor

------------------------------------------------------------------------
r6183 | havoc | 2006-03-23 13:04:10 +0100 (Thu, 23 Mar 2006) | 2 lines

and a GL_DepthMask call

------------------------------------------------------------------------
r6177 | havoc | 2006-03-23 12:53:11 +0100 (Thu, 23 Mar 2006) | 2 lines

changed several DPrint's and developer cvar checks to higher developer cvar levels (>= 10 and >= 100 for example), this makes developer 1 much more pleasant to use, also changed the memory clearing on free to depend on developer_memorydebug (which is already quite slow) rather than developer (which shouldn't slow things down much)

------------------------------------------------------------------------
r6176 | havoc | 2006-03-23 12:49:22 +0100 (Thu, 23 Mar 2006) | 2 lines

a GL_DepthTest call I forgot in the last commit

------------------------------------------------------------------------
r6175 | havoc | 2006-03-23 12:47:11 +0100 (Thu, 23 Mar 2006) | 3 lines

fixed bug that made light filter cubemaps not work in GLSL mode (was binding a cubemap as a 2D texture...  oops)
fixed bug that made sky brush entities not appear when not looking at sky brushes in the world (GL_DepthTest/GL_DepthMask were messed up)

------------------------------------------------------------------------
r6174 | havoc | 2006-03-23 12:44:47 +0100 (Thu, 23 Mar 2006) | 2 lines

corrected PFLAGS_FULLDYNAMIC pitch angle handling

------------------------------------------------------------------------
r6173 | havoc | 2006-03-23 12:43:46 +0100 (Thu, 23 Mar 2006) | 2 lines

fix bugs with bbox vs bbox traces (the collision box's planes didn't have correct contents/surfaceflags/texture information)

------------------------------------------------------------------------
r6172 | havoc | 2006-03-23 12:41:34 +0100 (Thu, 23 Mar 2006) | 2 lines

fixed really stupid bug in Matrix4x4_Normalize - it was transposing the matrix (a legacy of the fact it was based on Invert_Simple)

------------------------------------------------------------------------
r6170 | havoc | 2006-03-23 03:34:51 +0100 (Thu, 23 Mar 2006) | 2 lines

add back a cls.signon = 0 in the SpawnServer code that is necessary to prevent crashes on level change in singleplayer and listen servers

------------------------------------------------------------------------
r6169 | havoc | 2006-03-23 03:34:16 +0100 (Thu, 23 Mar 2006) | 2 lines

added more validation of clipnodes loaded from a q1bsp file

------------------------------------------------------------------------
r6168 | havoc | 2006-03-22 10:18:03 +0100 (Wed, 22 Mar 2006) | 2 lines

another WIN32_LEAN_AND_MEAN patch from Willis, this one for non-SDL client and dedicated server

------------------------------------------------------------------------
r6166 | havoc | 2006-03-22 09:51:35 +0100 (Wed, 22 Mar 2006) | 2 lines

implemented DP_TRACE_HITCONTENTSMASK_SURFACEINFO extension, this allows QC to find out if a projectile hit sky, among other capabilities

------------------------------------------------------------------------
r6165 | havoc | 2006-03-22 06:22:21 +0100 (Wed, 22 Mar 2006) | 3 lines

changed collision code to report supercontents, surfaceflags, and texture that was hit in a trace (even if it has to fake the information for q1bsp)
decals no longer stick to sky (except in stock id1 q1bsp maps which have CONTENTS_SOLID sky)

------------------------------------------------------------------------
r6164 | havoc | 2006-03-21 11:36:25 +0100 (Tue, 21 Mar 2006) | 2 lines

448

------------------------------------------------------------------------
r6163 | havoc | 2006-03-21 11:31:54 +0100 (Tue, 21 Mar 2006) | 2 lines

fixed bug that made deluxemapping gloss appear even with rtworld on

------------------------------------------------------------------------
r6162 | havoc | 2006-03-21 11:28:43 +0100 (Tue, 21 Mar 2006) | 2 lines

fix alpha blended textures in GLSL lighting path

------------------------------------------------------------------------
r6161 | havoc | 2006-03-21 10:56:14 +0100 (Tue, 21 Mar 2006) | 2 lines

changed all Draw_CachePic calls to precache the pic except for two calls in the menu qc vm

------------------------------------------------------------------------
r6160 | havoc | 2006-03-21 10:55:27 +0100 (Tue, 21 Mar 2006) | 2 lines

fix a crash that could occur if resizing the resize buffer twice in one upload call, and also fix a bug where the player setup menu's translated player pic was being treated as a subimage update which doesn't work because that image is scaled up, not a natural power of 2

------------------------------------------------------------------------
r6159 | havoc | 2006-03-21 10:07:34 +0100 (Tue, 21 Mar 2006) | 2 lines

slight readability improvement to PointInfrontOfTriangle

------------------------------------------------------------------------
r6158 | havoc | 2006-03-21 10:06:02 +0100 (Tue, 21 Mar 2006) | 4 lines

removed detection of GL_NV_texture_shader extension which was previously used for the geforce3 water shader that was removed a long time ago
removed support for GL_DSDT_NV textures (which were only used for the geforce3 water shader)
removed code pertaining to GL_NV_vertex_array_range (which hasn't been supported for a very long time)

------------------------------------------------------------------------
r6157 | havoc | 2006-03-21 09:49:42 +0100 (Tue, 21 Mar 2006) | 2 lines

removed TEXF_FRAGMENT support from texture manager and merged gltextureimage_t into gltexture_t to save some memory and reduce code complexity

------------------------------------------------------------------------
r6156 | molivier | 2006-03-21 07:52:58 +0100 (Tue, 21 Mar 2006) | 2 lines

Minor changes to get rid of functions deprecated in Mac OS X 10.4

------------------------------------------------------------------------
r6155 | havoc | 2006-03-21 07:49:25 +0100 (Tue, 21 Mar 2006) | 2 lines

modified Q1BSP loader to generate lightmap fragments on its own, rather than relying on the texture manager, this greatly shortens r_texturestats reports and reduces memory usage a bit (less gltexture_t structures), and modified R_UpdateTexture to be able to update fragments

------------------------------------------------------------------------
r6154 | havoc | 2006-03-21 06:49:29 +0100 (Tue, 21 Mar 2006) | 5 lines

renamed varray_ arrays to rsurface_array_, and they are no longer used outside the surface rendering code, additionally they are now dynamically resized (saves a little memory)
audited a lot of memory allocations and fixed a few significant leaks
removed Host_ClearMemory as it was causing several memory leaks, and split cls.mempool into cls.levelmempool and cls.permanentmempool, cls.levelmempool is now emptied each level load (this also fixes those same leaks)
merged r_shadow_mempool into r_main_mempool

------------------------------------------------------------------------
r6153 | havoc | 2006-03-21 04:03:26 +0100 (Tue, 21 Mar 2006) | 4 lines

removed the USETEXMATRIX define (now always on), reduced varray_texcoord3f to only have one array rather than 4 (as the others are no longer needed with USETEXMATRIX), removed varray_texcoord2f, removed earray_element3i
changed many simple uses of varray_* arrays to use stack arrays instead
this reduces memory usage by 1MB

------------------------------------------------------------------------
r6152 | havoc | 2006-03-21 03:27:02 +0100 (Tue, 21 Mar 2006) | 2 lines

removed unused R_Mesh_CacheArray stuff

------------------------------------------------------------------------
r6151 | havoc | 2006-03-21 03:23:27 +0100 (Tue, 21 Mar 2006) | 4 lines

moved SCR_UpdateScreen and SCR_DrawScreen code to cl_screen.c and rearranged them somewhat
moved DrawQ_ functions to gl_draw.c and eliminated r_refdef.drawqueue (this saves some memory and makes all the 2D code more efficient)
disabled unused R_Mesh_CacheArray stuff in gl_backend.c

------------------------------------------------------------------------
r6150 | havoc | 2006-03-21 02:18:34 +0100 (Tue, 21 Mar 2006) | 2 lines

fixed one more cvar declaration that was missing a comma

------------------------------------------------------------------------
r6149 | havoc | 2006-03-21 02:15:43 +0100 (Tue, 21 Mar 2006) | 2 lines

fixed value/description of r_textshadow

------------------------------------------------------------------------
r6148 | havoc | 2006-03-21 00:09:24 +0100 (Tue, 21 Mar 2006) | 2 lines

fixed stuck entity warnings when they should not have been occurring, by adding trace.bmodelstartsolid as a separate thing to check

------------------------------------------------------------------------
r6147 | havoc | 2006-03-20 23:31:10 +0100 (Mon, 20 Mar 2006) | 2 lines

enabled fullbrights on liquid textures in q1bsp loading, this fixes the black lava bug

------------------------------------------------------------------------
r6146 | havoc | 2006-03-20 07:13:30 +0100 (Mon, 20 Mar 2006) | 2 lines

fix crash when using r_editlights mode

------------------------------------------------------------------------
r6145 | havoc | 2006-03-20 07:08:51 +0100 (Mon, 20 Mar 2006) | 2 lines

fix nail and explosion sound defaults

------------------------------------------------------------------------
r6144 | havoc | 2006-03-20 06:51:30 +0100 (Mon, 20 Mar 2006) | 4 lines

cl_movement 0 should no longer be causing an input replay (which was slow and pointless), though I don't know how it was doing so before...
added code to prevent pogostick jumping in the cl_movement prediction (since the qc prevents pogostick jumping, it was inaccurate to simulate it clientside)
changed view/gun bobbing to use cl.movement_velocity for the xyspeed math, this greatly improves the clientside prediction

------------------------------------------------------------------------
r6143 | havoc | 2006-03-20 05:01:50 +0100 (Mon, 20 Mar 2006) | 2 lines

WIN32_LEAN_AND_MEAN patch from Willis to speed up MSVC compilation

------------------------------------------------------------------------
r6142 | havoc | 2006-03-20 05:01:09 +0100 (Mon, 20 Mar 2006) | 2 lines

added reliefmapping (behaves exactly like offsetmapping, but a slightly different look), removed r_glsl_offsetmapping_bias setting

------------------------------------------------------------------------
r6141 | havoc | 2006-03-19 22:15:02 +0100 (Sun, 19 Mar 2006) | 5 lines

fixed deluxemapping
added r_glsl_deluxemapping cvar (2 forces fake deluxemapping on any level, kind of interesting to see)
added modelspace deluxemapping (automatically detects whether deluxemaps are modelspace or tangentspace at load time)
changed offsetmapping shader to be more perspective correct

------------------------------------------------------------------------
r6140 | havoc | 2006-03-19 22:12:26 +0100 (Sun, 19 Mar 2006) | 2 lines

added one more r_speeds 2 report item, to ensure that "clear" is really measuring only the clearing process

------------------------------------------------------------------------
r6139 | sajt | 2006-03-18 13:17:01 +0100 (Sat, 18 Mar 2006) | 2 lines

This made the cvar completion so much more readable

------------------------------------------------------------------------
r6138 | sajt | 2006-03-18 13:12:57 +0100 (Sat, 18 Mar 2006) | 2 lines

I was just joking

------------------------------------------------------------------------
r6137 | sajt | 2006-03-18 13:11:13 +0100 (Sat, 18 Mar 2006) | 2 lines

nitpicky

------------------------------------------------------------------------
r6136 | havoc | 2006-03-18 11:08:09 +0100 (Sat, 18 Mar 2006) | 2 lines

added r_glsl_restart command, and modified shaderstring loading back to the old way (reload the file on every permutation compile) for simplicity

------------------------------------------------------------------------
r6135 | havoc | 2006-03-18 06:20:17 +0100 (Sat, 18 Mar 2006) | 2 lines

one more correction

------------------------------------------------------------------------
r6134 | havoc | 2006-03-18 06:18:27 +0100 (Sat, 18 Mar 2006) | 2 lines

fix stupid but non-harmful bug in RSurf_DrawLightmap code

------------------------------------------------------------------------
r6133 | havoc | 2006-03-18 06:08:48 +0100 (Sat, 18 Mar 2006) | 2 lines

fixed an uninitialized variable warning (which was true)

------------------------------------------------------------------------
r6132 | havoc | 2006-03-18 05:28:17 +0100 (Sat, 18 Mar 2006) | 4 lines

reduced number of image extensions checked by doing more intelligent path examination, and changing q1bsp loader to prepend textures/, this allows it to not check any prefixes in the image loader itself (except in a few cases in nexuiz)
changed image loader to not check override/ unless running GAME_TENEBRAE
removed several unused image functions

------------------------------------------------------------------------
r6131 | havoc | 2006-03-17 08:50:50 +0100 (Fri, 17 Mar 2006) | 2 lines

updated default.glsl

------------------------------------------------------------------------
r6130 | havoc | 2006-03-17 08:49:01 +0100 (Fri, 17 Mar 2006) | 2 lines

added deluxemapping (per pixel lighting using lightmaps in specially compiled q3bsp maps)

------------------------------------------------------------------------
r6129 | havoc | 2006-03-17 07:34:13 +0100 (Fri, 17 Mar 2006) | 2 lines

updated default glsl shader

------------------------------------------------------------------------
r6128 | havoc | 2006-03-17 07:33:11 +0100 (Fri, 17 Mar 2006) | 4 lines

added GLSL shader path for normal rendering stage, reworked a lot of things to do this
removed .lights file loading and the corresponding directional model shading (these were only produced by hlight for q1bsp, very rare files) so that the GLSL normal rendering stage would not have to deal with .lights files
changed R_CompleteLightPoint to properly match rtlight shading, not the old dlights, this allowed removal of the old lightmap_* rtlight fields

------------------------------------------------------------------------
r6127 | havoc | 2006-03-17 07:29:12 +0100 (Fri, 17 Mar 2006) | 2 lines

446

------------------------------------------------------------------------
r6126 | havoc | 2006-03-17 07:27:07 +0100 (Fri, 17 Mar 2006) | 2 lines

modified R_GetTexture to return the texnum of r_texture_white if given NULL

------------------------------------------------------------------------
r6125 | havoc | 2006-03-17 04:59:23 +0100 (Fri, 17 Mar 2006) | 2 lines

remove fullbright flag on lava and teleport textures

------------------------------------------------------------------------
r6123 | sajt | 2006-03-17 02:28:42 +0100 (Fri, 17 Mar 2006) | 2 lines

Yes, that was a rather silly typo!

------------------------------------------------------------------------
r6122 | havoc | 2006-03-16 23:58:21 +0100 (Thu, 16 Mar 2006) | 2 lines

added v_deathtiltangle cvar to allow changing of the roll angle used while dead, at RenegadeC's request

------------------------------------------------------------------------
r6121 | havoc | 2006-03-15 14:19:36 +0100 (Wed, 15 Mar 2006) | 6 lines

cleaning up GLSL code
moved GLSL shader setup to gl_rmain.c and made it more general, not specifically lighting shaders
cache locations of GLSL shader variables for faster access (instead of looking them up every time it renders something)
GLSL shader reworked to support deluxemap rendering and lightmap rendering, to be used in the future
merged glsl/light.frag and glsl/light.vert into glsl/default.glsl using VERTEX_SHADER and FRAGMENT_SHADER defines to differentiate parts of it

------------------------------------------------------------------------
r6120 | havoc | 2006-03-15 14:16:19 +0100 (Wed, 15 Mar 2006) | 2 lines

changed skybox string from size 64 to MAX_QPATH (which is 64)

------------------------------------------------------------------------
r6119 | molivier | 2006-03-15 11:54:27 +0100 (Wed, 15 Mar 2006) | 2 lines

Removed cgame.c, cgamevm.c, ui.c, cg_math.h, cgame_api.h, cgamevm.h, and ui.h from the MSVC projects

------------------------------------------------------------------------
r6118 | havoc | 2006-03-15 09:02:43 +0100 (Wed, 15 Mar 2006) | 2 lines

slight optimization of model purging and the like, and a failed attempt to make mod_known be a dynamic array

------------------------------------------------------------------------
r6117 | havoc | 2006-03-15 08:02:56 +0100 (Wed, 15 Mar 2006) | 5 lines

moved many cl_ prefixed variables into cl. or cls.
made most menu functions static
removed WORKINGLQUAKE support from cl_particles.c and moved particle allocation to cl_main.c (where all the other arrays are allocated)
renamed cl_activevideos to cl_num_videos and videoarray to cl_videos (did not move these into cls. however)

------------------------------------------------------------------------
r6116 | havoc | 2006-03-15 07:08:15 +0100 (Wed, 15 Mar 2006) | 2 lines

don't set qc impulse more than once per packet

------------------------------------------------------------------------
r6115 | havoc | 2006-03-15 02:01:53 +0100 (Wed, 15 Mar 2006) | 2 lines

removed cgame and ui code (both unused), this reduces memory use a bit

------------------------------------------------------------------------
r6114 | havoc | 2006-03-15 01:42:48 +0100 (Wed, 15 Mar 2006) | 2 lines

added LAN search for quakeworld servers

------------------------------------------------------------------------
r6113 | havoc | 2006-03-15 01:35:08 +0100 (Wed, 15 Mar 2006) | 2 lines

split up net_slist into net_slist and net_slistqw, and modified menu accordingly to have two search options

------------------------------------------------------------------------
r6112 | havoc | 2006-03-14 05:39:14 +0100 (Tue, 14 Mar 2006) | 2 lines

fix crosshair 6, and allow custom crosshairs up to 32

------------------------------------------------------------------------
r6111 | sajt | 2006-03-12 03:36:58 +0100 (Sun, 12 Mar 2006) | 2 lines

Fix in Nexuiz's fallback menu to avoid ending up with a blank screen

------------------------------------------------------------------------
r6110 | sajt | 2006-03-12 02:04:12 +0100 (Sun, 12 Mar 2006) | 2 lines

r_nearclip cvar

------------------------------------------------------------------------
r6109 | sajt | 2006-03-12 01:23:44 +0100 (Sun, 12 Mar 2006) | 2 lines

Added some non-crucial header files to the VC++6 projects. The .dev files need them too, not sure what compiler those files are for though.

------------------------------------------------------------------------
r6108 | havoc | 2006-03-11 21:17:23 +0100 (Sat, 11 Mar 2006) | 2 lines

fix typo

------------------------------------------------------------------------
r6107 | havoc | 2006-03-11 20:01:54 +0100 (Sat, 11 Mar 2006) | 2 lines

use hash lookups in Cvar_FindVar, this gives a ~40% increase in fps with high numbers of bots in nexuiz

------------------------------------------------------------------------
r6106 | havoc | 2006-03-11 19:28:00 +0100 (Sat, 11 Mar 2006) | 2 lines

refactored _Mem_Free into _Mem_FreeBlock which takes a memheader_t * and _Mem_Free which converts a void * to the content area of the memory, to a memheader_t * and calls _Mem_FreeBlock - now _Mem_FreePool and _Mem_EmptyPool can call that directly, which avoids a Mem_IsAllocated error that I don't understand

------------------------------------------------------------------------
r6105 | havoc | 2006-03-11 19:10:56 +0100 (Sat, 11 Mar 2006) | 2 lines

added back brackets so that developer isn't forced to 100 on startup every time

------------------------------------------------------------------------
r6104 | havoc | 2006-03-11 18:33:31 +0100 (Sat, 11 Mar 2006) | 2 lines

oops, accidentally set developer to 100 by default

------------------------------------------------------------------------
r6103 | havoc | 2006-03-11 18:24:10 +0100 (Sat, 11 Mar 2006) | 2 lines

changed VID_Finish to take an allowmousegrab parameter, this avoids mousegrab on the initial loading screen (before +vid_mouse 1 on commandline is executed)

------------------------------------------------------------------------
r6102 | havoc | 2006-03-11 18:23:09 +0100 (Sat, 11 Mar 2006) | 2 lines

init host_framecount to 0, just a cleanup

------------------------------------------------------------------------
r6101 | havoc | 2006-03-11 18:22:22 +0100 (Sat, 11 Mar 2006) | 2 lines

fix bug in [515]'s csqc code - it was using the literal number 64 for the max players, not MAX_SCOREBOARD as it should

------------------------------------------------------------------------
r6100 | havoc | 2006-03-11 18:11:23 +0100 (Sat, 11 Mar 2006) | 2 lines

fix incredibly stupid bug in Memory_Init, it was clearing the pool chain AFTER allocating two pools

------------------------------------------------------------------------
r6099 | havoc | 2006-03-11 18:10:55 +0100 (Sat, 11 Mar 2006) | 2 lines

cleaned up the stupid forcedeveloper hack, now changes the default string of the cvar before it is registered, this is much cleaner

------------------------------------------------------------------------
r6098 | havoc | 2006-03-11 17:59:04 +0100 (Sat, 11 Mar 2006) | 2 lines

moved -developer code to the very beginning of Host_Init, and added a -developer2 option for heavy memory debugging from the beginning

------------------------------------------------------------------------
r6097 | havoc | 2006-03-11 17:58:28 +0100 (Sat, 11 Mar 2006) | 2 lines

moved name in memory pools to a different part of the structure, to make ddd displays read better

------------------------------------------------------------------------
r6096 | havoc | 2006-03-11 17:57:48 +0100 (Sat, 11 Mar 2006) | 2 lines

fix skinfile memory leaks on ZYM, DPM, and PSK model loaders, and move the skinfile allocations to the model's memory pool even though they are temporary

------------------------------------------------------------------------
r6095 | havoc | 2006-03-11 17:19:18 +0100 (Sat, 11 Mar 2006) | 2 lines

moved Log_Start call into SCR_BeginLoadingPlaque (which occurs as soon as a map or demo loads, or when config parsing is done)

------------------------------------------------------------------------
r6094 | havoc | 2006-03-11 00:47:18 +0100 (Sat, 11 Mar 2006) | 2 lines

446

------------------------------------------------------------------------
r6093 | havoc | 2006-03-11 00:45:42 +0100 (Sat, 11 Mar 2006) | 2 lines

default sv_jumpstep to 0 to not allow players to jump places they should not be able to go in quake (each game/mod can set this in its default.cfg if it is desired)

------------------------------------------------------------------------
r6092 | havoc | 2006-03-11 00:23:21 +0100 (Sat, 11 Mar 2006) | 2 lines

fixed cl_activebeams handling, now beams work again

------------------------------------------------------------------------
r6089 | havoc | 2006-03-10 06:21:43 +0100 (Fri, 10 Mar 2006) | 2 lines

fixed bug that caused SV_SpawnServer to fail to send reconnect commands to clients (it was using sv.reliable_datagram which is immediately cleared and thus not sent)

------------------------------------------------------------------------
r6088 | havoc | 2006-03-10 06:19:54 +0100 (Fri, 10 Mar 2006) | 2 lines

when loading a savegame, use the saved v_angle value, not angles which usually lacks pitch, this fixes the lack of view pitch when loading games

------------------------------------------------------------------------
r6087 | havoc | 2006-03-10 06:18:39 +0100 (Fri, 10 Mar 2006) | 2 lines

fixed bug that allowed the quake2 stair jump to work

------------------------------------------------------------------------
r6086 | havoc | 2006-03-10 05:02:56 +0100 (Fri, 10 Mar 2006) | 2 lines

don't clear player entity when loading a savegame

------------------------------------------------------------------------
r6085 | havoc | 2006-03-10 03:37:40 +0100 (Fri, 10 Mar 2006) | 4 lines

changed TraceBox functions to take start,mins,maxs,end like they did in Quake, this is a slight optimization to traceline and pointcontents tests and q1bsp tracing, but mostly just cleans up the code
removed some old code from q3bsp TraceLine/TraceBox functions
changed segmentmins/maxs and nodesegmentmins/maxs calculations to have a 1 unit enlargement on all comparisons, this might improve reliability of TraceBox, but probably not

------------------------------------------------------------------------
r6084 | havoc | 2006-03-10 03:31:42 +0100 (Fri, 10 Mar 2006) | 2 lines

fixed bullets-going-through-walls bug in q3bsp collision code, this was a really nasty bug in the midfrac calculations (it was calculating the midfrac for the partially clipped line segment and then acting as if that was a fraction of the complete line segment...  this caused many problems)

------------------------------------------------------------------------
r6083 | havoc | 2006-03-09 17:19:23 +0100 (Thu, 09 Mar 2006) | 2 lines

fixed bug that caused ClientDisconnect to not be called on bots in their first level (it did get called on their second level onward), this fix does however assume the QC code will call ClientConnect every time it uses spawnclient

------------------------------------------------------------------------
r6082 | havoc | 2006-03-08 16:53:47 +0100 (Wed, 08 Mar 2006) | 2 lines

made zym and dpm model loaders warn and ignore the model if it is missing geometry or frames

------------------------------------------------------------------------
r6081 | havoc | 2006-03-08 02:13:29 +0100 (Wed, 08 Mar 2006) | 2 lines

some work on SV_TestEntityPosition and entity unsticking, now only checks against bmodels

------------------------------------------------------------------------
r6080 | havoc | 2006-03-07 21:39:58 +0100 (Tue, 07 Mar 2006) | 2 lines

some win64 fixes from Willis

------------------------------------------------------------------------
r6079 | havoc | 2006-03-07 15:18:05 +0100 (Tue, 07 Mar 2006) | 3 lines

rearranged surface renderer some more
added tangent/normal generation flags to RSurf_SetVertexPointer, this eliminated the various calls to Mod_BuildTextureVectorsAndNormals and Mod_BuildNormals during rendering, so RSurf_SetVertexPointer is now the only function that sets up rsurface_* variables

------------------------------------------------------------------------
r6078 | havoc | 2006-03-07 12:22:16 +0100 (Tue, 07 Mar 2006) | 2 lines

simplified cl_particles_quality handling, shouldn't affect particle lifetime anymore now

------------------------------------------------------------------------
r6077 | havoc | 2006-03-07 12:21:49 +0100 (Tue, 07 Mar 2006) | 2 lines

fix r_speeds 1 so that it works again

------------------------------------------------------------------------
r6076 | havoc | 2006-03-07 11:49:16 +0100 (Tue, 07 Mar 2006) | 3 lines

fixed pogostick/doublejump bug when running id1 qc with a client sending input packets less frequently than server frames
moved ping time calculation out of SV_ApplyClientMove and back into SV_ReadClientMove

------------------------------------------------------------------------
r6075 | molivier | 2006-03-07 11:14:28 +0100 (Tue, 07 Mar 2006) | 2 lines

Modified ResampleSfx for a small speed gain

------------------------------------------------------------------------
r6074 | molivier | 2006-03-06 11:16:16 +0100 (Mon, 06 Mar 2006) | 2 lines

Added "SDL/include" to the include paths and "SDL/lib" to the library paths (allow easy compilation with SDL when the SDL SDK isn't already integrated in MSVC; just unzip "SDL-devel-1.2.x-VC6.zip" in the darkplaces folder, rename its folder to "SDL" and voila!)

------------------------------------------------------------------------
r6073 | havoc | 2006-03-04 22:31:37 +0100 (Sat, 04 Mar 2006) | 2 lines

upped player limit (MAX_SCOREBOARD) from 64 to 255, and corrected my email address in the menu

------------------------------------------------------------------------
r6072 | havoc | 2006-03-04 19:49:26 +0100 (Sat, 04 Mar 2006) | 2 lines

commented out a line as suggested by Spike, to fix a crash when length is 0, this matches the behavior of md4

------------------------------------------------------------------------
r6071 | havoc | 2006-03-04 19:48:37 +0100 (Sat, 04 Mar 2006) | 2 lines

added LittleLong around the checksums to fix endian-ness issues in QW

------------------------------------------------------------------------
r6068 | havoc | 2006-03-04 16:04:28 +0100 (Sat, 04 Mar 2006) | 2 lines

add SV_VM block around SV_DropClient call in NetConn_ServerFrame to fix a crash when players time out

------------------------------------------------------------------------
r6067 | havoc | 2006-03-04 15:52:53 +0100 (Sat, 04 Mar 2006) | 2 lines

some cleanup of surface->cached_dlight handling to fix the broken unlit q1bsp handling (it was not appearing fullbright as it should), and this also is a slight optimization

------------------------------------------------------------------------
r6066 | black | 2006-03-04 15:45:35 +0100 (Sat, 04 Mar 2006) | 2 lines

Fix a bug in the video system.

------------------------------------------------------------------------
r6065 | havoc | 2006-03-04 15:36:50 +0100 (Sat, 04 Mar 2006) | 2 lines

forgot to include this in the previous commit

------------------------------------------------------------------------
r6064 | havoc | 2006-03-04 15:33:22 +0100 (Sat, 04 Mar 2006) | 2 lines

unmerge OpenVideo code, back to the proper multilayer system it was

------------------------------------------------------------------------
r6063 | havoc | 2006-03-04 14:38:03 +0100 (Sat, 04 Mar 2006) | 2 lines

changed Q1BSP LoadEdges out of bounds error into just a warning

------------------------------------------------------------------------
r6062 | havoc | 2006-03-04 11:50:37 +0100 (Sat, 04 Mar 2006) | 2 lines

fix a const warning

------------------------------------------------------------------------
r6061 | havoc | 2006-03-04 11:49:23 +0100 (Sat, 04 Mar 2006) | 2 lines

fix duplicate definition of identitymatrix (search and replace accident)

------------------------------------------------------------------------
r6060 | havoc | 2006-03-04 11:48:40 +0100 (Sat, 04 Mar 2006) | 2 lines

fix typo

------------------------------------------------------------------------
r6059 | havoc | 2006-03-04 11:47:37 +0100 (Sat, 04 Mar 2006) | 2 lines

eliminated calls to Matrix4x4_CreateIdentity (now copies from the already existing global identitymatrix struct) and changed all references to r_identitymatrix to refer to identitymatrix

------------------------------------------------------------------------
r6058 | havoc | 2006-03-04 10:24:21 +0100 (Sat, 04 Mar 2006) | 6 lines

replaced sbarpic_t with cachepic_t in sbar code (saves a bit of memory)
changed DrawQ_SuperPic and DrawQ_Pic to take a cachepic_t * instead of a pic name (this speeds up the sbar code by not using name lookups constantly)
removed DrawQ_Fill (use DrawQ_Pic with NULL pic instead)
changed crosshair/editlights cursors to use r_crosshairs array initialized at startup instead of constantly calling Draw_CachePic
changed Host_Init to call SCR_BeginLoadingPlaque instead of Host_StartVideo (which is called by SCR_BeginLoadingPlaque)

------------------------------------------------------------------------
r6057 | havoc | 2006-03-04 10:23:32 +0100 (Sat, 04 Mar 2006) | 2 lines

454

------------------------------------------------------------------------
r6056 | havoc | 2006-03-04 10:23:05 +0100 (Sat, 04 Mar 2006) | 2 lines

added SDL_APPACTIVE checking so that vid_hidden is now set correctly, this turns off rendering when minimized

------------------------------------------------------------------------
r6055 | havoc | 2006-03-04 08:14:10 +0100 (Sat, 04 Mar 2006) | 2 lines

optimizations and refactoring to get a small (1-2%) speed gain

------------------------------------------------------------------------
r6054 | havoc | 2006-03-04 07:13:50 +0100 (Sat, 04 Mar 2006) | 2 lines

added a fast path for queries on "sv_gravity" in CG_Frame (which is unused)

------------------------------------------------------------------------
r6053 | havoc | 2006-03-04 06:40:06 +0100 (Sat, 04 Mar 2006) | 2 lines

optimized entity handling in cgame.c (not used) so that it doesn't drag down framerates doing nothing

------------------------------------------------------------------------
r6052 | havoc | 2006-03-04 03:45:32 +0100 (Sat, 04 Mar 2006) | 2 lines

fix a C99 lazy variable issue with non-C99 compilers

------------------------------------------------------------------------
r6051 | havoc | 2006-03-03 16:02:56 +0100 (Fri, 03 Mar 2006) | 2 lines

now only compiles GLSL shaders on demand, this improves startup times (but causes some pausing when new combinations occur - which usually only happens on new levels)

------------------------------------------------------------------------
r6050 | havoc | 2006-03-03 15:51:07 +0100 (Fri, 03 Mar 2006) | 2 lines

move SV_ClearDatagram call to eliminate missing weapon/pickup effects bug when using cl_movement 1

------------------------------------------------------------------------
r6049 | molivier | 2006-03-02 17:46:30 +0100 (Thu, 02 Mar 2006) | 2 lines

Fallback to "vorbis.dll" and "vorbisfile.dll" if "libvorbis.dll" and "libvorbisfile.dll" can't be loaded

------------------------------------------------------------------------
r6048 | molivier | 2006-03-02 16:47:38 +0100 (Thu, 02 Mar 2006) | 2 lines

Added mdfour.[ch] to the MSVC project files

------------------------------------------------------------------------
r6047 | havoc | 2006-02-28 13:19:54 +0100 (Tue, 28 Feb 2006) | 2 lines

filter servers by "gameversion" cvar, which is now also exposed in the serverinfo

------------------------------------------------------------------------
r6046 | havoc | 2006-02-28 09:17:49 +0100 (Tue, 28 Feb 2006) | 2 lines

only query QuakeWorld servers when in GAME_NORMAL mode

------------------------------------------------------------------------
r6045 | havoc | 2006-02-28 07:29:59 +0100 (Tue, 28 Feb 2006) | 2 lines

casts to fix warnings in MSVC x64, thanks Willis

------------------------------------------------------------------------
r6044 | havoc | 2006-02-28 07:00:27 +0100 (Tue, 28 Feb 2006) | 2 lines

patch from div0 to fix a comment

------------------------------------------------------------------------
r6043 | havoc | 2006-02-28 06:41:39 +0100 (Tue, 28 Feb 2006) | 3 lines

reduced number of GAME_NEXUIZ checks in the engine (added cl_sound and sv_sound cvars to change or disable engine-triggered sounds), removed some old unused nexuiz menu code (now that the fallbac
k prevents you from even reaching the singleplayer menu)

------------------------------------------------------------------------
r6042 | havoc | 2006-02-27 03:19:30 +0100 (Mon, 27 Feb 2006) | 2 lines

fix the minutes display on the QW scoreboard

------------------------------------------------------------------------
r6041 | havoc | 2006-02-27 03:15:48 +0100 (Mon, 27 Feb 2006) | 2 lines

MorphOS networking support patch from bigfoot

------------------------------------------------------------------------
r6040 | havoc | 2006-02-27 03:15:10 +0100 (Mon, 27 Feb 2006) | 2 lines

added MorphOS labeling

------------------------------------------------------------------------
r6039 | havoc | 2006-02-26 12:00:19 +0100 (Sun, 26 Feb 2006) | 3 lines

vast improvements in qw server listings in the server browser
now DP servers and QW servers are color coded differently, and player count is color coded (red if empty or full, yellow if less than 4 players, white otherwise, useful for quickly identifying the busy servers)

------------------------------------------------------------------------
r6038 | havoc | 2006-02-26 10:39:59 +0100 (Sun, 26 Feb 2006) | 2 lines

added qw master support to server query system, and added 16 masters (15 of which from FTEQW), now the server browser is flooded with QW servers

------------------------------------------------------------------------
r6037 | havoc | 2006-02-26 10:37:52 +0100 (Sun, 26 Feb 2006) | 2 lines

improved packet command to have more escape codes (like \0)

------------------------------------------------------------------------
r6036 | havoc | 2006-02-26 10:36:46 +0100 (Sun, 26 Feb 2006) | 2 lines

fix crash in nq connect (oops)

------------------------------------------------------------------------
r6035 | havoc | 2006-02-26 07:15:17 +0100 (Sun, 26 Feb 2006) | 2 lines

added support for qw movevars (sent in server join, and sometimes a couple of them are updated during the game) in the cl_movement physics

------------------------------------------------------------------------
r6034 | havoc | 2006-02-26 04:15:05 +0100 (Sun, 26 Feb 2006) | 2 lines

fix the timeout problem with cl_movement 1 mode on QW servers, but the prediction still needs work to make use of movevars

------------------------------------------------------------------------
r6033 | havoc | 2006-02-26 04:00:47 +0100 (Sun, 26 Feb 2006) | 2 lines

qw support is 99% working

------------------------------------------------------------------------
r6031 | havoc | 2006-02-25 15:13:18 +0100 (Sat, 25 Feb 2006) | 2 lines

added md4four map checksumming, since QW servers seem to be very picky about map checksums matching

------------------------------------------------------------------------
r6030 | havoc | 2006-02-25 14:21:54 +0100 (Sat, 25 Feb 2006) | 2 lines

QW support getting very close

------------------------------------------------------------------------
r6029 | havoc | 2006-02-25 11:11:36 +0100 (Sat, 25 Feb 2006) | 2 lines

QW support getting closer

------------------------------------------------------------------------
r6028 | havoc | 2006-02-25 10:59:58 +0100 (Sat, 25 Feb 2006) | 2 lines

moved parse_model_precache and parse_sound_precache to cl.model_names and cl.sound_names respectively

------------------------------------------------------------------------
r6027 | havoc | 2006-02-25 09:56:03 +0100 (Sat, 25 Feb 2006) | 2 lines

fix typos that caused colormod to malfunction when hosting a QUAKEDP protocol server (it was sending red as green and blue), thanks to Spike for pointing this out

------------------------------------------------------------------------
r6026 | havoc | 2006-02-24 07:04:40 +0100 (Fri, 24 Feb 2006) | 2 lines

beginnings of qw protocol support

------------------------------------------------------------------------
r6025 | havoc | 2006-02-24 07:03:21 +0100 (Fri, 24 Feb 2006) | 3 lines

added InfoString_Print
modified InfoString_GetValue and InfoString_SetValue to reject " characters

------------------------------------------------------------------------
r6024 | havoc | 2006-02-24 06:18:03 +0100 (Fri, 24 Feb 2006) | 2 lines

renamed cl.protocol to cls.protocol

------------------------------------------------------------------------
r6023 | havoc | 2006-02-24 06:17:36 +0100 (Fri, 24 Feb 2006) | 2 lines

fix infinite loop bugs in InfoString_SetValue

------------------------------------------------------------------------
r6022 | havoc | 2006-02-24 05:46:27 +0100 (Fri, 24 Feb 2006) | 2 lines

removed canSend field from netconn_t, and added a fromserver variable in client parsing just for clarity

------------------------------------------------------------------------
r6021 | havoc | 2006-02-24 05:44:04 +0100 (Fri, 24 Feb 2006) | 2 lines

remove an unnecessary SV_VM block

------------------------------------------------------------------------
r6020 | havoc | 2006-02-24 05:14:42 +0100 (Fri, 24 Feb 2006) | 2 lines

patch from esteel that fixes the +/-button command descriptions (they all said button3)

------------------------------------------------------------------------
r6019 | havoc | 2006-02-23 17:19:09 +0100 (Thu, 23 Feb 2006) | 2 lines

fix rcon_password validation to refuse whitespace, and refuse empty passwords (as it was meant to do all along, but wasn't working properly)

------------------------------------------------------------------------
r6018 | havoc | 2006-02-23 17:04:24 +0100 (Thu, 23 Feb 2006) | 2 lines

rearrange SV_VM_Begin/End again to fix crashes

------------------------------------------------------------------------
r6017 | havoc | 2006-02-23 15:50:41 +0100 (Thu, 23 Feb 2006) | 4 lines

added qw compatible "rcon" support (allows a client who knows the server's rcon_password to run a command on the server), had to move NetConn_ServerFrame outside of the SV_VM_Begin block in Host_ServerFrame, and add relevant SV_VM_Begin blocks to various parts of host_cmd.c
added qw print command packet to client packet processing (needed for remote rcon when not connected to the server)
added qw "packet" command (sends a text message to the specified address)

------------------------------------------------------------------------
r6016 | havoc | 2006-02-23 12:08:14 +0100 (Thu, 23 Feb 2006) | 2 lines

changed Polygon[DF]_Divide functions to also be able to return an on-plane points count

------------------------------------------------------------------------
r6015 | havoc | 2006-02-23 11:57:31 +0100 (Thu, 23 Feb 2006) | 5 lines

merged NetConn_SendReliableMessage into NetConn_SendUnreliableMessage, and also merged away the other ReliableMessage functions (ReSend and Next)
rearranged client and server message sending calls to attempt to send unreliable messages, even if empty (necessary to trigger sending of reliable messages)
eliminated last remnants of NetConn_SendToAll stuff
changed some cls.demoplayback checks to !cls.netcon checks

------------------------------------------------------------------------
r6014 | havoc | 2006-02-23 11:47:09 +0100 (Thu, 23 Feb 2006) | 2 lines

make cl_movement handling a little more robust (hopefully)

------------------------------------------------------------------------
r6013 | havoc | 2006-02-23 11:34:56 +0100 (Thu, 23 Feb 2006) | 2 lines

changed r_speeds to only display timings with r_speeds 2, r_speeds 1 now only displays statistics (no glFinish needed so this is much faster)

------------------------------------------------------------------------
r6012 | havoc | 2006-02-23 06:47:53 +0100 (Thu, 23 Feb 2006) | 2 lines

another int cast for that patch

------------------------------------------------------------------------
r6011 | havoc | 2006-02-23 06:43:57 +0100 (Thu, 23 Feb 2006) | 2 lines

added int cast on write call in new terminal printing code, and added an include of io.h on windows

------------------------------------------------------------------------
r6010 | havoc | 2006-02-23 06:29:16 +0100 (Thu, 23 Feb 2006) | 2 lines

removed runmove array in favor of using a private entity flag to prevent movement on the first physics frame an entity exists in, this makes projectiles fired by cl_movement 1 clients behave properly

------------------------------------------------------------------------
r6009 | havoc | 2006-02-23 06:26:53 +0100 (Thu, 23 Feb 2006) | 2 lines

add the priv.server->move field needed by a previous commit

------------------------------------------------------------------------
r6006 | havoc | 2006-02-23 05:14:59 +0100 (Thu, 23 Feb 2006) | 2 lines

change unknown opcode error to a Con_DPrintf, this makes fteqcc fastarrays progs load

------------------------------------------------------------------------
r6005 | havoc | 2006-02-23 02:48:09 +0100 (Thu, 23 Feb 2006) | 2 lines

div0 fixed the bug that caused huge console prints to the terminal to be truncated, this bug has been bothering me for a long time, thanks div0!

------------------------------------------------------------------------
r6004 | havoc | 2006-02-23 00:18:12 +0100 (Thu, 23 Feb 2006) | 2 lines

fix alias execution order bug introduced by Black on 20050705 (using Cbuf_AddText instead of Cbuf_InsertText for alias expansion is bad!)

------------------------------------------------------------------------
r6003 | havoc | 2006-02-22 13:12:24 +0100 (Wed, 22 Feb 2006) | 2 lines

fix decal draw order bug introduced in recent commit, I forgot that decals are not queued as transparencies like other particles, so calling R_DrawParticles before rtlights was a bad idea (as it made the rtlights be unaffected by decals)

------------------------------------------------------------------------
r6002 | havoc | 2006-02-22 11:02:25 +0100 (Wed, 22 Feb 2006) | 6 lines

changed behavior of r_showtris (now only affects geometry in the game view, not sky, not hud, and not bloom)
added r_showtris_polygonoffset (doesn't seem to work, for unknown reasons)
renamed r_drawcollisionbrushes to r_showcollisionbrushes and got rid of its mode 2 behavior (which was trippy but not all that useful)
added r_showdisabledepthtest cvar which disables depth testing on the debugging geometry produced by r_show* cvars
renamed r_shadow_visiblelighting/volumes cvars to r_showlighting/shadowvolumes (and they no longer have a mode 2, use r_showdisabledepthtesting to get the same effect instead)

------------------------------------------------------------------------
r6001 | havoc | 2006-02-22 08:50:02 +0100 (Wed, 22 Feb 2006) | 2 lines

added NAN error checks to traceline and tracebox calls, these cause a PRVM_ERROR

------------------------------------------------------------------------
r6000 | havoc | 2006-02-22 08:46:31 +0100 (Wed, 22 Feb 2006) | 2 lines

made QC error() and objerror() builtins print the error string above and below the crash information, to be less confusing

------------------------------------------------------------------------
r5999 | molivier | 2006-02-21 00:33:24 +0100 (Tue, 21 Feb 2006) | 2 lines

Added function S_IsSoundPrecached to the sound engine API. "snd_main.h" shouldn't be included outside of the sound engine.

------------------------------------------------------------------------
r5998 | molivier | 2006-02-21 00:28:52 +0100 (Tue, 21 Feb 2006) | 2 lines

Modified path for Transfusion gfx files

------------------------------------------------------------------------
r5997 | havoc | 2006-02-20 05:07:22 +0100 (Mon, 20 Feb 2006) | 2 lines

fix player not being able to move bug introduced by recent input accumulation code

------------------------------------------------------------------------
r5996 | molivier | 2006-02-19 10:25:42 +0100 (Sun, 19 Feb 2006) | 2 lines

Workaround for a bug in the Linux ATI proprietary driver; it does not put the current video mode in the first slot in the array returned by XF86VidModeGetAllModeLines, which can lead to a crash in VID_Shutdown. Also, fixed a small memory leak (the video mode array was never freed)

------------------------------------------------------------------------
r5995 | havoc | 2006-02-18 11:16:18 +0100 (Sat, 18 Feb 2006) | 2 lines

call NetConn_UpdateSockets instead of NetConn_ClientFrame in playdemo code

------------------------------------------------------------------------
r5994 | havoc | 2006-02-18 06:20:04 +0100 (Sat, 18 Feb 2006) | 2 lines

Willis added a better fallback when the nexuiz menu qc fails to load

------------------------------------------------------------------------
r5993 | havoc | 2006-02-17 10:41:32 +0100 (Fri, 17 Feb 2006) | 2 lines

fix crashes with NAN bounding boxes (collisions or dlights) recursing down the BSP tree, they still don't behave properly (because there is no proper handling of NAN), but at least they don't crash anymore

------------------------------------------------------------------------
r5992 | havoc | 2006-02-17 05:00:27 +0100 (Fri, 17 Feb 2006) | 2 lines

added an unstick function used on most entities if their movement trace indicates they started in solid, this should prevent items and gibs from falling out of levels 99% of the time

------------------------------------------------------------------------
r5991 | havoc | 2006-02-17 04:25:31 +0100 (Fri, 17 Feb 2006) | 2 lines

changed tryrates array to include 48000, 24000, and 16000 speeds (this should help 48khz AC97 chips)

------------------------------------------------------------------------
r5990 | havoc | 2006-02-16 11:28:15 +0100 (Thu, 16 Feb 2006) | 3 lines

reworked input timing a bit more, now cl_movement 1 mode syncs client packets to the incoming server packets (because the server does not trust the client's timing, only the history of server frames sent to the client, and thus the client has to sync exactly to the server timing to work)
moved CL_SendCmd() call into CL_ReadFromServer right after CL_ReadDemoMessage(), this fixes the prediction jitters that recently appeared with the cl_netinputpacketspersecond feature, however it might add a slight delay in local games (I haven't noticed a delay however)

------------------------------------------------------------------------
r5989 | havoc | 2006-02-16 08:24:09 +0100 (Thu, 16 Feb 2006) | 2 lines

remove an unused extern for sys_ticrate, and added a comment warning about improper rate limiting if sys_ticrate is 0 (but it should never be 0 on a real server)

------------------------------------------------------------------------
r5988 | havoc | 2006-02-16 08:20:28 +0100 (Thu, 16 Feb 2006) | 3 lines

fixed bug that allowed accidental speed cheating with cl_movement 1 mode (move->time was being cleared by ApplyClientMove, so when ReadClientMove calculated how much to move since the last move, it always thought the last move was at time == 0, and then it clamped this delta to 0.1 or less, which prevented it from being completely ridiculous, but still horrible)
added kicking of speed cheaters (if they echo a timestamp that has not yet been issued by the server, they're clearly lying)

------------------------------------------------------------------------
r5987 | havoc | 2006-02-15 23:29:50 +0100 (Wed, 15 Feb 2006) | 2 lines

added a small how to install guide and a link to the Linux Quake Howto

------------------------------------------------------------------------
r5986 | havoc | 2006-02-15 07:04:51 +0100 (Wed, 15 Feb 2006) | 2 lines

also accumulate impulses when receiving multiple packets per server frame

------------------------------------------------------------------------
r5985 | havoc | 2006-02-15 04:14:42 +0100 (Wed, 15 Feb 2006) | 2 lines

changed client input packets to be sent at a fixed 50fps (configurable by cvar) rather than in response to each server packet

------------------------------------------------------------------------
r5984 | havoc | 2006-02-15 04:09:37 +0100 (Wed, 15 Feb 2006) | 2 lines

improved server handling of multiple packets per client physics frame (as would be the case if the client sends more frames per second than the server sends to it)

------------------------------------------------------------------------
r5983 | havoc | 2006-02-15 03:54:14 +0100 (Wed, 15 Feb 2006) | 2 lines

fix very stupid bug that caused entities to sometimes not be removed (priority was not being updated when deltabits were added back to an entity, so the priority remained at the no-update-necessary level despite the fact it should be sent again)

------------------------------------------------------------------------
r5982 | havoc | 2006-02-15 00:39:23 +0100 (Wed, 15 Feb 2006) | 2 lines

fix a typo in vid_conwidth declaration

------------------------------------------------------------------------
r5981 | havoc | 2006-02-13 19:35:43 +0100 (Mon, 13 Feb 2006) | 2 lines

added nexuiz-agl executable name so that mac nexuiz builds work

------------------------------------------------------------------------
r5980 | havoc | 2006-02-13 01:23:46 +0100 (Mon, 13 Feb 2006) | 2 lines

modified Host_ServerFrame to run multiple server frames again, but with a time limit of 0.05 seconds spent on server frames per call

------------------------------------------------------------------------
r5979 | havoc | 2006-02-12 22:03:32 +0100 (Sun, 12 Feb 2006) | 2 lines

now make clean cleans up the nexuiz executables also

------------------------------------------------------------------------
r5978 | havoc | 2006-02-12 21:59:15 +0100 (Sun, 12 Feb 2006) | 2 lines

changed vorbis.dll and friends to use lib prefix (libvorbis.dll)

------------------------------------------------------------------------
r5977 | havoc | 2006-02-12 21:26:02 +0100 (Sun, 12 Feb 2006) | 2 lines

added nexuiz icon and make rules to make use of it, and now the icon is included in dedicated and sdl builds (not just native client builds)

------------------------------------------------------------------------
r5976 | havoc | 2006-02-12 20:44:39 +0100 (Sun, 12 Feb 2006) | 2 lines

fixed changelevel networking bug (now ignores clc_ackframe messages from clients who are not spawned, this prevents leftover entity acks from previous level from messing up netcode)

------------------------------------------------------------------------
r5975 | havoc | 2006-02-12 20:43:45 +0100 (Sun, 12 Feb 2006) | 2 lines

moved sendsignon = true back to where it was, as it is directly related to the message writing above it

------------------------------------------------------------------------
r5974 | havoc | 2006-02-12 19:22:42 +0100 (Sun, 12 Feb 2006) | 2 lines

fix uninitialized specularscale in R_Shadow_RenderSurfacesLighting

------------------------------------------------------------------------
r5973 | havoc | 2006-02-12 19:22:09 +0100 (Sun, 12 Feb 2006) | 2 lines

fix uninitialized variables in InfoString_GetValue and InfoString_SetValue

------------------------------------------------------------------------
r5972 | havoc | 2006-02-12 19:21:16 +0100 (Sun, 12 Feb 2006) | 2 lines

renamed NetConn_UpdateServerStuff to NetConn_UpdateSockets and made it non-static, now called in CL_EstablishConnection so +connect on commandline works again

------------------------------------------------------------------------
r5970 | havoc | 2006-02-12 06:35:37 +0100 (Sun, 12 Feb 2006) | 2 lines

rollback recent network compression changes, it really does have to be reset on level change because the client expects it to be, another solution must be found

------------------------------------------------------------------------
r5969 | havoc | 2006-02-12 06:28:19 +0100 (Sun, 12 Feb 2006) | 2 lines

fixed glsl colormapping brightness bug when using colormod

------------------------------------------------------------------------
r5968 | havoc | 2006-02-12 06:12:37 +0100 (Sun, 12 Feb 2006) | 2 lines

a fix for the previous fix (don't reset host_client->latestframenum on level change)

------------------------------------------------------------------------
r5967 | havoc | 2006-02-12 04:28:52 +0100 (Sun, 12 Feb 2006) | 2 lines

GAME_NEXUIZ scoreboard team color names patch from KadaverJack

------------------------------------------------------------------------
r5966 | havoc | 2006-02-12 03:55:42 +0100 (Sun, 12 Feb 2006) | 2 lines

fix problems with changelevel causing network compression to stop working (bug introduced when SV_SendReconnect was rewritten quite some time ago), this was happening because the compression database was being freed on level change and reallocated, and thus producing older entity frame numbers that the client refused

------------------------------------------------------------------------
r5964 | havoc | 2006-02-12 01:35:46 +0100 (Sun, 12 Feb 2006) | 2 lines

removed EntityFrame5_ResetDatabase because it was only used in EntityFrame5_AllocDatabase

------------------------------------------------------------------------
r5963 | havoc | 2006-02-11 23:49:59 +0100 (Sat, 11 Feb 2006) | 2 lines

fix a crash in SV_ConnectClient on bots

------------------------------------------------------------------------
r5962 | havoc | 2006-02-11 05:24:19 +0100 (Sat, 11 Feb 2006) | 2 lines

removed crash parameter from Host_ShudownServer, eliminated NetConn_SendToAll and SV_SendReconnect

------------------------------------------------------------------------
r5961 | havoc | 2006-02-11 05:21:51 +0100 (Sat, 11 Feb 2006) | 2 lines

minor cleanup of keepalive

------------------------------------------------------------------------
r5960 | havoc | 2006-02-11 03:33:30 +0100 (Sat, 11 Feb 2006) | 2 lines

migrated cls.message and client->message buffers into netconn_t struct

------------------------------------------------------------------------
r5959 | havoc | 2006-02-10 19:44:19 +0100 (Fri, 10 Feb 2006) | 2 lines

added a comment by MAX_LIGHTSTYLES about savegames

------------------------------------------------------------------------
r5958 | havoc | 2006-02-09 14:52:17 +0100 (Thu, 09 Feb 2006) | 2 lines

added diffuse texture alpha support to GLSL shader (dot3 and vertex still need updating)

------------------------------------------------------------------------
r5957 | havoc | 2006-02-08 17:49:07 +0100 (Wed, 08 Feb 2006) | 2 lines

fixed bugs concerning rtlighting of transparent entities

------------------------------------------------------------------------
r5956 | havoc | 2006-02-08 17:13:59 +0100 (Wed, 08 Feb 2006) | 2 lines

two more 4x3 modes

------------------------------------------------------------------------
r5951 | havoc | 2006-02-07 16:39:51 +0100 (Tue, 07 Feb 2006) | 2 lines

changed two MAX_LIGHTSTYLE references to cl_max_lightstyle

------------------------------------------------------------------------
r5950 | havoc | 2006-02-07 16:36:56 +0100 (Tue, 07 Feb 2006) | 2 lines

fixed loadgame to support stock quake savegames (which have 64 lightstyles, darkplaces savegames have 256)

------------------------------------------------------------------------
r5949 | havoc | 2006-02-07 16:08:16 +0100 (Tue, 07 Feb 2006) | 2 lines

made MAX_LIGHTSTYLES error into a warning and it now checks cl_max_lightstyle instead

------------------------------------------------------------------------
r5948 | havoc | 2006-02-07 16:07:40 +0100 (Tue, 07 Feb 2006) | 2 lines

added externs for more of the cl_max_ variables

------------------------------------------------------------------------
r5944 | black | 2006-02-05 14:44:27 +0100 (Sun, 05 Feb 2006) | 2 lines

Fix it the right way (and also remove another bug this way).

------------------------------------------------------------------------
r5943 | havoc | 2006-02-05 06:17:54 +0100 (Sun, 05 Feb 2006) | 2 lines

crash fix for use of $*/$0-9 when not in an alias, patch from KadaverJack

------------------------------------------------------------------------
r5941 | havoc | 2006-02-04 15:09:38 +0100 (Sat, 04 Feb 2006) | 2 lines

added 1280x800 resolution (2560x1600 already existed)

------------------------------------------------------------------------
r5940 | havoc | 2006-02-03 06:14:24 +0100 (Fri, 03 Feb 2006) | 2 lines

two int casts that were missing, reported by Willis

------------------------------------------------------------------------
r5939 | havoc | 2006-02-02 15:57:04 +0100 (Thu, 02 Feb 2006) | 4 lines

vertex lighting path now does pants/shirt rendering faster than before
doubled brightness of vertex lighting path to make it look roughly like the other paths (unsure why it was darker however)
optimized lighting code setup a bit (less silly conditional returns)

------------------------------------------------------------------------
r5938 | havoc | 2006-02-02 14:52:00 +0100 (Thu, 02 Feb 2006) | 2 lines

fix a bug in the GLSL colormapping setup (was feeding a tinted pants/shirt color, should feed the raw colormap colors, because the shader is doing a multiply by light color on all of this)

------------------------------------------------------------------------
r5937 | havoc | 2006-02-02 14:44:20 +0100 (Thu, 02 Feb 2006) | 2 lines

split R_Shadow_RenderSurfacesLighting_Light_Dot3 into 3 subfunctions for different kinds of pass, and used these to do pants and shirt a little faster

------------------------------------------------------------------------
r5936 | havoc | 2006-02-02 14:13:36 +0100 (Thu, 02 Feb 2006) | 3 lines

added pants/shirt layer rendering to GLSL shader, rather than calling it three times like before (which was very slow)
migrated GLSL light shader permutation selection (and correspondingly all parameter setup) into R_Shadow_RenderSurfacesLighting_Light_GLSL, this causes more setup overhead but allows specific optimization of non-colormapping and non-specular surfaces so this should be a speed gain overall

------------------------------------------------------------------------
r5935 | havoc | 2006-02-01 16:51:37 +0100 (Wed, 01 Feb 2006) | 3 lines

fix crash in Cvar_CompleteCvarPrint
added description printing to cvarlist

------------------------------------------------------------------------
r5934 | havoc | 2006-02-01 16:11:46 +0100 (Wed, 01 Feb 2006) | 3 lines

changed renderer to check ent->colormap_pantscolor and ent->colormap_shirtcolor instead of ent->colormap to detect whether to use colormapping on a model, this should reduce chance of bugs in lighting code
also optimized the R_Shadow_RenderSurfacesLighting function a bit to have separate handling of colormapped and non-colormapped surfaces (probably a small speed gain, and reduces chance of bugs in lighting code)

------------------------------------------------------------------------
r5933 | havoc | 2006-02-01 14:21:06 +0100 (Wed, 01 Feb 2006) | 4 lines

added description string to all cvars and commands
modified tab completion to print description by each cvar, instead of just printing names
refactored tab completion code

------------------------------------------------------------------------
r5927 | havoc | 2006-01-30 14:34:01 +0100 (Mon, 30 Jan 2006) | 2 lines

disable hardware gamma if XF86VidModeGetGammaRampSize reports a size other than 256, for instance 1024 on Quadro

------------------------------------------------------------------------
r5926 | havoc | 2006-01-30 14:03:47 +0100 (Mon, 30 Jan 2006) | 2 lines

sound direction fix (negated yaw angle), submitted by div0

------------------------------------------------------------------------
r5925 | havoc | 2006-01-30 14:01:34 +0100 (Mon, 30 Jan 2006) | 2 lines

patch from div0 to add -sndmono and -sndstereo options to sdl sound code

------------------------------------------------------------------------
r5924 | havoc | 2006-01-30 13:59:27 +0100 (Mon, 30 Jan 2006) | 2 lines

fix for segfault in map name completion, submitted by div0

------------------------------------------------------------------------
r5923 | havoc | 2006-01-23 22:34:22 +0100 (Mon, 23 Jan 2006) | 2 lines

fix a typo, and apparently this isn't the cause of the nexuiz CTF bug

------------------------------------------------------------------------
r5922 | havoc | 2006-01-23 22:14:04 +0100 (Mon, 23 Jan 2006) | 2 lines

fixed SOLID_NOT relink touching triggers bug (which was causing CTF flags to be repeatedly captured in Nexuiz)

------------------------------------------------------------------------
r5921 | molivier | 2006-01-21 11:19:00 +0100 (Sat, 21 Jan 2006) | 2 lines

Updated DSP files from Willis

------------------------------------------------------------------------
r5920 | molivier | 2006-01-21 10:59:11 +0100 (Sat, 21 Jan 2006) | 2 lines

A few casts and variable type changes to get rid of warnings on Win64. By Willis

------------------------------------------------------------------------
r5919 | molivier | 2006-01-21 10:40:54 +0100 (Sat, 21 Jan 2006) | 2 lines

Moved a couple of extern declarations outside of the body of their functions (fixes compilation on MSVC6). By Willis

------------------------------------------------------------------------
r5918 | molivier | 2006-01-21 10:13:48 +0100 (Sat, 21 Jan 2006) | 2 lines

Added the proper libPNG DLL name for Win64, by Willis

------------------------------------------------------------------------
r5917 | molivier | 2006-01-21 10:10:39 +0100 (Sat, 21 Jan 2006) | 2 lines

Fix for Win64, by Willis

------------------------------------------------------------------------
r5916 | molivier | 2006-01-21 09:50:36 +0100 (Sat, 21 Jan 2006) | 2 lines

Fixed drawmask for non-csqc mods. Thanks to Willis for spotting this bug

------------------------------------------------------------------------
r5915 | havoc | 2006-01-17 21:48:39 +0100 (Tue, 17 Jan 2006) | 2 lines

changed newmouseparms to 0 0 0, in hopes of avoiding the winxp mouse acceleration bug

------------------------------------------------------------------------
r5914 | havoc | 2006-01-16 23:51:43 +0100 (Mon, 16 Jan 2006) | 2 lines

changed mac libpng12.dylib to libpng12.0.dylib

------------------------------------------------------------------------
r5913 | havoc | 2006-01-16 20:11:34 +0100 (Mon, 16 Jan 2006) | 2 lines

added S_FindName function to make dedicated server compile again

------------------------------------------------------------------------
r5911 | havoc | 2006-01-16 04:53:36 +0100 (Mon, 16 Jan 2006) | 2 lines

disable EXT_CSQC extension name for now

------------------------------------------------------------------------
r5910 | havoc | 2006-01-16 04:52:42 +0100 (Mon, 16 Jan 2006) | 2 lines

csqc patch from [515], seems to work with [515]'s dpcsqc test mod, needs a lot of code cleanup/merging, and VF_FOV stuff is currently ignored

------------------------------------------------------------------------
r5909 | havoc | 2006-01-15 22:02:25 +0100 (Sun, 15 Jan 2006) | 2 lines

changed line endings from DOS to unix

------------------------------------------------------------------------
r5908 | havoc | 2006-01-15 21:20:51 +0100 (Sun, 15 Jan 2006) | 2 lines

added png support patch from [515] (had to rewrite most of it though)

------------------------------------------------------------------------
r5907 | havoc | 2006-01-15 17:51:37 +0100 (Sun, 15 Jan 2006) | 2 lines

added 1440x900 and 720x450 resolutions

------------------------------------------------------------------------
r5906 | havoc | 2006-01-14 18:45:35 +0100 (Sat, 14 Jan 2006) | 2 lines

added DP_EF_DOUBLESIDED extension to list

------------------------------------------------------------------------
r5903 | havoc | 2006-01-14 18:40:50 +0100 (Sat, 14 Jan 2006) | 2 lines

added DP_SV_CUSTOMIZEENTITYFORCLIENT extension based on a patch from [515]

------------------------------------------------------------------------
r5902 | havoc | 2006-01-12 16:19:22 +0100 (Thu, 12 Jan 2006) | 2 lines

corrected a typo in a comment

------------------------------------------------------------------------
r5901 | havoc | 2006-01-12 16:17:12 +0100 (Thu, 12 Jan 2006) | 2 lines

added console editing enhancements patch from [515], except the part for special quake characters was omitted (as the engine should not assume the quake font is being used)

------------------------------------------------------------------------
r5900 | havoc | 2006-01-12 00:15:12 +0100 (Thu, 12 Jan 2006) | 2 lines

added DrawQ_Line/DrawQ_Lines/DrawQ_LineWidth patch from [515], note: buggy, needs cleanup

------------------------------------------------------------------------
r5899 | havoc | 2006-01-11 23:24:05 +0100 (Wed, 11 Jan 2006) | 2 lines

added con_textsize patch from [515]

------------------------------------------------------------------------
r5898 | havoc | 2006-01-11 19:53:22 +0100 (Wed, 11 Jan 2006) | 2 lines

added r_replacemaptexture and r_listmaptextures commands patch from [515]

------------------------------------------------------------------------
r5897 | havoc | 2006-01-11 17:17:29 +0100 (Wed, 11 Jan 2006) | 2 lines

added tab-completion of map/changelevel command + maps command patch from [515], which prints map names, titles, and format (Q1/Q2/Q3/HL/MC/??)

------------------------------------------------------------------------
r5896 | havoc | 2006-01-11 15:41:42 +0100 (Wed, 11 Jan 2006) | 2 lines

added sendcvar patch from [515]

------------------------------------------------------------------------
r5895 | havoc | 2006-01-10 22:16:49 +0100 (Tue, 10 Jan 2006) | 2 lines

added a warning comment about dmodel_t not matching the on-disk q1bsp format because of Sajt's MCBSP code (this does no harm because the reading code does not utilize dmodel_t in reading those structs, but it is a potential land mine to people looking at the header to study the format)

------------------------------------------------------------------------
r5894 | havoc | 2006-01-10 22:14:06 +0100 (Tue, 10 Jan 2006) | 2 lines

correct q2dheader_t and q3dheader_t to have the correct lump array sizes

------------------------------------------------------------------------
r5893 | havoc | 2006-01-10 15:52:21 +0100 (Tue, 10 Jan 2006) | 2 lines

added rain splash code written by [515], and made the splash sparks a bit wider so that they are noticable

------------------------------------------------------------------------
r5892 | havoc | 2006-01-10 15:35:45 +0100 (Tue, 10 Jan 2006) | 2 lines

added EF_DOUBLESIDED (and internally RENDER_NOCULLFACE)

------------------------------------------------------------------------
r5891 | havoc | 2006-01-10 15:11:51 +0100 (Tue, 10 Jan 2006) | 2 lines

added button9-16

------------------------------------------------------------------------
r5889 | havoc | 2006-01-08 21:10:01 +0100 (Sun, 08 Jan 2006) | 2 lines

redesigned the heart of SV_GetTagMatrix, it now makes sense

------------------------------------------------------------------------
r5887 | havoc | 2006-01-01 16:10:01 +0100 (Sun, 01 Jan 2006) | 2 lines

fix sp2 frame positioning

------------------------------------------------------------------------
r5886 | havoc | 2006-01-01 14:21:55 +0100 (Sun, 01 Jan 2006) | 2 lines

changed mouse button numbering to have MWHEELUP/MWHEELDOWN and then 4 5...

------------------------------------------------------------------------
r5885 | havoc | 2006-01-01 14:15:27 +0100 (Sun, 01 Jan 2006) | 2 lines

added developer_entityparsing cvar to aid in debugging entitystring parsing issues (which always seem to turn out to be map bugs, but it's useful to know what the bug in the map is)

------------------------------------------------------------------------
r5884 | havoc | 2006-01-01 14:12:31 +0100 (Sun, 01 Jan 2006) | 2 lines

hide GLSL compile warnings when developer is 0

------------------------------------------------------------------------
r5883 | havoc | 2006-01-01 08:51:57 +0100 (Sun, 01 Jan 2006) | 2 lines

make compile again, stupid typos

------------------------------------------------------------------------
r5882 | havoc | 2006-01-01 08:46:47 +0100 (Sun, 01 Jan 2006) | 2 lines

corrected some function names in error messages

------------------------------------------------------------------------
r5881 | havoc | 2006-01-01 08:46:13 +0100 (Sun, 01 Jan 2006) | 2 lines

added vertex bounds checking in Mod_Q1BSP_LoadEdges

------------------------------------------------------------------------
r5880 | havoc | 2005-12-30 12:14:05 +0100 (Fri, 30 Dec 2005) | 2 lines

disabled running of multiple server frames per host frame, because it does not handle overload gracefully (instead it makes the framerate significantly worse if the server frame is the bottleneck)

------------------------------------------------------------------------
r5879 | havoc | 2005-12-30 09:27:40 +0100 (Fri, 30 Dec 2005) | 2 lines

refactored gettaginfo in an attempt to improve readability, and fixed scaling bug

------------------------------------------------------------------------
r5874 | havoc | 2005-12-29 09:43:50 +0100 (Thu, 29 Dec 2005) | 2 lines

eliminated special case for gamma 1.0 as it was making worse gamma ramps than the general case, and tweaked the code a bit to round to nearest so it should hit exactly 65535

------------------------------------------------------------------------
r5873 | molivier | 2005-12-28 15:56:02 +0100 (Wed, 28 Dec 2005) | 2 lines

Removed unused files

------------------------------------------------------------------------
r5872 | molivier | 2005-12-28 14:26:28 +0100 (Wed, 28 Dec 2005) | 2 lines

Added support for refresh rate, vsync, and hardware gamma to Mac OS X native video module. Still working on the hardware gamma though, it looks a bit broken (colors are weird with gamma = 1)

------------------------------------------------------------------------
r5871 | havoc | 2005-12-27 11:10:55 +0100 (Tue, 27 Dec 2005) | 2 lines

reworked rtlighting code to handle transparent water lighting and transparent model lighting (doesn't properly handle alpha textures though)

------------------------------------------------------------------------
r5870 | havoc | 2005-12-27 10:56:31 +0100 (Tue, 27 Dec 2005) | 2 lines

changed basedir and gamedir handling slightly to eliminate the need for "./" paths

------------------------------------------------------------------------
r5869 | molivier | 2005-12-27 08:53:53 +0100 (Tue, 27 Dec 2005) | 2 lines

Fixed CoreAudio sound module

------------------------------------------------------------------------
r5868 | havoc | 2005-12-27 05:54:40 +0100 (Tue, 27 Dec 2005) | 2 lines

esteel's patch used C99 lazy variable declaration, fixed

------------------------------------------------------------------------
r5867 | havoc | 2005-12-27 05:12:47 +0100 (Tue, 27 Dec 2005) | 2 lines

remove an unused variable

------------------------------------------------------------------------
r5866 | havoc | 2005-12-27 03:43:33 +0100 (Tue, 27 Dec 2005) | 2 lines

fix sprite transparency bug introduced by the palette changes

------------------------------------------------------------------------
r5865 | havoc | 2005-12-27 03:29:40 +0100 (Tue, 27 Dec 2005) | 2 lines

reworked transparency in palettes, made palette_complete be strictly opaque, added palette_transparent (and switched a few things over to it), made palette_font actually be used (and it no longer has a transparent color 255, only color 0 is transparent in the font, correctly matching software quake), this should hopefully fix bugs with models using color 255 in their skin

------------------------------------------------------------------------
r5864 | havoc | 2005-12-27 03:22:56 +0100 (Tue, 27 Dec 2005) | 2 lines

changed a palette_complete, palette_alpha reference to NULL, NULL in sprite loading

------------------------------------------------------------------------
r5863 | havoc | 2005-12-27 03:18:35 +0100 (Tue, 27 Dec 2005) | 2 lines

removed a duplicate ;

------------------------------------------------------------------------
r5860 | havoc | 2005-12-26 02:16:44 +0100 (Mon, 26 Dec 2005) | 2 lines

nexuiz team scoreboard patch from esteel

------------------------------------------------------------------------
r5859 | havoc | 2005-12-17 04:43:57 +0100 (Sat, 17 Dec 2005) | 2 lines

changed Venim's dpmaster back to an IP

------------------------------------------------------------------------
r5858 | havoc | 2005-12-17 03:04:53 +0100 (Sat, 17 Dec 2005) | 2 lines

added tChr's master server, changed Venim's back to a hostname as it seems to resolve now, and noted admin of each master server

------------------------------------------------------------------------
r5857 | havoc | 2005-12-14 14:47:13 +0100 (Wed, 14 Dec 2005) | 2 lines

default r_useportalculling to 1, I don't know why it was off

------------------------------------------------------------------------
r5856 | black | 2005-12-05 20:36:32 +0100 (Mon, 05 Dec 2005) | 3 lines

Erm, remove the paramcount check from localcmd, so that it actually works
with an arbitrary number of params.

------------------------------------------------------------------------
r5855 | havoc | 2005-11-30 16:10:07 +0100 (Wed, 30 Nov 2005) | 6 lines

video modes in menu now also set vid_pixelheight and vid_conwidth/vid_conheight
improved video modes menu, it now has widescreen modes, refresh rate, and more information about the chosen mode
renamed vid_pixelaspect to vid_pixelheight and inverted its behavior (smaller value now means that a pixel is wider than it is tall)
eliminated r_refdef.fov* fields, redesigned to use frustum plane slopes (like glFrustum takes) and calculate fov from height*4/3 rather than width, so widescreen now automatically uses higher fov accordingly, but 4x3 modes are the same as they always were, this also required generating the frustum planes differently in the renderer
changed underwater view warping to use frustum scaling rather than angles, this makes it a little smoother

------------------------------------------------------------------------
r5854 | havoc | 2005-11-30 16:03:08 +0100 (Wed, 30 Nov 2005) | 3 lines

implemented vid_refreshrate cvar to specify display refresh rate in windows
added vid_minwidth/vid_minheight for use by menu, this lets a mod specify minimum acceptable resolution

------------------------------------------------------------------------
r5853 | havoc | 2005-11-29 13:24:24 +0100 (Tue, 29 Nov 2005) | 2 lines

409

------------------------------------------------------------------------
r5852 | havoc | 2005-11-29 13:14:23 +0100 (Tue, 29 Nov 2005) | 2 lines

smoke trails are now half as bright, bullet impact sparks now fly upward a little bit at first (looks better when shooting the floor)

------------------------------------------------------------------------
r5851 | havoc | 2005-11-29 12:58:59 +0100 (Tue, 29 Nov 2005) | 2 lines

implemented cl_particles_quake cvar to use quake-style particle effects

------------------------------------------------------------------------
r5850 | havoc | 2005-11-29 12:57:19 +0100 (Tue, 29 Nov 2005) | 2 lines

disabled dlight from scrag and hellknight shots

------------------------------------------------------------------------
r5849 | havoc | 2005-11-29 01:20:03 +0100 (Tue, 29 Nov 2005) | 2 lines

removed headphones stuff, now stereo is side speakers (like headphones was) because it was too hard to hear things behind you with only front speakers, added mono speaker layout also

------------------------------------------------------------------------
r5848 | havoc | 2005-11-28 08:46:39 +0100 (Mon, 28 Nov 2005) | 2 lines

fixed keynum_t issue, it was declared as an extern variable (?!?) in the header, should have been a typedef

------------------------------------------------------------------------
r5847 | havoc | 2005-11-28 08:45:07 +0100 (Mon, 28 Nov 2005) | 2 lines

changed buttonremap arrays to int instead of keynum_t because keynum_t is not being found for some bizarre reason no matter what I do

------------------------------------------------------------------------
r5846 | havoc | 2005-11-28 06:54:20 +0100 (Mon, 28 Nov 2005) | 2 lines

made K_MOUSE4/5 keys separate from K_MWHEELUP/DOWN keys

------------------------------------------------------------------------
r5845 | havoc | 2005-11-28 05:51:59 +0100 (Mon, 28 Nov 2005) | 2 lines

fix a typo

------------------------------------------------------------------------
r5844 | havoc | 2005-11-28 01:59:01 +0100 (Mon, 28 Nov 2005) | 2 lines

added scr_screenshot_gamma to menu (I'm sure I did this once before!)

------------------------------------------------------------------------
r5843 | havoc | 2005-11-27 09:29:37 +0100 (Sun, 27 Nov 2005) | 2 lines

416

------------------------------------------------------------------------
r5842 | havoc | 2005-11-27 01:24:44 +0100 (Sun, 27 Nov 2005) | 2 lines

eliminated snd_inited and sound_started variables, now uses shm != NULL checks instead

------------------------------------------------------------------------
r5841 | havoc | 2005-11-27 01:22:04 +0100 (Sun, 27 Nov 2005) | 2 lines

added minor documentation about logging features

------------------------------------------------------------------------
r5840 | havoc | 2005-11-26 23:41:58 +0100 (Sat, 26 Nov 2005) | 2 lines

remove a piece of breakpoint code I forgot to remove before

------------------------------------------------------------------------
r5839 | havoc | 2005-11-26 09:05:32 +0100 (Sat, 26 Nov 2005) | 2 lines

fix a typo in r_speeds display that incorrectly displayed dynamic shadow triangles

------------------------------------------------------------------------
r5838 | havoc | 2005-11-26 00:03:31 +0100 (Sat, 26 Nov 2005) | 2 lines

fix a sound conversion bug in mono output

------------------------------------------------------------------------
r5837 | havoc | 2005-11-26 00:00:30 +0100 (Sat, 26 Nov 2005) | 2 lines

fix a warning

------------------------------------------------------------------------
r5836 | havoc | 2005-11-25 09:23:36 +0100 (Fri, 25 Nov 2005) | 3 lines

sprites now use skinframe_t instead of their own texture/fogtexture fields
cleaned up hlbsp texture loading slightly, now uses Mod_LoadSkinFrame_Internal

------------------------------------------------------------------------
r5835 | havoc | 2005-11-25 08:29:35 +0100 (Fri, 25 Nov 2005) | 2 lines

don't load images when running a dedicated server (they would only be discarded by the missing texture manager anyway)

------------------------------------------------------------------------
r5834 | havoc | 2005-11-25 08:11:34 +0100 (Fri, 25 Nov 2005) | 2 lines

dynamically scale the meshqueue transparency sorting distances to adapt the precision to larger/smaller scenes

------------------------------------------------------------------------
r5833 | havoc | 2005-11-25 07:55:40 +0100 (Fri, 25 Nov 2005) | 2 lines

changed strzone, stuffcmd, and localcmd to be able to take multiple strings

------------------------------------------------------------------------
r5832 | havoc | 2005-11-25 07:14:05 +0100 (Fri, 25 Nov 2005) | 2 lines

ping command now works from server console

------------------------------------------------------------------------
r5830 | havoc | 2005-11-25 06:24:25 +0100 (Fri, 25 Nov 2005) | 2 lines

cleaned up edict clearing when connecting or coming back from a level change, this fixes the botclient bugs regarding .colormap, but also meant that NetConn_ServerFrame requires SV_VM_Begin/End around it

------------------------------------------------------------------------
r5829 | havoc | 2005-11-25 04:24:59 +0100 (Fri, 25 Nov 2005) | 2 lines

added support for model scaling in bounding box calculations for network culling, so now entities can be made bigger and won't disappear incorrectly

------------------------------------------------------------------------
r5828 | havoc | 2005-11-25 02:34:12 +0100 (Fri, 25 Nov 2005) | 3 lines

SOLID_NOT is now linked into the areagrid, which fixed the bugs with corpses not riding lifts, and also means that findradius will find SOLID_NOT entities more often like the sv_gameplayfix_blowupfallenzombies was intended to
reorganized and optimized the TOSS/FLY/BOUNCE/STEP physics for better handling of sv_gameplayfix_noairborncorpse

------------------------------------------------------------------------
r5827 | havoc | 2005-11-25 02:31:18 +0100 (Fri, 25 Nov 2005) | 2 lines

changed serverlist to using color tags instead of shifting the numbers to different charsets in the quake font

------------------------------------------------------------------------
r5826 | havoc | 2005-11-25 02:29:59 +0100 (Fri, 25 Nov 2005) | 2 lines

changed serverlist menu to use color tags instead of shifting the numbers to different character sets in the quake font

------------------------------------------------------------------------
r5825 | havoc | 2005-11-25 02:17:43 +0100 (Fri, 25 Nov 2005) | 2 lines

allow typing characters above 126

------------------------------------------------------------------------
r5824 | havoc | 2005-11-25 02:16:07 +0100 (Fri, 25 Nov 2005) | 2 lines

use color tags for chat messages instead of 0x80 masking

------------------------------------------------------------------------
r5823 | havoc | 2005-11-25 02:12:00 +0100 (Fri, 25 Nov 2005) | 2 lines

fixed up various bugs with cl_beams_relative, and reenabled smooth sweeping on other players/enemies

------------------------------------------------------------------------
r5822 | havoc | 2005-11-23 19:41:13 +0100 (Wed, 23 Nov 2005) | 2 lines

changed default bloom settings to faster performing and less overkill values

------------------------------------------------------------------------
r5821 | havoc | 2005-11-23 04:40:59 +0100 (Wed, 23 Nov 2005) | 2 lines

added a remaining < 1 check to centerprint display code, this might have fixed the problem where it briefly showed the full text at the beginning of a finale

------------------------------------------------------------------------
r5820 | havoc | 2005-11-23 04:33:20 +0100 (Wed, 23 Nov 2005) | 2 lines

fix bugs with crosshair_static 0 mode when the player is an EF_NODRAW entity

------------------------------------------------------------------------
r5819 | havoc | 2005-11-23 04:28:28 +0100 (Wed, 23 Nov 2005) | 2 lines

removing uses of entity_render_t->origin in the client

------------------------------------------------------------------------
r5818 | havoc | 2005-11-23 04:00:34 +0100 (Wed, 23 Nov 2005) | 2 lines

implemented 7.1 audio, only works with SDL (attempted ALSA support but ALSA doesn't seem to like mmap access to 4/6/8 channel buffers)

------------------------------------------------------------------------
r5817 | havoc | 2005-11-23 03:59:05 +0100 (Wed, 23 Nov 2005) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r5816 | havoc | 2005-11-23 03:54:50 +0100 (Wed, 23 Nov 2005) | 3 lines

cleaned up many text buffer sizes throughout the engine, most now use MAX_INPUTLINE, some use MAX_QPATH, also cleaned up a lot of stuff that had buffer sizes in the code (now uses sizeof)
increased MAX_INPUTLINE from 256 to 16384, so now console commandlines and many other things can be very large

------------------------------------------------------------------------
r5815 | havoc | 2005-11-22 01:55:26 +0100 (Tue, 22 Nov 2005) | 2 lines

fixed backwards q3bsp model lighting and backwards rtlighting

------------------------------------------------------------------------
r5814 | havoc | 2005-11-22 01:40:00 +0100 (Tue, 22 Nov 2005) | 3 lines

added r_shownormals
fixed Mod_BumpVectors to generate normals the correct way...  now all rtlighting and q3bsp vertex shading is backwards :(

------------------------------------------------------------------------
r5813 | havoc | 2005-11-21 19:14:56 +0100 (Mon, 21 Nov 2005) | 2 lines

clear the client->weaponmodel cache on level change

------------------------------------------------------------------------
r5812 | molivier | 2005-11-20 16:14:10 +0100 (Sun, 20 Nov 2005) | 2 lines

Fixed black screen when using fullscreen mode on Mac OS X

------------------------------------------------------------------------
r5811 | havoc | 2005-11-19 13:45:01 +0100 (Sat, 19 Nov 2005) | 2 lines

disable sbar in GAME_NETHERWORLD (it draws it using qc)

------------------------------------------------------------------------
r5810 | havoc | 2005-11-17 16:17:14 +0100 (Thu, 17 Nov 2005) | 2 lines

made gl_max_size cvar only affect TEXF_PICMIP textures, this prevents it from breaking bloom like it did previously, and bloom now disables itself if the hardware doesn't support big enough textures (such as 3Dfx Voodoo1/2/3/Rush/Banshee)

------------------------------------------------------------------------
r5809 | havoc | 2005-11-13 13:10:08 +0100 (Sun, 13 Nov 2005) | 2 lines

changed DNS name cache expiration time to 12 hours

------------------------------------------------------------------------
r5808 | havoc | 2005-11-13 13:08:35 +0100 (Sun, 13 Nov 2005) | 2 lines

corrected dpmaster.deathmask.net IP address comment again

------------------------------------------------------------------------
r5807 | havoc | 2005-11-13 13:05:24 +0100 (Sun, 13 Nov 2005) | 3 lines

added Matrix4x4_Normalize
now normalizes dlight matrix so that attached dlight entities won't be smaller/bigger than normal

------------------------------------------------------------------------
r5806 | havoc | 2005-11-13 13:04:28 +0100 (Sun, 13 Nov 2005) | 2 lines

expire internal DNS name cache entries after 5 minutes (this way a master server can change IP address)

------------------------------------------------------------------------
r5805 | havoc | 2005-11-13 12:59:31 +0100 (Sun, 13 Nov 2005) | 2 lines

updated ip address comment for dpmaster.deathmask.net

------------------------------------------------------------------------
r5804 | havoc | 2005-11-11 13:47:09 +0100 (Fri, 11 Nov 2005) | 2 lines

increased max cachepics from 256 to 1024 at VorteX's request

------------------------------------------------------------------------
r5803 | havoc | 2005-11-10 08:03:40 +0100 (Thu, 10 Nov 2005) | 2 lines

condensed CL_EntityParticles code

------------------------------------------------------------------------
r5802 | black | 2005-11-08 17:49:35 +0100 (Tue, 08 Nov 2005) | 3 lines

Moved the cmd preprocessor call from ExecuteString to Cbuf_Execute which
should fix the messagemode issue.

------------------------------------------------------------------------
r5801 | havoc | 2005-11-07 13:37:15 +0100 (Mon, 07 Nov 2005) | 2 lines

removed \n from all Host_Error, Sys_Error, PRVM_ERROR, PF_ERROR calls, since Host_Error/Sys_Error add their own \n as needed

------------------------------------------------------------------------
r5800 | havoc | 2005-11-07 12:08:12 +0100 (Mon, 07 Nov 2005) | 2 lines

cleaned up all Con_Printf calls that were missing a \n

------------------------------------------------------------------------
r5799 | havoc | 2005-11-07 10:52:57 +0100 (Mon, 07 Nov 2005) | 2 lines

fix a bug in loading colormap.lmp to determine number of fullbrights, forgot to pass &filesize to FS_LoadFile

------------------------------------------------------------------------
r5798 | havoc | 2005-11-07 10:44:12 +0100 (Mon, 07 Nov 2005) | 2 lines

fixed a bug in the r_lockpvs cvar silently added in the last commit (r_lockvisibility cvar also added in the last commit)

------------------------------------------------------------------------
r5797 | havoc | 2005-11-07 10:41:51 +0100 (Mon, 07 Nov 2005) | 2 lines

got rid of unused r_vismarklights cvar

------------------------------------------------------------------------
r5796 | havoc | 2005-11-07 10:35:58 +0100 (Mon, 07 Nov 2005) | 4 lines

cleaned up R_WorldVisibility code some more and added additional documentation
renamed r_surfaceworldnode to r_useportalculling and inverted its behavior accordingly
added a special no-pvs-at-all case for floating around in the void to improve readability

------------------------------------------------------------------------
r5795 | havoc | 2005-11-07 07:51:09 +0100 (Mon, 07 Nov 2005) | 2 lines

removed .tga/.lmp extensions from all Pic names in the engine to improve consistency

------------------------------------------------------------------------
r5794 | havoc | 2005-11-07 07:48:48 +0100 (Mon, 07 Nov 2005) | 2 lines

fix rendering issues with light crosshairs and the world crosshair

------------------------------------------------------------------------
r5793 | havoc | 2005-11-07 06:30:44 +0100 (Mon, 07 Nov 2005) | 2 lines

cleanup of Cmd_PreprocessString and removal of a commented code block as requested by Black

------------------------------------------------------------------------
r5792 | havoc | 2005-11-06 16:56:28 +0100 (Sun, 06 Nov 2005) | 2 lines

fix stupid crash

------------------------------------------------------------------------
r5791 | black | 2005-11-06 16:23:23 +0100 (Sun, 06 Nov 2005) | 2 lines

Merged the $ handling into one preprocessor function.

------------------------------------------------------------------------
r5790 | havoc | 2005-11-05 15:18:22 +0100 (Sat, 05 Nov 2005) | 2 lines

eliminated fs_filesize global, now File_LoadFile and File_Open take a fs_offset_t filesize variable pointer to store the file size into

------------------------------------------------------------------------
r5789 | havoc | 2005-11-05 08:48:17 +0100 (Sat, 05 Nov 2005) | 2 lines

eliminated qbyte type, now uses unsigned char throughout the engine for this purpose

------------------------------------------------------------------------
r5788 | havoc | 2005-11-04 14:24:15 +0100 (Fri, 04 Nov 2005) | 2 lines

implemented sv_fixedframeratesingleplayer cvar

------------------------------------------------------------------------
r5787 | havoc | 2005-11-04 13:32:52 +0100 (Fri, 04 Nov 2005) | 2 lines

eliminated use of node bounding box when recursing collision traces and lights through the BSP tree, now only uses BoxOnPlaneSide approach, with an optimized axial case inlined

------------------------------------------------------------------------
r5786 | havoc | 2005-11-04 13:31:35 +0100 (Fri, 04 Nov 2005) | 2 lines

minor optimizations to GLSL path layer checking

------------------------------------------------------------------------
r5785 | havoc | 2005-11-01 10:57:40 +0100 (Tue, 01 Nov 2005) | 2 lines

made timing even more reliable (now sleeps only as little as possible, and only if at least 10ms remains)

------------------------------------------------------------------------
r5784 | havoc | 2005-11-01 10:52:47 +0100 (Tue, 01 Nov 2005) | 2 lines

fix dedicated server timing, now sleeps less than the full amount of time (like listen servers/clients already did) to maintain a steady framerate, also made it not sleep unless it is at least 10ms, to try to further improve the timing accuracy, thanks to GreEn`mArine for testing this change

------------------------------------------------------------------------
r5783 | havoc | 2005-10-30 06:17:27 +0100 (Sun, 30 Oct 2005) | 2 lines

fix another crash on level change caused by NetConn_ServerFrame being called

------------------------------------------------------------------------
r5782 | havoc | 2005-10-29 13:26:25 +0200 (Sat, 29 Oct 2005) | 2 lines

fix server physics crash on level change from reading player movement packets during SV_SpawnServer (bad idea!)

------------------------------------------------------------------------
r5781 | havoc | 2005-10-29 12:59:10 +0200 (Sat, 29 Oct 2005) | 2 lines

rewrote much of the voodoo/tnt rtlight path, now supports fog, and now avoids rendering any black triangles (since these cards don't have a lot of fillrate it's better to cull triangles on the cpu)

------------------------------------------------------------------------
r5780 | havoc | 2005-10-29 08:51:14 +0200 (Sat, 29 Oct 2005) | 4 lines

converted vertex fogging to use a fogtable array which matches the fog texture
enabled fog texturing on GLSL lighting path (dot3 path and vertex path still need work)
changed EyeVector/LightVector in GLSL shader back to full fp32 precision because at fp16 the vectors were reaching infinity at only a few meters, which obviously broke fogging

------------------------------------------------------------------------
r5779 | havoc | 2005-10-29 02:58:15 +0200 (Sat, 29 Oct 2005) | 2 lines

merged two sprite functions into the main callback to slightly clean up the code and simplify it

------------------------------------------------------------------------
r5778 | havoc | 2005-10-29 02:39:53 +0200 (Sat, 29 Oct 2005) | 2 lines

migrated r_lerpsprites cvar check to r_lerpanim, r_lerpmodels no longer affects sprites

------------------------------------------------------------------------
r5777 | havoc | 2005-10-28 07:44:11 +0200 (Fri, 28 Oct 2005) | 2 lines

tweaked GLSL lighting shader to get a bit more performance (at least 7%) on GF6 by making all variables half precision except TexCoord, hopefully also helps GFFX

------------------------------------------------------------------------
r5776 | havoc | 2005-10-27 08:41:42 +0200 (Thu, 27 Oct 2005) | 2 lines

the beginnings of texture fog support (to cure the vertex artifacts and simplify the renderer a bit)

------------------------------------------------------------------------
r5775 | havoc | 2005-10-27 07:55:59 +0200 (Thu, 27 Oct 2005) | 2 lines

remove a debugging message related to ammo > 200 in zymotic hud

------------------------------------------------------------------------
r5774 | havoc | 2005-10-27 00:23:41 +0200 (Thu, 27 Oct 2005) | 2 lines

fix free/malloc problems from a partial switch to Z_Free and Z_Malloc, the switch over is now complete

------------------------------------------------------------------------
r5773 | havoc | 2005-10-26 12:57:05 +0200 (Wed, 26 Oct 2005) | 2 lines

new zymotic hud

------------------------------------------------------------------------
r5772 | havoc | 2005-10-26 12:13:00 +0200 (Wed, 26 Oct 2005) | 3 lines

replaced CL_PointQ1Contents with longer calls to contents conversion and CL_PointSuperContents
changed CL_PointSuperContents to a #define calling SV_Move directly as an optimization

------------------------------------------------------------------------
r5771 | havoc | 2005-10-26 12:11:47 +0200 (Wed, 26 Oct 2005) | 2 lines

split SV_Physics_Entity into SV_Physics_Entity and SV_Physics_ClientEntity as an optimization

------------------------------------------------------------------------
r5770 | havoc | 2005-10-26 12:09:28 +0200 (Wed, 26 Oct 2005) | 2 lines

fix stupid bug introduced by merging CL_DecayLights into CL_UpdateLights, fixed by splitting them again, now glowing entities should work again

------------------------------------------------------------------------
r5769 | havoc | 2005-10-26 04:09:48 +0200 (Wed, 26 Oct 2005) | 2 lines

optimized SV_WriteClientdataToMessage by caching weaponmodelindex in client structure, saving 1% cpu time in masque.bsp

------------------------------------------------------------------------
r5768 | havoc | 2005-10-26 04:02:49 +0200 (Wed, 26 Oct 2005) | 2 lines

reverted bsp recursion changes (back to the BoxOnPlaneSide method) because the skipping of solid leafs in node bounding box generation was completely breaking q3bsp collisions, and without the reduced node boxes the bsp recursion code runs horribly slow for unknown reasons

------------------------------------------------------------------------
r5767 | havoc | 2005-10-25 06:29:39 +0200 (Tue, 25 Oct 2005) | 2 lines

updated IP address comment for Willis's dpmaster.deathmask.net master server

------------------------------------------------------------------------
r5766 | havoc | 2005-10-24 07:55:21 +0200 (Mon, 24 Oct 2005) | 2 lines

fix a use of cs.specialvisibilityradius before it was initialized (thanks to gcc 4 for pointing out this bug)

------------------------------------------------------------------------
r5765 | havoc | 2005-10-24 06:42:22 +0200 (Mon, 24 Oct 2005) | 6 lines

moved d_lightstylevalue into r_refdef.lightstyle
moved r_dlights into r_redef.lights and made it an array of pointers into cl_dlights to save memory and time
merged R_UpdateLights into CL_DecayLights and renamed it CL_UpdateLights
renamed R_RTLight_UpdateFromDLight to R_RTLight_Update and made it take only the dlight pointer
implemented cl_activedlights variable to prevent scanning whole MAX_DLIGHTS range every frame

------------------------------------------------------------------------
r5764 | havoc | 2005-10-24 06:28:49 +0200 (Mon, 24 Oct 2005) | 3 lines

fixed a flaw in Mod_Q1BSP_RecursiveRecalcNodeBBox, it was merging bounding boxes even if they came from solid leafs, which meant that the solid hull around the world was making almost all nodes have a bounding box of +-1 billion units, negating any benefit at all to node bounding boxes
10% speed gain in masque.bsp by changing pvs box checking functions to use box tests when recursing the bsp tree instead of BoxOnPlaneSide (now that the node boxes are usable)

------------------------------------------------------------------------
r5763 | havoc | 2005-10-24 06:22:16 +0200 (Mon, 24 Oct 2005) | 2 lines

slightly optimized Mod_ForName to make less calls to Mod_LoadModel

------------------------------------------------------------------------
r5762 | havoc | 2005-10-24 06:19:23 +0200 (Mon, 24 Oct 2005) | 2 lines

made an optimized SV_ClipMoveToWorld function to save time on large numbers of world collisions

------------------------------------------------------------------------
r5761 | havoc | 2005-10-24 06:17:09 +0200 (Mon, 24 Oct 2005) | 2 lines

#ifdef 0'd out BoxOnPlaneSide_Separate as it is not used

------------------------------------------------------------------------
r5760 | havoc | 2005-10-24 01:13:11 +0200 (Mon, 24 Oct 2005) | 2 lines

don't send empty lightstyles during signon

------------------------------------------------------------------------
r5759 | havoc | 2005-10-23 22:24:03 +0200 (Sun, 23 Oct 2005) | 2 lines

fixed a bug that was making "Model %s not found" warnings never appear when parsing the model precache list

------------------------------------------------------------------------
r5758 | havoc | 2005-10-23 22:02:31 +0200 (Sun, 23 Oct 2005) | 3 lines

got rid of Mod_CheckLoaded, changed how model system restart works to make this work properly
disabled model purging on level change, now only the world model is unloaded, this should improve slightly load times from level to level if a model is used in an early level, then not used in the next, and then used again in the next after that, however it also increases memory usage

------------------------------------------------------------------------
r5757 | havoc | 2005-10-23 21:42:34 +0200 (Sun, 23 Oct 2005) | 2 lines

changed network entity pvs checking to cache the cluster list (updated whenever the cull box changes), this got a 20% speed gain in masque.bsp, also rewrote much of the network entity handling code for another 1% speed gain and slight readability improvement

------------------------------------------------------------------------
r5756 | havoc | 2005-10-23 08:36:05 +0200 (Sun, 23 Oct 2005) | 2 lines

rewrote r_speeds stats code, now uses renderstats global structure rather than individual c_ global variables, this makes maintenance a lot easier, additionally changed all the stats to be more representitive of how the engine actually works (counting entities instead of models/bmodels/sprites separately, among other changes), condensed r_speeds stats display to fewer lines

------------------------------------------------------------------------
r5754 | havoc | 2005-10-21 08:35:08 +0200 (Fri, 21 Oct 2005) | 2 lines

fix another g++ conversion error

------------------------------------------------------------------------
r5753 | havoc | 2005-10-21 08:32:19 +0200 (Fri, 21 Oct 2005) | 2 lines

added explicit casts for agl functions when calling GL_GetProcAddress

------------------------------------------------------------------------
r5752 | havoc | 2005-10-21 08:15:55 +0200 (Fri, 21 Oct 2005) | 2 lines

fix another float->enum conversion error with g++ 4

------------------------------------------------------------------------
r5751 | havoc | 2005-10-21 08:15:25 +0200 (Fri, 21 Oct 2005) | 2 lines

fixed two Con_Printf format strings with the wrong type

------------------------------------------------------------------------
r5750 | havoc | 2005-10-21 08:08:25 +0200 (Fri, 21 Oct 2005) | 2 lines

gave names to nearly all structs and enums which should make for better C++ error messages, and fix any more of those anonymous struct errors

------------------------------------------------------------------------
r5749 | havoc | 2005-10-21 07:30:33 +0200 (Fri, 21 Oct 2005) | 2 lines

fix an anonymous struct error with g++ 4

------------------------------------------------------------------------
r5748 | havoc | 2005-10-21 07:28:59 +0200 (Fri, 21 Oct 2005) | 2 lines

fix a float->enum conversion error with g++ 4

------------------------------------------------------------------------
r5747 | havoc | 2005-10-21 07:26:35 +0200 (Fri, 21 Oct 2005) | 2 lines

fix a float->enum conversion error with g++ on big endian systems

------------------------------------------------------------------------
r5746 | havoc | 2005-10-21 07:23:37 +0200 (Fri, 21 Oct 2005) | 2 lines

fix an int->enum conversion error with g++ on big endian systems

------------------------------------------------------------------------
r5745 | havoc | 2005-10-21 07:15:15 +0200 (Fri, 21 Oct 2005) | 2 lines

added struct name to imageformats to cure an error in g++ 4

------------------------------------------------------------------------
r5744 | havoc | 2005-10-21 07:11:58 +0200 (Fri, 21 Oct 2005) | 2 lines

added a struct name to envmapinfo to stop a g++ 4 error about envmapinfo (which is a global) using an anonymous type (a struct with no name)

------------------------------------------------------------------------
r5743 | havoc | 2005-10-21 07:05:49 +0200 (Fri, 21 Oct 2005) | 2 lines

made darkplaces compile successfully with g++ to test for errors C doesn't care about (result: found no actual bugs, just C++ compilers being ultra fussy)

------------------------------------------------------------------------
r5742 | havoc | 2005-10-21 00:22:24 +0200 (Fri, 21 Oct 2005) | 2 lines

fix one more signedness warning

------------------------------------------------------------------------
r5741 | havoc | 2005-10-21 00:14:19 +0200 (Fri, 21 Oct 2005) | 2 lines

gcc 4.0 signedness warning fixes and uninitialized vector fixes

------------------------------------------------------------------------
r5740 | havoc | 2005-10-18 00:51:42 +0200 (Tue, 18 Oct 2005) | 2 lines

added very preliminary zymotic hud

------------------------------------------------------------------------
r5739 | havoc | 2005-10-15 17:36:36 +0200 (Sat, 15 Oct 2005) | 2 lines

fix typo

------------------------------------------------------------------------
r5738 | havoc | 2005-10-15 17:21:02 +0200 (Sat, 15 Oct 2005) | 2 lines

don't try to compile GL_NV_half_float shaders if the extension is missing

------------------------------------------------------------------------
r5737 | havoc | 2005-10-14 09:36:45 +0200 (Fri, 14 Oct 2005) | 2 lines

removed Lights Per Model setting from effects options menu, as it only affects .lights files now that vertex dlights are gone...  leading to much confusion among users

------------------------------------------------------------------------
r5736 | havoc | 2005-10-13 14:03:05 +0200 (Thu, 13 Oct 2005) | 2 lines

work around for empty key/value pairs in nehahra neh1m8.bsp entities

------------------------------------------------------------------------
r5735 | havoc | 2005-10-11 12:06:10 +0200 (Tue, 11 Oct 2005) | 2 lines

fix a stupid bug with the runes display on the hud (it was detecting rogue/hipnotic hud's by the existence of the items2 field, which due to the DP progs loader always exists)

------------------------------------------------------------------------
r5734 | havoc | 2005-10-11 11:58:50 +0200 (Tue, 11 Oct 2005) | 2 lines

changed the unused line/sphere collision code to use Vector macros instead of doing everything manually (possibly improving readability)

------------------------------------------------------------------------
r5733 | havoc | 2005-10-11 11:57:44 +0200 (Tue, 11 Oct 2005) | 2 lines

updated a comment about the nehahra pmodel command/field

------------------------------------------------------------------------
r5731 | havoc | 2005-10-07 14:56:54 +0200 (Fri, 07 Oct 2005) | 2 lines

fix a stupid bug in line/sphere collision code (was using sqrt where it shouldn't)

------------------------------------------------------------------------
r5730 | havoc | 2005-10-06 16:12:00 +0200 (Thu, 06 Oct 2005) | 2 lines

ok this did not cause memory corruption because of another bug which wasted an equivilant amount of memory...

------------------------------------------------------------------------
r5729 | havoc | 2005-10-06 16:11:06 +0200 (Thu, 06 Oct 2005) | 2 lines

fix a very stupid bug in Mod_AllocSurfMesh that causes memory corruption

------------------------------------------------------------------------
r5727 | havoc | 2005-09-24 11:24:25 +0200 (Sat, 24 Sep 2005) | 2 lines

fix recursive error (and sometimes segfault) when a Host_Error occurs during progs loading (such as with a corrupt progs.dat)

------------------------------------------------------------------------
r5726 | havoc | 2005-09-23 08:04:17 +0200 (Fri, 23 Sep 2005) | 2 lines

make glsl work on ATI's newer drivers (which don't like #define on keywords)

------------------------------------------------------------------------
r5725 | molivier | 2005-09-18 18:43:45 +0200 (Sun, 18 Sep 2005) | 5 lines

- SFXs no longer allocate mempools, they use the sound mempool directly.
It saved 21KB and 129 mempools (from 191 to 62) in my quick test.
- removed unused function S_UnloadSound
- changed an endian test in the Ogg Vorbis code to look more coherent

------------------------------------------------------------------------
r5724 | molivier | 2005-09-18 18:36:14 +0200 (Sun, 18 Sep 2005) | 2 lines

Made Mem_PrintStats also print the real allocated size (including structures used by the memory system)

------------------------------------------------------------------------
r5723 | havoc | 2005-09-13 03:33:51 +0200 (Tue, 13 Sep 2005) | 2 lines

moved scr_screenshot_name declaration from cl_screen.c to fs.c because fs.c depends on it and creates it

------------------------------------------------------------------------
r5722 | havoc | 2005-09-11 14:58:07 +0200 (Sun, 11 Sep 2005) | 2 lines

changed R_TimeReport to call glFinish to improve the accuracy of the reports on each subsystem (not allowing deferred rendering - yes this knocks your framerate down a lot)

------------------------------------------------------------------------
r5721 | havoc | 2005-09-11 14:02:02 +0200 (Sun, 11 Sep 2005) | 2 lines

fix a crash on vertex lighting q1bsp/hlbsp surfaces with no lightmap samples data

------------------------------------------------------------------------
r5720 | havoc | 2005-09-11 13:48:17 +0200 (Sun, 11 Sep 2005) | 3 lines

rewrote colormapping handling to store colormap_pantscolor and colormap_shirtcolor in entity_render_t rather than having the annoying palette lookups in the renderer, while doing this I removed support for fullbright rendering of colormap colors 14 and 15 (this shouldn't really affect anyone, stock quake did not even let you use these colors, and they're ugly colors anyway :)
rewrote portions of surface renderer again, to improve readability and overbright handling, this shouldn't change anything visually

------------------------------------------------------------------------
r5719 | havoc | 2005-09-11 13:38:38 +0200 (Sun, 11 Sep 2005) | 2 lines

use a better check for bmodels when clearing stainmaps which won't happen on old submodels (which might not be unloaded yet when this function is called)

------------------------------------------------------------------------
r5718 | havoc | 2005-09-11 12:39:45 +0200 (Sun, 11 Sep 2005) | 2 lines

fix Sajt's bug in q1bsp/hlbsp hullsizes (off by one on the hull index)

------------------------------------------------------------------------
r5717 | havoc | 2005-09-11 10:33:52 +0200 (Sun, 11 Sep 2005) | 2 lines

fix a stupid typo in the vertex shader

------------------------------------------------------------------------
r5716 | molivier | 2005-09-11 09:30:26 +0200 (Sun, 11 Sep 2005) | 11 lines

- Updated Zlib definitions to version 1.2.3. The only difference is that
the function calling convention has changed on Win32 (previously, the
zlib DLL used WINAPI). YOU NOW NEED AN OFFICIAL "zlib1.dll" version
1.2.x instead of your old "zlib.dll" (get it from http://www.zlib.net/).
If you still want to use a DLL with the old calling convention,
uncomment line 101 and recompile (such a DLL can be found at
http://www.winimage.com/zLibDll/).
- Removed QuakeForge copyright since the last bit of QF
code was removed months ago by LordHavoc
- Changed the way we test the presence of the O_NONBLOCK flag

------------------------------------------------------------------------
r5714 | sajt | 2005-09-11 00:00:21 +0200 (Sun, 11 Sep 2005) | 2 lines

After the swarm of angry mail I received from owners of manufacturerly-diverse processors, I finally gave in.

------------------------------------------------------------------------
r5713 | sajt | 2005-09-10 23:38:50 +0200 (Sat, 10 Sep 2005) | 2 lines

Removed the evil evil prototype

------------------------------------------------------------------------
r5711 | havoc | 2005-09-10 14:12:34 +0200 (Sat, 10 Sep 2005) | 2 lines

removed a lot of texture_t fields that were used by the old renderer

------------------------------------------------------------------------
r5710 | havoc | 2005-09-10 13:33:11 +0200 (Sat, 10 Sep 2005) | 2 lines

removed old surface renderer

------------------------------------------------------------------------
r5709 | sajt | 2005-09-10 12:30:05 +0200 (Sat, 10 Sep 2005) | 2 lines

The MCBSP header has been fixed but it will still crash your NASA lunar module landing mainframe

------------------------------------------------------------------------
r5707 | sajt | 2005-09-10 12:07:25 +0200 (Sat, 10 Sep 2005) | 2 lines

Rename dhullinfo_t to hullinfo_t, fix byte->qbyte. More fixes later! Don't complain if this crashes your Sun supercomputer!

------------------------------------------------------------------------
r5706 | sajt | 2005-09-10 08:49:57 +0200 (Sat, 10 Sep 2005) | 2 lines

MCBSP version 2 loading in the engine.. Some very ugly code (will be rewritten). Also, I haven't thought of how bboxes will round to hull sizes yet, so don't even bother trying to use the format yet. Also, someone might want to add a dhullinfo_t instance in the model struct or something, so the rounding functions would be able to access the hull sizes. I'm not sure how that will all work yet.

------------------------------------------------------------------------
r5702 | havoc | 2005-09-09 15:57:56 +0200 (Fri, 09 Sep 2005) | 2 lines

new surface renderer, builds a layer list in R_UpdateTextureInfo, currently requires r_test to be 1 to use it, will be removing old surface renderer (still available) soon

------------------------------------------------------------------------
r5701 | havoc | 2005-09-09 14:37:25 +0200 (Fri, 09 Sep 2005) | 2 lines

fix a bug that made the world render colormapped (no effect but a speed loss)

------------------------------------------------------------------------
r5700 | molivier | 2005-09-09 10:32:50 +0200 (Fri, 09 Sep 2005) | 2 lines

Mac OS X OpenGL and input module, using Carbon and AGL. Still in development, but stable enough for a player to use. Notable problems and missing features: no hardware gamma support, no desktop menus, mouse movement scaling NOT disabled (please, if someone knows how to do that with Carbon, let me know), and the fact that it has only be tested on one computer so far (my iBook G4)...

------------------------------------------------------------------------
r5699 | havoc | 2005-09-08 13:49:00 +0200 (Thu, 08 Sep 2005) | 2 lines

removed detail texturing (it only worked in q1bsp and hlbsp maps, did not work properly with rtlights, was liked by some people and disliked by many more, and consumed some memory)

------------------------------------------------------------------------
r5698 | havoc | 2005-09-08 11:12:16 +0200 (Thu, 08 Sep 2005) | 2 lines

removed distortion textures formerly used by GF3 water shader, this frees up 128K of texture memory

------------------------------------------------------------------------
r5697 | havoc | 2005-09-08 11:08:45 +0200 (Thu, 08 Sep 2005) | 2 lines

removed GF3 water shader (entirely), it probably won't be coming back

------------------------------------------------------------------------
r5696 | havoc | 2005-09-08 06:15:17 +0200 (Thu, 08 Sep 2005) | 2 lines

moved waterscrollmatrix handling into texture->currentexmatrix to simplify texture matrix shaders like water, and added support in R_Shadow_RenderLighting functions

------------------------------------------------------------------------
r5695 | havoc | 2005-09-07 19:41:03 +0200 (Wed, 07 Sep 2005) | 2 lines

changed Mod_Q3BSP_LoadEffects to allow brushindex -1 (for effects applied to the whole map), and made it use a warning instead of an error for invalid brushindex

------------------------------------------------------------------------
r5694 | havoc | 2005-09-07 18:07:47 +0200 (Wed, 07 Sep 2005) | 2 lines

migrated surface list iteration into the RenderLighting paths for more efficient handling of surfaces, this increased GLSL performance, and vertex lighting performance (rewrote most of it), dot3 path is still quite slow however

------------------------------------------------------------------------
r5693 | havoc | 2005-09-07 18:05:54 +0200 (Wed, 07 Sep 2005) | 2 lines

fix a few very small mistakes by Black and Elric: precompiler directives (#define) can not have whitespace before them, but can have whitespace after the #

------------------------------------------------------------------------
r5692 | havoc | 2005-09-07 11:58:37 +0200 (Wed, 07 Sep 2005) | 2 lines

fix a crash in Cmd_ExecuteAlias when $* is used with no parameters

------------------------------------------------------------------------
r5691 | molivier | 2005-09-07 11:58:15 +0200 (Wed, 07 Sep 2005) | 2 lines

Added CoreAudio (Mac OS X) sound driver. Changed / fixed a couple of Mac OS X related lines in the makefiles. The sound format is now printed at sound module startup.

------------------------------------------------------------------------
r5690 | havoc | 2005-09-07 11:56:23 +0200 (Wed, 07 Sep 2005) | 5 lines

split model->DrawShadowVolume into CompileShadowVolume and DrawShadowVolume to simplify things
moved ShadowMesh creation from R_RTLight_Compile to R_Q1BSP_CompileShadowVolume
split R_Shadow_RenderLighting into several functions for different paths to (very slightly) improve readability
fixed a bug introduced by recent specularscale optimizations (it wasn't being passed to RenderLighting)

------------------------------------------------------------------------
r5689 | molivier | 2005-09-07 11:54:30 +0200 (Wed, 07 Sep 2005) | 2 lines

Fixed the SDL video driver on Mac OS X (crash when restarting). Thanks to BigMac for the patch

------------------------------------------------------------------------
r5688 | havoc | 2005-09-07 10:47:55 +0200 (Wed, 07 Sep 2005) | 2 lines

removed r_shadow_realtime_world_compilelight cvar and all code relating to it (no longer compiles lighting geometry), this is necessary for proper handling of water and animated textures

------------------------------------------------------------------------
r5687 | havoc | 2005-09-07 10:40:12 +0200 (Wed, 07 Sep 2005) | 3 lines

migrated a lot of error handling out of R_Shadow_RenderLighting and into the loading code or DrawLight code, this makes r_shadow_realtime_world_compilelight
0 faster than it was, still not quite as fast as compilelight 1 however

------------------------------------------------------------------------
r5686 | sajt | 2005-09-07 04:43:41 +0200 (Wed, 07 Sep 2005) | 2 lines

Dot crosshair is now a tad bigger (and centred properly)

------------------------------------------------------------------------
r5685 | sajt | 2005-09-06 13:28:25 +0200 (Tue, 06 Sep 2005) | 3 lines

396 again
A few items look like they should be fixed by now: line #'s 47, 51, 208, ... (only looked through a few of them)

------------------------------------------------------------------------
r5684 | sajt | 2005-09-06 13:17:35 +0200 (Tue, 06 Sep 2005) | 4 lines

New MCBSP format, used for my mod. It differs from bsp 29 in that it stores coloured lighting data in the bsp file itself, it has a different set of hulls, and a differently formatted header (I used a few hacks to pull that off without adding a new header struct... maybe be changed later).

Anyway, do NOT use this format yet! The format is WIP and backward compatibility will not be kept!

------------------------------------------------------------------------
r5683 | havoc | 2005-09-06 08:51:19 +0200 (Tue, 06 Sep 2005) | 3 lines

now has two precision error workaround cases rather than one, lifts have been successfully tested at 1 million frames per second
slight cleaning of some variable declarations

------------------------------------------------------------------------
r5682 | havoc | 2005-09-06 08:10:51 +0200 (Tue, 06 Sep 2005) | 2 lines

don't remove onground flag when riding a pusher, this fixes the e3m2 silver key not falling with the platform it is riding

------------------------------------------------------------------------
r5681 | havoc | 2005-09-06 07:33:53 +0200 (Tue, 06 Sep 2005) | 2 lines

removed (int) casts added by Sajt's last commit, as they are probably a slowdown in most cases

------------------------------------------------------------------------
r5680 | sajt | 2005-09-06 04:17:40 +0200 (Tue, 06 Sep 2005) | 4 lines

The broken pushers are PARTLY fixed. They will now stop when in contact with an entity and call their blocked() QC function. However they appear to have a tiny portion stuck in the player, so the developer console will still be spammed with 'player is stuck.' messages, and the player can still jump while a crusher is on his head.

Note to smart people: I'm not sure what to stick in movetype for the SV_ClipMoveToEntity calls, so I put 0 since it's not important. Maybe that should be changed to the appropriate value for the sake of Good(tm).

------------------------------------------------------------------------
r5679 | havoc | 2005-09-02 13:20:51 +0200 (Fri, 02 Sep 2005) | 2 lines

fix a bug that called player thinks during a level change, this bug may have even been in stock quake

------------------------------------------------------------------------
r5678 | havoc | 2005-09-02 13:10:10 +0200 (Fri, 02 Sep 2005) | 2 lines

fix a memory leak in one error case in LoadTGA and clean up things a little

------------------------------------------------------------------------
r5676 | sajt | 2005-09-01 03:59:04 +0200 (Thu, 01 Sep 2005) | 2 lines

No longer gives fail message when skybox loads properly, and no longer gives two fail messages when skybox doesn't load properly

------------------------------------------------------------------------
r5675 | havoc | 2005-08-31 16:05:59 +0200 (Wed, 31 Aug 2005) | 2 lines

initialize red to false (fixes an uninitialized variable warning which appears to be a genuine bug)

------------------------------------------------------------------------
r5674 | havoc | 2005-08-31 11:21:25 +0200 (Wed, 31 Aug 2005) | 2 lines

change GAME_ZYMOTIC default data dir to basezym

------------------------------------------------------------------------
r5673 | sajt | 2005-08-30 11:40:02 +0200 (Tue, 30 Aug 2005) | 2 lines

Another MSVC error fixed

------------------------------------------------------------------------
r5672 | havoc | 2005-08-30 10:53:01 +0200 (Tue, 30 Aug 2005) | 2 lines

modified Mod_ValidateElements to fix broken elements rather than crashing later

------------------------------------------------------------------------
r5671 | havoc | 2005-08-30 09:34:33 +0200 (Tue, 30 Aug 2005) | 2 lines

make compile on MSVC

------------------------------------------------------------------------
r5670 | havoc | 2005-08-30 06:12:43 +0200 (Tue, 30 Aug 2005) | 2 lines

added PSK model support (UnrealTournament 2003/2004 ActorX format)

------------------------------------------------------------------------
r5669 | havoc | 2005-08-29 07:48:32 +0200 (Mon, 29 Aug 2005) | 2 lines

rollback that shadowmesh fix, I was thinking about it incorrectly

------------------------------------------------------------------------
r5668 | havoc | 2005-08-29 07:44:23 +0200 (Mon, 29 Aug 2005) | 2 lines

forgot one part of the shadowmesh fix

------------------------------------------------------------------------
r5667 | havoc | 2005-08-29 07:43:41 +0200 (Mon, 29 Aug 2005) | 2 lines

fix the quake logo shadow in e1m5 (ALL surfaces were producing shadow volumes, including sky and liquids)

------------------------------------------------------------------------
r5666 | havoc | 2005-08-28 22:41:12 +0200 (Sun, 28 Aug 2005) | 2 lines

some cleaning of the model headers, and added bufferend parameter to all model loaders

------------------------------------------------------------------------
r5665 | havoc | 2005-08-28 09:23:51 +0200 (Sun, 28 Aug 2005) | 4 lines

added .dpm model support
moved Mod_ZYMOTICMODEL_Load function prototype from model_zymotic.h to model_alias.h (where the others already are)
removed an unnecessary call to Mod_BuildTriangleNeighbors in Mod_ZYMOTICMODEL_Load (it was being called twice)

------------------------------------------------------------------------
r5663 | tomaz | 2005-08-28 03:26:15 +0200 (Sun, 28 Aug 2005) | 2 lines

Added multiplayer maps to -did2 mode

------------------------------------------------------------------------
r5662 | tomaz | 2005-08-28 03:21:42 +0200 (Sun, 28 Aug 2005) | 2 lines

Added -did2 mode ( Defeat In Detail 2 )

------------------------------------------------------------------------
r5658 | havoc | 2005-08-25 07:20:09 +0200 (Thu, 25 Aug 2005) | 2 lines

changed scr_screenshot_jpeg default to 1 (note this does not affect any existing installations which already have it saved to config as 1)

------------------------------------------------------------------------
r5657 | sajt | 2005-08-25 04:07:05 +0200 (Thu, 25 Aug 2005) | 2 lines

Get client velocity from cl.velocity rather than cl.movement_velocity for bob, this makes demos use the bob too

------------------------------------------------------------------------
r5656 | sajt | 2005-08-25 00:16:55 +0200 (Thu, 25 Aug 2005) | 2 lines

Apparently this shuts 'assignment in conditional' warnings up

------------------------------------------------------------------------
r5655 | havoc | 2005-08-24 20:51:16 +0200 (Wed, 24 Aug 2005) | 2 lines

fix a stupid bug in shader parsing (it was ignoring passes when not transparent)

------------------------------------------------------------------------
r5654 | sajt | 2005-08-24 13:46:12 +0200 (Wed, 24 Aug 2005) | 2 lines

396

------------------------------------------------------------------------
r5653 | sajt | 2005-08-24 13:45:37 +0200 (Wed, 24 Aug 2005) | 2 lines

Added 99% functional weaponmodel bobbing code. It even tries to stop bobbing when you're not on the ground, and smoothly transitions between bobbing and not bobbing. The only problem is it seems to jolt whenever you pass through a message trigger or pick up an item or do anything unexceptional like that. Was it a bad idea to trust cl.onground?

------------------------------------------------------------------------
r5651 | sajt | 2005-08-24 11:53:11 +0200 (Wed, 24 Aug 2005) | 2 lines

395

------------------------------------------------------------------------
r5649 | havoc | 2005-08-24 08:17:12 +0200 (Wed, 24 Aug 2005) | 2 lines

nothing to see here, move along...

------------------------------------------------------------------------
r5648 | havoc | 2005-08-24 07:59:41 +0200 (Wed, 24 Aug 2005) | 3 lines

some cleanup of R_DrawTextureSurfaceList
changed model->brushq3.data_lightmaps checks to model->type == mod_brushq3, to fix rtlighting issues in unlit q3bsp maps (which were rendering fullbright even in rtworld mode)

------------------------------------------------------------------------
r5647 | sajt | 2005-08-24 00:13:06 +0200 (Wed, 24 Aug 2005) | 2 lines

Urre admits he was inebriated and his judgment hencely impaired when he suggested this

------------------------------------------------------------------------
r5646 | sajt | 2005-08-24 00:02:33 +0200 (Wed, 24 Aug 2005) | 2 lines

Removed gl_combine from the menu and let the menu select the dot crosshair

------------------------------------------------------------------------
r5645 | sajt | 2005-08-23 23:45:11 +0200 (Tue, 23 Aug 2005) | 2 lines

When below 1 fps, the fps counter instead counts spf (seconds per frame). Note that it's pretty hard to get into the spfs (so far I've only gotten it the moment after adding 30 rtlights at the same time when there were already 300 in the same spot)

------------------------------------------------------------------------
r5644 | sajt | 2005-08-23 23:09:21 +0200 (Tue, 23 Aug 2005) | 2 lines

Added showbrand cvar, possible values 1-8. Draws the image gfx/brand on an edge or corner of the screen, based on the value of showbrand. 1 is bottom-left, 2 is bottom-middle, etc.

------------------------------------------------------------------------
r5643 | havoc | 2005-08-23 22:50:14 +0200 (Tue, 23 Aug 2005) | 2 lines

q3bsp loader no longer generates a fake lightgrid when one is missing, this saves a lot of memory in unlit maps

------------------------------------------------------------------------
r5642 | sajt | 2005-08-23 11:03:26 +0200 (Tue, 23 Aug 2005) | 2 lines

I forgot to mention that I also fixed some other asymmetric crosshairs (3 and 4)

------------------------------------------------------------------------
r5641 | sajt | 2005-08-23 10:51:48 +0200 (Tue, 23 Aug 2005) | 2 lines

Added dot crosshair (crosshair 6)

------------------------------------------------------------------------
r5639 | sajt | 2005-08-23 09:06:23 +0200 (Tue, 23 Aug 2005) | 2 lines

Added a builtin for te_flamejet

------------------------------------------------------------------------
r5638 | sajt | 2005-08-23 08:43:24 +0200 (Tue, 23 Aug 2005) | 2 lines

Added sv_maxairspeed cvar (default 30). This was already mirrored  by cl_movement_maxairspeed.

------------------------------------------------------------------------
r5637 | sajt | 2005-08-23 07:50:55 +0200 (Tue, 23 Aug 2005) | 2 lines

Forgot a little portion of the comment :-(

------------------------------------------------------------------------
r5635 | sajt | 2005-08-23 07:39:12 +0200 (Tue, 23 Aug 2005) | 2 lines

Added DP_SV_WRITEUNTERMINATEDSTRING extension

------------------------------------------------------------------------
r5634 | sajt | 2005-08-23 06:07:29 +0200 (Tue, 23 Aug 2005) | 2 lines

Updated todo

------------------------------------------------------------------------
r5632 | havoc | 2005-08-23 05:02:56 +0200 (Tue, 23 Aug 2005) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r5630 | molivier | 2005-08-21 09:54:56 +0200 (Sun, 21 Aug 2005) | 2 lines

Added the RTLD_GLOBAL flag to the dlopen call, since some systems seem to require that for some DLLs to work correctly. Thanks to Andreas Dehmel for the patch

------------------------------------------------------------------------
r5629 | molivier | 2005-08-21 09:51:31 +0200 (Sun, 21 Aug 2005) | 2 lines

Removed an unused variable

------------------------------------------------------------------------
r5617 | havoc | 2005-08-20 23:57:28 +0200 (Sat, 20 Aug 2005) | 2 lines

made some things static

------------------------------------------------------------------------
r5616 | havoc | 2005-08-20 21:00:02 +0200 (Sat, 20 Aug 2005) | 2 lines

added DP_SV_PRECACHEANYTIME extension

------------------------------------------------------------------------
r5601 | havoc | 2005-08-19 03:42:43 +0200 (Fri, 19 Aug 2005) | 2 lines

fix double bright models bug (LightPoint returns 2x color, and RSurf_SetColorPointer is called expecting 1x color)

------------------------------------------------------------------------
r5598 | havoc | 2005-08-19 02:21:25 +0200 (Fri, 19 Aug 2005) | 2 lines

don't try to send entities with a NAN origin (this is strangely crashing the PVS check in q1bsp maps, hitting a bad node)

------------------------------------------------------------------------
r5596 | havoc | 2005-08-18 20:48:30 +0200 (Thu, 18 Aug 2005) | 2 lines

added r_smoothnormals_areaweighting cvar (default 1, suggested by Black as a better method, faster and shading looks a little more distinct on nexuiz player models)

------------------------------------------------------------------------
r5591 | havoc | 2005-08-18 17:34:37 +0200 (Thu, 18 Aug 2005) | 2 lines

changed tolerances for renderable light intensities to make Stribbs happier

------------------------------------------------------------------------
r5590 | black | 2005-08-18 15:45:16 +0200 (Thu, 18 Aug 2005) | 3 lines

-Increased MAX_LIGHTSTYLES to 256.
-Changed BuildNormals to use area-weighting/averaging instead of normal averaging.

------------------------------------------------------------------------
r5589 | black | 2005-08-17 14:43:01 +0200 (Wed, 17 Aug 2005) | 6 lines

Fixed a bug in the r_shadow light entity parser which caused it to not read in
the pflags, skin and effects key/value pairs in q3 maps.
Added a check to PF_lightstyle for style >= 64.
Fixed a bug in the cursor drawing of the editrtlights mode (it was reading from a
uninitialized vector if you flew out of the map).

------------------------------------------------------------------------
r5582 | havoc | 2005-08-15 16:02:43 +0200 (Mon, 15 Aug 2005) | 2 lines

added a default case (Sys_Error) to CL_RocketTrail as recommended by [515]

------------------------------------------------------------------------
r5581 | molivier | 2005-08-15 12:40:19 +0200 (Mon, 15 Aug 2005) | 2 lines

cl_lastquakeentity and cl_isquakeentity are now reset properly when loading a new map (fix the crash with coopmod)

------------------------------------------------------------------------
r5580 | havoc | 2005-08-15 09:02:51 +0200 (Mon, 15 Aug 2005) | 3 lines

added more developer_memorydebug sentinel checks, and made developer_memorydebug do not-allocated checks in a few cases that were not checked before
modified Mem_IsAllocated to be able to take a NULL pool pointer to scan all pools for the allocation

------------------------------------------------------------------------
r5579 | eviltypeguy | 2005-08-15 01:33:30 +0200 (Mon, 15 Aug 2005) | 2 lines

Fixups for Solaris port.

------------------------------------------------------------------------
r5578 | havoc | 2005-08-15 00:54:15 +0200 (Mon, 15 Aug 2005) | 2 lines

fix a crash in q1bsp model stats printing in developer mode

------------------------------------------------------------------------
r5577 | havoc | 2005-08-14 21:44:21 +0200 (Sun, 14 Aug 2005) | 2 lines

fix stupid typo in Cvar_RegisterVariable call

------------------------------------------------------------------------
r5576 | havoc | 2005-08-14 20:31:15 +0200 (Sun, 14 Aug 2005) | 2 lines

renamed cl_deathtilt to v_deathtilt to match FTE, fuhquake and ezquake engines

------------------------------------------------------------------------
r5575 | havoc | 2005-08-14 18:36:55 +0200 (Sun, 14 Aug 2005) | 2 lines

added cl_deathnoviewmodel, cl_deathscoreboard and cl_deathtilt cvars so that games can decide whether they want these behaviors

------------------------------------------------------------------------
r5574 | havoc | 2005-08-14 18:36:09 +0200 (Sun, 14 Aug 2005) | 2 lines

added a comment in push code

------------------------------------------------------------------------
r5573 | black | 2005-08-13 22:56:23 +0200 (Sat, 13 Aug 2005) | 4 lines

Added colored string support to centerprint.
Fixed the menu from dying a recursive death if PRVM_Crash crashes inside
of the error handling function.

------------------------------------------------------------------------
r5568 | havoc | 2005-08-10 12:25:46 +0200 (Wed, 10 Aug 2005) | 2 lines

fix a terrible mistake: don't send \n at the end of the client variables during signon

------------------------------------------------------------------------
r5567 | havoc | 2005-08-10 12:23:26 +0200 (Wed, 10 Aug 2005) | 2 lines

made Cmd_ForwardToServer code far more readable and prevented forwarding an empty string using cmd by itself

------------------------------------------------------------------------
r5566 | black | 2005-08-10 12:03:38 +0200 (Wed, 10 Aug 2005) | 2 lines

Fixed alias parsing and added support for $* which pastes all formal parameters.

------------------------------------------------------------------------
r5565 | havoc | 2005-08-10 09:08:57 +0200 (Wed, 10 Aug 2005) | 2 lines

renamed r_shadow_geforcefxlowquality to r_shadow_usehalffloat and added gl_support_half_float extension checking, (half float is now considered a feature rather than a low quality option, as it is an even bigger speed gain on GF6 than on GFFX and no quality reduction has been observed)

------------------------------------------------------------------------
r5563 | black | 2005-08-08 10:16:37 +0200 (Mon, 08 Aug 2005) | 2 lines

Remove a call to ResetProg from ShutdownServer, so after a crash you will be able to debug the server prog.

------------------------------------------------------------------------
r5562 | havoc | 2005-08-08 09:41:47 +0200 (Mon, 08 Aug 2005) | 3 lines

add DP_ENT_COLORMOD extension to extension lists
remove NEXUIZ_PLAYERSKIN from extension lists (the dpextensions.qc describes it as part of the NEXUIZ_PLAYERMODEL extension)

------------------------------------------------------------------------
r5561 | havoc | 2005-08-08 09:16:41 +0200 (Mon, 08 Aug 2005) | 2 lines

fix the commandline option documentation of The Hunted to say -thehunted, not -netherworld (no change in behavior, only documentation)

------------------------------------------------------------------------
r5560 | havoc | 2005-08-08 09:15:36 +0200 (Mon, 08 Aug 2005) | 2 lines

change name of VorteX's netherworld mod

------------------------------------------------------------------------
r5552 | havoc | 2005-08-02 22:11:19 +0200 (Tue, 02 Aug 2005) | 2 lines

fix a signed/unsigned comparison warning

------------------------------------------------------------------------
r5549 | black | 2005-07-30 20:43:24 +0200 (Sat, 30 Jul 2005) | 4 lines

-Changed a call to VariableString with FindCvar.
-Made changelevel call map if there is no server running (you could call this
a hack).

------------------------------------------------------------------------
r5540 | black | 2005-07-19 23:04:36 +0200 (Tue, 19 Jul 2005) | 2 lines

Moved the $cvar parser to Cmd_TokenizeString.

------------------------------------------------------------------------
r5539 | black | 2005-07-19 22:53:45 +0200 (Tue, 19 Jul 2005) | 8 lines

-Added $parameter parsing to the alias and $cvar parsing to the cmd system.
E.g.:
alias test "connect $1"
test "127.0.0.1"
set testcvar "127.0.0.1"
connect $testcvar
TODO: Add the extension description and the extension to the extension list.

------------------------------------------------------------------------
r5529 | tomaz | 2005-07-13 17:10:09 +0200 (Wed, 13 Jul 2005) | 3 lines

Fixed a bug by me regarding the filesize of the embedded font.
Added FONT_FILESIZE define to avoid this misstake in the future.

------------------------------------------------------------------------
r5528 | havoc | 2005-07-13 16:20:17 +0200 (Wed, 13 Jul 2005) | 2 lines

draw [] brackets on the top 4 frags display before the frags count rather than after, as suggested by knghtbrd

------------------------------------------------------------------------
r5523 | havoc | 2005-07-10 23:21:47 +0200 (Sun, 10 Jul 2005) | 2 lines

turned Mod_CheckLoaded into a #define

------------------------------------------------------------------------
r5522 | knghtbrd | 2005-07-10 23:17:52 +0200 (Sun, 10 Jul 2005) | 2 lines

Fix the makefile not to use the unused gl_models.c

------------------------------------------------------------------------
r5521 | havoc | 2005-07-10 23:16:23 +0200 (Sun, 10 Jul 2005) | 2 lines

remove unused gl_models.c file

------------------------------------------------------------------------
r5517 | havoc | 2005-07-10 14:33:20 +0200 (Sun, 10 Jul 2005) | 2 lines

use *64.dll instead of *.dll on win64, this way we can include both 32bit and 64bit dlls in the same releases

------------------------------------------------------------------------
r5514 | havoc | 2005-07-08 11:12:53 +0200 (Fri, 08 Jul 2005) | 2 lines

remove TEXF_CLAMP on skins

------------------------------------------------------------------------
r5513 | havoc | 2005-07-08 10:42:52 +0200 (Fri, 08 Jul 2005) | 2 lines

reduce TRIANGLEEDGEHASH from 16384 bins to 8192 to avoid a stack overflow on MSVC x64

------------------------------------------------------------------------
r5512 | havoc | 2005-07-06 20:22:56 +0200 (Wed, 06 Jul 2005) | 2 lines

move sv.active = true; up to fix a VM_bprint warning

------------------------------------------------------------------------
r5511 | havoc | 2005-07-05 15:32:14 +0200 (Tue, 05 Jul 2005) | 2 lines

changed qfile_t->buff_ind and qfile_t->buff_len to fs_offset_t to reduce number of casts

------------------------------------------------------------------------
r5510 | havoc | 2005-07-05 15:26:47 +0200 (Tue, 05 Jul 2005) | 2 lines

fix a warning

------------------------------------------------------------------------
r5509 | havoc | 2005-07-05 15:23:52 +0200 (Tue, 05 Jul 2005) | 2 lines

more warning fixes

------------------------------------------------------------------------
r5508 | havoc | 2005-07-05 15:12:23 +0200 (Tue, 05 Jul 2005) | 2 lines

use 32bit fs_offset_t on windows (even win64 doesn't support 64bit file offsets on lseek/read/write)

------------------------------------------------------------------------
r5507 | havoc | 2005-07-05 15:08:49 +0200 (Tue, 05 Jul 2005) | 2 lines

made packfile_t (describes a file in a pack) use fs_offset_t

------------------------------------------------------------------------
r5506 | havoc | 2005-07-05 15:02:21 +0200 (Tue, 05 Jul 2005) | 2 lines

added a #define DIRECTINPUT_VERSION to hush warnings and make it work on dinput3 even if dinput8 headers are installed

------------------------------------------------------------------------
r5505 | black | 2005-07-05 15:01:29 +0200 (Tue, 05 Jul 2005) | 2 lines

fix VC 6 not supporting DWORD_PTR.

------------------------------------------------------------------------
r5504 | havoc | 2005-07-05 15:00:16 +0200 (Tue, 05 Jul 2005) | 2 lines

more warnings fixed

------------------------------------------------------------------------
r5503 | havoc | 2005-07-05 14:56:54 +0200 (Tue, 05 Jul 2005) | 2 lines

more fixes

------------------------------------------------------------------------
r5502 | havoc | 2005-07-05 14:51:27 +0200 (Tue, 05 Jul 2005) | 2 lines

added a 64bif fs_offset_t type to clean up most of the mess

------------------------------------------------------------------------
r5501 | black | 2005-07-05 14:04:30 +0200 (Tue, 05 Jul 2005) | 2 lines

fixed some conversions

------------------------------------------------------------------------
r5500 | havoc | 2005-07-05 13:57:50 +0200 (Tue, 05 Jul 2005) | 2 lines

stomping more size_t warnings

------------------------------------------------------------------------
r5499 | havoc | 2005-07-05 13:33:02 +0200 (Tue, 05 Jul 2005) | 3 lines

fixed signed/unsigned mismatch warnings
more size_t changes

------------------------------------------------------------------------
r5498 | havoc | 2005-07-05 13:24:38 +0200 (Tue, 05 Jul 2005) | 2 lines

changing some things back to size_t

------------------------------------------------------------------------
r5497 | havoc | 2005-07-05 12:49:06 +0200 (Tue, 05 Jul 2005) | 2 lines

more size_t

------------------------------------------------------------------------
r5496 | havoc | 2005-07-05 11:29:08 +0200 (Tue, 05 Jul 2005) | 2 lines

use size_t less

------------------------------------------------------------------------
r5495 | havoc | 2005-07-05 11:24:26 +0200 (Tue, 05 Jul 2005) | 2 lines

more size_t

------------------------------------------------------------------------
r5494 | havoc | 2005-07-05 11:22:15 +0200 (Tue, 05 Jul 2005) | 2 lines

use size_t even more

------------------------------------------------------------------------
r5493 | havoc | 2005-07-05 11:21:21 +0200 (Tue, 05 Jul 2005) | 2 lines

use size_t more

------------------------------------------------------------------------
r5492 | havoc | 2005-07-05 11:10:43 +0200 (Tue, 05 Jul 2005) | 2 lines

changed some things to size_t to reduce warnings on MSVC x64

------------------------------------------------------------------------
r5491 | havoc | 2005-07-05 08:53:11 +0200 (Tue, 05 Jul 2005) | 2 lines

made FS_WriteFile's len parameter size_t to fix some warnings

------------------------------------------------------------------------
r5490 | havoc | 2005-07-04 12:10:38 +0200 (Mon, 04 Jul 2005) | 2 lines

fix problems with missing cubemap textures in GLSL

------------------------------------------------------------------------
r5489 | havoc | 2005-07-04 11:52:13 +0200 (Mon, 04 Jul 2005) | 2 lines

fix a crash when doing vid_restart or r_restart with detailtexturing on

------------------------------------------------------------------------
r5488 | havoc | 2005-07-04 11:51:35 +0200 (Mon, 04 Jul 2005) | 2 lines

fix a typo

------------------------------------------------------------------------
r5487 | havoc | 2005-07-04 11:44:45 +0200 (Mon, 04 Jul 2005) | 2 lines

default developer_texturelogging to 0, don't know why it was 1

------------------------------------------------------------------------
r5486 | havoc | 2005-07-04 10:35:48 +0200 (Mon, 04 Jul 2005) | 2 lines

allow escape to togglemenu when in fullscreen console

------------------------------------------------------------------------
r5485 | tomaz | 2005-07-04 10:12:58 +0200 (Mon, 04 Jul 2005) | 2 lines

Fixed it so vertical syns is applied correctly at init.

------------------------------------------------------------------------
r5484 | black | 2005-07-03 13:23:47 +0200 (Sun, 03 Jul 2005) | 4 lines

-Moved findflags and findchainflags to the prvm_cmds.c.
-Added support for default values to the cvar system.
-Added a cvar_defstring builtin to the vm.

------------------------------------------------------------------------
r5483 | havoc | 2005-07-03 11:01:09 +0200 (Sun, 03 Jul 2005) | 3 lines

fix bug that made pants/shirt not render in rtlighting (logic was backwards on the fullbright color range checks)
fix bug that rendered specular multiple times (brighter than inended) when using GLSL shader path on colormapped entities

------------------------------------------------------------------------
r5482 | havoc | 2005-07-03 09:07:34 +0200 (Sun, 03 Jul 2005) | 3 lines

don't print PRVM_NAME in each dprint call, it looks terrible (prints multiple times per line because of multiple dprint calls without \n)
fix fatal bug in findchain and findchainfloat which were using FindFieldOffset (which returns a byte array index) to get an offset to feed to PRVM_E_INT (which takes an integer array index)

------------------------------------------------------------------------
r5481 | havoc | 2005-07-02 13:03:25 +0200 (Sat, 02 Jul 2005) | 2 lines

fix bug in parsing PROTOCOL_DARKPLACES1/2/3/4 angles

------------------------------------------------------------------------
r5480 | havoc | 2005-07-02 05:06:23 +0200 (Sat, 02 Jul 2005) | 2 lines

fix Black's mistake of using 'long' (32bit/64bit depending on architecture) type in reading .lno files, changed to int (32bit) so that the code works on 64bit architectures

------------------------------------------------------------------------
r5479 | havoc | 2005-07-02 04:56:48 +0200 (Sat, 02 Jul 2005) | 2 lines

fix a problem with shadows being cut short from models near the edge of light radius (use model->radius*2 not model->radius)

------------------------------------------------------------------------
r5478 | havoc | 2005-07-02 04:55:56 +0200 (Sat, 02 Jul 2005) | 2 lines

changed two comments from saying long to int

------------------------------------------------------------------------
r5477 | havoc | 2005-07-02 00:39:31 +0200 (Sat, 02 Jul 2005) | 2 lines

allow multiple lightning beams owned by world

------------------------------------------------------------------------
r5476 | havoc | 2005-07-01 09:04:40 +0200 (Fri, 01 Jul 2005) | 2 lines

forbid world writes after precache stage (without using sv.state, instead prog->allowworldwrites was added)

------------------------------------------------------------------------
r5475 | havoc | 2005-07-01 08:58:09 +0200 (Fri, 01 Jul 2005) | 2 lines

changed shadow projection length to use model->radius*2 instead of model->radius

------------------------------------------------------------------------
r5474 | havoc | 2005-06-30 01:03:32 +0200 (Thu, 30 Jun 2005) | 2 lines

stop searching for a server port when one is found

------------------------------------------------------------------------
r5473 | havoc | 2005-06-30 00:45:28 +0200 (Thu, 30 Jun 2005) | 2 lines

added knownstrings_freeable array to prog struct so that attempts to free engine strings are detected and cause a PRVM_FreeString error (rather than a Mem_Free error)

------------------------------------------------------------------------
r5470 | havoc | 2005-06-29 01:10:21 +0200 (Wed, 29 Jun 2005) | 3 lines

default offsetmapping off (as it messes up model skins)
fixed permutation failure prints (now lists all 6 flags not just 4)

------------------------------------------------------------------------
r5469 | havoc | 2005-06-29 00:29:47 +0200 (Wed, 29 Jun 2005) | 2 lines

374

------------------------------------------------------------------------
r5468 | black | 2005-06-28 23:09:58 +0200 (Tue, 28 Jun 2005) | 4 lines

-Added sv_playerphysicsqc to control whether the qc physics function is called (if its available).
-Added support for loading LNO files (more to follow soon).
-The server now tries other ports (up to 100 above default) if the default port cant be bound.

------------------------------------------------------------------------
r5467 | havoc | 2005-06-28 21:23:36 +0200 (Tue, 28 Jun 2005) | 2 lines

patch from christian holmberg to make XK_section key (I do not know what this is) type ~ character for binds

------------------------------------------------------------------------
r5466 | havoc | 2005-06-28 07:59:39 +0200 (Tue, 28 Jun 2005) | 3 lines

removed r_editlights_rtlightssizescale and r_editlights_rtlightscolorscale cvars (now they behave as if they were both 1.0)
added r_editlights_edit commands radiusscale sizescale and colorscale (use these to fix old-format .rtlights files)

------------------------------------------------------------------------
r5465 | havoc | 2005-06-28 01:07:28 +0200 (Tue, 28 Jun 2005) | 2 lines

increased server browser viewlist limit (was 128) to match the serverlist limit (2048)

------------------------------------------------------------------------
r5464 | black | 2005-06-26 21:56:39 +0200 (Sun, 26 Jun 2005) | 3 lines

-"add color code to start of chat message to prevent nick colors from messing up the text color"
-updated a few todo items.

------------------------------------------------------------------------
r5463 | havoc | 2005-06-26 02:51:03 +0200 (Sun, 26 Jun 2005) | 2 lines

removed "%s changed model to %s" message on .playermodel changes (it was unintended)

------------------------------------------------------------------------
r5462 | havoc | 2005-06-25 23:51:35 +0200 (Sat, 25 Jun 2005) | 2 lines

q3 shader parser was not supporting alphatest (promoted to alphablend) without trans parm

------------------------------------------------------------------------
r5461 | havoc | 2005-06-22 19:43:32 +0200 (Wed, 22 Jun 2005) | 2 lines

removed SV_SetOnGround, this cures the bunnyhopping bug (failure to jump again when hitting the ground)

------------------------------------------------------------------------
r5460 | havoc | 2005-06-22 19:35:17 +0200 (Wed, 22 Jun 2005) | 2 lines

changed a lot of Host_Error calls to Con_Printf or Sys_Error according to severity

------------------------------------------------------------------------
r5458 | havoc | 2005-06-20 03:50:29 +0200 (Mon, 20 Jun 2005) | 2 lines

changed most Sys_Error calls to Con_Printf with appropriate error returns

------------------------------------------------------------------------
r5457 | havoc | 2005-06-20 03:35:52 +0200 (Mon, 20 Jun 2005) | 2 lines

removed winding.[ch] files from dsp files

------------------------------------------------------------------------
r5456 | havoc | 2005-06-20 03:30:33 +0200 (Mon, 20 Jun 2005) | 2 lines

removed winding.[ch] as they were not used

------------------------------------------------------------------------
r5455 | havoc | 2005-06-20 01:52:18 +0200 (Mon, 20 Jun 2005) | 2 lines

removed two unused Key_Event implementations (which let me remove some unused variables like menukeys and consolekeys to save several K of memory), cleaned up keys.h externs

------------------------------------------------------------------------
r5454 | havoc | 2005-06-20 01:02:51 +0200 (Mon, 20 Jun 2005) | 2 lines

changed keydown[] from unsigned int holding key repeat count to qbyte holding status (0 = up, 1 = down, 2 = repeating) to save 3K of memory

------------------------------------------------------------------------
r5453 | havoc | 2005-06-20 00:56:43 +0200 (Mon, 20 Jun 2005) | 2 lines

removed keydown[] and renamed key_repeats[] to keydown[] (overall the code looks the same, but this saves 1K of memory)

------------------------------------------------------------------------
r5452 | havoc | 2005-06-19 21:04:00 +0200 (Sun, 19 Jun 2005) | 2 lines

cleaned up Key_Event, this changed toggleconsole bind behavior (it now only works while in key_game mode, like all other normal binds)

------------------------------------------------------------------------
r5451 | havoc | 2005-06-19 19:52:13 +0200 (Sun, 19 Jun 2005) | 2 lines

removed shift_down variable, use keydown[K_SHIFT] instead

------------------------------------------------------------------------
r5450 | havoc | 2005-06-19 19:47:30 +0200 (Sun, 19 Jun 2005) | 2 lines

better detection of model load failures in viewmodel command

------------------------------------------------------------------------
r5449 | havoc | 2005-06-19 19:46:59 +0200 (Sun, 19 Jun 2005) | 2 lines

don't complain about missing bolt3/beam models

------------------------------------------------------------------------
r5448 | havoc | 2005-06-19 19:42:47 +0200 (Sun, 19 Jun 2005) | 2 lines

removed 3 unused variables

------------------------------------------------------------------------
r5447 | black | 2005-06-19 18:42:43 +0200 (Sun, 19 Jun 2005) | 4 lines

-Added support for 515]'s BX_COLOREDTEXT extension.
-Changed fopen's and fclose's log ouput a bit (to include the prvm name)
-Fixed a stupid bug in the SV VM that caused it to crash on error.

------------------------------------------------------------------------
r5446 | havoc | 2005-06-19 03:10:38 +0200 (Sun, 19 Jun 2005) | 4 lines

removed CL_InitTEnts function, moved its contents (cl_sfx precaches) to CL_ParseServerInfo
removed beam precaches from the beam parsing code to CL_ParseServerInfo so that the precaches are made each level (when it unloads models/sounds) rather than only once (ever!) during the game, this fixed crashes and rendering issues (using the wrong model) with lightning beams
renamed cl_sfx_ and cl_model_ from cl_ prefix to cl. prefix now that they are part of the per-level state

------------------------------------------------------------------------
r5445 | havoc | 2005-06-19 02:59:52 +0200 (Sun, 19 Jun 2005) | 2 lines

before calling SetNewParms qc function, set self to world to intentionally cause errors with broken SetNewParms code in some mods

------------------------------------------------------------------------
r5444 | havoc | 2005-06-19 02:55:58 +0200 (Sun, 19 Jun 2005) | 2 lines

remove unused frametime calculation

------------------------------------------------------------------------
r5443 | havoc | 2005-06-17 00:43:37 +0200 (Fri, 17 Jun 2005) | 2 lines

replace control characters (such as newline) with _ in savegame comments, this fixes loading savegames in 'dungeon.bsp' of The Ascension of Vigil, and probably some other maps that use newlines in their titles (nasty)

------------------------------------------------------------------------
r5442 | tomaz | 2005-06-15 18:26:54 +0200 (Wed, 15 Jun 2005) | 2 lines

Fixed the embedded lhfont some more.

------------------------------------------------------------------------
r5441 | havoc | 2005-06-15 05:54:14 +0200 (Wed, 15 Jun 2005) | 2 lines

use sdl-config --static-libs on Mac

------------------------------------------------------------------------
r5440 | tomaz | 2005-06-15 05:26:48 +0200 (Wed, 15 Jun 2005) | 2 lines

Added saving of gfx/generated_conchars.tga

------------------------------------------------------------------------
r5439 | havoc | 2005-06-15 04:21:15 +0200 (Wed, 15 Jun 2005) | 2 lines

print a different fopen message if it failed

------------------------------------------------------------------------
r5438 | havoc | 2005-06-15 03:55:55 +0200 (Wed, 15 Jun 2005) | 2 lines

added debug prints to FRIK_FILE fopen/fclose builtins

------------------------------------------------------------------------
r5436 | havoc | 2005-06-15 00:45:38 +0200 (Wed, 15 Jun 2005) | 2 lines

strlwr does not exist on Linux

------------------------------------------------------------------------
r5435 | black | 2005-06-14 21:26:27 +0200 (Tue, 14 Jun 2005) | 5 lines

-reconnect wont work if being called from the console (it never did but now
 it wont get you into this 'zombie' state).
-changed the severlist string compare function to convert all strings to
 lowercase before comparing.

------------------------------------------------------------------------
r5434 | havoc | 2005-06-14 19:52:20 +0200 (Tue, 14 Jun 2005) | 2 lines

attempting to make darkplaces able to compile as 32bit on 64bit host systems (by feeding -m32 as CPUOPTIMIZATIONS on commandline)

------------------------------------------------------------------------
r5433 | tomaz | 2005-06-13 18:25:12 +0200 (Mon, 13 Jun 2005) | 2 lines

373

------------------------------------------------------------------------
r5432 | tomaz | 2005-06-13 18:13:43 +0200 (Mon, 13 Jun 2005) | 2 lines

Added gl_picmip slider and r_restart button to Graphics menu ("Texture Quality" and "Renderer Restart")

------------------------------------------------------------------------
r5431 | tomaz | 2005-06-13 16:54:52 +0200 (Mon, 13 Jun 2005) | 2 lines

added -demo and -demolooponly options. -demo starts the wanted demo and then shuts down the engine once done. -demolooponly does pretty mucht the same except it disables all keys but the escape key and makes escape key quit the engine.

------------------------------------------------------------------------
r5430 | havoc | 2005-06-13 14:05:14 +0200 (Mon, 13 Jun 2005) | 2 lines

376

------------------------------------------------------------------------
r5429 | havoc | 2005-06-13 03:18:00 +0200 (Mon, 13 Jun 2005) | 2 lines

fix two signed/unsigned mismatch warnings reported by Willis

------------------------------------------------------------------------
r5428 | black | 2005-06-12 18:34:03 +0200 (Sun, 12 Jun 2005) | 2 lines

Fixed a VC runtime assertion caused by wishdir not being initialized when wishspeed equals zero.

------------------------------------------------------------------------
r5427 | black | 2005-06-11 20:49:09 +0200 (Sat, 11 Jun 2005) | 5 lines

-The new Key_Event is enabled by default now and Ive added a check so the
console toggle char is only added to the message line or console input if it is
the color tag char.
-Some name changes of the colored string constants.

------------------------------------------------------------------------
r5426 | black | 2005-06-11 20:20:26 +0200 (Sat, 11 Jun 2005) | 2 lines

Increased maximum edict count to 4096

------------------------------------------------------------------------
r5425 | black | 2005-06-11 20:12:42 +0200 (Sat, 11 Jun 2005) | 2 lines

Missing ';' :(

------------------------------------------------------------------------
r5424 | black | 2005-06-11 20:01:41 +0200 (Sat, 11 Jun 2005) | 2 lines

Rewrote of DrawQ_ColoredString (fixing some bugs hopefully).

------------------------------------------------------------------------
r5423 | havoc | 2005-06-11 18:42:02 +0200 (Sat, 11 Jun 2005) | 2 lines

split CL_ClientMovement into CL_ClientMovement_Input (called each input packet) and CL_ClientMovement_Replay (called each frame) functions to cure a feedback loop that could freeze up a client with a full prediction queue (prediction became slower with each queue item, and the server was not affected by the slowness of the replay, so it could keep the client busy with an endless packet stream and the client would never catch up)

------------------------------------------------------------------------
r5422 | molivier | 2005-06-11 15:12:43 +0200 (Sat, 11 Jun 2005) | 2 lines

Basic support for Q3's "getstatus" message, for a better integration with Q3 compatible server browsers. Thanks to divVerent for an early version of this patch

------------------------------------------------------------------------
r5421 | havoc | 2005-06-11 02:44:08 +0200 (Sat, 11 Jun 2005) | 4 lines

changed searchpath directories to have a trailing / (allowing %s%s instead of %s/%s for more consistency)
fixed FS_Search to support empty paths (*.cfg and such), and use %s%s concatenation as the rest of the filesystem does, this required changing listdirectory slightly
some cleanup of the opendir implementation of listdirectory

------------------------------------------------------------------------
r5420 | havoc | 2005-06-11 02:38:24 +0200 (Sat, 11 Jun 2005) | 3 lines

sv_public now defaults to 0 except on dedicated servers
cleaned up Host_ServerOptions code significantly

------------------------------------------------------------------------
r5419 | molivier | 2005-06-10 09:04:14 +0200 (Fri, 10 Jun 2005) | 2 lines

Fixed direct compilation of subtargets (cl-release, sv-debug, ...)

------------------------------------------------------------------------
r5418 | havoc | 2005-06-10 01:26:19 +0200 (Fri, 10 Jun 2005) | 2 lines

patch from Zero_Dogg to fix a compile problem on Mandriva Linux

------------------------------------------------------------------------
r5417 | molivier | 2005-06-10 01:21:47 +0200 (Fri, 10 Jun 2005) | 2 lines

Fixed a typo in the BSD makefile

------------------------------------------------------------------------
r5416 | havoc | 2005-06-09 18:28:57 +0200 (Thu, 09 Jun 2005) | 2 lines

added r_shadow_glsl_geforcefxlowquality cvar (automatically on if running a GeForce FX card) to use half floats instead of full floats where possible, and r_shadow_glsl_surfacenormalize cvar (slight quality improvement to bumpmapping)

------------------------------------------------------------------------
r5415 | havoc | 2005-06-09 16:26:43 +0200 (Thu, 09 Jun 2005) | 2 lines

remove two unused variables

------------------------------------------------------------------------
r5414 | havoc | 2005-06-09 13:57:24 +0200 (Thu, 09 Jun 2005) | 3 lines

replaced uses of VectorNormalizeFast with VectorNormalize as it was broken on x86_64 (probably just because it used long * casts of floats) and was never much faster on modern CPUs anyway
made a lot of internal functions in portals.c static, and replaced two vector subtracts and a crossproduct with TriangleNormal

------------------------------------------------------------------------
r5413 | havoc | 2005-06-09 13:55:07 +0200 (Thu, 09 Jun 2005) | 2 lines

round off ping listings to nearest integer

------------------------------------------------------------------------
r5412 | black | 2005-06-08 23:19:43 +0200 (Wed, 08 Jun 2005) | 2 lines

Changed the Host_Error calls in the string indexing functions to PRVM_ERROR calls.

------------------------------------------------------------------------
r5411 | black | 2005-06-08 22:12:37 +0200 (Wed, 08 Jun 2005) | 4 lines

New Key_Event is still disabled.
Changed it back, so keys bound to toggleconsole that arent used as
console keys can hide the console again when pressed in the console.

------------------------------------------------------------------------
r5410 | molivier | 2005-06-08 14:24:28 +0200 (Wed, 08 Jun 2005) | 2 lines

Updated Dev-C++ project files

------------------------------------------------------------------------
r5409 | molivier | 2005-06-08 08:06:44 +0200 (Wed, 08 Jun 2005) | 2 lines

Changed default sound module for linux to ALSA. Modified makefiles to allow people to choose the sound module easily at compile time (ex: "make DP_SOUND_API=OSS release" compiles release binaries with OSS sound output). Available sound modules are: NULL, OSS, ALSA, BSD, WIN, and COREAUDIO (not functional yet).

------------------------------------------------------------------------
r5408 | black | 2005-06-07 22:55:08 +0200 (Tue, 07 Jun 2005) | 11 lines

My Key_Event is disabled (yet).
-Changed it to only toggle the console with ESCAPE when you're in the console,
 so binding toggleconsole to a normal key wont toggle it while typing.
-Changed the panic console key to shift-escape since ctrl-escape open the start
 menu.
Feel free to test it.
@ETG: since I can probably only reach you this way: it is intended that the console
toggle key now appears in the console input line and is also send to e.g. message.
This is because the color tag ^ key opens the console on some keyboard layouts and
couldnt be typed in otherwise.

------------------------------------------------------------------------
r5407 | eviltypeguy | 2005-06-07 04:14:38 +0200 (Tue, 07 Jun 2005) | 4 lines

Disabling black's key code:
* Breaks US keyboard console access
* Breaks input for US keyboard, causing bizarre input problems and choppy MP gameplay

------------------------------------------------------------------------
r5406 | black | 2005-06-06 22:37:00 +0200 (Mon, 06 Jun 2005) | 10 lines

If the new Key_Event breaks anything for you, you can set #if 0 and activate the old
one again.
-Moved _Con_DrawString to cl_screen and changed its name to DrawQ_ColoredString.
-Changed all the code to allow colored nicks.
-Changed Win32 code to support two-char keys (it takes the second byte - may
 need some more testing).
-Rewrote Key_Event to support typing in the ^ key on Germany keyboards (or
 at least mine). Press ^ two times, once to open the console and once to close it.
 If you type in a message, there will be a ^ char waiting for you (same in the  console if   you open it again).

------------------------------------------------------------------------
r5405 | havoc | 2005-06-06 09:24:26 +0200 (Mon, 06 Jun 2005) | 2 lines

use only the latest ping time, not averaged

------------------------------------------------------------------------
r5404 | havoc | 2005-06-06 09:23:24 +0200 (Mon, 06 Jun 2005) | 2 lines

removed one variable too many

------------------------------------------------------------------------
r5403 | havoc | 2005-06-06 09:22:59 +0200 (Mon, 06 Jun 2005) | 2 lines

fix two warnings after the last commit

------------------------------------------------------------------------
r5402 | havoc | 2005-06-06 09:20:12 +0200 (Mon, 06 Jun 2005) | 2 lines

use latest ping from client struct rather than averaging ping_times

------------------------------------------------------------------------
r5401 | havoc | 2005-06-06 08:34:27 +0200 (Mon, 06 Jun 2005) | 2 lines

fix crouch button to be the right one

------------------------------------------------------------------------
r5400 | havoc | 2005-06-06 05:53:13 +0200 (Mon, 06 Jun 2005) | 2 lines

fixed a PRVM_Crash crash when progs was NULL

------------------------------------------------------------------------
r5399 | havoc | 2005-06-05 12:41:03 +0200 (Sun, 05 Jun 2005) | 2 lines

fixed the 'floating models' bug (EntityFrame5_WriteFrame was inconsistent with its maxedicts)

------------------------------------------------------------------------
r5398 | havoc | 2005-06-05 11:27:19 +0200 (Sun, 05 Jun 2005) | 3 lines

fix lagged prydon cursor trace bug (it was using renderer variables, now uses V_CalcRefdef to get an up to date view matrix before this frame is even rendered)
fixed 'shooting at world origin' bug due to a misplaced CL_UpdatePrydonCursor call (now in CL_SendMove so it works properly)

------------------------------------------------------------------------
r5397 | havoc | 2005-06-05 11:24:24 +0200 (Sun, 05 Jun 2005) | 2 lines

use TEXF_CLAMP on Draw_CachePic (except for the color control ditherpattern)

------------------------------------------------------------------------
r5396 | havoc | 2005-06-05 11:18:42 +0200 (Sun, 05 Jun 2005) | 2 lines

don't hit your own model with cl_prydoncursor traces

------------------------------------------------------------------------
r5395 | havoc | 2005-06-05 10:34:43 +0200 (Sun, 05 Jun 2005) | 2 lines

fixed impulse lossage problem (ApplyClientMove wasn't being called during ReadClientMove)

------------------------------------------------------------------------
r5394 | havoc | 2005-06-05 09:12:06 +0200 (Sun, 05 Jun 2005) | 2 lines

only give shareware warning if running GAME_NORMAL (quake)

------------------------------------------------------------------------
r5393 | black | 2005-06-03 21:36:07 +0200 (Fri, 03 Jun 2005) | 2 lines

Fixed an signed/unsigned warning.

------------------------------------------------------------------------
r5392 | havoc | 2005-06-03 17:43:21 +0200 (Fri, 03 Jun 2005) | 2 lines

added a small simple optimization of prog->knownstring add/remove

------------------------------------------------------------------------
r5391 | black | 2005-06-03 16:15:59 +0200 (Fri, 03 Jun 2005) | 3 lines

-Added the cvars net_slist_timeout and net_slist_maxtries.
-The queue know tries to query a server multiple times.

------------------------------------------------------------------------
r5390 | havoc | 2005-06-03 16:15:14 +0200 (Fri, 03 Jun 2005) | 2 lines

fix a cast warning

------------------------------------------------------------------------
r5389 | havoc | 2005-06-03 16:12:18 +0200 (Fri, 03 Jun 2005) | 2 lines

remove unused PRVM_SetQCString function

------------------------------------------------------------------------
r5388 | havoc | 2005-06-03 16:11:07 +0200 (Fri, 03 Jun 2005) | 2 lines

rewrote PRVM_AllocString and PRVM_FreeString to deal with string offsets directly (rather than pointers) to avoid unnecessary GetString/SetString calls

------------------------------------------------------------------------
r5387 | havoc | 2005-06-03 15:36:22 +0200 (Fri, 03 Jun 2005) | 2 lines

reset callcount in prvm_profile

------------------------------------------------------------------------
r5386 | havoc | 2005-06-03 14:49:36 +0200 (Fri, 03 Jun 2005) | 4 lines

shut down local server when connected to a remote server
some cleaning of NetConn_QueryQueueFrame (and it now goes to sleep when there are no remaining queries to run as an optimization)
added net_slist_queriespersecond and net_slist_queriesperframe cvars

------------------------------------------------------------------------
r5385 | havoc | 2005-06-03 13:05:25 +0200 (Fri, 03 Jun 2005) | 2 lines

added ctrl-escape hotkey for console (I know I coded this before...  but apparently it never got committed)

------------------------------------------------------------------------
r5384 | eviltypeguy | 2005-06-03 05:44:39 +0200 (Fri, 03 Jun 2005) | 2 lines

Silly me, apparently FNDELAY *is* available if you include sys/file.h on Solaris.

------------------------------------------------------------------------
r5383 | eviltypeguy | 2005-06-03 05:20:59 +0200 (Fri, 03 Jun 2005) | 2 lines

Changes necessary to build and run on Solaris 10 x86

------------------------------------------------------------------------
r5382 | black | 2005-06-02 23:10:24 +0200 (Thu, 02 Jun 2005) | 2 lines

Added a query queue (test commit so Willis can test it).

------------------------------------------------------------------------
r5381 | black | 2005-06-02 21:21:26 +0200 (Thu, 02 Jun 2005) | 2 lines

Didnt know that Host_StartVideo works this way (called randomly around the code), so now the menu should be loaded at the right time (or just-in-time :))

------------------------------------------------------------------------
r5380 | tomaz | 2005-06-02 21:06:40 +0200 (Thu, 02 Jun 2005) | 2 lines

Redid the coloring of the embedded font to use random colored pixels to make it look a bit more like the worn look of the original quake conchar.

------------------------------------------------------------------------
r5379 | black | 2005-06-02 21:00:05 +0200 (Thu, 02 Jun 2005) | 6 lines

-Changed host_abortserver to host_abortframe.
-Added a hack to allow the menu crash in Host_Init without it taking down
 the whole host (please intergrate this into the general design somehow ASAP).
-Changed the hostcache code to always add servers at the right position and
 to eject 'worse' servers from the viewlist.

------------------------------------------------------------------------
r5378 | tomaz | 2005-06-02 20:45:19 +0200 (Thu, 02 Jun 2005) | 2 lines

Updated the embedded font to contain the 2 top rows of signs/chars/thingies. Also made the coloring of it to better match the original quake conchar.

------------------------------------------------------------------------
r5377 | havoc | 2005-06-02 13:42:18 +0200 (Thu, 02 Jun 2005) | 2 lines

fix some potential buffer overflows

------------------------------------------------------------------------
r5376 | havoc | 2005-06-02 11:51:34 +0200 (Thu, 02 Jun 2005) | 2 lines

fix a stack smash possibility in loadimagepixels

------------------------------------------------------------------------
r5375 | havoc | 2005-06-02 11:02:55 +0200 (Thu, 02 Jun 2005) | 2 lines

fix two severe geometry bugs in the zym loader

------------------------------------------------------------------------
r5374 | black | 2005-06-01 21:21:09 +0200 (Wed, 01 Jun 2005) | 11 lines

-Added Host_AbortCurrentFrame to hide the longjump and make it usable by
 the VM error functions.
-Moved the static variables of Host_Error into the function body.
-Changed the definition of error_cmd to be called instead of Host_Error,
 so the VM control code is in full control of the error processing.
-Added MP_Error to the menu, so a menu crash wont shutdown the server anymore.
-Fixed an annying bug caused by a typo, that crashes Nexuiz if you query for
 a string in the serverlist.
-PRVM_Crash resets the prog pointer now.
-PRVM_Begin use Con_Printf again (but PRVM_DEBUGPRSTACK has been disabled again).

------------------------------------------------------------------------
r5373 | havoc | 2005-06-01 10:38:30 +0200 (Wed, 01 Jun 2005) | 2 lines

enable unicode and keyrepeat every time a video mode is initialized, this seems to fix the bug where typing stops working after a vid_restart

------------------------------------------------------------------------
r5372 | havoc | 2005-06-01 10:37:33 +0200 (Wed, 01 Jun 2005) | 2 lines

shortened movement queue back to 64 items to prevent a runaway loop (falling behind and not being able to run the collisions fast enough) in Nexuiz maps on my machine

------------------------------------------------------------------------
r5371 | havoc | 2005-06-01 06:03:43 +0200 (Wed, 01 Jun 2005) | 2 lines

fix some crashes with server commands (kick, view* commands)

------------------------------------------------------------------------
r5370 | havoc | 2005-06-01 02:55:06 +0200 (Wed, 01 Jun 2005) | 2 lines

less confusing messages from Sys_LoadLibrary

------------------------------------------------------------------------
r5369 | havoc | 2005-06-01 02:05:49 +0200 (Wed, 01 Jun 2005) | 2 lines

it helps to mangle the correct string...

------------------------------------------------------------------------
r5368 | havoc | 2005-06-01 01:59:51 +0200 (Wed, 01 Jun 2005) | 2 lines

fix the library search code (replaced / with 0, should've kept it and replaced the next character)

------------------------------------------------------------------------
r5367 | havoc | 2005-06-01 01:48:57 +0200 (Wed, 01 Jun 2005) | 2 lines

made Sys_LoadLibrary search in the executable path if the normal load fails (this should help on Mac OSX)

------------------------------------------------------------------------
r5366 | havoc | 2005-06-01 00:35:40 +0200 (Wed, 01 Jun 2005) | 2 lines

fixed Mod_Q3BSP_LoadPlanes to use LittleFloat instead of LittleLong

------------------------------------------------------------------------
r5365 | havoc | 2005-06-01 00:00:06 +0200 (Wed, 01 Jun 2005) | 2 lines

print to console before printing to terminal (which needs mangled characters), why was this backwards?

------------------------------------------------------------------------
r5364 | havoc | 2005-05-31 01:10:50 +0200 (Tue, 31 May 2005) | 2 lines

.app directory for Mac OSX builds

------------------------------------------------------------------------
r5363 | havoc | 2005-05-31 01:09:32 +0200 (Tue, 31 May 2005) | 2 lines

don't echo player messages if not a dedicated server (as it produces double echoes)

------------------------------------------------------------------------
r5362 | havoc | 2005-05-31 00:34:17 +0200 (Tue, 31 May 2005) | 2 lines

pick apart com_argv[0] to find basedir in Mac OSX when running from a .app package

------------------------------------------------------------------------
r5361 | havoc | 2005-05-30 23:58:45 +0200 (Mon, 30 May 2005) | 2 lines

try to detect a .app package in MacOSX and use a basedir outside the .app

------------------------------------------------------------------------
r5360 | havoc | 2005-05-30 23:10:24 +0200 (Mon, 30 May 2005) | 2 lines

reenabled echoing of player messages to server console (why were they disabled??)

------------------------------------------------------------------------
r5359 | havoc | 2005-05-30 12:31:05 +0200 (Mon, 30 May 2005) | 2 lines

rewrote character insertion/replacement in console commandline, fixing all known bugs with it and reducing code

------------------------------------------------------------------------
r5358 | havoc | 2005-05-30 10:38:51 +0200 (Mon, 30 May 2005) | 2 lines

made bmodel trails (if anyone ever dares to try them) come from the center of the bmodel, this also cleaned up the sound code (and fixed a weird bug with a sound played in the same frame as an entity is removed)

------------------------------------------------------------------------
r5357 | havoc | 2005-05-30 10:37:12 +0200 (Mon, 30 May 2005) | 2 lines

updated dsp files from Willis

------------------------------------------------------------------------
r5356 | havoc | 2005-05-30 10:36:25 +0200 (Mon, 30 May 2005) | 2 lines

disable some effect sounds in nexuiz

------------------------------------------------------------------------
r5355 | havoc | 2005-05-30 08:42:41 +0200 (Mon, 30 May 2005) | 2 lines

ignore RENDER_VIEWMODEL if tagentity is set

------------------------------------------------------------------------
r5354 | havoc | 2005-05-30 00:48:49 +0200 (Mon, 30 May 2005) | 2 lines

default protocol changed to DP7

------------------------------------------------------------------------
r5353 | havoc | 2005-05-30 00:48:14 +0200 (Mon, 30 May 2005) | 2 lines

fixed EF_NODEPTHTEST support on q1bsp/q3bsp/models

------------------------------------------------------------------------
r5352 | havoc | 2005-05-30 00:47:06 +0200 (Mon, 30 May 2005) | 2 lines

disabled cl_movement when in intermission

------------------------------------------------------------------------
r5351 | havoc | 2005-05-30 00:31:38 +0200 (Mon, 30 May 2005) | 2 lines

361

------------------------------------------------------------------------
r5350 | havoc | 2005-05-30 00:28:20 +0200 (Mon, 30 May 2005) | 2 lines

added DP_QUAKE3_MAP extension

------------------------------------------------------------------------
r5349 | havoc | 2005-05-29 23:29:11 +0200 (Sun, 29 May 2005) | 2 lines

disable h2ohit.wav in GAME_NEXUIZ

------------------------------------------------------------------------
r5348 | black | 2005-05-29 15:11:22 +0200 (Sun, 29 May 2005) | 2 lines

Added back pr_checkextension.

------------------------------------------------------------------------
r5347 | black | 2005-05-29 14:51:42 +0200 (Sun, 29 May 2005) | 2 lines

Quick fix for the "0 not loaded" bug (error on trying to connect to a server).

------------------------------------------------------------------------
r5346 | havoc | 2005-05-29 08:17:40 +0200 (Sun, 29 May 2005) | 2 lines

fix bug causing impulses to often be lost

------------------------------------------------------------------------
r5345 | havoc | 2005-05-29 06:58:38 +0200 (Sun, 29 May 2005) | 3 lines

fixed makefile (it is not possible to comment out lines with \ at the end)
fixed two warnings

------------------------------------------------------------------------
r5344 | black | 2005-05-27 17:43:48 +0200 (Fri, 27 May 2005) | 11 lines

-CVS: ----------------------------------------------------------------------
-Merged the old VM into the new one. The pr_* files are mess right now and
 will be removed as soon as they are not needed as semi-reference (to trace
 bugs)
-There is a certain risk that the server could crash now and then since some
 parts of the code can only be debugged (- checking them by looking at the code
 would be quite tedious to put it nicely)
-Changed all references to the old VM to point to the new VM (also hopefully
 all todo items)
-Im working on a cleanup for the SV_VM_Begin/End mess.

------------------------------------------------------------------------
r5342 | tomaz | 2005-05-25 11:25:52 +0200 (Wed, 25 May 2005) | 2 lines

Way to tired... Fixed all 3 project files to include mvm_cmds.c and made sure all used headers are in the header section.

------------------------------------------------------------------------
r5341 | tomaz | 2005-05-25 11:24:07 +0200 (Wed, 25 May 2005) | 2 lines

darkplaces.dsp

------------------------------------------------------------------------
r5340 | black | 2005-05-25 11:07:38 +0200 (Wed, 25 May 2005) | 3 lines

-LoadProgs now expects to be called after InitProg, so it wont do any
 unnecessary clean-ups.

------------------------------------------------------------------------
r5339 | havoc | 2005-05-25 10:55:24 +0200 (Wed, 25 May 2005) | 2 lines

patch from Willis to add mvm_cmds.c

------------------------------------------------------------------------
r5338 | havoc | 2005-05-25 10:26:12 +0200 (Wed, 25 May 2005) | 2 lines

don't set cl.movement true if cl_movement cvar is off

------------------------------------------------------------------------
r5337 | havoc | 2005-05-25 10:04:25 +0200 (Wed, 25 May 2005) | 2 lines

fix bug in last commit (msg->, not buf.)

------------------------------------------------------------------------
r5336 | havoc | 2005-05-25 09:57:04 +0200 (Wed, 25 May 2005) | 2 lines

fix an overflow without allowoverflow set error in EntityFrame5 sending of stats

------------------------------------------------------------------------
r5335 | havoc | 2005-05-25 09:25:31 +0200 (Wed, 25 May 2005) | 2 lines

default to "DP6" protocol (not "DARKPLACES6")

------------------------------------------------------------------------
r5334 | havoc | 2005-05-25 09:21:29 +0200 (Wed, 25 May 2005) | 2 lines

zym models now support TraceBox calls

------------------------------------------------------------------------
r5333 | havoc | 2005-05-25 09:17:44 +0200 (Wed, 25 May 2005) | 2 lines

fix bug with ClientDisconnect not being called if a client drops between "spawn" and "begin" commands, now it is reliably called

------------------------------------------------------------------------
r5332 | havoc | 2005-05-25 02:05:42 +0200 (Wed, 25 May 2005) | 2 lines

added newline at end of file to hush a gcc warning

------------------------------------------------------------------------
r5331 | havoc | 2005-05-25 02:00:49 +0200 (Wed, 25 May 2005) | 2 lines

added mvm_cmds.o

------------------------------------------------------------------------
r5330 | havoc | 2005-05-25 01:58:04 +0200 (Wed, 25 May 2005) | 4 lines

reordered the protocolversion_t values to have preferred protocols first
changed client connect message to list all supported protocols
shortened PROTOCOL_DARKPLACES* names to "DP1" and such to make connect message shorter

------------------------------------------------------------------------
r5329 | black | 2005-05-25 00:30:18 +0200 (Wed, 25 May 2005) | 9 lines

-Split prvm_cmds.c into prvm_cmds.c, prvm_cmds.h and mvm_cmds.c (clvm_cmds.c
 and svm_cmds.c will perhaps be added soon)
-Added another union to prvm_edict_s to have different pointers to the
 edict fields.
-Changed the naming of some fields in prvm_edict_s (longer names instead of
 single letter ones)
-Changed PRVM_LoadProgs to only reset the CMD system if it has be initialized
 before.

------------------------------------------------------------------------
r5328 | havoc | 2005-05-25 00:04:03 +0200 (Wed, 25 May 2005) | 2 lines

default to DARKPLACES6 protocol (somehow this was not showing up in my diffs)

------------------------------------------------------------------------
r5327 | havoc | 2005-05-24 23:53:03 +0200 (Tue, 24 May 2005) | 2 lines

added onground clearing before each move so that going down slopes doesn't resemble a Road Runner cartoon

------------------------------------------------------------------------
r5326 | havoc | 2005-05-24 23:37:32 +0200 (Tue, 24 May 2005) | 4 lines

rewrote protocol version system (including splitting PROTOCOL_QUAKE into PROTOCOL_QUAKE, PROTOCOL_QUAKEDP, and PROTOCOL_NEHAHRAMOVIE)
made server able to host PROTOCOL_NEHAHRAMOVIE protocol for completeness
added PROTOCOL_DARKPLACES7 protocol (still in development, not enabled by default) which allows players to use QW-style movement messages (makes prediction rock solid but has speedcheat/lagaport potential)

------------------------------------------------------------------------
r5325 | black | 2005-05-24 21:04:49 +0200 (Tue, 24 May 2005) | 3 lines

-Now netconn also accepts infoRespones from LAN servers when there is no
 master server around ?\239?\191?\189_?\239?\191?\189

------------------------------------------------------------------------
r5324 | havoc | 2005-05-24 00:29:14 +0200 (Tue, 24 May 2005) | 2 lines

NetConn_ReceivedMessage now verifies that the packet's internal length value matches the data length

------------------------------------------------------------------------
r5323 | black | 2005-05-24 00:11:43 +0200 (Tue, 24 May 2005) | 2 lines

-Fix checking the length before knowing its actual value(??)

------------------------------------------------------------------------
r5322 | black | 2005-05-23 16:07:00 +0200 (Mon, 23 May 2005) | 2 lines

-Fixed a possible buffer overflow bug in NetConn_ReceivedMessage (thanks Spike!)

------------------------------------------------------------------------
r5321 | molivier | 2005-05-23 14:36:03 +0200 (Mon, 23 May 2005) | 2 lines

vid_usemouse doesn't need to be a global variable

------------------------------------------------------------------------
r5320 | black | 2005-05-22 00:25:12 +0200 (Sun, 22 May 2005) | 3 lines

-Added an comment ('[INIT]') to all fields of vm_prog that can/should be
 initialized after calling PRVM_InitProg.

------------------------------------------------------------------------
r5319 | black | 2005-05-20 21:20:39 +0200 (Fri, 20 May 2005) | 4 lines

-Added the callcount field to the mfunction_t structure.
-Both vms now record how often a function has been called and the profile cmd
 now outputs the callcount with the other information.

------------------------------------------------------------------------
r5318 | havoc | 2005-05-20 08:33:44 +0200 (Fri, 20 May 2005) | 2 lines

removed unused applytime field from usercmd_t

------------------------------------------------------------------------
r5317 | havoc | 2005-05-20 08:05:32 +0200 (Fri, 20 May 2005) | 2 lines

cleaned up prediction code somewhat, no longer uses times for much (instead storing frametimes)

------------------------------------------------------------------------
r5316 | havoc | 2005-05-20 08:04:36 +0200 (Fri, 20 May 2005) | 2 lines

slight cleanup (complete removal) of the "base" variable in surface rendering

------------------------------------------------------------------------
r5315 | havoc | 2005-05-19 23:20:08 +0200 (Thu, 19 May 2005) | 2 lines

changed default heartbeat_period to 120 seconds so that usually two packets come in before the 5 minute timeout, this should help with packet loss

------------------------------------------------------------------------
r5314 | havoc | 2005-05-19 20:42:55 +0200 (Thu, 19 May 2005) | 2 lines

changed EntityFrame5_ExpandEdicts call from using sv.num_edicts to sv.max_edicts to fix a crash

------------------------------------------------------------------------
r5313 | havoc | 2005-05-19 00:43:23 +0200 (Thu, 19 May 2005) | 2 lines

fix lingering tracers in nexuiz (among other possible problems)

------------------------------------------------------------------------
r5312 | havoc | 2005-05-18 08:39:14 +0200 (Wed, 18 May 2005) | 2 lines

fixed r_showtris bug (individual state changes were not being ignored in showtris pass

------------------------------------------------------------------------
r5311 | havoc | 2005-05-18 08:38:36 +0200 (Wed, 18 May 2005) | 2 lines

added onground tracking to cl_movement code, instead of checking constantly (which caused unintended double jumping/strafe jumping)

------------------------------------------------------------------------
r5310 | havoc | 2005-05-18 06:24:19 +0200 (Wed, 18 May 2005) | 2 lines

fix a severe bug with viewangles in cl_movement mode

------------------------------------------------------------------------
r5309 | havoc | 2005-05-18 06:08:47 +0200 (Wed, 18 May 2005) | 2 lines

fix interpolation of cl_movement

------------------------------------------------------------------------
r5308 | black | 2005-05-16 17:51:24 +0200 (Mon, 16 May 2005) | 3 lines

-Fixed some bugs in the altstr functions, now they should work 1:1 like the
 scmenu's ones

------------------------------------------------------------------------
r5307 | havoc | 2005-05-16 07:04:46 +0200 (Mon, 16 May 2005) | 3 lines

split SV_ReadClientMove into two functions, SV_ReadClientMove and SV_ApplyClientMove
merged away SV_RunClients (part of its code has been moved to SV_Physics)

------------------------------------------------------------------------
r5306 | havoc | 2005-05-16 05:15:34 +0200 (Mon, 16 May 2005) | 2 lines

cleaned up suspendedinairflag a bit

------------------------------------------------------------------------
r5305 | havoc | 2005-05-16 05:14:49 +0200 (Mon, 16 May 2005) | 2 lines

removed deadsocket field from server client struct, changed connect handling to resend the serverinfo, but then disabled the reconnect handling entirely (so you can't reclaim your ghost)

------------------------------------------------------------------------
r5304 | havoc | 2005-05-16 05:11:14 +0200 (Mon, 16 May 2005) | 2 lines

added a commented out Con_Printf for debugging spatialization

------------------------------------------------------------------------
r5303 | havoc | 2005-05-16 05:08:04 +0200 (Mon, 16 May 2005) | 2 lines

fix bug that rotated all sounds 90 degrees to the right in Nexuiz (because it has seriously messed up player models)

------------------------------------------------------------------------
r5302 | havoc | 2005-05-15 22:34:29 +0200 (Sun, 15 May 2005) | 3 lines

changed matrix_attenuation declarations to not be static (since they are externed in the header)
fixed some signedness warnings

------------------------------------------------------------------------
r5301 | havoc | 2005-05-15 20:57:04 +0200 (Sun, 15 May 2005) | 2 lines

disabled some of the server client connect code that may be causing problems

------------------------------------------------------------------------
r5300 | havoc | 2005-05-14 08:36:15 +0200 (Sat, 14 May 2005) | 2 lines

fix a crash with getlighting builtin

------------------------------------------------------------------------
r5299 | havoc | 2005-05-14 08:35:54 +0200 (Sat, 14 May 2005) | 2 lines

fix a crash with mdl skingroups

------------------------------------------------------------------------
r5298 | havoc | 2005-05-14 08:32:41 +0200 (Sat, 14 May 2005) | 2 lines

an extra Mem_CheckSentinelsGlobal at start of Serverinfo parsing

------------------------------------------------------------------------
r5297 | havoc | 2005-05-14 07:39:59 +0200 (Sat, 14 May 2005) | 2 lines

366

------------------------------------------------------------------------
r5296 | havoc | 2005-05-14 07:38:40 +0200 (Sat, 14 May 2005) | 2 lines

added a couple checks to hopefully fix a lit sprite dlight problem (an organe dlight causing a sprite to turn blue suddenly) reported by Cheapy

------------------------------------------------------------------------
r5295 | havoc | 2005-05-14 07:25:25 +0200 (Sat, 14 May 2005) | 2 lines

fixed r_drawcollisionbrushes 2

------------------------------------------------------------------------
r5294 | havoc | 2005-05-14 07:17:19 +0200 (Sat, 14 May 2005) | 2 lines

fix a crash when loading q3 maps with flares

------------------------------------------------------------------------
r5293 | havoc | 2005-05-14 07:05:27 +0200 (Sat, 14 May 2005) | 3 lines

gl_combine cvar is no longer saved
gl_combine cvar is no longer forced off if r_textureunits is less than 2

------------------------------------------------------------------------
r5292 | havoc | 2005-05-14 05:56:53 +0200 (Sat, 14 May 2005) | 2 lines

fix portal lighting in a single cluster map (box map)

------------------------------------------------------------------------
r5291 | havoc | 2005-05-14 05:47:39 +0200 (Sat, 14 May 2005) | 3 lines

fixed rtlighting on colormap capable skins
implemented colormapped rtlighting on models

------------------------------------------------------------------------
r5290 | havoc | 2005-05-14 05:25:50 +0200 (Sat, 14 May 2005) | 3 lines

fixed r_shadow_realtime_world_lightmap support in gl_combine 1 mode
fixed animated q1bsp texture support

------------------------------------------------------------------------
r5289 | havoc | 2005-05-14 04:11:04 +0200 (Sat, 14 May 2005) | 2 lines

fixed snow fluttering

------------------------------------------------------------------------
r5288 | havoc | 2005-05-14 04:09:54 +0200 (Sat, 14 May 2005) | 2 lines

remove an unneeded cast

------------------------------------------------------------------------
r5287 | havoc | 2005-05-14 03:59:56 +0200 (Sat, 14 May 2005) | 2 lines

fix some warnings

------------------------------------------------------------------------
r5286 | havoc | 2005-05-14 01:49:16 +0200 (Sat, 14 May 2005) | 2 lines

use Con_Printf instead of Host_Error when an unknown model format is encountered

------------------------------------------------------------------------
r5285 | havoc | 2005-05-14 01:47:58 +0200 (Sat, 14 May 2005) | 2 lines

only load .lit file if its file size matches 8 + lump->filelen * 3

------------------------------------------------------------------------
r5284 | havoc | 2005-05-14 01:41:24 +0200 (Sat, 14 May 2005) | 8 lines

replaced all references to vid.conwidth and vid.conheight with vid_conwidth.integer and vid_conheight.integer
replaced all references to vid.realx/vid.realy with 0
replaced all references to vid.realwidth and vid.realheight with vid.width and vid.height
replaced current_vid_* variables with vid. fields (vid.width, vid.height, vid.bitsperpixel, vid.fullscreen)
vid_glx.c: replaced scr_width/height with vid.width/height
vid_wgl.c: replaced window_center_x/y with calculations as needed, and replaced window_width/height with vid.width/height, and some other minor cleanups
removed VID_GetWindowSize function

------------------------------------------------------------------------
r5283 | havoc | 2005-05-14 01:10:38 +0200 (Sat, 14 May 2005) | 2 lines

more clean up of IN_Activate, added cl_ignoremousemove to merge some code

------------------------------------------------------------------------
r5282 | havoc | 2005-05-14 00:03:51 +0200 (Sat, 14 May 2005) | 2 lines

corrected envmap saving for ft/rt/bk/lf/up/dn layout (px/py/nx/ny/pz/nz layout already worked fine) and disabled gamma correction on envmap saves

------------------------------------------------------------------------
r5281 | havoc | 2005-05-13 23:30:26 +0200 (Fri, 13 May 2005) | 2 lines

fix Mod_BuildAliasSkinsFromSkinFiles to work with the new skin layout, this should fix md3 skin file crashes

------------------------------------------------------------------------
r5280 | havoc | 2005-05-13 23:27:58 +0200 (Fri, 13 May 2005) | 2 lines

fix a warning

------------------------------------------------------------------------
r5279 | havoc | 2005-05-13 23:27:24 +0200 (Fri, 13 May 2005) | 2 lines

GAME_NEXUIZ no longer loads a number of gfx/ pics that it does not use

------------------------------------------------------------------------
r5278 | havoc | 2005-05-13 21:41:09 +0200 (Fri, 13 May 2005) | 2 lines

upgraded both QuakeC VMs to use a table of negative string indices for all dynamic strings, this should make everything work on 64bit systems

------------------------------------------------------------------------
r5277 | havoc | 2005-05-13 05:24:13 +0200 (Fri, 13 May 2005) | 3 lines

finished model/map rendering merge, model renderer has been completely removed
model_t num_textures now lies a bit to keep things simple, it equals num_surfaces on models, even if there are multiple skins, in data_textures these extra textures really do exist even though num_textures does not count them (this was done so that UpdateAllTextureInfo won't crash trying to index later skins on the later skins themselves)

------------------------------------------------------------------------
r5276 | havoc | 2005-05-12 23:39:31 +0200 (Thu, 12 May 2005) | 2 lines

375 (-1)

------------------------------------------------------------------------
r5275 | havoc | 2005-05-12 22:44:12 +0200 (Thu, 12 May 2005) | 4 lines

labeled todo items (at least ones not done yet) with a category before the program name, to prioritize bugfixes over changes and features and so on within a difficulty rating
cleaned out a lot of stale or duplicate todo items
376 (-20)

------------------------------------------------------------------------
r5274 | havoc | 2005-05-12 21:00:35 +0200 (Thu, 12 May 2005) | 2 lines

396

------------------------------------------------------------------------
r5273 | havoc | 2005-05-12 20:55:32 +0200 (Thu, 12 May 2005) | 2 lines

clear sounds before shutting down

------------------------------------------------------------------------
r5272 | havoc | 2005-05-12 19:53:29 +0200 (Thu, 12 May 2005) | 2 lines

changed changed commandline history behavior to be more sane

------------------------------------------------------------------------
r5271 | black | 2005-05-11 22:26:12 +0200 (Wed, 11 May 2005) | 3 lines

-Changed VM_precache_pic to check CachePic for successful loading of the pictures.
 (The old check hasnt worked because CachePic always returns a valid pic pointer.)

------------------------------------------------------------------------
r5270 | havoc | 2005-05-11 20:22:48 +0200 (Wed, 11 May 2005) | 5 lines

the merging of alias and bsp model rendering begins...  purely cosmetic changes in this first step
merged model_alias_t into model_t and removed alias prefixes from those fields
merged model_brush_t surface and texture stuff into model_t (num_surfaces, num_textures, etc)
made alias model code use model_t data_surfaces instead of alias meshes

------------------------------------------------------------------------
r5269 | havoc | 2005-05-11 20:19:48 +0200 (Wed, 11 May 2005) | 2 lines

some changes and cleanups to SV_FlyMove, turned off sv_newflymove by default (it just doesn't work right)

------------------------------------------------------------------------
r5268 | havoc | 2005-05-11 20:19:00 +0200 (Wed, 11 May 2005) | 2 lines

added VectorReflect

------------------------------------------------------------------------
r5267 | molivier | 2005-05-11 13:12:01 +0200 (Wed, 11 May 2005) | 2 lines

Allocated temporary big buffers in R_BuildDetailTextures instead of having them on the stack (it caused some systems to crash)

------------------------------------------------------------------------
r5266 | havoc | 2005-05-10 20:39:51 +0200 (Tue, 10 May 2005) | 2 lines

added sv_gameplayfix_blowupfallenzombies and sv_gameplayfix_findradiusdistancetobox cvars (to allow these changes to be disabled)

------------------------------------------------------------------------
r5265 | havoc | 2005-05-10 02:30:52 +0200 (Tue, 10 May 2005) | 2 lines

fix inverted normalmaps produced from bumpmaps (directly loaded normalmaps are fine)

------------------------------------------------------------------------
r5264 | havoc | 2005-05-10 01:52:40 +0200 (Tue, 10 May 2005) | 2 lines

patch from Willis for some map name changes in Transfusion

------------------------------------------------------------------------
r5263 | havoc | 2005-05-10 00:51:36 +0200 (Tue, 10 May 2005) | 2 lines

changed R_NewExplosion check for dead explosions to check time instead of alpha (may fix a bug)

------------------------------------------------------------------------
r5260 | havoc | 2005-05-09 22:43:17 +0200 (Mon, 09 May 2005) | 2 lines

389 (-2)

------------------------------------------------------------------------
r5259 | havoc | 2005-05-09 22:26:27 +0200 (Mon, 09 May 2005) | 2 lines

fix VID_Shutdown ungrabs

------------------------------------------------------------------------
r5258 | havoc | 2005-05-09 22:12:36 +0200 (Mon, 09 May 2005) | 2 lines

391 (-2)

------------------------------------------------------------------------
r5257 | havoc | 2005-05-09 20:40:50 +0200 (Mon, 09 May 2005) | 2 lines

changed blaze.mindphukd.org back to an ip address because the hostname isn't resolving but the ip works fine

------------------------------------------------------------------------
r5256 | havoc | 2005-05-09 17:56:41 +0200 (Mon, 09 May 2005) | 2 lines

major cleanup of input code - CL_Move replaces most of IN_Move, IN_Commands, many internal platform functions refactored to clean up platform code

------------------------------------------------------------------------
r5255 | havoc | 2005-05-09 17:51:19 +0200 (Mon, 09 May 2005) | 2 lines

remove qwgl externs, as they are not used outside vid_wgl.c

------------------------------------------------------------------------
r5254 | havoc | 2005-05-09 17:48:07 +0200 (Mon, 09 May 2005) | 2 lines

fix a problem with stenciltwoside introduced by recent changes

------------------------------------------------------------------------
r5253 | havoc | 2005-05-09 15:03:18 +0200 (Mon, 09 May 2005) | 3 lines

fixed problems in the Host_Init Cbuf_InsertText stuff (by changing it to Cbuf_AddText, and some other cleanups)
added Host_StartVideo to a few more places

------------------------------------------------------------------------
r5252 | havoc | 2005-05-09 14:58:05 +0200 (Mon, 09 May 2005) | 2 lines

changed 3 occurences of very if (developer.integer) Con_Print code to Con_DPrint

------------------------------------------------------------------------
r5251 | havoc | 2005-05-08 21:57:24 +0200 (Sun, 08 May 2005) | 3 lines

implemented caching of DNS names in lhnet.c
changed sv_masterextra* servers back to DNS names (but kept IP addresses as comments, note the dpmaster.deathmask.net IP has changed)

------------------------------------------------------------------------
r5250 | havoc | 2005-05-08 20:32:46 +0200 (Sun, 08 May 2005) | 2 lines

S_LocalSound now uses ATTN_NONE, so menu sounds and such will no longer be centered at world origin

------------------------------------------------------------------------
r5249 | havoc | 2005-05-08 20:28:32 +0200 (Sun, 08 May 2005) | 3 lines

rewrote the notes on the Creative patent after re-reading it
fixed my incomplete StencilOp changes (reverted back to the way it was before)

------------------------------------------------------------------------
r5248 | havoc | 2005-05-08 15:22:50 +0200 (Sun, 08 May 2005) | 2 lines

revised a number of terminology notes at the beginning of r_shadow.c, including notes about the Creative Labs patent on the Carmack's Reverse technique

------------------------------------------------------------------------
r5247 | havoc | 2005-05-08 14:59:38 +0200 (Sun, 08 May 2005) | 4 lines

added rmesh_t and R_Mesh_AddVertex3f, R_Mesh_AddPolygon3f, R_Mesh_AddBrushMeshFromPlanes functions
R_Shadow_ScissorForBBox now uses R_Mesh_AddBrushMeshFromPlanes function to get an exact clipped box-brush vertex set for calculating scissor area, this should reduce the scissor area used in some cases compared to the old hacky method
added nearclip plane to frustum[] array (only used by R_Shadow_ScissorForBBox)

------------------------------------------------------------------------
r5246 | havoc | 2005-05-08 12:42:51 +0200 (Sun, 08 May 2005) | 2 lines

various printf/fprintf calls are now Con_Printf, and some other minor cleanups

------------------------------------------------------------------------
r5245 | havoc | 2005-05-08 12:42:09 +0200 (Sun, 08 May 2005) | 2 lines

PR_Alloc/Free/FreeAll now report filename/fileline of their caller in the Mem_ calls, for better readability of "memlist all" reports

------------------------------------------------------------------------
r5244 | havoc | 2005-05-07 20:07:20 +0200 (Sat, 07 May 2005) | 2 lines

rearranged mouse grabbing rules again to force grabbing when fullscreen (for some reason it isn't the active window)

------------------------------------------------------------------------
r5243 | havoc | 2005-05-07 19:53:47 +0200 (Sat, 07 May 2005) | 2 lines

fix a crash in portal clipping code (forgot to include polygon.h)

------------------------------------------------------------------------
r5242 | havoc | 2005-05-07 16:51:49 +0200 (Sat, 07 May 2005) | 2 lines

portal code now uses Polygon_DivideF instead of its own polygon clipper

------------------------------------------------------------------------
r5241 | havoc | 2005-05-06 22:03:18 +0200 (Fri, 06 May 2005) | 2 lines

minor rearrangement of Render_Init

------------------------------------------------------------------------
r5240 | havoc | 2005-05-06 22:01:55 +0200 (Fri, 06 May 2005) | 2 lines

hush "Unknown command" warnings during startup

------------------------------------------------------------------------
r5239 | havoc | 2005-05-06 22:00:53 +0200 (Fri, 06 May 2005) | 2 lines

renamed VID_Open to VID_Start, inlined VID_Close ito eliminate the only call to it

------------------------------------------------------------------------
r5238 | havoc | 2005-05-06 21:58:33 +0200 (Fri, 06 May 2005) | 2 lines

reorganized Palette_Init code

------------------------------------------------------------------------
r5237 | havoc | 2005-05-06 21:43:18 +0200 (Fri, 06 May 2005) | 2 lines

playvideo and cd loop/cd play commands now call Host_StartVideo (this fixes a crash and missing menu music respectively in Nexuiz)

------------------------------------------------------------------------
r5236 | havoc | 2005-05-06 14:31:05 +0200 (Fri, 06 May 2005) | 2 lines

fix a misplaced variable

------------------------------------------------------------------------
r5235 | havoc | 2005-05-06 13:37:35 +0200 (Fri, 06 May 2005) | 12 lines

changed Host_Init to execute configs only once
cleaned up Host_Init (and related functions like Con_Init, COM_Init, Cbuf_Init, etc) a great deal
now uses host_framecount >= 3 checks instead of host_loopactive or host_initialized checks, this should fix any problems with crashes erasing config.cfg
VID_Open and friends are now called from Host_StartVideo which is called by SCR_BeginLoadingPlaque (such as by SV_SpawnServer) as well as the end of Host_Init, this only calls them the first time it is called, so it can be called during config parsing (such as +map start on the commandline)
moved sys_usetimegettime and dedicated server console opening in sys_wgl.c into Sys_InitConsole and Sys_Init_Commands functions called by Host_Init
merged Sys_Shared_EarlyInit and Sys_Shared_LateInit into Host_Init
got rid of sys_usetimegettime (windows-only) cvar in sys_sdl.c
changed type of a number of vid_* variables from int to qboolean
renamed vidmode_active to vid_isfullscreen in vid_glx.c for more code consistency
fixed a bug in vid_glx.c that made it grab the mouse/keyboard even when it was not the active window
no longer grabs mouse while playing demos in a window

------------------------------------------------------------------------
r5234 | havoc | 2005-05-06 13:28:31 +0200 (Fri, 06 May 2005) | 5 lines

moved mod_shared.c detail texture and distortion texture stuff to gl_rmain.c (renamed mod_shared_* to r_texture_*)
got rid of unused mod_q1bsp_novis array
moved Mod_Q1BSP_Collision_Init into the boxhull code (which isn't even used anyway)
made r_restart reload models (as was intended) by making Mod_UnloadModel preserve the ->use field

------------------------------------------------------------------------
r5233 | havoc | 2005-05-06 13:27:18 +0200 (Fri, 06 May 2005) | 2 lines

changed Mem_FreePool and Mem_EmptyPool to report their caller's filename/fileline when Mem_Free detects an error

------------------------------------------------------------------------
r5232 | havoc | 2005-05-06 10:58:29 +0200 (Fri, 06 May 2005) | 2 lines

attachments now inherit RENDER_VIEWMODEL from their parent (they already inherited RENDER_EXTERIORMODEL)

------------------------------------------------------------------------
r5231 | havoc | 2005-05-06 08:09:33 +0200 (Fri, 06 May 2005) | 2 lines

removed a clear of names in the render modules init code, this allows it to be called AFTER some modules are registered (for a minor cleanup of the Host_Init code)

------------------------------------------------------------------------
r5230 | havoc | 2005-05-06 06:29:25 +0200 (Fri, 06 May 2005) | 2 lines

enabled SDL builds by default (in addition to cl and dedicated)

------------------------------------------------------------------------
r5229 | havoc | 2005-05-06 02:36:07 +0200 (Fri, 06 May 2005) | 3 lines

added cl.movement_velocity to allow view bobbing to match up with cl_movement
fixed some bugs in cl_movement timing, it now applies input to the next move not the current one, making it work properly (assuming cl_movement_latency is exact)

------------------------------------------------------------------------
r5228 | havoc | 2005-05-05 16:24:24 +0200 (Thu, 05 May 2005) | 2 lines

hush some texture loading warnings in dedicated servers (thanks to Biomass for reporting this)

------------------------------------------------------------------------
r5227 | havoc | 2005-05-05 14:52:07 +0200 (Thu, 05 May 2005) | 2 lines

added some commented out code that can make a log of stereo wav sounds loaded

------------------------------------------------------------------------
r5226 | havoc | 2005-05-05 14:49:17 +0200 (Thu, 05 May 2005) | 2 lines

cl_netlocalping now adds only half as much lag, so that the number specified is roughly what it will achieve

------------------------------------------------------------------------
r5225 | black | 2005-05-05 14:48:43 +0200 (Thu, 05 May 2005) | 5 lines

-Changed the SDL window icon back to DP's icon.
-Cmds, Cvars and Aliases are now inserted at the right alphanumerical
 position on creation.
-Fixed a bug in the serverlist which caused it to not mask entries properly.

------------------------------------------------------------------------
r5224 | havoc | 2005-05-04 22:14:06 +0200 (Wed, 04 May 2005) | 3 lines

changed cl_movement_latency to be in milliseconds rather than seconds (less confusing because of ping being milliseconds)
added code to remove 'impossibly far into the future' movement queue items (useful if latency is set to a high value initially and then lower, this will remove the stale high latency items)

------------------------------------------------------------------------
r5223 | havoc | 2005-05-04 16:07:47 +0200 (Wed, 04 May 2005) | 2 lines

moved a Cvar_RegisterVariable call to ensure that it happens before config parsing

------------------------------------------------------------------------
r5222 | havoc | 2005-05-04 12:26:36 +0200 (Wed, 04 May 2005) | 2 lines

fixed a stupid bug in PF_te_customflash that made it send lifetime as /256 (should've been *256)

------------------------------------------------------------------------
r5221 | havoc | 2005-05-04 11:55:13 +0200 (Wed, 04 May 2005) | 2 lines

forgot to add 1 to radius byte in parsing TE_CUSTOMFLASH, probably not noticable though

------------------------------------------------------------------------
r5220 | havoc | 2005-05-04 11:51:41 +0200 (Wed, 04 May 2005) | 2 lines

removed .lmp suffix from a number of DrawQ_Pic calls, which should cure the gfx/net.lmp not found warnings

------------------------------------------------------------------------
r5219 | havoc | 2005-05-03 23:49:25 +0200 (Tue, 03 May 2005) | 2 lines

393 (+53)

------------------------------------------------------------------------
r5218 | havoc | 2005-05-03 20:33:21 +0200 (Tue, 03 May 2005) | 2 lines

cleaned up portions of rtlighting system, allowing GLSL lighting to use very few state changes, for a 6% speed gain on my system

------------------------------------------------------------------------
r5217 | havoc | 2005-05-03 20:30:12 +0200 (Tue, 03 May 2005) | 2 lines

fix a bug that made rtlighting crash (thanks to Vic for reporting this)

------------------------------------------------------------------------
r5216 | havoc | 2005-05-03 12:38:55 +0200 (Tue, 03 May 2005) | 2 lines

added code for enabling GL_LINE_SMOOTH (antialiased lines) in r_showtris mode, but disabled because it wasn't a speed gain

------------------------------------------------------------------------
r5215 | havoc | 2005-05-03 12:36:20 +0200 (Tue, 03 May 2005) | 2 lines

don't show extra time reports in r_speeds report when using r_showtris 1

------------------------------------------------------------------------
r5214 | havoc | 2005-05-03 07:06:41 +0200 (Tue, 03 May 2005) | 3 lines

added developer_texturelogging
R_MarkEntities now updates r_refdef.worldentity visframe as well (for more internal consistency)

------------------------------------------------------------------------
r5213 | havoc | 2005-05-01 14:26:58 +0200 (Sun, 01 May 2005) | 2 lines

a bit of cleanup

------------------------------------------------------------------------
r5212 | havoc | 2005-05-01 14:14:05 +0200 (Sun, 01 May 2005) | 2 lines

moved r_shadow_ white and normal cubemaps to r_texture_

------------------------------------------------------------------------
r5211 | havoc | 2005-04-30 09:14:37 +0200 (Sat, 30 Apr 2005) | 5 lines

relocated the CL_SendMove call to put it at the end of network parsing (and only called if there was an svc_time message in this packet), this should greatly improve consistency of ping times and input sending (which was sometimes falling way behind with lag), no longer uses sys_ticrate to control input frequency
changed CL_TraceLine to CL_TraceBox and made it return a trace_t
worked on CL_ClientMovement function for clientside movement simulation (not working yet), this has many cl_movement* cvars associated with it which will be updated by the server at some point in the future
added (currently unused and not updated) cl_gravity and cl_slowmo cvars, which the server will be setting at some point in the future

------------------------------------------------------------------------
r5210 | havoc | 2005-04-29 04:40:37 +0200 (Fri, 29 Apr 2005) | 2 lines

moved some Con_PrintToHistory code into Con_Print and reenabled talk.wav in GAME_NEXUIZ

------------------------------------------------------------------------
r5209 | havoc | 2005-04-24 09:00:16 +0200 (Sun, 24 Apr 2005) | 2 lines

removed an unused function I thought I removed in the previous commit

------------------------------------------------------------------------
r5208 | havoc | 2005-04-24 08:19:10 +0200 (Sun, 24 Apr 2005) | 3 lines

slight cleanup of surface clipping code (got rid of a rather redundent function)
major bugfix to surface portal clipping, lights should hit all the right surfaces now

------------------------------------------------------------------------
r5207 | havoc | 2005-04-24 07:24:30 +0200 (Sun, 24 Apr 2005) | 3 lines

don't apply dlights to opaque models (this was happening when flashblend is on)
default dlight shadowing on

------------------------------------------------------------------------
r5206 | havoc | 2005-04-23 09:38:48 +0200 (Sat, 23 Apr 2005) | 2 lines

fixed CL_SendMove packet rate limiting to not have a heartattack when going from singleplayer to multiplayer (this was causing the player to be stuck in place for a very long time)

------------------------------------------------------------------------
r5205 | havoc | 2005-04-21 03:26:44 +0200 (Thu, 21 Apr 2005) | 2 lines

added cl_capturevideo_sound (defaulted to 0) to allow enabling/disabling sound saving, with sound disabled you can save videos at a framerate your machine can't maintain (no sound sync to worry about)

------------------------------------------------------------------------
r5204 | havoc | 2005-04-20 13:16:36 +0200 (Wed, 20 Apr 2005) | 3 lines

reimplemented rtlight portal culling (used for compiled rtlights, and can be used for dlights but that is often a major speed loss)
added additional bounding box and triangle facing checks to rtlight compilation, triangles outside the box are no longer drawn

------------------------------------------------------------------------
r5203 | havoc | 2005-04-20 10:49:26 +0200 (Wed, 20 Apr 2005) | 2 lines

changed rtlight compiled cluster list/pvs to leaf list/pvs to enable slightly more accurate culling

------------------------------------------------------------------------
r5202 | havoc | 2005-04-20 08:02:47 +0200 (Wed, 20 Apr 2005) | 2 lines

enabled portals on q3bsp for a small (occasionally huge) fps increase

------------------------------------------------------------------------
r5201 | havoc | 2005-04-20 07:33:29 +0200 (Wed, 20 Apr 2005) | 3 lines

r_shadow_staticworldlights has mutated into r_shadow_realtime_world_compile, r_shadow_realtime_world_compilelight, r_shadow_realtime_world_compileshadow
added r_shadow_visiblelighting

------------------------------------------------------------------------
r5200 | havoc | 2005-04-20 03:12:46 +0200 (Wed, 20 Apr 2005) | 3 lines

fixed a stupid bug in SV_PushMove that made it ignore the first entity in the move box
fixed a rotation check in SV_PushMove so that it would detect roll rotations without pitch/yaw

------------------------------------------------------------------------
r5199 | havoc | 2005-04-19 10:00:18 +0200 (Tue, 19 Apr 2005) | 2 lines

cleaned up transparency handling in q3 shaders, should fix many glitched jumppads and such

------------------------------------------------------------------------
r5198 | havoc | 2005-04-18 23:22:09 +0200 (Mon, 18 Apr 2005) | 2 lines

now clears view to fog color if fog is enabled, this should cure fogging of sky in hlbsp

------------------------------------------------------------------------
r5197 | havoc | 2005-04-18 23:21:00 +0200 (Mon, 18 Apr 2005) | 2 lines

clean up script init a bit, now starts nexuiz logo video and such only if there's nothing to do

------------------------------------------------------------------------
r5196 | havoc | 2005-04-18 22:50:57 +0200 (Mon, 18 Apr 2005) | 2 lines

reenabled hlbsp sky polygon rendering so that fogging works

------------------------------------------------------------------------
r5195 | havoc | 2005-04-18 08:48:21 +0200 (Mon, 18 Apr 2005) | 2 lines

changed crosshair_static default to 1

------------------------------------------------------------------------
r5194 | havoc | 2005-04-18 08:47:40 +0200 (Mon, 18 Apr 2005) | 2 lines

changed in_pitch_min and in_pitch_max defaults to -90 and 90 respectively

------------------------------------------------------------------------
r5193 | havoc | 2005-04-18 04:21:48 +0200 (Mon, 18 Apr 2005) | 2 lines

fixed the SU_ITEMS fix so that it doesn't trash the PROTOCOL_DARKPLACES6 parsing

------------------------------------------------------------------------
r5192 | havoc | 2005-04-17 23:15:50 +0200 (Sun, 17 Apr 2005) | 2 lines

fixed a bug in CL_ParseClientdata that was breaking on hipnotic demos

------------------------------------------------------------------------
r5191 | havoc | 2005-04-17 11:08:54 +0200 (Sun, 17 Apr 2005) | 2 lines

gl_texture_anisotropy now only affects TEXF_MIPMAP textures which should fix a number of 'wandering off the lightmap' issues (as well as similar issues with model skins, as they are not mipmapped)

------------------------------------------------------------------------
r5190 | havoc | 2005-04-17 11:05:32 +0200 (Sun, 17 Apr 2005) | 3 lines

texture images now take on the TEXF_FORCENEAREST and TEXF_FORCELINEAR flags from the textures placed in them (as was intended), so gl_texturemode changes
should no longer affect them

------------------------------------------------------------------------
r5189 | havoc | 2005-04-17 10:37:08 +0200 (Sun, 17 Apr 2005) | 4 lines

default to insert mode instead of replace mode in console
get rid of stupid cursor right at end of line behavior in console, repeating characters from the previous edit line is annoying
allow typing characters > 126 in console

------------------------------------------------------------------------
r5188 | havoc | 2005-04-17 10:33:17 +0200 (Sun, 17 Apr 2005) | 2 lines

fix rtlighting on textureless surfaces (uses r_texture_white instead of no texture)

------------------------------------------------------------------------
r5187 | havoc | 2005-04-17 10:32:21 +0200 (Sun, 17 Apr 2005) | 2 lines

don't draw glow twice when gl_combine is on

------------------------------------------------------------------------
r5186 | havoc | 2005-04-16 23:30:13 +0200 (Sat, 16 Apr 2005) | 2 lines

fixed a stupid bug in Entityframe5_ExpandEdicts

------------------------------------------------------------------------
r5185 | havoc | 2005-04-16 11:15:18 +0200 (Sat, 16 Apr 2005) | 2 lines

fix a crash when s->tag_entity is higher than current d->maxedicts

------------------------------------------------------------------------
r5184 | havoc | 2005-04-15 10:37:47 +0200 (Fri, 15 Apr 2005) | 2 lines

changed R_Shadow_RenderLighting to do full base+pants+shirt+gloss rendering in one call (will optimize the rendering itself later to merge some of the passes)

------------------------------------------------------------------------
r5183 | havoc | 2005-04-15 10:30:53 +0200 (Fri, 15 Apr 2005) | 2 lines

fix a bug in the early out case of R_Q1BSP_DrawLight

------------------------------------------------------------------------
r5182 | havoc | 2005-04-15 10:21:11 +0200 (Fri, 15 Apr 2005) | 2 lines

R_Q1BSP_GetLightInfo now uses BSP tree recursion as an optimization for a small speed gain

------------------------------------------------------------------------
r5181 | havoc | 2005-04-15 10:18:26 +0200 (Fri, 15 Apr 2005) | 3 lines

made dland2.wav not play in GAME_NEXUIZ
no longer runs physics on disconnected clients (quake did not run them), fixing the physics problems with frikbots, thanks to FrikaC for explanation of this problem

------------------------------------------------------------------------
r5180 | black | 2005-04-14 22:45:08 +0200 (Thu, 14 Apr 2005) | 5 lines

-Added the parameter 'persistent'(naming?) to Draw_CachePic, which decides
 whether the texture is loaded in texture memory directly or only on demand.
-Adapted all Draw_CachePic calls (I'll do some corrections, atm most of them
 pass persistent := false)

------------------------------------------------------------------------
r5179 | havoc | 2005-04-14 10:27:36 +0200 (Thu, 14 Apr 2005) | 2 lines

LoadTGA is now more compliant with the TGA spec regarding colormaps (they can be present even on a truecolor image, just not used by it) and attributebits (alpha is now ignored if attributebits is not 8 which fixes a number of malformed TGA files (though they still waste disk space) - note that attributebits is part of the attributes header byte)

------------------------------------------------------------------------
r5178 | havoc | 2005-04-11 21:37:04 +0200 (Mon, 11 Apr 2005) | 2 lines

renamed r_shadow_cursor cvars to actually have the word cursor in their name like they were supposed to

------------------------------------------------------------------------
r5177 | havoc | 2005-04-11 21:06:49 +0200 (Mon, 11 Apr 2005) | 2 lines

remove unused variable

------------------------------------------------------------------------
r5176 | black | 2005-04-11 18:53:33 +0200 (Mon, 11 Apr 2005) | 2 lines

-Changed the dpv buffer to 1 MB.

------------------------------------------------------------------------
r5175 | havoc | 2005-04-11 04:27:30 +0200 (Mon, 11 Apr 2005) | 2 lines

implemented playerclip and monsterclip brush support for q3bsp levels

------------------------------------------------------------------------
r5174 | havoc | 2005-04-11 04:23:16 +0200 (Mon, 11 Apr 2005) | 3 lines

changed color codes to match Quake3
changed chat coloring in Nexuiz to use yellow, instead of shifting to upper 128 characters, this should open up the possibility of 8bit fonts in Nexuiz (for multilingual chat)

------------------------------------------------------------------------
r5173 | havoc | 2005-04-10 18:53:42 +0200 (Sun, 10 Apr 2005) | 2 lines

smoke no longer expands over time (eats fillrate and isn't very realistic)

------------------------------------------------------------------------
r5172 | havoc | 2005-04-10 17:46:47 +0200 (Sun, 10 Apr 2005) | 2 lines

fixed ut2003-style smoke ring effect on explosions (not that anyone uses this I assume)

------------------------------------------------------------------------
r5171 | havoc | 2005-04-10 17:36:33 +0200 (Sun, 10 Apr 2005) | 3 lines

reimplemented particle lighting, however it is not used (too slow)
fixed a stupid bug in fogging of alpha blend and modulation blend

------------------------------------------------------------------------
r5170 | havoc | 2005-04-10 17:29:29 +0200 (Sun, 10 Apr 2005) | 2 lines

fixed a crash if decals are stuck to submodels when cl_entities expands

------------------------------------------------------------------------
r5169 | havoc | 2005-04-10 16:01:22 +0200 (Sun, 10 Apr 2005) | 2 lines

removed unused leaf parameter on CompleteLightPoint

------------------------------------------------------------------------
r5168 | black | 2005-04-09 22:11:40 +0200 (Sat, 09 Apr 2005) | 2 lines

Umm, I think this todo item (netconn) has been done some time ago.

------------------------------------------------------------------------
r5165 | molivier | 2005-04-07 12:00:48 +0200 (Thu, 07 Apr 2005) | 2 lines

Added the DP_HALFLIFE_SPRITE QC extension

------------------------------------------------------------------------
r5164 | havoc | 2005-04-06 22:30:19 +0200 (Wed, 06 Apr 2005) | 2 lines

fix 256 frame limit (stupid legacy bug in entity_state_t building code)

------------------------------------------------------------------------
r5163 | havoc | 2005-04-06 13:12:56 +0200 (Wed, 06 Apr 2005) | 2 lines

changed cl_brushmodel_entities array from entity_render_t * to int, to fix a crash when cl_entities array expands

------------------------------------------------------------------------
r5162 | havoc | 2005-04-06 12:06:26 +0200 (Wed, 06 Apr 2005) | 2 lines

fixed a stupid typo in EntityFrame5_ExpandEdicts that caused a double free error

------------------------------------------------------------------------
r5161 | havoc | 2005-04-06 00:23:17 +0200 (Wed, 06 Apr 2005) | 2 lines

fixed an error case in S_StartSound

------------------------------------------------------------------------
r5160 | havoc | 2005-04-05 22:28:07 +0200 (Tue, 05 Apr 2005) | 2 lines

fix some crashes with fogged surfaces

------------------------------------------------------------------------
r5159 | havoc | 2005-04-05 22:01:33 +0200 (Tue, 05 Apr 2005) | 2 lines

made CL_ExpandEntities cause an error if called before cl_entities is initialized

------------------------------------------------------------------------
r5158 | havoc | 2005-04-05 20:23:53 +0200 (Tue, 05 Apr 2005) | 4 lines

consolidated many mempools to make memlist more readable (and very slightly reduce memory usage)
changed gltexture_t->identifier from a pointer to an array to reduce the number of allocations per texture (now 2-3 rather than 3-4)
made all MAX_EDICTS arrays in entityframe5_database_t adaptive size to reduce server memory usage

------------------------------------------------------------------------
r5157 | havoc | 2005-04-05 19:31:37 +0200 (Tue, 05 Apr 2005) | 2 lines

no longer uses SZ_Alloc for cmd_text buffer

------------------------------------------------------------------------
r5156 | havoc | 2005-04-05 13:15:45 +0200 (Tue, 05 Apr 2005) | 3 lines

reduced client memory usage by 29MB by making cl_max_entities dynamic (starts out at 256)
cleaned up cl_num_entities to be more generally useful, it is only increased by network entities, this should speed up some code (by using cl_num_entities instead of MAX_EDICTS or cl_max_entities)

------------------------------------------------------------------------
r5155 | havoc | 2005-04-04 21:33:09 +0200 (Mon, 04 Apr 2005) | 2 lines

fixed a unintended-water-scroll bug on transparent fullbright surfaces

------------------------------------------------------------------------
r5154 | havoc | 2005-04-04 20:46:20 +0200 (Mon, 04 Apr 2005) | 2 lines

fix gl_combine 0 crashes (it was indexing the color vector as if it was a vertex property... wrong!)

------------------------------------------------------------------------
r5153 | havoc | 2005-04-04 18:01:17 +0200 (Mon, 04 Apr 2005) | 5 lines

optimized surface rendering to surface->groupmesh->data_* array pointers directly instead of indexing them with surface->num_firstvertex, this allows fewer pointer changes (a small speed gain)
fixed stupid bug in q1bsp texture loading which was making all missing textures invisible
changed portal generation to not break when a portal is clipped away, this fixes a crash at render time with bogus portals
changed r_drawportals to only draw portals surrounding the visible leafs (speed gain, but also useful for debugging vis glitches)

------------------------------------------------------------------------
r5152 | molivier | 2005-04-04 16:51:56 +0200 (Mon, 04 Apr 2005) | 4 lines

Fixed getserversResponse parsing:
* serverquerycount was incremented even when it didn't query this server
* if the list contained a server that was already queried, the remaining servers were ignored

------------------------------------------------------------------------
r5151 | black | 2005-04-04 15:03:54 +0200 (Mon, 04 Apr 2005) | 3 lines

-ServerList: Changed some if-else-chains to switch constructs.
-Added a pointer check (!= NULL) to VM_strunzone.

------------------------------------------------------------------------
r5149 | molivier | 2005-04-04 10:26:46 +0200 (Mon, 04 Apr 2005) | 2 lines

Removed LoadLMPAs8Bit; the menu now uses LoadLMP directly

------------------------------------------------------------------------
r5146 | molivier | 2005-04-04 07:40:51 +0200 (Mon, 04 Apr 2005) | 2 lines

Factorized LoadLMP and LoadLMPAs8Bit. Made a bunch of buffers const

------------------------------------------------------------------------
r5145 | black | 2005-04-03 12:12:18 +0200 (Sun, 03 Apr 2005) | 2 lines

-Changed HostCache to ServerList (and a few other pure name changes)

------------------------------------------------------------------------
r5143 | molivier | 2005-04-03 10:26:14 +0200 (Sun, 03 Apr 2005) | 2 lines

Added Quake 2 sprite support (.sp2 files). Added the corresponding QC extension (DP_QUAKE2_SPRITE)

------------------------------------------------------------------------
r5142 | havoc | 2005-04-02 20:25:26 +0200 (Sat, 02 Apr 2005) | 2 lines

rewrote parts of Host_ServerFrame to make host_framerate cvar work again for The Ascension Of Vigil

------------------------------------------------------------------------
r5141 | havoc | 2005-04-02 19:38:45 +0200 (Sat, 02 Apr 2005) | 2 lines

fix hl sprite types again

------------------------------------------------------------------------
r5140 | havoc | 2005-04-02 18:49:28 +0200 (Sat, 02 Apr 2005) | 2 lines

fixed hl sprite types to properly handle the palette in each mode

------------------------------------------------------------------------
r5139 | havoc | 2005-04-02 18:20:34 +0200 (Sat, 02 Apr 2005) | 2 lines

fixed hl sprite additive mode

------------------------------------------------------------------------
r5138 | havoc | 2005-04-02 18:04:10 +0200 (Sat, 02 Apr 2005) | 2 lines

fix hl sprite loading (stupid typo in handling sprite types)

------------------------------------------------------------------------
r5137 | black | 2005-04-02 14:05:05 +0200 (Sat, 02 Apr 2005) | 3 lines

-Now a server is never pinged more than once.
-Fixed the color code function.

------------------------------------------------------------------------
r5136 | molivier | 2005-03-31 18:08:23 +0200 (Thu, 31 Mar 2005) | 2 lines

Updated a few entries in the todo file

------------------------------------------------------------------------
r5135 | havoc | 2005-03-31 11:50:43 +0200 (Thu, 31 Mar 2005) | 2 lines

fix incompatible types warnings (and change pointer_* fields back to void *)

------------------------------------------------------------------------
r5134 | molivier | 2005-03-31 07:41:44 +0200 (Thu, 31 Mar 2005) | 2 lines

Removed GL_OpenLibrary and GL_CloseLibrary from "vid.h" and "vid_null.c"

------------------------------------------------------------------------
r5133 | havoc | 2005-03-31 01:23:14 +0200 (Thu, 31 Mar 2005) | 2 lines

changed array pointer state to const float * instead of const void *

------------------------------------------------------------------------
r5132 | havoc | 2005-03-28 14:33:25 +0200 (Mon, 28 Mar 2005) | 2 lines

added a firstvertex parameter to R_Mesh_DrawMesh

------------------------------------------------------------------------
r5131 | havoc | 2005-03-28 14:16:48 +0200 (Mon, 28 Mar 2005) | 2 lines

save some memory by not allocating neighbors for q1bsp and q3bsp meshlists

------------------------------------------------------------------------
r5130 | havoc | 2005-03-28 13:32:47 +0200 (Mon, 28 Mar 2005) | 2 lines

changed surface->mesh to surface->groupmesh and added num_firsttriangle and num_firstvertex fields to msurface_t, this cuts the msurface_t size from 120 bytes to 88 bytes, causing a 3.5% speed gain in a 37000 surface benchmark scene

------------------------------------------------------------------------
r5129 | havoc | 2005-03-28 08:54:34 +0200 (Mon, 28 Mar 2005) | 3 lines

moved a number of msurface_t fields to a separate msurface_lightmapinfo_t structure which is allocated only for q1bsp maps, to save some memory and save some memory bandwidth (as these fields are not often accessed)
moved collision triangles/vertices information out of surfmesh_t and into msurface_t

------------------------------------------------------------------------
r5128 | havoc | 2005-03-28 03:46:58 +0200 (Mon, 28 Mar 2005) | 2 lines

slight optimizations to bsp renderer

------------------------------------------------------------------------
r5127 | havoc | 2005-03-28 03:43:43 +0200 (Mon, 28 Mar 2005) | 2 lines

removed an unneeded CHECKGLERROR

------------------------------------------------------------------------
r5126 | havoc | 2005-03-27 11:15:59 +0200 (Sun, 27 Mar 2005) | 2 lines

fixed backwards bumps in r_shadow_glsl 1 mode

------------------------------------------------------------------------
r5125 | havoc | 2005-03-27 10:22:05 +0200 (Sun, 27 Mar 2005) | 2 lines

implemented tag attachments on skeletal .zym models and centralized the code dealing with tags in model_alias.c

------------------------------------------------------------------------
r5124 | havoc | 2005-03-25 12:35:48 +0100 (Fri, 25 Mar 2005) | 2 lines

added comments to the bloom code in R_BlendView to try to explain how it works

------------------------------------------------------------------------
r5123 | havoc | 2005-03-24 15:49:39 +0100 (Thu, 24 Mar 2005) | 2 lines

rearranged stale worldmodel removal a bit so that trying to load a level that doesn't exist doesn't mess up things on a server due to a partial reload

------------------------------------------------------------------------
r5122 | havoc | 2005-03-24 15:48:06 +0100 (Thu, 24 Mar 2005) | 2 lines

fixed skybox texture leak on level changes

------------------------------------------------------------------------
r5121 | havoc | 2005-03-23 08:10:17 +0100 (Wed, 23 Mar 2005) | 2 lines

disabled item bobbing by default

------------------------------------------------------------------------
r5120 | havoc | 2005-03-23 01:16:28 +0100 (Wed, 23 Mar 2005) | 2 lines

view_ofs now affects intermission cameras, mods usually set view_ofs to '0 0 0' when going to intermission so this won't break anything, but allows Nexuiz to freeze frame the final moment with players still standing where they were

------------------------------------------------------------------------
r5119 | havoc | 2005-03-23 01:15:03 +0100 (Wed, 23 Mar 2005) | 2 lines

fix decal fading so they really DO disappear eventually now, rather than hogging particle slots for all time

------------------------------------------------------------------------
r5118 | havoc | 2005-03-21 21:47:01 +0100 (Mon, 21 Mar 2005) | 2 lines

fixed two more signed/unsigned mismatches

------------------------------------------------------------------------
r5117 | havoc | 2005-03-21 10:58:21 +0100 (Mon, 21 Mar 2005) | 2 lines

fix 3 NULL vertex pointer crashes (caused by R_Mesh_State lingering where it shouldn't)

------------------------------------------------------------------------
r5116 | havoc | 2005-03-21 10:57:52 +0100 (Mon, 21 Mar 2005) | 2 lines

fix a bug in R_Mesh_Finish introduced by the unsigned int i fix

------------------------------------------------------------------------
r5115 | havoc | 2005-03-21 10:14:57 +0100 (Mon, 21 Mar 2005) | 2 lines

fix two runaway loops caused by unsigned int i

------------------------------------------------------------------------
r5114 | molivier | 2005-03-21 09:44:35 +0100 (Mon, 21 Mar 2005) | 2 lines

Added Mac OS X support to the makefiles. Note that the client doesn't compile yet since some files are still missing (vid_agl.c mainly)

------------------------------------------------------------------------
r5113 | molivier | 2005-03-21 09:42:59 +0100 (Mon, 21 Mar 2005) | 2 lines

Moved some particles texture initialization loops in a separate function to work around an optimization bug in Mac OS X's GCC

------------------------------------------------------------------------
r5107 | havoc | 2005-03-21 05:23:14 +0100 (Mon, 21 Mar 2005) | 2 lines

more unsigned (i/j/size variables)

------------------------------------------------------------------------
r5106 | havoc | 2005-03-21 05:21:08 +0100 (Mon, 21 Mar 2005) | 2 lines

less unsigned

------------------------------------------------------------------------
r5105 | havoc | 2005-03-21 05:18:57 +0100 (Mon, 21 Mar 2005) | 2 lines

more unsigned

------------------------------------------------------------------------
r5104 | havoc | 2005-03-21 05:17:27 +0100 (Mon, 21 Mar 2005) | 2 lines

changed ActiveTexture and ClientActiveTexture to take unsigned

------------------------------------------------------------------------
r5103 | havoc | 2005-03-21 05:12:59 +0100 (Mon, 21 Mar 2005) | 2 lines

changed a few things to unsigned

------------------------------------------------------------------------
r5102 | havoc | 2005-03-21 03:05:08 +0100 (Mon, 21 Mar 2005) | 2 lines

surface renderer now does less R_Mesh_State calls, opting instead to change only individual pieces of state

------------------------------------------------------------------------
r5101 | havoc | 2005-03-21 03:03:44 +0100 (Mon, 21 Mar 2005) | 2 lines

added R_Mesh_ functions for setting individual parts of state, to allow faster state changes in surface renderer

------------------------------------------------------------------------
r5100 | havoc | 2005-03-21 03:02:05 +0100 (Mon, 21 Mar 2005) | 2 lines

added 1f and 4f glTexCoord/glMultiTexCoord function declarations

------------------------------------------------------------------------
r5099 | havoc | 2005-03-21 01:52:57 +0100 (Mon, 21 Mar 2005) | 2 lines

fix PBLEND_MOD in fog

------------------------------------------------------------------------
r5098 | havoc | 2005-03-19 06:45:24 +0100 (Sat, 19 Mar 2005) | 3 lines

reduced particle struct size (now 32768 particles is 3MB instead of about 3.8MB) by merging/removing some fields (and adding type structs to define rendering properties based on type to save a little space)
removed 11 parameters to particle() function

------------------------------------------------------------------------
r5097 | havoc | 2005-03-19 03:14:11 +0100 (Sat, 19 Mar 2005) | 2 lines

fix a warning

------------------------------------------------------------------------
r5096 | havoc | 2005-03-19 03:11:44 +0100 (Sat, 19 Mar 2005) | 2 lines

made detailtextures check r_detailtextures again

------------------------------------------------------------------------
r5095 | havoc | 2005-03-19 03:10:54 +0100 (Sat, 19 Mar 2005) | 2 lines

added GAME_THEHUNTED

------------------------------------------------------------------------
r5094 | havoc | 2005-03-18 03:04:25 +0100 (Fri, 18 Mar 2005) | 2 lines

removed r_floatbuildlightmaps cvar and related code (since it was only useful to dlights)

------------------------------------------------------------------------
r5093 | havoc | 2005-03-18 02:58:31 +0100 (Fri, 18 Mar 2005) | 2 lines

got rid of aliasskin/aliaslayer system for rendering models, now uses texture_t like maps do

------------------------------------------------------------------------
r5092 | black | 2005-03-17 19:57:45 +0100 (Thu, 17 Mar 2005) | 6 lines

Well, you might not like this change, but I dont like it the way it is, so
it's up to you to fix it in a convenient way.
I certainly dont want to have my config files and qconsole.log (and possibly
all other files DP creates) in some linux-style .darkplaces folder(!) somewhere
hidden in my CVS home directory.

------------------------------------------------------------------------
r5091 | havoc | 2005-03-17 11:17:07 +0100 (Thu, 17 Mar 2005) | 2 lines

q3 shader parsing now sets more materialflags (such as transparency)

------------------------------------------------------------------------
r5090 | havoc | 2005-03-17 08:21:18 +0100 (Thu, 17 Mar 2005) | 2 lines

removed a lot of renderer cruft (such as 48% of gl_rsurf.c) as a result of the previous commit

------------------------------------------------------------------------
r5089 | havoc | 2005-03-17 08:11:41 +0100 (Thu, 17 Mar 2005) | 4 lines

merged q1bsp and q3bsp surface rendering
disabled MarkLights based dlights (lightmap dlights, etc) because they're just too hard to maintain (broken AGAIN), and the code for them will be removed soon
renamed r_shadow_whitetexture and related textures to r_texture_white and such, and moved them to gl_rmain for more general use

------------------------------------------------------------------------
r5088 | havoc | 2005-03-15 19:42:23 +0100 (Tue, 15 Mar 2005) | 2 lines

Host_SaveConfig_f now refuses to save if Host_Frame hasn't completed the first frame yet (this means if it crashes during the first frame it won't save a config)

------------------------------------------------------------------------
r5087 | havoc | 2005-03-15 19:12:44 +0100 (Tue, 15 Mar 2005) | 2 lines

Willis updated map list in GAME_TRANSFUSION menus

------------------------------------------------------------------------
r5086 | havoc | 2005-03-15 01:12:19 +0100 (Tue, 15 Mar 2005) | 2 lines

now searchs LAN for servers (using a broadcast message to port 26000) like Quake did

------------------------------------------------------------------------
r5085 | havoc | 2005-03-15 01:09:07 +0100 (Tue, 15 Mar 2005) | 2 lines

LHNET now enables broadcast send/receive on any UDP ports it opens

------------------------------------------------------------------------
r5084 | black | 2005-03-14 22:16:13 +0100 (Mon, 14 Mar 2005) | 4 lines

-Beautified a function just for fun (better variable names).
-Added the prvm builtin altstr_ins which inserts a new item into an
 altstring.

------------------------------------------------------------------------
r5083 | havoc | 2005-03-12 01:48:36 +0100 (Sat, 12 Mar 2005) | 2 lines

Willis disabled entity filtering based on skill/deathmatch in GAME_TRANSFUSION because it does the filtering in qc

------------------------------------------------------------------------
r5082 | havoc | 2005-03-12 01:47:53 +0100 (Sat, 12 Mar 2005) | 2 lines

Willis changed skill level numbers in GAME_TRANSFUSION menus

------------------------------------------------------------------------
r5081 | molivier | 2005-03-11 14:13:01 +0100 (Fri, 11 Mar 2005) | 2 lines

Several fixes related to files opened in write or append mode, and to the ungetc character. Added FS_Purge (discard all buffered data, including the ungetc character)

------------------------------------------------------------------------
r5080 | havoc | 2005-03-10 23:11:19 +0100 (Thu, 10 Mar 2005) | 5 lines

added basematerialflags/currentmaterialflags to texture_t which completely replace the SURF_* flags and SURFRENDER_* flags
eliminated the flags and plane fields from q1bsp surfaces
q1bsp texture_t generation now sets supercontents (eliminating need for the SURF_SOLIDCLIP surface flag)
split R_UpdateTextureInfo into two versions for updating a single texture and updating a whole entity's textures respectively, so transparency rendering can now call R_UpdateTextureInfo instead of having duplicate code

------------------------------------------------------------------------
r5079 | havoc | 2005-03-10 04:15:27 +0100 (Thu, 10 Mar 2005) | 2 lines

disabled O_NONBLOCKING flag on win32

------------------------------------------------------------------------
r5078 | havoc | 2005-03-10 00:42:16 +0100 (Thu, 10 Mar 2005) | 2 lines

slight code reduction to DrawShadowVolume functions

------------------------------------------------------------------------
r5077 | havoc | 2005-03-10 00:41:01 +0100 (Thu, 10 Mar 2005) | 2 lines

removed some unused code

------------------------------------------------------------------------
r5076 | havoc | 2005-03-10 00:04:15 +0100 (Thu, 10 Mar 2005) | 2 lines

merged some more q3bsp functions, now only loading and LightPoint/TraceBox differ

------------------------------------------------------------------------
r5075 | havoc | 2005-03-10 00:01:19 +0100 (Thu, 10 Mar 2005) | 2 lines

corrected an error message

------------------------------------------------------------------------
r5074 | havoc | 2005-03-09 18:36:50 +0100 (Wed, 09 Mar 2005) | 2 lines

cl_capturevideo_raw* modes now use O_NONBLOCKING file access for more performance

------------------------------------------------------------------------
r5073 | molivier | 2005-03-09 14:09:35 +0100 (Wed, 09 Mar 2005) | 2 lines

Moved audio CD initialization / finalization out of the video code so the CD music doesn't stop playing when doing a vid_restart.

------------------------------------------------------------------------
r5072 | molivier | 2005-03-09 14:05:29 +0100 (Wed, 09 Mar 2005) | 2 lines

We didn't exit the "Reset to defaults" menu when answering "yes". Moved the "vertical sync" line a bit lower in the video options menu

------------------------------------------------------------------------
r5071 | molivier | 2005-03-09 14:03:30 +0100 (Wed, 09 Mar 2005) | 2 lines

Fixed and updated a few error messages

------------------------------------------------------------------------
r5070 | havoc | 2005-03-09 01:35:02 +0100 (Wed, 09 Mar 2005) | 2 lines

fixed bugs in q1bsp multitexture surface rendering (and singletexture detail rendering as well)

------------------------------------------------------------------------
r5069 | havoc | 2005-03-09 01:24:59 +0100 (Wed, 09 Mar 2005) | 2 lines

removed R_BoxVisible and added model->brush.BoxTouchingVisibleLeafs for more flexibility

------------------------------------------------------------------------
r5068 | havoc | 2005-03-09 01:22:46 +0100 (Wed, 09 Mar 2005) | 2 lines

fixed gamma support in video saving (don't know why it was disabled before)

------------------------------------------------------------------------
r5067 | havoc | 2005-03-09 01:22:22 +0100 (Wed, 09 Mar 2005) | 2 lines

removed the 1/4th volume scaledown on video capture

------------------------------------------------------------------------
r5066 | havoc | 2005-03-08 18:56:22 +0100 (Tue, 08 Mar 2005) | 2 lines

made FS_Tell and FS_Seek work when writing files

------------------------------------------------------------------------
r5065 | havoc | 2005-03-08 16:20:07 +0100 (Tue, 08 Mar 2005) | 3 lines

added R_BoxVisible (used instead of VIS_CullBox)
rewrote portions of R_MarkEntities to be more efficient and more sane (and to use R_BoxVisible obviously)

------------------------------------------------------------------------
r5064 | havoc | 2005-03-08 16:18:19 +0100 (Tue, 08 Mar 2005) | 2 lines

fixed a mistake regarding clusterlist

------------------------------------------------------------------------
r5063 | havoc | 2005-03-08 15:09:34 +0100 (Tue, 08 Mar 2005) | 2 lines

renamed Mod_Q1BSP_BoxTouchingPVS to Mod_Brush_BoxTouchingPVS and removed the Q3BSP version (which is no longer different)

------------------------------------------------------------------------
r5062 | havoc | 2005-03-08 15:02:21 +0100 (Tue, 08 Mar 2005) | 4 lines

added r_worldleafvisible flags array for more exact visibility checking (VIS_CullBox does not use this yet however, only rtlights do)
moved r_pvsbits, r_worldsurfacevisible, r_worldleafvisible to gl_rsurf.c
migrated r_pvsbits FatPVS call from just above R_WorldVisibility to inside it

------------------------------------------------------------------------
r5061 | havoc | 2005-03-08 14:49:25 +0100 (Tue, 08 Mar 2005) | 2 lines

further cleaning of R_WorldVisibility, which now works the same on q1bsp and q3bsp (except that q3bsp always uses the pvs method since the loader doesn't generate portals yet, and doesn't provide a PointInLeaf function)

------------------------------------------------------------------------
r5060 | havoc | 2005-03-08 14:48:27 +0100 (Tue, 08 Mar 2005) | 2 lines

removed/changed a few mod_brushq1 checks

------------------------------------------------------------------------
r5059 | havoc | 2005-03-08 14:16:06 +0100 (Tue, 08 Mar 2005) | 2 lines

eliminated q3meffect_t (now uses q3deffect_t)

------------------------------------------------------------------------
r5058 | havoc | 2005-03-08 14:10:30 +0100 (Tue, 08 Mar 2005) | 2 lines

changed uses of q3mmodel_t to q3dmodel_t because there are no actual differences anymore

------------------------------------------------------------------------
r5057 | havoc | 2005-03-08 14:05:11 +0100 (Tue, 08 Mar 2005) | 2 lines

changed brushq3 submodel firstsurface and firstbrush from pointers to integers

------------------------------------------------------------------------
r5056 | havoc | 2005-03-08 13:51:27 +0100 (Tue, 08 Mar 2005) | 2 lines

reenabled CL_TeleportSplash (and removed a bogus parameter), reduced teleport light radius to improve performance

------------------------------------------------------------------------
r5055 | havoc | 2005-03-08 03:48:26 +0100 (Tue, 08 Mar 2005) | 2 lines

fix continual setting of sys_ticrate to 0.01 due to float rounding errors (now has a slight error tolerance)

------------------------------------------------------------------------
r5054 | havoc | 2005-03-08 02:50:47 +0100 (Tue, 08 Mar 2005) | 2 lines

slight optimization to q1bsp rtlight surface visibility checking, added surface visibility checking to q3bsp rtlight rendering (should now be on par with q1bsp rtlight rendering speed)

------------------------------------------------------------------------
r5053 | havoc | 2005-03-08 02:39:42 +0100 (Tue, 08 Mar 2005) | 2 lines

added firstmodelbrush/nummodelbrushes fields to model struct, and moved brushes from brushq3 to brush, this eliminated all uses of the submodel structures in q3bsp (except during loading)

------------------------------------------------------------------------
r5052 | havoc | 2005-03-08 02:27:27 +0100 (Tue, 08 Mar 2005) | 2 lines

another C99 lazy variable fixed

------------------------------------------------------------------------
r5051 | havoc | 2005-03-08 00:28:42 +0100 (Tue, 08 Mar 2005) | 6 lines

merged q3msurface_t into msurface_t
renamed brushq1./brushq3. surface stuff to brush.
surface->texinfo->texture is now also copied into surface->texture for convenient access (and consistency with q3bsp)
the qc surface info extension has been made q3bsp friendly (however querying a surface's points won't give very sane results on q3bsp surfaces!)
a little cruft removal in some structures

------------------------------------------------------------------------
r5050 | havoc | 2005-03-07 21:55:59 +0100 (Mon, 07 Mar 2005) | 2 lines

fixed q3bsp bug where firstmodelsurface was not being set (caused bmodels to render world surfaces instead of their own)

------------------------------------------------------------------------
r5049 | molivier | 2005-03-07 14:07:09 +0100 (Mon, 07 Mar 2005) | 2 lines

Removed a couple of warnings when compiling with MSVC6

------------------------------------------------------------------------
r5048 | havoc | 2005-03-06 22:26:33 +0100 (Sun, 06 Mar 2005) | 2 lines

a major rename - instead of q1bsp code having surf, and q3bsp code having face, both now use surface

------------------------------------------------------------------------
r5047 | havoc | 2005-03-06 21:37:14 +0100 (Sun, 06 Mar 2005) | 2 lines

eliminated surf->poly_* fields and cleaned up Mod_LoadFaces a great deal

------------------------------------------------------------------------
r5046 | havoc | 2005-03-06 20:47:29 +0100 (Sun, 06 Mar 2005) | 2 lines

merged q3mtexture_t into texture_t, note that only the name and skin fields are shared, merging the rest is more difficult

------------------------------------------------------------------------
r5045 | havoc | 2005-03-06 20:20:31 +0100 (Sun, 06 Mar 2005) | 2 lines

removed texture_t->number and q3mtexture_t->number

------------------------------------------------------------------------
r5044 | havoc | 2005-03-06 20:16:51 +0100 (Sun, 06 Mar 2005) | 2 lines

moved brushq3.submodel to brush, removed brushq3.data_thismodel (instead looking it up using submodel), other minor cleanups

------------------------------------------------------------------------
r5043 | havoc | 2005-03-06 20:00:09 +0100 (Sun, 06 Mar 2005) | 2 lines

moved brushq1 nodes/leafs/leaffaces/planes/portals fields to brush, along with brushq3 leafbrushes to make things even more consistent

------------------------------------------------------------------------
r5042 | havoc | 2005-03-06 18:09:47 +0100 (Sun, 06 Mar 2005) | 3 lines

renamed q1bsp marksurfaces to leaffaces for consistency with q2bsp and q3bsp naming
replaced q3mnode_t and q3mleaf_t with mnode_t and mleaf_t (which now contain supersets of the fields between the two bsp versions)

------------------------------------------------------------------------
r5041 | havoc | 2005-03-06 17:22:26 +0100 (Sun, 06 Mar 2005) | 3 lines

changed leafbrushes from pointers to ints to be consistent with leaffaces
moved q3m* structs and stuff to model_brush.h

------------------------------------------------------------------------
r5040 | havoc | 2005-03-06 17:12:14 +0100 (Sun, 06 Mar 2005) | 2 lines

moved pvs handling from R_Q3BSP_DrawFaces to R_WorldVisibility (now handles q1bsp and q3bsp), made R_Q3BSP_DrawFaces more similar to R_DrawSurfaces

------------------------------------------------------------------------
r5039 | havoc | 2005-03-06 16:31:34 +0100 (Sun, 06 Mar 2005) | 2 lines

changed leafface references to ints (making leaffacenum obslete) for more consistency between q1bsp and q3bsp leaf structures

------------------------------------------------------------------------
r5038 | havoc | 2005-03-06 15:58:54 +0100 (Sun, 06 Mar 2005) | 4 lines

got rid of node->contents, leaf->contents kept (only needed temporarily during loading to generate collision hull 0), now checks node->plane to know if it is a node (leaf has a NULL plane pointer)
fixed the very messed up contents translation in Q3BSP
various other cleanups

------------------------------------------------------------------------
r5037 | havoc | 2005-03-06 15:56:44 +0100 (Sun, 06 Mar 2005) | 2 lines

changed waterlevel checking to use SUPERCONTENTS instead of CONTENTS, this might be a slight speedup (hasn't completely gotten rid of use of CONTENTS though, because that still must be reported to the QC)

------------------------------------------------------------------------
r5036 | havoc | 2005-03-06 15:50:43 +0100 (Sun, 06 Mar 2005) | 2 lines

removed the commented out RecursiveHullCheckPoint function

------------------------------------------------------------------------
r5035 | havoc | 2005-03-06 15:49:48 +0100 (Sun, 06 Mar 2005) | 2 lines

changed all uses of CL_PointQ1Contents to CL_PointSuperContents in particle system (except with WORKINGLQUAKE defined)

------------------------------------------------------------------------
r5034 | havoc | 2005-03-06 15:48:51 +0100 (Sun, 06 Mar 2005) | 2 lines

added SUPERCONTENTS_NODROP

------------------------------------------------------------------------
r5033 | havoc | 2005-03-06 12:42:40 +0100 (Sun, 06 Mar 2005) | 2 lines

lazy variable declarations strike again

------------------------------------------------------------------------
r5032 | havoc | 2005-03-06 12:35:38 +0100 (Sun, 06 Mar 2005) | 2 lines

variable declaration after function call...  oops

------------------------------------------------------------------------
r5031 | havoc | 2005-03-05 17:13:40 +0100 (Sat, 05 Mar 2005) | 2 lines

tweaked the order of checks in an if, and removed the previously mentioned pvs texture chain stuff from the header (forgot to commit this before)

------------------------------------------------------------------------
r5030 | havoc | 2005-03-05 16:18:13 +0100 (Sat, 05 Mar 2005) | 2 lines

eliminated brushq1.pvs* variables, pvstexture surface chain stuff, and cleaned up related code

------------------------------------------------------------------------
r5029 | havoc | 2005-03-05 11:40:45 +0100 (Sat, 05 Mar 2005) | 2 lines

more refactoring of q1bsp rendering

------------------------------------------------------------------------
r5028 | havoc | 2005-03-03 15:21:31 +0100 (Thu, 03 Mar 2005) | 2 lines

fixed Mod_AllocSurfMesh (doesn't crash now)

------------------------------------------------------------------------
r5027 | havoc | 2005-03-03 15:20:07 +0100 (Thu, 03 Mar 2005) | 2 lines

cleaned up q1bsp surface rendering a bit more

------------------------------------------------------------------------
r5026 | molivier | 2005-03-03 15:11:58 +0100 (Thu, 03 Mar 2005) | 5 lines

- Toggled "strip executable" in the Dev-C++ project file and updated the version info
- Added a Dev-C++ project file for the dedicated server
- In Makefile.inc, some libs were listed twice in the command line while compiling a dedicated server on Win32
- A few very minor changes in snd_ogg.c

------------------------------------------------------------------------
r5025 | havoc | 2005-03-03 14:45:12 +0100 (Thu, 03 Mar 2005) | 2 lines

cleaned surface drawing in q1bsp and q3bsp a bit

------------------------------------------------------------------------
r5024 | havoc | 2005-03-03 13:50:25 +0100 (Thu, 03 Mar 2005) | 2 lines

some optimizations to q3bsp surface rendering

------------------------------------------------------------------------
r5023 | havoc | 2005-03-03 10:23:48 +0100 (Thu, 03 Mar 2005) | 2 lines

Willis improved the Transfusion menu to support singleplayer

------------------------------------------------------------------------
r5022 | havoc | 2005-03-03 07:02:21 +0100 (Thu, 03 Mar 2005) | 2 lines

q1bsp and q3bsp loaders now use model->meshlist for storing all the geometry of the surfaces (q1bsp loader does not yet enforce the 65536 vertex limit however)

------------------------------------------------------------------------
r5021 | havoc | 2005-03-02 12:24:29 +0100 (Wed, 02 Mar 2005) | 2 lines

modified q3msurface_t to use a surfmesh (although not cleanly)

------------------------------------------------------------------------
r5020 | havoc | 2005-03-02 12:03:46 +0100 (Wed, 02 Mar 2005) | 2 lines

improved/modified q1bsp surfmesh stuff for more general use (to make q3bsp able to use it)

------------------------------------------------------------------------
r5019 | havoc | 2005-03-02 06:44:33 +0100 (Wed, 02 Mar 2005) | 2 lines

improved r_texturestats output (now gives a total for each pool) and merged some similar code in it

------------------------------------------------------------------------
r5018 | havoc | 2005-03-02 06:36:23 +0100 (Wed, 02 Mar 2005) | 2 lines

default sv_public to 1

------------------------------------------------------------------------
r5015 | havoc | 2005-02-11 23:22:35 +0100 (Fri, 11 Feb 2005) | 2 lines

changed color prefix character to ^ (@ is not acceptable)

------------------------------------------------------------------------
r5014 | havoc | 2005-02-11 23:20:42 +0100 (Fri, 11 Feb 2005) | 2 lines

removed key-below-escape forced toggleconsole, so that german keyboards can type ^

------------------------------------------------------------------------
r5013 | havoc | 2005-02-11 06:38:37 +0100 (Fri, 11 Feb 2005) | 2 lines

slight safety improvement in frameblend generation, may fix a crash Willis reported in Nexuiz

------------------------------------------------------------------------
r5011 | havoc | 2005-02-07 18:46:55 +0100 (Mon, 07 Feb 2005) | 2 lines

now does a togglemenu if there were no demos started and not connecting to a server and not starting a server

------------------------------------------------------------------------
r5007 | havoc | 2005-02-06 17:52:13 +0100 (Sun, 06 Feb 2005) | 2 lines

342

------------------------------------------------------------------------
r5006 | havoc | 2005-02-06 17:47:06 +0100 (Sun, 06 Feb 2005) | 2 lines

rain drops now make rain splashes

------------------------------------------------------------------------
r5005 | havoc | 2005-02-06 11:21:21 +0100 (Sun, 06 Feb 2005) | 2 lines

added Venim's dpmaster server (now up to 3 masters)

------------------------------------------------------------------------
r5004 | black | 2005-02-05 21:39:45 +0100 (Sat, 05 Feb 2005) | 2 lines

-Only print queried servers once to the console.

------------------------------------------------------------------------
r5002 | havoc | 2005-02-04 14:48:17 +0100 (Fri, 04 Feb 2005) | 2 lines

implemented DP_CON_STARTMAP extension which defines two configurable aliases to choose a start map

------------------------------------------------------------------------
r5001 | havoc | 2005-02-04 12:50:50 +0100 (Fri, 04 Feb 2005) | 2 lines

now lerps punchangle and punchvector

------------------------------------------------------------------------
r5000 | havoc | 2005-02-04 12:04:06 +0100 (Fri, 04 Feb 2005) | 2 lines

enable key repeat

------------------------------------------------------------------------
r4999 | havoc | 2005-02-04 11:30:36 +0100 (Fri, 04 Feb 2005) | 2 lines

realtime dlights are now overridden by gl_flashblend (as was intended)

------------------------------------------------------------------------
r4998 | havoc | 2005-02-04 11:19:50 +0100 (Fri, 04 Feb 2005) | 2 lines

fixed r_editlights_edit cubemap (it was calling strlcpy with the wrong length limit)

------------------------------------------------------------------------
r4997 | havoc | 2005-02-04 10:54:52 +0100 (Fri, 04 Feb 2005) | 2 lines

cl_particles_size works again

------------------------------------------------------------------------
r4996 | havoc | 2005-02-04 10:23:01 +0100 (Fri, 04 Feb 2005) | 2 lines

changed 3 clamp calls in the GLSL fragment shader to max calls instead, for a small speed gain (at least on ATI)

------------------------------------------------------------------------
r4995 | havoc | 2005-02-04 10:15:10 +0100 (Fri, 04 Feb 2005) | 2 lines

vid_vsync 0 now causes a warning due to the fact GLX_SGI_swap_control has no way to turn off vsync, and suggests vid_restart

------------------------------------------------------------------------
r4994 | havoc | 2005-02-04 08:29:02 +0100 (Fri, 04 Feb 2005) | 2 lines

vid_usingvsync now set to false after a vid_restart (so that vsync will be set again if it's on)

------------------------------------------------------------------------
r4993 | havoc | 2005-02-04 08:19:58 +0100 (Fri, 04 Feb 2005) | 2 lines

no longer hits triangles of your own player model when tracing the prydoncursor from first person view

------------------------------------------------------------------------
r4992 | havoc | 2005-02-04 08:18:53 +0100 (Fri, 04 Feb 2005) | 2 lines

removed unused variable font_size

------------------------------------------------------------------------
r4991 | molivier | 2005-02-03 13:17:10 +0100 (Thu, 03 Feb 2005) | 2 lines

Replaced snprintf and vnsprintf calls by dpsnprintf and dpvsnprintf calls, to ensure coherence among the various platforms (the Win32 versions of those functions aren't C99 compatible). dp(v)snprintf functions return -1 when the buffer is too small to contain all the data, and insure null termination.

------------------------------------------------------------------------
r4990 | black | 2005-02-02 22:14:52 +0100 (Wed, 02 Feb 2005) | 2 lines

Commented out the printing of the weapon number in the weapon selection.

------------------------------------------------------------------------
r4989 | black | 2005-02-02 21:54:45 +0100 (Wed, 02 Feb 2005) | 4 lines

FCVS: ----------------------------------------------------------------------
-Changed the scoreboard for nexuiz (only).
-Fixed a bug in the old quake menu.

------------------------------------------------------------------------
r4988 | black | 2005-02-02 21:25:07 +0100 (Wed, 02 Feb 2005) | 2 lines

Fixed a bug and also added support color support to the chat messages.

------------------------------------------------------------------------
r4987 | black | 2005-02-02 20:30:16 +0100 (Wed, 02 Feb 2005) | 4 lines

Added support for color tags to the console. Use the @ char followed by a
number to switch the color. Currently I have only the color indices 0-7 are
valid.

------------------------------------------------------------------------
r4986 | molivier | 2005-02-02 10:12:02 +0100 (Wed, 02 Feb 2005) | 2 lines

Fixed Win32 wav sound driver (thanks to fuh for the bug report). Cleaned up some code in the process

------------------------------------------------------------------------
r4982 | havoc | 2005-01-29 03:21:52 +0100 (Sat, 29 Jan 2005) | 2 lines

reduced offsetmapping from 4 sample to 3 sample to make it work within Radeon 9500-9800/X300 limits

------------------------------------------------------------------------
r4975 | havoc | 2005-01-27 23:15:44 +0100 (Thu, 27 Jan 2005) | 2 lines

disabled snapping of render patch vertices (collision patch vertices are still snapped)

------------------------------------------------------------------------
r4971 | havoc | 2005-01-26 23:15:34 +0100 (Wed, 26 Jan 2005) | 3 lines

added support for skill values outside the range 0-3
GAME_TRANSFUSION now uses skill range 0-4

------------------------------------------------------------------------
r4970 | havoc | 2005-01-26 23:11:07 +0100 (Wed, 26 Jan 2005) | 2 lines

fixed fov calculations so viewzoom isn't so weird anymore, this also fixes the 'double zoom' bug (viewzoom was being applied twice)

------------------------------------------------------------------------
r4969 | havoc | 2005-01-26 10:12:59 +0100 (Wed, 26 Jan 2005) | 2 lines

fix permutation failed warning to print the right thing

------------------------------------------------------------------------
r4968 | havoc | 2005-01-26 04:39:45 +0100 (Wed, 26 Jan 2005) | 2 lines

fix a stupid reverse bug (was using ! where I shouldn't)

------------------------------------------------------------------------
r4967 | havoc | 2005-01-26 04:38:50 +0100 (Wed, 26 Jan 2005) | 2 lines

print glsl/light as the shader that failed

------------------------------------------------------------------------
r4966 | havoc | 2005-01-26 02:40:53 +0100 (Wed, 26 Jan 2005) | 2 lines

disable shader permutations that fell back to software fragment shader (software vertex shader is ok)

------------------------------------------------------------------------
r4965 | havoc | 2005-01-26 00:59:23 +0100 (Wed, 26 Jan 2005) | 2 lines

fixed the embedded fragment and vertex shaders (somehow mispasted fragment shader into both, and the fragment shader was the old NVIDIA-only one)

------------------------------------------------------------------------
r4964 | havoc | 2005-01-25 21:11:06 +0100 (Tue, 25 Jan 2005) | 3 lines

removed obsolete FS_Close call in LoadGame
fixed two int -> unsigned char conversion warnings

------------------------------------------------------------------------
r4963 | havoc | 2005-01-25 21:05:18 +0100 (Tue, 25 Jan 2005) | 5 lines

now supports Mac and Windows newlines everywhere
all text files are now saved in UNIX format
removed FS_Gets and FS_Getline (they were only used by the loadgame code along with sscanf...  bad)
added FS_UnGetc (needed for Windows newline support in FRIK_FILE fgets)

------------------------------------------------------------------------
r4962 | havoc | 2005-01-25 02:32:40 +0100 (Tue, 25 Jan 2005) | 2 lines

fix stupid typo in GLSL shader

------------------------------------------------------------------------
r4961 | havoc | 2005-01-25 00:36:00 +0100 (Tue, 25 Jan 2005) | 3 lines

made GLSL lighting work on ATI (NVIDIA was letting me use sloppier code)
added more CHECKGLERROR calls during GLSL lighting rendering

------------------------------------------------------------------------
r4960 | havoc | 2005-01-24 23:05:51 +0100 (Mon, 24 Jan 2005) | 2 lines

changed offsetmapping bias to -0.04 so that it never samples off the model skins

------------------------------------------------------------------------
r4959 | havoc | 2005-01-24 22:51:16 +0100 (Mon, 24 Jan 2005) | 2 lines

added hacky workaround for nvidia GLSL bug (state screwups after switching back to program 0 which go away if I draw something (even an empty Begin...End) after the switch)

------------------------------------------------------------------------
r4958 | havoc | 2005-01-24 22:49:41 +0100 (Mon, 24 Jan 2005) | 2 lines

added surfaceparm pointlight to known surfaceparm list

------------------------------------------------------------------------
r4957 | havoc | 2005-01-24 21:27:42 +0100 (Mon, 24 Jan 2005) | 2 lines

changed the flat bump texture (for no bumpmap textures) to have a 128 height instead of 255 so it's not affected by offset mapping

------------------------------------------------------------------------
r4956 | havoc | 2005-01-24 19:32:05 +0100 (Mon, 24 Jan 2005) | 2 lines

switch back to program 0 when done setting up GLSL shaders

------------------------------------------------------------------------
r4955 | havoc | 2005-01-23 23:19:22 +0100 (Sun, 23 Jan 2005) | 2 lines

added documentation on glsl cvars to r_shadow_help

------------------------------------------------------------------------
r4954 | havoc | 2005-01-23 23:16:33 +0100 (Sun, 23 Jan 2005) | 4 lines

GLSL shader per pixel lighting implemented (with optimized permutations)
offset mapping implemented in GLSL lighting shader (looks really cool if a little slow, enabled by default)
cleaned up some internal handling ambientscale/diffusescale/specularscale/gloss mode design issues in R_Shadow_RenderLighting

------------------------------------------------------------------------
r4953 | havoc | 2005-01-23 23:12:22 +0100 (Sun, 23 Jan 2005) | 3 lines

rearchitected renderer backend to have support for independent number of texture image units, texture coord array units, and texture env blend units
added GL_Backend_CompileProgram and GL_Backend_FreeProgram for GLSL support

------------------------------------------------------------------------
r4952 | havoc | 2005-01-23 23:10:02 +0100 (Sun, 23 Jan 2005) | 2 lines

fixed backwards normalmaps generated from bumpmaps (... weird!), and now stores bumpmap into alpha channel of normalmap for use by shaders

------------------------------------------------------------------------
r4951 | havoc | 2005-01-23 07:39:07 +0100 (Sun, 23 Jan 2005) | 3 lines

fixed blendfunc issues with single pass lighting (such as ambient pass) which were using GL_DST_ALPHA when they shouldn't have been (fixes the 'bright shadows' issue which occurred from multiple lights in some cases)
added a usestencil variable in rtlight rendering just to make it a little more clear in the code

------------------------------------------------------------------------
r4950 | havoc | 2005-01-23 07:36:14 +0100 (Sun, 23 Jan 2005) | 2 lines

fixed scaling of cl_netlocalping cvar (it was multiplying by 1000 instead of dividing)

------------------------------------------------------------------------
r4949 | havoc | 2005-01-21 08:30:09 +0100 (Fri, 21 Jan 2005) | 2 lines

disable vid_vsync by default

------------------------------------------------------------------------
r4948 | havoc | 2005-01-21 04:34:22 +0100 (Fri, 21 Jan 2005) | 2 lines

if hardware gamma setting fails, try to restore system gamma anyway (Windows stupidity)

------------------------------------------------------------------------
r4947 | havoc | 2005-01-21 04:22:11 +0100 (Fri, 21 Jan 2005) | 2 lines

changed GAME_ init data to have a separate user config directory for each game type (~/.darkplaces for most), and two game dirs rather than an implied id1 (so now nexuiz doesn't look for id1 for example)

------------------------------------------------------------------------
r4946 | molivier | 2005-01-19 10:09:20 +0100 (Wed, 19 Jan 2005) | 14 lines

- Got rid of all the FILE* stuff in the FS code, relying on low-level
functions exclusively. It now manages its own per-file 2KB read buffers.
Writes are no longer buffered.
- Removed function "FS_Flush" and cvar "log_sync", since they're no
longer relevant
- Package's file descriptors are now duplicated when opening a new file
inside a package, to make package substitution at run time impossible on
non-Win32 systems. Added a couple of "lseek" when necessary (before
"read" calls in "FS_Read").
- Removed unused functions "FS_Eof", "Log_Print" and "S_ClearBuffer"
- Several other minor changes and fixes in the FS code
- Changed log open mode to "a" from "at" since 't' seems a Win32-only
extension

------------------------------------------------------------------------
r4945 | molivier | 2005-01-18 11:02:18 +0100 (Tue, 18 Jan 2005) | 2 lines

DSP files must be treated as binary files

------------------------------------------------------------------------
r4944 | havoc | 2005-01-18 02:38:44 +0100 (Tue, 18 Jan 2005) | 2 lines

disabled HostCache_Test code because it's wrecking the server browser in each release build

------------------------------------------------------------------------
r4943 | havoc | 2005-01-18 00:30:20 +0100 (Tue, 18 Jan 2005) | 2 lines

now adapts sv.num_edicts according to how many edicts are found by SV_Physics, so if a lot of temporary stuff spawns and removes itself it will knock the num_edicts back down

------------------------------------------------------------------------
r4942 | havoc | 2005-01-18 00:17:31 +0100 (Tue, 18 Jan 2005) | 2 lines

implemented the 'don't move projectiles on first frame' hack a different way

------------------------------------------------------------------------
r4941 | havoc | 2005-01-17 23:52:16 +0100 (Mon, 17 Jan 2005) | 2 lines

reverted back to per-entity prethink-think-move-postthink process to fix mods

------------------------------------------------------------------------
r4940 | havoc | 2005-01-17 23:11:16 +0100 (Mon, 17 Jan 2005) | 2 lines

now supports nextthink < 0 again... sigh

------------------------------------------------------------------------
r4939 | havoc | 2005-01-17 06:35:55 +0100 (Mon, 17 Jan 2005) | 2 lines

hush fraction out of bounds warnings in CL_SelectTraceline

------------------------------------------------------------------------
r4938 | havoc | 2005-01-15 03:23:51 +0100 (Sat, 15 Jan 2005) | 2 lines

added saving of particles/nexbeam.tga (commented out like the particles/particlefont.tga saver is)

------------------------------------------------------------------------
r4937 | havoc | 2005-01-15 03:11:53 +0100 (Sat, 15 Jan 2005) | 4 lines

fixed a bug in texture generator that made all the particles too large in the particle font by one pixel (now they're smaller than their frame, like they were supposed to be), this fixes all the sharp edges on particles
changed nexbeam to be quite a bit brighter in the center than the sides (as I really wanted it all along)
nexbeam no longer scrolls its texture (looked odd)

------------------------------------------------------------------------
r4936 | havoc | 2005-01-15 03:09:46 +0100 (Sat, 15 Jan 2005) | 2 lines

nexbeam is now white and 8 units wide (rather than two beams, one 12 units and one 5 units and each a different color)

------------------------------------------------------------------------
r4935 | havoc | 2005-01-15 03:08:45 +0100 (Sat, 15 Jan 2005) | 2 lines

normalize after the CrossProduct

------------------------------------------------------------------------
r4934 | havoc | 2005-01-15 02:53:55 +0100 (Sat, 15 Jan 2005) | 2 lines

fix the odd distortion on beam polygons that tends to make their end kind of vanish to a point

------------------------------------------------------------------------
r4933 | havoc | 2005-01-15 00:39:47 +0100 (Sat, 15 Jan 2005) | 2 lines

fixed a crash with lights that have no clusters (a light outside the level) by allocating the clusterpvs even if there are no clusters

------------------------------------------------------------------------
r4932 | havoc | 2005-01-13 19:26:26 +0100 (Thu, 13 Jan 2005) | 2 lines

now skips entire rtlight rendering process if light is too dark or does not emit any surface light - another 30% speed gain

------------------------------------------------------------------------
r4931 | havoc | 2005-01-13 09:14:54 +0100 (Thu, 13 Jan 2005) | 2 lines

migrated push thinks back to SV_Physics_Pusher to fix a qc crash when touching a door

------------------------------------------------------------------------
r4930 | havoc | 2005-01-13 08:06:19 +0100 (Thu, 13 Jan 2005) | 2 lines

added Ludwig Nussel to Thanks to section

------------------------------------------------------------------------
r4929 | havoc | 2005-01-13 08:02:00 +0100 (Thu, 13 Jan 2005) | 2 lines

cloned and rewrote Collision_TraceLineTriangleFloat to optimize it slightly

------------------------------------------------------------------------
r4928 | havoc | 2005-01-13 07:45:34 +0100 (Thu, 13 Jan 2005) | 2 lines

forgot a parameter to S_FreeSfx

------------------------------------------------------------------------
r4927 | havoc | 2005-01-13 07:40:07 +0100 (Thu, 13 Jan 2005) | 2 lines

no longer calls S_StopAllSounds when sound system restarts, and cleaned up a sound freeing loop (just nicer code)

------------------------------------------------------------------------
r4926 | havoc | 2005-01-13 07:36:57 +0100 (Thu, 13 Jan 2005) | 2 lines

shuffled around some SCR_BeginLoadingPlaque calls so now SV_SpawnServer causes a loading plaque and ParseServerinfo only draws a loading plaque if there's no local server (which already did one), this cleans up the loading plaque management a great deal

------------------------------------------------------------------------
r4925 | havoc | 2005-01-13 07:32:29 +0100 (Thu, 13 Jan 2005) | 2 lines

bound fractions after trace code

------------------------------------------------------------------------
r4924 | havoc | 2005-01-13 07:31:30 +0100 (Thu, 13 Jan 2005) | 2 lines

added S_ClearBuffer to sound.h and snd_null.c

------------------------------------------------------------------------
r4923 | havoc | 2005-01-13 07:29:28 +0100 (Thu, 13 Jan 2005) | 3 lines

NetConn_Read no longer runs cl_packetloss rejection code if there is no packet (slight optimization/sanity improvement)
removed another SCR_BeginLoadingPlaque call

------------------------------------------------------------------------
r4922 | havoc | 2005-01-13 07:23:32 +0100 (Thu, 13 Jan 2005) | 3 lines

changed scr_conlines to be a local variable named conlines
now draws fullscreen console (between levels) without altering scr_con_current

------------------------------------------------------------------------
r4921 | havoc | 2005-01-13 07:21:17 +0100 (Thu, 13 Jan 2005) | 3 lines

removed a SCR_BeginLoadingPlaque when starting to play a demo
removed clearing of scr_conlines (useless)

------------------------------------------------------------------------
r4920 | havoc | 2005-01-13 07:17:26 +0100 (Thu, 13 Jan 2005) | 3 lines

use vid.conheight instead of scr_conlines in history scrolling
don't call SCR_UpdateScreen twice

------------------------------------------------------------------------
r4919 | havoc | 2005-01-13 07:13:57 +0100 (Thu, 13 Jan 2005) | 2 lines

remove a silly scr_conlines check

------------------------------------------------------------------------
r4918 | havoc | 2005-01-13 07:11:38 +0100 (Thu, 13 Jan 2005) | 2 lines

bound the fractions in CL_TraceLine instead of posting a warning, as out of bounds fractions have no harmful effects during a trace (to allow the bounds in the trace code to be removed)

------------------------------------------------------------------------
r4917 | havoc | 2005-01-13 07:07:23 +0100 (Thu, 13 Jan 2005) | 5 lines

rearranged entire SV_Physics process (which may break mods but I hope not!):
each operation (move, prethink, think, postthink) is now a separate stage (as an optimization mainly)
moves are now done before prethinks, thinks, and postthinks so that think-spawned entities do not move on their first frame (this fixes the issue that all projectiles appeared some distance from the player, dependent on server framerate, so rocket trails and other things look correct)
added a relink of any entity that moves for any reason (just an origin compare), not sure if this is a good idea but it is more consistent

------------------------------------------------------------------------
r4916 | havoc | 2005-01-13 07:01:58 +0100 (Thu, 13 Jan 2005) | 2 lines

changed numskins to 1 on q1bsp and q3bsp and numframes to 2 on q3bsp, to suppress some network warnings about non-existent frames/skins

------------------------------------------------------------------------
r4915 | havoc | 2005-01-13 07:00:45 +0100 (Thu, 13 Jan 2005) | 2 lines

no longer kicks off client if it got signon 1 twice during a reconnect (not sure why this happens occasionally though)

------------------------------------------------------------------------
r4914 | havoc | 2005-01-13 06:58:56 +0100 (Thu, 13 Jan 2005) | 2 lines

slight optimization to CL_RelinkNetworkEntities to scan entities faster

------------------------------------------------------------------------
r4913 | havoc | 2005-01-13 06:57:41 +0100 (Thu, 13 Jan 2005) | 2 lines

optimizations to CL_SelectTraceLine to scan entity list faster

------------------------------------------------------------------------
r4912 | havoc | 2005-01-13 06:55:46 +0100 (Thu, 13 Jan 2005) | 2 lines

don't generate vertex/normal/tangents until they are needed by lighting passes, this greatly improved framerates in nexuiz because a lot of models were having nothing to draw (apparently), perhaps their light color was black (odd...)

------------------------------------------------------------------------
r4911 | black | 2005-01-11 15:47:49 +0100 (Tue, 11 Jan 2005) | 2 lines

-Now the Nex weapon list works correctly again.

------------------------------------------------------------------------
r4910 | black | 2005-01-11 15:33:39 +0100 (Tue, 11 Jan 2005) | 3 lines

-The NEXUIZ_PLAYERMODEL is not game specific anymore.
-A small cosmetic change to the Nex weapon list code.

------------------------------------------------------------------------
r4909 | molivier | 2005-01-09 10:07:08 +0100 (Sun, 09 Jan 2005) | 9 lines

- Sys_LoadLibrary now accepts several possible names for a DLL (it fixes
the PK3 and Vorbis supports on NetBSD)
- Added a check for absolute paths in FS_CheckNastyPath
- Moved "COM_Shutdown" after "Log_Close" in the shutdown process to make
sure the FS code is still active when we close the log file
- Factorized some code in the FS module
- Made the "listdirectory" parameter "const"
- Fixed a warning in "prvm_cmds.c" when compiling with GCC

------------------------------------------------------------------------
r4908 | havoc | 2005-01-07 13:20:58 +0100 (Fri, 07 Jan 2005) | 2 lines

added #include "snd_main.h" to make this compile again (thanks to Ludwig Nussel for the patch)

------------------------------------------------------------------------
r4907 | havoc | 2005-01-07 13:19:03 +0100 (Fri, 07 Jan 2005) | 2 lines

changed libz.so to libz.so.1, libvorbis.so to libvorbis.so.0, and libvorbisfile.so to libvorbisfile.so.3 (thanks to Ludwig Nussel for the patch)

------------------------------------------------------------------------
r4906 | havoc | 2005-01-07 12:52:43 +0100 (Fri, 07 Jan 2005) | 2 lines

thanks to Ludwig Nussel for this patch to add ~/.darkplaces support for non-Windows users

------------------------------------------------------------------------
r4899 | havoc | 2005-01-06 14:31:31 +0100 (Thu, 06 Jan 2005) | 3 lines

swapped order of incr/decr renders for static shadow volumes (for some reason I had decr first, then incr, doesn't matter since they don't clamp but looks odd in the code)
remove quotes on cubemap names in .rtlights file loader (forgot to commit this previously)

------------------------------------------------------------------------
r4897 | tomaz | 2005-01-03 16:47:00 +0100 (Mon, 03 Jan 2005) | 2 lines

Cleaned up alot more memory leaks. (still get 720 leaks just running demo1.dem)

------------------------------------------------------------------------
r4896 | molivier | 2005-01-03 15:22:35 +0100 (Mon, 03 Jan 2005) | 2 lines

Fixed a warning about an uninitialized variable

------------------------------------------------------------------------
r4895 | molivier | 2005-01-03 15:20:56 +0100 (Mon, 03 Jan 2005) | 2 lines

Added S_Terminate to free all sound resources at shutdown

------------------------------------------------------------------------
r4894 | tomaz | 2005-01-01 22:52:27 +0100 (Sat, 01 Jan 2005) | 2 lines

Added CL_Shutdown which took care of 14 memory leaks totaling over 30mb. (needs more added to it)

------------------------------------------------------------------------
r4893 | black | 2005-01-01 20:00:33 +0100 (Sat, 01 Jan 2005) | 4 lines

-Added 2 builtins to make the hostcache stuff easier extensible.
 More to follow soon.
-Cmd now has a shutdown function so it doesnt leak anything (hopefully).

------------------------------------------------------------------------
r4892 | black | 2004-12-28 23:29:45 +0100 (Tue, 28 Dec 2004) | 5 lines

-Changed the name of PingTest to Test (it now also adds a name to the entry)
-Now the test function is enabled by default (just so Vermeulen can play around
 with it) - there shouldnt be any conflicts with real servers since I shift the
 ping of all emulated servers by 250 ms.

------------------------------------------------------------------------
r4891 | black | 2004-12-28 17:27:50 +0100 (Tue, 28 Dec 2004) | 2 lines

-Fixed a minor bug in ResetMasks.

------------------------------------------------------------------------
r4890 | black | 2004-12-27 17:54:32 +0100 (Mon, 27 Dec 2004) | 8 lines

-Added support for 10 hostcache masks, which will be at the same time.
 5 will be concatenated with AND and the other 5 with OR, so you'll have
 plenty of possibilities to mask whatever you want.
-Changed the mask structure and function to be a bit more generic.
-Added 3 new comparison operators (NOTEQUAL, CONTAINS and NOTCONTAIN - the
 latter two for strings)
-Adapted the builtins to work with multiple masks.

------------------------------------------------------------------------
r4889 | black | 2004-12-26 16:39:47 +0100 (Sun, 26 Dec 2004) | 2 lines

-Added a couple of VM builtins.

------------------------------------------------------------------------
r4888 | havoc | 2004-12-26 00:53:10 +0100 (Sun, 26 Dec 2004) | 2 lines

Updated email address in readme. (thanks to zarquon for pointing out that it was outdated)

------------------------------------------------------------------------
r4887 | havoc | 2004-12-23 01:18:03 +0100 (Thu, 23 Dec 2004) | 4 lines

changed r_bloom_resolution behavior to have a non-square texture to match the view width/height aspect
changed default r_bloom_resolution from 256 to 320
changed r_bloom_blur to adapt to resolutions (using 320 as a base value - blur 8 is 8 pixel blur at resolution 320, 16 pixel blur at 640, etc)

------------------------------------------------------------------------
r4886 | black | 2004-12-23 00:10:20 +0100 (Thu, 23 Dec 2004) | 5 lines

-Fixed a wrong parameter type in netconn.
-Made hostcache_cachecount public again.
-Added altstr_set to the new VM.
-Started work on the new hostcache interface for the menu qc.

------------------------------------------------------------------------
r4882 | havoc | 2004-12-22 19:19:59 +0100 (Wed, 22 Dec 2004) | 2 lines

don't send a bunch of svc_precache messages in the serverinfo packet (no longer produces svc_precache messages if server state is ss_loading)

------------------------------------------------------------------------
r4881 | black | 2004-12-22 16:43:39 +0100 (Wed, 22 Dec 2004) | 3 lines

-Fixed the binary insert in the hostcache.
-Fixed a bug in the old menu's serverlist.

------------------------------------------------------------------------
r4880 | havoc | 2004-12-22 01:12:47 +0100 (Wed, 22 Dec 2004) | 3 lines

some cleaning of the hostcache code
made the binary search insert loop actually do something

------------------------------------------------------------------------
r4879 | havoc | 2004-12-21 23:26:26 +0100 (Tue, 21 Dec 2004) | 2 lines

334

------------------------------------------------------------------------
r4878 | black | 2004-12-21 22:53:22 +0100 (Tue, 21 Dec 2004) | 2 lines

-Fixed a minor bug in the mask function

------------------------------------------------------------------------
r4877 | black | 2004-12-21 22:41:58 +0100 (Tue, 21 Dec 2004) | 4 lines

-Added a new hostcache interface:
 * Ascending und descending sorting by various fields is supported.
 * Its possible to mask entries (substrings or comparisons for numbers).

------------------------------------------------------------------------
r4876 | havoc | 2004-12-21 17:51:43 +0100 (Tue, 21 Dec 2004) | 2 lines

fixed up a number of nudging bugs in Collision_TraceLineTriangleFloat

------------------------------------------------------------------------
r4875 | havoc | 2004-12-21 17:48:37 +0100 (Tue, 21 Dec 2004) | 2 lines

some cleanup and hopefully improved accuracy

------------------------------------------------------------------------
r4874 | havoc | 2004-12-20 21:50:41 +0100 (Mon, 20 Dec 2004) | 2 lines

colormod now works

------------------------------------------------------------------------
r4873 | havoc | 2004-12-20 21:00:46 +0100 (Mon, 20 Dec 2004) | 2 lines

save seta cvars with the seta command, and normal ones without it

------------------------------------------------------------------------
r4872 | molivier | 2004-12-20 10:58:41 +0100 (Mon, 20 Dec 2004) | 4 lines

- Fixed JPEG support on Mac OS X
- Fixed Ogg Vorbis support on Mac OS X (the vorbis DLL is now also loaded manually since some OSes don't do that for us)
- Fixed loading of MD3 models on big-endian CPUs

------------------------------------------------------------------------
r4871 | black | 2004-12-19 23:55:00 +0100 (Sun, 19 Dec 2004) | 4 lines

-Fixed a "bug" in PRVM_iscachedpic - it always returned true and thus no
 images were precached (now it always returns false and the menu halts for
 ~4 seconds after starting)

------------------------------------------------------------------------
r4870 | black | 2004-12-19 15:40:34 +0100 (Sun, 19 Dec 2004) | 3 lines

-Added the cvar sv_progs, which allows you to set the name of the server
 progs file.

------------------------------------------------------------------------
r4869 | tomaz | 2004-12-19 03:12:08 +0100 (Sun, 19 Dec 2004) | 2 lines

332

------------------------------------------------------------------------
r4868 | havoc | 2004-12-19 03:10:00 +0100 (Sun, 19 Dec 2004) | 2 lines

334

------------------------------------------------------------------------
r4867 | tomaz | 2004-12-19 03:03:49 +0100 (Sun, 19 Dec 2004) | 2 lines

Projects for win32 dedicated and win32 SDL builds.

------------------------------------------------------------------------
r4866 | tomaz | 2004-12-19 02:27:50 +0100 (Sun, 19 Dec 2004) | 2 lines

Remove this file

------------------------------------------------------------------------
r4865 | havoc | 2004-12-19 02:09:34 +0100 (Sun, 19 Dec 2004) | 2 lines

GLX mode now supports GLX_SGI_swap_control for vid_vsync

------------------------------------------------------------------------
r4864 | tomaz | 2004-12-19 02:08:32 +0100 (Sun, 19 Dec 2004) | 2 lines

Adding a MSVC6 project file to build the win32 darkplaces-dedicated.

------------------------------------------------------------------------
r4863 | havoc | 2004-12-19 02:02:07 +0100 (Sun, 19 Dec 2004) | 2 lines

fixed misnamed variables

------------------------------------------------------------------------
r4862 | havoc | 2004-12-19 01:48:33 +0100 (Sun, 19 Dec 2004) | 2 lines

removed videosync code from timedemo

------------------------------------------------------------------------
r4861 | havoc | 2004-12-19 01:47:26 +0100 (Sun, 19 Dec 2004) | 2 lines

VID_Finish in WGL now turns off videosync during timedemos

------------------------------------------------------------------------
r4860 | black | 2004-12-19 00:59:46 +0100 (Sun, 19 Dec 2004) | 3 lines

-CL_Video now allows multiple streams again. It is registered as a r_module
 now and automatically restores the textures on r_restart.

------------------------------------------------------------------------
r4859 | tomaz | 2004-12-18 22:31:29 +0100 (Sat, 18 Dec 2004) | 2 lines

338

------------------------------------------------------------------------
r4858 | tomaz | 2004-12-18 22:20:51 +0100 (Sat, 18 Dec 2004) | 2 lines

338

------------------------------------------------------------------------
r4857 | tomaz | 2004-12-18 22:17:47 +0100 (Sat, 18 Dec 2004) | 2 lines

Fixed the sys_ticrate bounds checking, it was constantly setting it to 0.1 when it is already 0.1

------------------------------------------------------------------------
r4856 | tomaz | 2004-12-18 21:18:27 +0100 (Sat, 18 Dec 2004) | 2 lines

Disabled vsync when doing a timedemo.

------------------------------------------------------------------------
r4855 | black | 2004-12-18 12:22:10 +0100 (Sat, 18 Dec 2004) | 4 lines

-Castrated the new CL_Video subsystem. It doesnt allow more than 1 video
 stream at a time again. I've moved the texture pool stuff into OpenVideo
 and CloseVideo, so it should work exactly like the old code.

------------------------------------------------------------------------
r4854 | molivier | 2004-12-18 09:12:38 +0100 (Sat, 18 Dec 2004) | 3 lines

- Fixed PK3 support for Mac OS X
- DP no longer considers empty PK3s as invalid

------------------------------------------------------------------------
r4853 | havoc | 2004-12-18 07:40:21 +0100 (Sat, 18 Dec 2004) | 2 lines

made sensitivity affect cl_prydoncursor

------------------------------------------------------------------------
r4852 | havoc | 2004-12-18 05:11:14 +0100 (Sat, 18 Dec 2004) | 2 lines

341

------------------------------------------------------------------------
r4851 | havoc | 2004-12-18 03:40:48 +0100 (Sat, 18 Dec 2004) | 4 lines

added Bloom effect (r_bloom* cvars)
added Bloom effect cvars to graphics options menu
cleaned up r_speeds variables (c_*) which were being declared and externed and cleared all over the place (that's most of these files)

------------------------------------------------------------------------
r4850 | havoc | 2004-12-18 02:37:29 +0100 (Sat, 18 Dec 2004) | 2 lines

renamed cl_stainmapsclearonload to cl_stainmaps_clearonload to make it ignore the setting in old configs

------------------------------------------------------------------------
r4849 | havoc | 2004-12-18 02:24:46 +0100 (Sat, 18 Dec 2004) | 2 lines

cl_stainmapsclearonload now defaults to 1 (as it was meant to), not that this will help anyone with it already saved to their config

------------------------------------------------------------------------
r4848 | havoc | 2004-12-17 16:51:24 +0100 (Fri, 17 Dec 2004) | 3 lines

removed dangerous filename checks from FRIK_FILE code
added FS_CheckNastyPath function which is called by FS_Open, so now dangerous paths are rejected everywhere

------------------------------------------------------------------------
r4847 | black | 2004-12-17 15:03:20 +0100 (Fri, 17 Dec 2004) | 2 lines

-Fixed a bug in the centering code.

------------------------------------------------------------------------
r4846 | black | 2004-12-17 14:47:25 +0100 (Fri, 17 Dec 2004) | 2 lines

-Added centered notify output for GAME_NEXUIZ.

------------------------------------------------------------------------
r4845 | black | 2004-12-16 18:57:04 +0100 (Thu, 16 Dec 2004) | 2 lines

-Now playermodel and playerskin finally work correctly (hopefully).

------------------------------------------------------------------------
r4844 | molivier | 2004-12-15 10:11:54 +0100 (Wed, 15 Dec 2004) | 2 lines

vsprintf -> vsnprintf

------------------------------------------------------------------------
r4843 | havoc | 2004-12-14 23:44:27 +0100 (Tue, 14 Dec 2004) | 2 lines

339

------------------------------------------------------------------------
r4842 | havoc | 2004-12-14 16:01:08 +0100 (Tue, 14 Dec 2004) | 2 lines

don't warn about svc_precache failing to precache sounds if snd_initialized is false (-nosound or -safe was used)

------------------------------------------------------------------------
r4841 | molivier | 2004-12-14 10:09:41 +0100 (Tue, 14 Dec 2004) | 2 lines

Oops... Fixed my fix to BSD makefile

------------------------------------------------------------------------
r4840 | black | 2004-12-13 17:51:06 +0100 (Mon, 13 Dec 2004) | 3 lines

-Fixed another bug introduced by me, affecting the detection of a valid
 time global in the new VM.

------------------------------------------------------------------------
r4839 | black | 2004-12-13 17:20:15 +0100 (Mon, 13 Dec 2004) | 3 lines

-Fixed the stupid bug introduced by my NEX_PLAYERMODEL/NEX_PLAYERSKIN commit.
-Hopefully playermodel and playerskin work still now.

------------------------------------------------------------------------
r4838 | molivier | 2004-12-13 16:41:32 +0100 (Mon, 13 Dec 2004) | 2 lines

Fixed BSD makefile for NetBSD

------------------------------------------------------------------------
r4837 | molivier | 2004-12-13 16:00:36 +0100 (Mon, 13 Dec 2004) | 2 lines

Fixed a warning in MSVC6

------------------------------------------------------------------------
r4836 | molivier | 2004-12-13 11:40:44 +0100 (Mon, 13 Dec 2004) | 2 lines

Fixed model automatic precaching in the new network protocol

------------------------------------------------------------------------
r4835 | black | 2004-12-10 19:43:30 +0100 (Fri, 10 Dec 2004) | 3 lines

-Converted some of the altstring functions to builtins
-Fixed a bug in the DrawQueue - it was calculating the clip area wrongly

------------------------------------------------------------------------
r4834 | molivier | 2004-12-10 11:55:58 +0100 (Fri, 10 Dec 2004) | 2 lines

Added BB_Power to the Transfusion map list

------------------------------------------------------------------------
r4833 | molivier | 2004-12-10 11:55:22 +0100 (Fri, 10 Dec 2004) | 2 lines

Removed a couple of warnings when compiling with GCC

------------------------------------------------------------------------
r4832 | molivier | 2004-12-08 16:36:35 +0100 (Wed, 08 Dec 2004) | 2 lines

A few minor changes in the sound code

------------------------------------------------------------------------
r4830 | black | 2004-12-06 14:32:11 +0100 (Mon, 06 Dec 2004) | 2 lines

-Fixed another signed/unsigned warning after the type change of func_t.

------------------------------------------------------------------------
r4829 | black | 2004-12-05 14:58:16 +0100 (Sun, 05 Dec 2004) | 5 lines

-Fixed a minor bug in CL_Video
-Changed func_t from int to unsigned int - probably this breaks some things
 but at least it fixes an annoying crash of the DP with the current Nexuiz
 build.

------------------------------------------------------------------------
r4828 | black | 2004-12-04 22:08:13 +0100 (Sat, 04 Dec 2004) | 5 lines

-Added video streaming support to the new VM
-Changed again a lot of CL_Video (mostly bugs and logical errors)
-It doesnt append the prefix now, but only checks whether it matches
 or not - if it doesnt it doesnt load the video.

------------------------------------------------------------------------
r4827 | black | 2004-12-04 17:15:17 +0100 (Sat, 04 Dec 2004) | 7 lines

-Added the console command prvm_globalset
-Rewritten CL_Video to support multiple video streams
-Fixed a bug in the new VM's epair parser
The only problem CL_Video now has, is that it doesnt use TEXF_FRAGMENT
right now. Ive added a more general description of this problem to the
todo list.

------------------------------------------------------------------------
r4826 | havoc | 2004-12-03 20:41:15 +0100 (Fri, 03 Dec 2004) | 2 lines

some renderer/client separation cleanup, migrated some things to r_refdef to eliminate renderer references to cl. fields

------------------------------------------------------------------------
r4825 | havoc | 2004-12-03 19:58:09 +0100 (Fri, 03 Dec 2004) | 2 lines

fixed precache problems in non-DARKPLACES6 protocols

------------------------------------------------------------------------
r4824 | havoc | 2004-12-03 19:57:41 +0100 (Fri, 03 Dec 2004) | 2 lines

fixed a Sys_Error in the client when connected to QUAKE protocol servers (it was trying to send an empty message)

------------------------------------------------------------------------
r4823 | molivier | 2004-12-03 15:15:09 +0100 (Fri, 03 Dec 2004) | 2 lines

Added "ctype.h" to the list of standard headers in "quakedef.h". Cleaned up the todo file a bit (yes, DP works with zipped id1 PAKs)

------------------------------------------------------------------------
r4822 | molivier | 2004-12-03 09:32:08 +0100 (Fri, 03 Dec 2004) | 6 lines

- DP now defines MACOSX when relevant
- added a "Mac OS X" string in Sys_Shared_EarlyInit
- removed an unused "rcsid" string
- fixed SDL audio on big endian systems
- fixed SDL video initialization on Mac OS X

------------------------------------------------------------------------
r4821 | havoc | 2004-12-03 06:03:12 +0100 (Fri, 03 Dec 2004) | 2 lines

don't let clients kill server with bogus cursor_entitynumber values

------------------------------------------------------------------------
r4819 | black | 2004-12-02 15:25:48 +0100 (Thu, 02 Dec 2004) | 6 lines

Ive done three todo items:
-Added support for ' strings in Com_ParseToken.
-Added support for " and ' as end tokens in Com_ParseToken.
-Added the NEXUIZ_PLAYERMODEL and NEXUIZ_PLAYERSKIN extensions.
The last needs to be tested though. Hopefully it works.

------------------------------------------------------------------------
r4818 | molivier | 2004-12-02 10:46:27 +0100 (Thu, 02 Dec 2004) | 6 lines

- Removed Con_SafePrint and Con_SafePrintf since they now does the same things as Con_Print and Con_Printf
- Moved log initialization right after memory initialization to make the log functions available as early as possible
- Moved the removal of "qconsole.log" (when -condebug is in the command line) in FS_Init
- Moved the "Console initialized." message so it is actually printed at console
- Removed the declaration of "con_chars" (it doesn't exist anymore)

------------------------------------------------------------------------
r4817 | havoc | 2004-12-02 00:19:06 +0100 (Thu, 02 Dec 2004) | 2 lines

implemented scr_screenshot_gamma in screenshot saving (previously only implemented in video saving - oops)

------------------------------------------------------------------------
r4816 | havoc | 2004-12-02 00:14:07 +0100 (Thu, 02 Dec 2004) | 4 lines

changed a lot of Con_DPrint/Con_DPrintf calls to Con_Print/Con_Printf (non-technical things like device errors which should be seen even without developer on)
merged Sys_Print code into Con_Print and changed all other Sys_Print/Sys_Printf calls to calling Con_Print/Con_Printf or Con_DPrint/Con_DPrintf instead
rewrote Con_Print so that timestamps are printed only at the start of each line (or just after the 0x01 or 0x02 characters used for chat messages), not during partial line prints, and timestamps now apply to all output destinations (log, console, terminal)

------------------------------------------------------------------------
r4815 | havoc | 2004-12-02 00:13:13 +0100 (Thu, 02 Dec 2004) | 2 lines

fix a typo

------------------------------------------------------------------------
r4814 | havoc | 2004-12-01 22:49:46 +0100 (Wed, 01 Dec 2004) | 2 lines

modified PRYDON_CLIENTCURSOR extension to reset cursor_trace_ent to world if the entity it is referencing is currently freed (as requested by FrikaC)

------------------------------------------------------------------------
r4813 | havoc | 2004-12-01 22:48:21 +0100 (Wed, 01 Dec 2004) | 5 lines

cleaned up CL_SendMove a lot, added notes on number of bytes used for different protocols
made CL_SendMove never send a clc_ackframe for frame 0 in any latestframenums slots
made CL_SendMove discard only the clc_move portion of the first two messages (the ones dropped to avoid input leftover from the previous level), still sending the clc_ackframe message
changed CL_SendMove to not accumulate move messages but just send the latest (may improve cursor issues in prydon gate using non-clientcursor mode)

------------------------------------------------------------------------
r4812 | molivier | 2004-12-01 15:03:42 +0100 (Wed, 01 Dec 2004) | 2 lines

Removed wrong FIXME comment (in-game precached sounds don't need SFXFLAG_SERVERSOUND)

------------------------------------------------------------------------
r4811 | molivier | 2004-12-01 15:00:52 +0100 (Wed, 01 Dec 2004) | 2 lines

Fixed FS_Seek for unpacked files when FS_USESYSCALLS is defined (should fix HalfLife WAD loading)

------------------------------------------------------------------------
r4810 | molivier | 2004-12-01 09:20:39 +0100 (Wed, 01 Dec 2004) | 2 lines

341

------------------------------------------------------------------------
r4809 | havoc | 2004-12-01 08:59:48 +0100 (Wed, 01 Dec 2004) | 2 lines

fix annoying warnings about weaponmodel ""

------------------------------------------------------------------------
r4808 | havoc | 2004-12-01 08:57:08 +0100 (Wed, 01 Dec 2004) | 2 lines

342

------------------------------------------------------------------------
r4807 | havoc | 2004-12-01 08:45:40 +0100 (Wed, 01 Dec 2004) | 2 lines

changed order of tests in deciding whether to do culling on a bmodel entity to fix uninitialized variable warnings (thanks Elric)

------------------------------------------------------------------------
r4806 | havoc | 2004-12-01 08:40:36 +0100 (Wed, 01 Dec 2004) | 2 lines

reset animation interpolation on weaponmodel when model changes (thanks Elric)

------------------------------------------------------------------------
r4805 | havoc | 2004-12-01 08:20:42 +0100 (Wed, 01 Dec 2004) | 2 lines

decals now render immediately rather than being transparency sorted, this generally resolves the issues with decals hiding sprites and lightning beams, though it's debatable whether the new interaction with water and transparent bmodels is really an improvement

------------------------------------------------------------------------
r4804 | havoc | 2004-12-01 07:12:47 +0100 (Wed, 01 Dec 2004) | 2 lines

now clears screen at startup to prevent garbage from being seen around loading plaque in windows

------------------------------------------------------------------------
r4803 | havoc | 2004-12-01 07:07:14 +0100 (Wed, 01 Dec 2004) | 2 lines

defaulting to nodinput mode again due to problems with dinput mode

------------------------------------------------------------------------
r4801 | havoc | 2004-12-01 06:39:03 +0100 (Wed, 01 Dec 2004) | 18 lines

implemented PRYDON_CLIENTCURSOR extension (clientside mouse pointer that feeds back information to the QuakeC)
added DP_BUTTONUSE extension (+use/-use button)
added DP_BUTTONCHAT extension (true while input is not focused on the game)
reimplemented DP_ENT_COLORMOD extension due to popular request, and changed its definition to allow colors above '1 1 1' for brightening effects
implemented PROTOCOL_DARKPLACES6 protocol, featuring delta compression of ammo counts and other properties (using generic svc_updatestat and svc_updatestatubyte messages), precaching models and sounds during the game (svc_precache).
removed cmd parameter from a lot of input code (now uses cl.cmd. instead of cmd->)
added sv_gameplayfix_setmodelrealbox to allow disabling of the setmodel real model bounding box on alias models (may improve mod compatibility if set to 0, thus performing a setsize (self, '-16 -16 -16', '16 16 16') instead of the real alias model box).
added SV_ModelIndex and SV_SoundIndex functions to clean up the server's precaching and model lookup processes (code reduction/maintenance reduction).
changed sv.model_precache and sv.sound_precache to be real char arrays rather than pointers, so precache names no longer need to be constants as they're now copied.
added some modelindex bounds checks to a few pieces of code.
the dpfields array is now sorted and matches the supported fields list (added the missing ones).
client now acknowledges the last 3 frames in each input packet to reduce packet loss issues.
renamed clc_ackentities to clc_ackframe as it is now used for compressing stats as well as entities in PROTOCOL_DARKPLACES6, this also means it always produces a packet for every frame even if there's no changed entities (or room under the rate limit for that matter)
PROTOCOL_DARKPLACES5 and 6 now perform a non-harmful serverside packetlog reset (marking all packets as lost) if the packetlog fills up, this should eliminate choked-to-death cases where the client lost everything for a few seconds.
MAX_CL_STATS expanded from 32 to 256 (just incase more stats are added, this prevents protocol breakage on too many unknown extra stats)
fixed a bug with the worst case rtlight rendering (the color array was disabled, oops).
some cl.* fields converted to cl.stats elements (STAT_ITEMS for instance) to accomodate the PROTOCOL_DARKPLACES6 stats updates

------------------------------------------------------------------------
r4800 | havoc | 2004-12-01 05:45:44 +0100 (Wed, 01 Dec 2004) | 2 lines

some minor cleanup to CL_TraceLine, added CL_SelectTraceLine which is to be used by the PRYDON_CLIENTCURSOR extension

------------------------------------------------------------------------
r4799 | black | 2004-11-30 21:33:22 +0100 (Tue, 30 Nov 2004) | 2 lines

-Fixed a bug in drawstring - it used maxlen instead of len in a validity check

------------------------------------------------------------------------
r4798 | black | 2004-11-29 21:43:28 +0100 (Mon, 29 Nov 2004) | 5 lines

-Fixed an old qc bug that's already been existing in the original quake
 (- hopefully it is a bug): ParseEpair was accessing the globals arrays
 instead of writing an offset directly into the value.
-Removed the VM_CheckEmptyString from VM_drawstring.

------------------------------------------------------------------------
r4797 | black | 2004-11-28 14:10:38 +0100 (Sun, 28 Nov 2004) | 6 lines

-Removed the NG Menu part, since it isnt used anymore (the old layout
 works generally better)
-Fixed a bug in VM_max - it used one of the old VM's macro.
-Added a memory leak output of the "strzone" zone when the menu is shutdown
 (only displayed if developer >= 2)

------------------------------------------------------------------------
r4796 | havoc | 2004-11-26 01:57:30 +0100 (Fri, 26 Nov 2004) | 2 lines

redesigned drawing of loading plaque, it's now a separate refresh function which draws over the previous frame, rather than invoking a new render, which should fix crashes with level changes with rtlights on (trying to render an rtlight while the map the rtlight was for has already been unloaded tends to cause a crash)

------------------------------------------------------------------------
r4795 | havoc | 2004-11-25 21:41:29 +0100 (Thu, 25 Nov 2004) | 2 lines

removed some windows cruft (like scr_skipupdate, and the SleepUntilInput stuff)

------------------------------------------------------------------------
r4794 | havoc | 2004-11-25 21:38:37 +0100 (Thu, 25 Nov 2004) | 3 lines

removed Sys_Sleep call from CL_KeepaliveMessage, as it's probably better to load as fast as possible than to yield cpu time during loading
removed an unnecessary CL_KeepaliveMessage call in model purging

------------------------------------------------------------------------
r4793 | havoc | 2004-11-25 18:36:24 +0100 (Thu, 25 Nov 2004) | 2 lines

changed drivername to NULL, as SDL knows best

------------------------------------------------------------------------
r4792 | havoc | 2004-11-25 18:02:38 +0100 (Thu, 25 Nov 2004) | 3 lines

added model->brush.submodels[] array of pointers to submodels of a world model
added unfinished Mod_Q1BSP_LoadMapBrushes (will be finished someday)

------------------------------------------------------------------------
r4791 | havoc | 2004-11-25 17:19:56 +0100 (Thu, 25 Nov 2004) | 2 lines

changed lhrandom to use the full RAND_MAX limit (more random, after all the low bits are the most predictable), and made the random() qc builtin use lhrandom

------------------------------------------------------------------------
r4790 | havoc | 2004-11-25 17:18:04 +0100 (Thu, 25 Nov 2004) | 2 lines

small beginnings of GLSL support, doesn't do anything yet

------------------------------------------------------------------------
r4789 | havoc | 2004-11-25 17:16:28 +0100 (Thu, 25 Nov 2004) | 2 lines

forgot to commit this with the Host_ServerFrame changes

------------------------------------------------------------------------
r4788 | havoc | 2004-11-25 17:13:42 +0100 (Thu, 25 Nov 2004) | 2 lines

redesigned Host_ServerFrame timing again, it now never runs more than 5 serverframes per host frame as a sanity limit (to remain playable in an overloaded game), and is just cleaner

------------------------------------------------------------------------
r4787 | havoc | 2004-11-25 17:08:48 +0100 (Thu, 25 Nov 2004) | 2 lines

forgot to commit a bunch of CL_AllocDlight changes (to use lightstyle -1)

------------------------------------------------------------------------
r4786 | havoc | 2004-11-25 17:07:53 +0100 (Thu, 25 Nov 2004) | 2 lines

added cl_capturevideo_rawyv12 mode, and cl_screenshot_gamma (defaults to 2.2)

------------------------------------------------------------------------
r4785 | molivier | 2004-11-25 10:04:37 +0100 (Thu, 25 Nov 2004) | 2 lines

Fixed ambient sound volume (it was reset each frame, and cannot change by more than the value of the "ambient_fade" cvar each frame... you do the math). Thanks to Tomaz and Urre for the bug report

------------------------------------------------------------------------
r4784 | havoc | 2004-11-25 02:24:00 +0100 (Thu, 25 Nov 2004) | 2 lines

changed Sys_Error to not put up a messagebox if in dedicated mode, and cleaned it up a bit

------------------------------------------------------------------------
r4783 | havoc | 2004-11-24 14:39:38 +0100 (Wed, 24 Nov 2004) | 2 lines

fixed a critical bug with Vile and other midnight mods (dlights were being controlled by style 0, this meant they didn't appear in these mods, added style -1 as a special case)

------------------------------------------------------------------------
r4782 | havoc | 2004-11-22 21:24:57 +0100 (Mon, 22 Nov 2004) | 2 lines

fixed an uninitialized variable warning

------------------------------------------------------------------------
r4781 | molivier | 2004-11-22 15:38:33 +0100 (Mon, 22 Nov 2004) | 7 lines

Several changes to the SFX lock code in the sound engine, mainly to make sure SFXs are automatically freed only at level change
Moved call to CL_InitTEnts after S_Startup so the tent sounds get properly precached
Added a developer warning when trying to play a non-precached SFX
Made the soundlist command more verbose
Added the ssize_t type for Win32 systems
Some comments and dead code removal

------------------------------------------------------------------------
r4780 | molivier | 2004-11-22 11:01:51 +0100 (Mon, 22 Nov 2004) | 2 lines

A few very minor changes to the FS code

------------------------------------------------------------------------
r4779 | havoc | 2004-11-21 13:16:16 +0100 (Sun, 21 Nov 2004) | 2 lines

fix skybox loading, _ft and _bk were swapped (and all others had to be flipped accordingly), it now matches quake2 as it was supposed to all along

------------------------------------------------------------------------
r4778 | havoc | 2004-11-20 19:07:34 +0100 (Sat, 20 Nov 2004) | 2 lines

327

------------------------------------------------------------------------
r4777 | havoc | 2004-11-20 19:05:23 +0100 (Sat, 20 Nov 2004) | 3 lines

fixed bug with engine sounds (for TE_ effects) and local sounds (menu, etc) being unloaded on level change (they are supposed to stay indefinitely)
keep play/play2/playvol sounds around until level change (so they're not being constantly unloaded and reloaded when used repeatedly)

------------------------------------------------------------------------
r4776 | havoc | 2004-11-20 12:49:41 +0100 (Sat, 20 Nov 2004) | 2 lines

changed S_StartSound to start a sound even if it has no fetcher, as the fetcher isn't set until it is loaded... and it isn't loaded until it is played if it was not precached...  and it's being unprecached by the S_ServerSounds function even if it's an engine sound...

------------------------------------------------------------------------
r4775 | havoc | 2004-11-20 12:20:24 +0100 (Sat, 20 Nov 2004) | 2 lines

added support for PROTOCOL_NEHAHRAMOVIE in more places, so now nehahra works again, and added some more Host_Error's for unknown cl.protocol values

------------------------------------------------------------------------
r4774 | havoc | 2004-11-20 10:25:49 +0100 (Sat, 20 Nov 2004) | 2 lines

fix the unintentional framegroup timing reset that happened when the .frame field changed after more than 100ms since the previous change (this was causing corpses to suddenly stand up and then fall down quickly in Nexuiz)

------------------------------------------------------------------------
r4773 | havoc | 2004-11-19 13:42:01 +0100 (Fri, 19 Nov 2004) | 2 lines

326

------------------------------------------------------------------------
r4772 | molivier | 2004-11-18 15:08:27 +0100 (Thu, 18 Nov 2004) | 2 lines

Quick hack to fix the calls to "open" on Win32

------------------------------------------------------------------------
r4771 | havoc | 2004-11-18 14:03:34 +0100 (Thu, 18 Nov 2004) | 2 lines

326

------------------------------------------------------------------------
r4769 | havoc | 2004-11-17 17:36:07 +0100 (Wed, 17 Nov 2004) | 2 lines

minimize cpu use when framerate limited

------------------------------------------------------------------------
r4768 | havoc | 2004-11-17 17:34:51 +0100 (Wed, 17 Nov 2004) | 2 lines

improved how showfps 1 measures framerate, it's now a bit more accurate, still reads a bit low though with millisecond timers

------------------------------------------------------------------------
r4767 | havoc | 2004-11-17 17:33:38 +0100 (Wed, 17 Nov 2004) | 2 lines

FS now uses open/read/write/lseek/close instead of fopen/fread/fwrite/fseek/fclose to get a little more performance from less unnecessary buffering (helps video recording keep up a steady rate)

------------------------------------------------------------------------
r4766 | havoc | 2004-11-17 17:31:58 +0100 (Wed, 17 Nov 2004) | 2 lines

remove the only use of FS_Eof

------------------------------------------------------------------------
r4765 | havoc | 2004-11-17 16:42:39 +0100 (Wed, 17 Nov 2004) | 2 lines

made dedicated servers hog a whole lot less CPU time

------------------------------------------------------------------------
r4764 | havoc | 2004-11-17 10:58:38 +0100 (Wed, 17 Nov 2004) | 2 lines

325

------------------------------------------------------------------------
r4763 | molivier | 2004-11-17 09:40:05 +0100 (Wed, 17 Nov 2004) | 2 lines

Give priority to unpacked files over packed files (the old AKVERSION behaviour)

------------------------------------------------------------------------
r4762 | havoc | 2004-11-17 09:11:04 +0100 (Wed, 17 Nov 2004) | 2 lines

fixed windows SDL linking (now uses sdl-config like it should)

------------------------------------------------------------------------
r4761 | havoc | 2004-11-17 06:58:54 +0100 (Wed, 17 Nov 2004) | 2 lines

forgot a very important else in rtlights saving

------------------------------------------------------------------------
r4760 | havoc | 2004-11-16 13:18:58 +0100 (Tue, 16 Nov 2004) | 2 lines

now unloads all stale submodels and the old world model before loading the new one (this relies on the world model being the first precache to trigger this code at the appropriate time)

------------------------------------------------------------------------
r4759 | havoc | 2004-11-16 13:17:54 +0100 (Tue, 16 Nov 2004) | 3 lines

renamed mod->needload to mod->loaded as a minor cleanup (safer default)
removed now unused Mod_TouchModel

------------------------------------------------------------------------
r4758 | havoc | 2004-11-16 13:15:25 +0100 (Tue, 16 Nov 2004) | 2 lines

call Mod_FindName directly instead of Mod_TouchModel because one just wraps the other

------------------------------------------------------------------------
r4757 | havoc | 2004-11-16 13:14:51 +0100 (Tue, 16 Nov 2004) | 2 lines

now checks that a lightmap surfacechain is not NULL before dereferencing it

------------------------------------------------------------------------
r4756 | havoc | 2004-11-16 00:09:21 +0100 (Tue, 16 Nov 2004) | 2 lines

fixed bug that called PlayerPreThink and PlayerPostThink on unspawned clients

------------------------------------------------------------------------
r4755 | havoc | 2004-11-15 14:13:58 +0100 (Mon, 15 Nov 2004) | 2 lines

328 (a lot of new items)

------------------------------------------------------------------------
r4754 | havoc | 2004-11-15 03:48:40 +0100 (Mon, 15 Nov 2004) | 2 lines

forgot to commit this file

------------------------------------------------------------------------
r4753 | havoc | 2004-11-15 00:31:36 +0100 (Mon, 15 Nov 2004) | 4 lines

upgraded rtlights format to have separate ambient, diffuse, and specular intensity scales, and also coronasize, this also allows corona-only lights by setting all scales to 0, and added normalmode/realtimemode flags so that lights can appear in normal mode, not just realtime mode (primarily useful for adding corona effects to a normal level)
added ambient light support to RenderLighting (non-bumpmapped diffuse)
some dlights now use ambientscale (this has not been exposed as a qc extension yet, qc lights remain the same)

------------------------------------------------------------------------
r4752 | havoc | 2004-11-15 00:23:19 +0100 (Mon, 15 Nov 2004) | 2 lines

remove unused sv_player extern

------------------------------------------------------------------------
r4751 | black | 2004-11-14 19:34:55 +0100 (Sun, 14 Nov 2004) | 2 lines

-Fixed a stupid bug in the VM_findchain* functions.

------------------------------------------------------------------------
r4750 | havoc | 2004-11-14 03:16:33 +0100 (Sun, 14 Nov 2004) | 2 lines

someone removed the quotes around binds in Key_WriteBindings...  added back so that bind ";" whatever doesn't wreck the config

------------------------------------------------------------------------
r4744 | havoc | 2004-11-13 12:14:31 +0100 (Sat, 13 Nov 2004) | 5 lines

replaced all uses of sv_player with host_client->edict (because sv_player was often invalid after a level change)
fixed a number of botclient crashes relating to invalid client->edict pointers after a level change
now sets client->spawned = true on botclients when freshly spawned (they were already being set correctly on level change)
DP_SV_BOTCLIENT now works properly

------------------------------------------------------------------------
r4743 | havoc | 2004-11-13 12:11:15 +0100 (Sat, 13 Nov 2004) | 3 lines

no longer warns about q3bsp surfaces with lightmapindex -3 (or any other negative values below -1), as q3map2 seems to use these values intentionally it's rather pointless to warn about them
now warns about missing textures in q3bsp texture loading

------------------------------------------------------------------------
r4742 | havoc | 2004-11-13 00:18:57 +0100 (Sat, 13 Nov 2004) | 2 lines

added DP_SV_BOTCLIENT extension

------------------------------------------------------------------------
r4741 | havoc | 2004-11-12 23:50:41 +0100 (Fri, 12 Nov 2004) | 2 lines

moved the extern prototype for SV_ConnectClient from netconn.c to server.h since the DP_SV_BOTCLIENT builtins will be calling it

------------------------------------------------------------------------
r4740 | havoc | 2004-11-12 23:42:20 +0100 (Fri, 12 Nov 2004) | 2 lines

more preparation for DP_SV_BOTCLIENT, removed a number of unneeded netconnection checks and changed some others to check active, and made player info queries reply "botclient" for clients with no netconnection

------------------------------------------------------------------------
r4739 | havoc | 2004-11-12 23:09:18 +0100 (Fri, 12 Nov 2004) | 2 lines

print botclient as address in status reports for clients with no netconnection

------------------------------------------------------------------------
r4738 | havoc | 2004-11-12 23:08:07 +0100 (Fri, 12 Nov 2004) | 2 lines

cleaned up SV_DropClient code a bit

------------------------------------------------------------------------
r4737 | havoc | 2004-11-12 22:48:07 +0100 (Fri, 12 Nov 2004) | 2 lines

moved rate and connecttime from netconn structure to client structure in preparation for DP_SV_BOTCLIENT extension

------------------------------------------------------------------------
r4736 | havoc | 2004-11-10 07:02:18 +0100 (Wed, 10 Nov 2004) | 2 lines

made q3bsp alphafunc shaders render as transparent (quick hack)

------------------------------------------------------------------------
r4735 | havoc | 2004-11-10 03:32:00 +0100 (Wed, 10 Nov 2004) | 2 lines

VorteX has fixed gettaginfo to work as advertised (properly handling of attached entities) and cleaned up gettagindex by splitting it into two functions

------------------------------------------------------------------------
r4734 | havoc | 2004-11-05 01:21:19 +0100 (Fri, 05 Nov 2004) | 2 lines

imposed a 20 frames at once limit in Host_ServerFrame

------------------------------------------------------------------------
r4733 | havoc | 2004-11-05 01:17:16 +0100 (Fri, 05 Nov 2004) | 2 lines

added a host_frametime limit of 1 second, so that it never tries to run more than 1 second per frame

------------------------------------------------------------------------
r4732 | havoc | 2004-11-03 18:13:37 +0100 (Wed, 03 Nov 2004) | 2 lines

internal cleanup: split up CL_SparkShower into CL_SparkShower, CL_Smoke, and CL_BulletMark so the effects parser can be a little cleaner, also added gravityscale to CL_SparkShower

------------------------------------------------------------------------
r4731 | havoc | 2004-11-03 18:09:44 +0100 (Wed, 03 Nov 2004) | 2 lines

updated cpu optimization choices

------------------------------------------------------------------------
r4730 | havoc | 2004-11-03 08:20:55 +0100 (Wed, 03 Nov 2004) | 2 lines

centerprint is no longer limited to 40 characters wide, it can now use up to the full vid.conwidth

------------------------------------------------------------------------
r4729 | havoc | 2004-10-30 21:25:03 +0200 (Sat, 30 Oct 2004) | 2 lines

307

------------------------------------------------------------------------
r4728 | havoc | 2004-10-30 19:12:06 +0200 (Sat, 30 Oct 2004) | 2 lines

308

------------------------------------------------------------------------
r4727 | havoc | 2004-10-30 15:50:16 +0200 (Sat, 30 Oct 2004) | 2 lines

added DP_SV_CLIENTCOLORS and DP_SV_CLIENTNAME extensions (these were already documented and working but not listed)

------------------------------------------------------------------------
r4726 | havoc | 2004-10-30 15:46:22 +0200 (Sat, 30 Oct 2004) | 4 lines

added DP_SV_PING, DP_SV_PUNCHVECTOR, DP_SND_FAKETRACKS, and DP_FS_SEARCH extensions
corrected builtin table comments for DP_FS_SEARCH functions
removed DP_SV_EXTERIORMODELTOCLIENT extension (no such thing, the extension is named DP_ENT_EXTERIORMODELTOCLIENT)

------------------------------------------------------------------------
r4724 | havoc | 2004-10-30 14:03:59 +0200 (Sat, 30 Oct 2004) | 2 lines

added DP_CON_SET and DP_CON_SETA extensions

------------------------------------------------------------------------
r4723 | black | 2004-10-29 16:37:19 +0200 (Fri, 29 Oct 2004) | 3 lines

-Moved the entity mem init in the entity load functions around a bit to
 make it possible for the menu parser to support full templates.

------------------------------------------------------------------------
r4722 | black | 2004-10-29 13:39:35 +0200 (Fri, 29 Oct 2004) | 4 lines

-Minor fix in VM_registercvar.
-Added \" support to quoted strings in Com_ParseToken.
-Minor change to PRVM_PrintStatus.

------------------------------------------------------------------------
r4721 | molivier | 2004-10-28 08:38:02 +0200 (Thu, 28 Oct 2004) | 2 lines

303

------------------------------------------------------------------------
r4720 | havoc | 2004-10-27 20:29:51 +0200 (Wed, 27 Oct 2004) | 2 lines

changed net_masterextra1 and 2 back to IP addresses (but kept their DNS names as comments), the DNS resolving takes too long, and caching it is non-trivial

------------------------------------------------------------------------
r4719 | havoc | 2004-10-27 20:21:04 +0200 (Wed, 27 Oct 2004) | 2 lines

304

------------------------------------------------------------------------
r4718 | havoc | 2004-10-27 20:18:05 +0200 (Wed, 27 Oct 2004) | 2 lines

now aborts video capture if it falls behind by more than a second (as the sound is likely hosed in that case)

------------------------------------------------------------------------
r4717 | havoc | 2004-10-27 20:11:36 +0200 (Wed, 27 Oct 2004) | 8 lines

greatly improved video capture speed by generating the files much more directly (less processing)
added a raw video .rgb output mode (making only one file instead of thousands, for a slight speed gain, assuming you have tools that can read it)
video capture now maintains sound sync by duplicating frames to keep up a consistent video output speed (warning: do not attempt higher speeds than your machine is capable of, it WILL fall behind and get progressively slower very fast)
rewrote much of Host_FilterTime to improve video capture and simplify timing in general
removed host_minfps (now uses sys_ticrate instead)
renamed host_maxfps to cl_maxfps (as it only ever affected the client anyway)
now runs multiple server frames if host is falling behind, based on sys_ticrate (mainly useful to avoid slowing down when client is rendering really slow)

------------------------------------------------------------------------
r4716 | molivier | 2004-10-27 17:50:47 +0200 (Wed, 27 Oct 2004) | 2 lines

Pure cleaning commit: removed "crc.[ch]" and "gl_warp_sin.h", removed dead functions and dead variables, and moved several header includes out of "quakedef.h"

------------------------------------------------------------------------
r4715 | molivier | 2004-10-26 16:48:43 +0200 (Tue, 26 Oct 2004) | 2 lines

Updated Win32 sound module: the wave output code was partially rewritten since the old version was obviously pretty tied to Quake original output format; removed a few useless variables here and there; and a lot of whitespaces and comment changes, as usual

------------------------------------------------------------------------
r4714 | havoc | 2004-10-26 10:30:48 +0200 (Tue, 26 Oct 2004) | 2 lines

get rid of the unused clearnotify and clearconsole variables

------------------------------------------------------------------------
r4713 | havoc | 2004-10-26 10:22:02 +0200 (Tue, 26 Oct 2004) | 2 lines

fix the "newname changed name to newname" bug

------------------------------------------------------------------------
r4712 | havoc | 2004-10-26 09:50:27 +0200 (Tue, 26 Oct 2004) | 2 lines

moved the map startup for -listen and -dedicated servers from startdemos to just after the config parsing, so that startdemos is no longer required

------------------------------------------------------------------------
r4711 | havoc | 2004-10-26 09:41:31 +0200 (Tue, 26 Oct 2004) | 2 lines

fixed 3 digit cdtracks loading (it was improperly checking the returned sfx, which is never NULL)

------------------------------------------------------------------------
r4710 | havoc | 2004-10-26 09:37:19 +0200 (Tue, 26 Oct 2004) | 2 lines

S_LoadSound now automatically tries both with and without sound/ when loading sounds, which allows quake3 maps to work better, since their target_speaker entities include sound/ in the filenames, this also got rid of the stdpath parameter in the S_PrecacheSound/S_FindName/S_LocalSound calls)

------------------------------------------------------------------------
r4709 | havoc | 2004-10-25 18:09:13 +0200 (Mon, 25 Oct 2004) | 2 lines

cruft removal

------------------------------------------------------------------------
r4708 | havoc | 2004-10-25 18:08:55 +0200 (Mon, 25 Oct 2004) | 2 lines

now displays light number (and total number of lights) in r_editlights mode

------------------------------------------------------------------------
r4707 | molivier | 2004-10-25 17:55:19 +0200 (Mon, 25 Oct 2004) | 2 lines

Don't allow sound extra updates until the sounds have been spatialized (fix the noise at startup). A few whitespaces and a couple of minor changes.

------------------------------------------------------------------------
r4706 | havoc | 2004-10-25 09:35:51 +0200 (Mon, 25 Oct 2004) | 2 lines

fix a signed/unsigned comparison warning

------------------------------------------------------------------------
r4705 | havoc | 2004-10-25 09:35:08 +0200 (Mon, 25 Oct 2004) | 2 lines

fix a rare crash when a sound is emitted by an entity with a model whose precache pointer is NULL, apparently this happens in the Fiend Run Lite demos

------------------------------------------------------------------------
r4704 | havoc | 2004-10-25 09:33:02 +0200 (Mon, 25 Oct 2004) | 2 lines

don't warn about missing frames and skins in models that failed to load

------------------------------------------------------------------------
r4703 | molivier | 2004-10-25 09:13:18 +0200 (Mon, 25 Oct 2004) | 2 lines

FreeBSD support

------------------------------------------------------------------------
r4701 | tomaz | 2004-10-23 23:43:38 +0200 (Sat, 23 Oct 2004) | 2 lines

308

------------------------------------------------------------------------
r4700 | havoc | 2004-10-23 17:39:48 +0200 (Sat, 23 Oct 2004) | 2 lines

made traceon/traceoff take effect immediately (forgot to check for pr_trace change where it mattered - after a builtin call)

------------------------------------------------------------------------
r4699 | havoc | 2004-10-23 12:41:43 +0200 (Sat, 23 Oct 2004) | 2 lines

added DP_SV_DROPCLIENT extension

------------------------------------------------------------------------
r4698 | havoc | 2004-10-23 12:00:38 +0200 (Sat, 23 Oct 2004) | 2 lines

removed number field from client_t struct as it seemed to be behaving unreliably in SV_DropClient (resulting in changes to the scoreboard entry for client 0, regardless of which client was dropped)

------------------------------------------------------------------------
r4697 | havoc | 2004-10-23 11:46:26 +0200 (Sat, 23 Oct 2004) | 2 lines

now defaults to DirectInput in windows, -dinput option changed to -nodinput and readme updated accordingly

------------------------------------------------------------------------
r4696 | black | 2004-10-23 02:36:48 +0200 (Sat, 23 Oct 2004) | 5 lines

-Added the constant MAXTRACKS which is set to 256.
 (remap has the type qbyte[256] now)
-CD_Play now also searches for fake tracks with 3 digits.
 (the old 2 digit search is kept for compatibility)

------------------------------------------------------------------------
r4695 | tomaz | 2004-10-23 01:21:29 +0200 (Sat, 23 Oct 2004) | 2 lines

309

------------------------------------------------------------------------
r4694 | tomaz | 2004-10-22 20:31:46 +0200 (Fri, 22 Oct 2004) | 2 lines

310

------------------------------------------------------------------------
r4693 | havoc | 2004-10-22 12:56:42 +0200 (Fri, 22 Oct 2004) | 2 lines

don't crash on dlights trying to cast shadows from world surfaces when there is no world model

------------------------------------------------------------------------
r4692 | molivier | 2004-10-22 10:29:15 +0200 (Fri, 22 Oct 2004) | 2 lines

Updated Transfusion map list

------------------------------------------------------------------------
r4691 | black | 2004-10-21 19:44:34 +0200 (Thu, 21 Oct 2004) | 5 lines

- Added Mem_IsAllocated.
- Decreased the required parameter count of VM_strcat to 1.
- Added a check to VM_strunzone so it wont free already freed strings and
  thus crash the qc (only if developer != 0).

------------------------------------------------------------------------
r4690 | havoc | 2004-10-21 15:30:27 +0200 (Thu, 21 Oct 2004) | 2 lines

VorteX fixed the "circle bug" in his SV_GetTagMatrix code

------------------------------------------------------------------------
r4685 | molivier | 2004-10-21 11:04:27 +0200 (Thu, 21 Oct 2004) | 2 lines

Several changes for single player support in Transfusion (based on a patch by Kazashi)

------------------------------------------------------------------------
r4684 | havoc | 2004-10-21 10:45:59 +0200 (Thu, 21 Oct 2004) | 2 lines

don't allow Log_ConPrint to recurse into itself, as can happen with a memory corruption report -> Log_ConPrint -> memory corruption report -> Log_ConPrint -> ...

------------------------------------------------------------------------
r4683 | havoc | 2004-10-20 15:41:05 +0200 (Wed, 20 Oct 2004) | 2 lines

313

------------------------------------------------------------------------
r4682 | havoc | 2004-10-20 15:30:42 +0200 (Wed, 20 Oct 2004) | 2 lines

if a (supposedly) quake sky texture is not 128x256, upload it just as a solid layer

------------------------------------------------------------------------
r4681 | havoc | 2004-10-20 15:29:07 +0200 (Wed, 20 Oct 2004) | 2 lines

now loads a .ent file for lights if found

------------------------------------------------------------------------
r4680 | havoc | 2004-10-20 15:19:48 +0200 (Wed, 20 Oct 2004) | 2 lines

ignore first mouse move after mouse grab as it's generally garbage

------------------------------------------------------------------------
r4679 | havoc | 2004-10-20 14:58:15 +0200 (Wed, 20 Oct 2004) | 2 lines

messagemode/messagemode2 now send the say/say_team command directly instead of passing through the client console, so that typing something like ";quit" as a message does not quit the game

------------------------------------------------------------------------
r4678 | havoc | 2004-10-20 13:58:58 +0200 (Wed, 20 Oct 2004) | 2 lines

fixed r_restart skybox crash (as well as incorrect texture bugs related to this), and moved alphaskytexture/solidskytexture to q1bsp texture loader, now part of the world model instead of separate

------------------------------------------------------------------------
r4677 | havoc | 2004-10-20 09:18:40 +0200 (Wed, 20 Oct 2004) | 2 lines

Image_WriteTGARGBA now writes 8 as the attributes byte (which GIMP seems to need to recognize the alpha channel)

------------------------------------------------------------------------
r4676 | havoc | 2004-10-20 06:16:32 +0200 (Wed, 20 Oct 2004) | 2 lines

removed a pmodel reference I forgot to remove

------------------------------------------------------------------------
r4675 | havoc | 2004-10-20 04:40:59 +0200 (Wed, 20 Oct 2004) | 2 lines

fix problems with losing colors on connect and leaving ghosts on the scoreboard and other glitches related to edict clearing

------------------------------------------------------------------------
r4674 | tomaz | 2004-10-19 13:32:35 +0200 (Tue, 19 Oct 2004) | 2 lines

Enlarged particle font from 256x256 to 512x512 and added saving of the font to a TGA (#if 0 'd)

------------------------------------------------------------------------
r4673 | havoc | 2004-10-19 12:58:50 +0200 (Tue, 19 Oct 2004) | 2 lines

reset nametime at prespawn (before name command is sent by client) and spawn (after name command is sent by client)

------------------------------------------------------------------------
r4672 | havoc | 2004-10-19 11:57:09 +0200 (Tue, 19 Oct 2004) | 2 lines

remove unused variables

------------------------------------------------------------------------
r4671 | havoc | 2004-10-19 11:54:36 +0200 (Tue, 19 Oct 2004) | 2 lines

instead of sending a scoreboard update in the DropClient code, let it happen at the next SV_UpdateToReliableMessages

------------------------------------------------------------------------
r4670 | havoc | 2004-10-19 11:53:31 +0200 (Tue, 19 Oct 2004) | 2 lines

fixed problem with lost scoreboard messages to a client that is still loading

------------------------------------------------------------------------
r4669 | havoc | 2004-10-19 11:44:14 +0200 (Tue, 19 Oct 2004) | 2 lines

Host_Shutdown now calls CL_Disconnect and Host_ShutdownServer so that quitting without using the quit command no longer leaves a player connected to the server

------------------------------------------------------------------------
r4668 | havoc | 2004-10-19 10:14:33 +0200 (Tue, 19 Oct 2004) | 3 lines

cleaned up scoreboard printing loops a bit (they don't need to check if the name is empty)
fixed (I think, after much testing) the duplicate names bug in the mini scoreboard by changing a bound to a separate max and min (evidently the loop index was starting < 0)

------------------------------------------------------------------------
r4666 | havoc | 2004-10-19 02:48:15 +0200 (Tue, 19 Oct 2004) | 2 lines

added mention in credits of romi's rtlights pk3 being included in dpmod

------------------------------------------------------------------------
r4665 | molivier | 2004-10-18 17:18:36 +0200 (Mon, 18 Oct 2004) | 2 lines

Finally removed the Win32 specific code from "snd_main.c". Changed a few comments and fixed a typo in the process.

------------------------------------------------------------------------
r4664 | havoc | 2004-10-18 12:16:26 +0200 (Mon, 18 Oct 2004) | 2 lines

add support for 32bit color in SDL builds

------------------------------------------------------------------------
r4663 | black | 2004-10-17 21:48:02 +0200 (Sun, 17 Oct 2004) | 3 lines

-Renamed two builtins of the new VM
-Fixed the hud weapon selection

------------------------------------------------------------------------
r4662 | havoc | 2004-10-17 13:51:38 +0200 (Sun, 17 Oct 2004) | 2 lines

snap curve vertices to solve some finicky collision problems and probably also makes things look a little better where two curves meet in some cases

------------------------------------------------------------------------
r4661 | havoc | 2004-10-17 13:48:29 +0200 (Sun, 17 Oct 2004) | 2 lines

fix an incomplete edit on variable naming

------------------------------------------------------------------------
r4660 | havoc | 2004-10-17 13:40:40 +0200 (Sun, 17 Oct 2004) | 2 lines

now using all-new Q3 patch tesselation code, matching Quake3 pretty well

------------------------------------------------------------------------
r4659 | havoc | 2004-10-17 13:19:18 +0200 (Sun, 17 Oct 2004) | 2 lines

increased edge hash size from 1024 items to 16384, cutting down on long q3bsp load times when generating the shadow mesh

------------------------------------------------------------------------
r4658 | havoc | 2004-10-17 13:16:42 +0200 (Sun, 17 Oct 2004) | 2 lines

added VorteX to thanks list

------------------------------------------------------------------------
r4657 | havoc | 2004-10-17 13:15:57 +0200 (Sun, 17 Oct 2004) | 2 lines

added DP_QC_GETTAGINFO extension (thanks VorteX!)

------------------------------------------------------------------------
r4655 | havoc | 2004-10-17 09:42:29 +0200 (Sun, 17 Oct 2004) | 2 lines

314

------------------------------------------------------------------------
r4654 | havoc | 2004-10-17 04:24:58 +0200 (Sun, 17 Oct 2004) | 2 lines

added |Rain| and feh to credits

------------------------------------------------------------------------
r4653 | havoc | 2004-10-16 23:47:45 +0200 (Sat, 16 Oct 2004) | 2 lines

fixed an unused variable warning

------------------------------------------------------------------------
r4652 | havoc | 2004-10-16 23:34:42 +0200 (Sat, 16 Oct 2004) | 2 lines

315

------------------------------------------------------------------------
r4651 | havoc | 2004-10-16 23:33:04 +0200 (Sat, 16 Oct 2004) | 2 lines

don't spew shaders to console on load unless developer is 2 or higher

------------------------------------------------------------------------
r4650 | havoc | 2004-10-16 22:28:51 +0200 (Sat, 16 Oct 2004) | 2 lines

forgot to remove a debugging test that emitted sparks from autosprite2 shaders

------------------------------------------------------------------------
r4649 | havoc | 2004-10-16 13:58:31 +0200 (Sat, 16 Oct 2004) | 2 lines

hush reconnect command warning about signon 0 because it happens all the time

------------------------------------------------------------------------
r4648 | havoc | 2004-10-16 13:29:13 +0200 (Sat, 16 Oct 2004) | 5 lines

now parses more of q3 shaders to guess at proper rendering settings for surfaces, now implemented are additive blend, deformvertexes autosprite (and autosprite2), nomipmaps, nopicmip, cull twosided/none/disable, surfaceparm nomipmap
now assumes that a q3 texture is not transparent unless it has a shader saying it is (yes shaders are now required to enable transparency in q3bsp)
now loads the texture used in the first pass of the shader if there is no texture of the same name as the shader itself
what this all means: quake3 maps look 99% correct (other than lack of animation and various shader effects)

------------------------------------------------------------------------
r4647 | black | 2004-10-16 11:56:56 +0200 (Sat, 16 Oct 2004) | 3 lines

-Added static, global baseDC and baseRC variables to avoid having to call
 qwglGetCurrent* all the time.

------------------------------------------------------------------------
r4646 | havoc | 2004-10-16 09:00:52 +0200 (Sat, 16 Oct 2004) | 2 lines

fixed a typo in the numtriangles commit (should have been num_triangles)

------------------------------------------------------------------------
r4645 | havoc | 2004-10-16 08:58:28 +0200 (Sat, 16 Oct 2004) | 2 lines

skip surfaces with no triangles in Q3BSP rendering code to avoid a R_Mesh_Draw warning

------------------------------------------------------------------------
r4644 | havoc | 2004-10-16 07:52:36 +0200 (Sat, 16 Oct 2004) | 2 lines

don't check visframe on q3bsp surfaces, it's not used

------------------------------------------------------------------------
r4643 | havoc | 2004-10-16 06:50:44 +0200 (Sat, 16 Oct 2004) | 2 lines

expanded PR_PrintState from 5 statements to 8 statements printed, to give more chance of seeing the parameters to a function in warnings/crashes

------------------------------------------------------------------------
r4642 | havoc | 2004-10-16 06:49:07 +0200 (Sat, 16 Oct 2004) | 2 lines

added reporting of what model is unprecached in no precache warning

------------------------------------------------------------------------
r4641 | havoc | 2004-10-16 06:48:18 +0200 (Sat, 16 Oct 2004) | 2 lines

added MoALTz to thanks list

------------------------------------------------------------------------
r4640 | havoc | 2004-10-16 01:22:38 +0200 (Sat, 16 Oct 2004) | 2 lines

forgot to give strlcat a size

------------------------------------------------------------------------
r4639 | havoc | 2004-10-16 01:09:13 +0200 (Sat, 16 Oct 2004) | 2 lines

added a newline to chat messages

------------------------------------------------------------------------
r4638 | havoc | 2004-10-15 23:20:26 +0200 (Fri, 15 Oct 2004) | 2 lines

added -lSDL to the windows SDL link flags

------------------------------------------------------------------------
r4637 | black | 2004-10-15 23:18:02 +0200 (Fri, 15 Oct 2004) | 5 lines

-Added a more descriptive comment for prvm_edict_t::p
-Added 3 new builtins to the new VM: ftoe, etof, parseentitydata
-Changed the Win32 driver to reuse the GL hDC if possible instead of
 calling GetDC and ReleaseDC every frame.

------------------------------------------------------------------------
r4636 | havoc | 2004-10-15 23:08:25 +0200 (Fri, 15 Oct 2004) | 2 lines

changed main() argv parameter to non-const, and casting it to const on assignment instead, this should fix an SDL compilation problem

------------------------------------------------------------------------
r4635 | havoc | 2004-10-15 22:25:17 +0200 (Fri, 15 Oct 2004) | 2 lines

added DP_LITSPRITES extension string

------------------------------------------------------------------------
r4632 | havoc | 2004-10-15 09:08:46 +0200 (Fri, 15 Oct 2004) | 2 lines

315

------------------------------------------------------------------------
r4631 | havoc | 2004-10-15 09:08:12 +0200 (Fri, 15 Oct 2004) | 2 lines

now shows status messages in join game menu when a server is typed in manually (it was only showing them in the server list, oops), also added additional status messages

------------------------------------------------------------------------
r4630 | havoc | 2004-10-15 08:56:18 +0200 (Fri, 15 Oct 2004) | 2 lines

reduced cl_net* cvars to just cl_netlocalping and cl_netpacketloss and removed sv_netpacketloss cvars

------------------------------------------------------------------------
r4629 | havoc | 2004-10-15 08:53:41 +0200 (Fri, 15 Oct 2004) | 2 lines

revert an optimization to shadow volume generation that saved a little cpu time but cost a lot of gpu fillrate, and caused shadows to randomly invert sometimes

------------------------------------------------------------------------
r4628 | havoc | 2004-10-14 01:28:50 +0200 (Thu, 14 Oct 2004) | 2 lines

thanks much to Moz for fixing the r_stereo_separation code, it now has proper eye positioning and looks MUCH better

------------------------------------------------------------------------
r4626 | molivier | 2004-10-13 15:45:16 +0200 (Wed, 13 Oct 2004) | 2 lines

Fixed a couple of comments, and modified slightly the developer printing in ResampleSfx

------------------------------------------------------------------------
r4625 | molivier | 2004-10-13 15:42:10 +0200 (Wed, 13 Oct 2004) | 2 lines

snd_dma.c -> snd_main.c

------------------------------------------------------------------------
r4624 | molivier | 2004-10-13 09:03:57 +0200 (Wed, 13 Oct 2004) | 15 lines

Lots of minor fixes and improvements to the sound engine, plus a few more important changes:
- moved the internal structures and API into a separate file (snd_main.h)
- added a lock mecanism on SFXs to free them as soon as they're no longer used
- simplified the sound API
- minor fixes and comment changes here and there
- independent sound volume for fake CD tracks
- updated MSVC and Dev-C++ project files accordingly
- removed unused functions
- added a SFX flag to make sure the engine complains at most one time for each missing sound file
- made the SFX list a linked list to remove the hardcoded limit for the number of SFX a client can handle
- changed the way ambient sounds are managed to be more consistent with the new API
- factorized some code
- removed the useless IN_Accumulate in the Win32 specific code
- removed the table for 8bit sound mixing (snd_scaletable)

------------------------------------------------------------------------
r4623 | black | 2004-10-12 21:08:30 +0200 (Tue, 12 Oct 2004) | 6 lines

-Its now possible to add support for other edict_private structs easily.
(Note: You have to derive them by composition from the original one -
e.g. struct server_edict_private_s { prvm_edict_private_t base; ... };
or just copy the elements from prvm_edict_private_t into the new struct -
and add them to the anonymous union p in prvm_edict_t.)

------------------------------------------------------------------------
r4622 | havoc | 2004-10-12 19:27:06 +0200 (Tue, 12 Oct 2004) | 2 lines

allow invalid skin numbers on entities using tenebrae dlights (falling back to the model's skin 0 for actual rendering, but using the skin number for a dlight cubemap)

------------------------------------------------------------------------
r4621 | havoc | 2004-10-10 20:51:32 +0200 (Sun, 10 Oct 2004) | 2 lines

enabled SDL sound and CD

------------------------------------------------------------------------
r4620 | havoc | 2004-10-10 20:51:05 +0200 (Sun, 10 Oct 2004) | 2 lines

fixed a signed/unsigned warning

------------------------------------------------------------------------
r4619 | havoc | 2004-10-10 20:50:38 +0200 (Sun, 10 Oct 2004) | 2 lines

made MapKey static since it's not used anywhere else

------------------------------------------------------------------------
r4618 | havoc | 2004-10-10 05:08:00 +0200 (Sun, 10 Oct 2004) | 2 lines

remove quotes on say commands at the server end (like it used to, this is done a little cleaner though)

------------------------------------------------------------------------
r4617 | havoc | 2004-10-09 20:30:00 +0200 (Sat, 09 Oct 2004) | 2 lines

315

------------------------------------------------------------------------
r4616 | havoc | 2004-10-09 04:03:39 +0200 (Sat, 09 Oct 2004) | 2 lines

added SV_EntitiesInBox function to find entities within a box, merging the box testing in the trigger/trace code, and also greatly optimized PF_findradius using this function

------------------------------------------------------------------------
r4615 | havoc | 2004-10-09 03:56:14 +0200 (Sat, 09 Oct 2004) | 2 lines

fixed reconnect command which was being ignored by the client (forgot that it doesn't know what came from the client console and what came from the server, so disabling it in the client console was a bad idea)

------------------------------------------------------------------------
r4614 | havoc | 2004-10-08 22:15:00 +0200 (Fri, 08 Oct 2004) | 2 lines

added "QC function <name> is missing" warnings to more PR_ExecuteProgram calls

------------------------------------------------------------------------
r4613 | havoc | 2004-10-08 22:12:16 +0200 (Fri, 08 Oct 2004) | 2 lines

simplified r_rt* variable setup a little bit

------------------------------------------------------------------------
r4612 | havoc | 2004-10-08 22:11:04 +0200 (Fri, 08 Oct 2004) | 4 lines

got rid of cl_nodelta cvar (it has never been useful, and rarely worked)
got rid of ackframenum -1 handling
removed ackframenum from entityframe4 and entityframe5 databases as they didn't use it for anything anyway (it is used only temporarily inside the AckFrame functions)

------------------------------------------------------------------------
r4611 | havoc | 2004-10-08 21:39:47 +0200 (Fri, 08 Oct 2004) | 3 lines

fixed constant resetting of animation interpolation on entities that just spawned (fixes framegroup animation problems on non-static entities that don't change much)
changed movement interpolation to better handle every-other-frame updates which tend to happen with rate limiting

------------------------------------------------------------------------
r4610 | havoc | 2004-10-08 18:15:47 +0200 (Fri, 08 Oct 2004) | 2 lines

fix automatic addition of "color" field to be a vector

------------------------------------------------------------------------
r4607 | havoc | 2004-10-08 06:31:06 +0200 (Fri, 08 Oct 2004) | 2 lines

cleaned up Host_Say to not process the message (MUCH simpler and I didn't trust that code anyway), fixed crash with fromServer messages (it was not checking teamonly, save is not a valid edict)

------------------------------------------------------------------------
r4606 | havoc | 2004-10-07 20:55:13 +0200 (Thu, 07 Oct 2004) | 2 lines

fix color problem with glow_trail (the blue trail bug)

------------------------------------------------------------------------
r4605 | havoc | 2004-10-07 04:17:51 +0200 (Thu, 07 Oct 2004) | 2 lines

306

------------------------------------------------------------------------
r4604 | havoc | 2004-10-07 02:48:19 +0200 (Thu, 07 Oct 2004) | 2 lines

fixed lingering entities in quake protocol (off by one error in the entity removal loop)

------------------------------------------------------------------------
r4603 | havoc | 2004-10-07 02:42:14 +0200 (Thu, 07 Oct 2004) | 2 lines

added cl_beams_* cvars to effects options menu

------------------------------------------------------------------------
r4602 | havoc | 2004-10-06 21:39:01 +0200 (Wed, 06 Oct 2004) | 2 lines

now should be able to connect to another server without leaving the current server until the connection is accepted

------------------------------------------------------------------------
r4601 | havoc | 2004-10-06 21:31:09 +0200 (Wed, 06 Oct 2004) | 2 lines

now begins loading plaque at all the appropriate places, which also means an end to sound during loading

------------------------------------------------------------------------
r4600 | havoc | 2004-10-06 19:10:44 +0200 (Wed, 06 Oct 2004) | 2 lines

fix nehahra movie support (forgot to handle its protocol number in MSG_ReadCoord)

------------------------------------------------------------------------
r4599 | havoc | 2004-10-06 02:26:37 +0200 (Wed, 06 Oct 2004) | 2 lines

sprites now work with EF_NODEPTHTEST

------------------------------------------------------------------------
r4598 | havoc | 2004-10-05 19:52:06 +0200 (Tue, 05 Oct 2004) | 2 lines

only enable watershader on fullbright water

------------------------------------------------------------------------
r4597 | havoc | 2004-10-05 19:44:16 +0200 (Tue, 05 Oct 2004) | 2 lines

now compiles on x86_64 successfully (still a crash regarding progs strings to fix later)

------------------------------------------------------------------------
r4596 | havoc | 2004-10-05 17:22:58 +0200 (Tue, 05 Oct 2004) | 2 lines

added commandline options section

------------------------------------------------------------------------
r4595 | havoc | 2004-10-05 17:22:17 +0200 (Tue, 05 Oct 2004) | 2 lines

revised commandline option comments for better categorization when sorted

------------------------------------------------------------------------
r4594 | havoc | 2004-10-05 16:08:15 +0200 (Tue, 05 Oct 2004) | 2 lines

added COMMANDLINEOPTION comments for every commandline option, these will be listed in the readme

------------------------------------------------------------------------
r4593 | havoc | 2004-10-04 23:28:58 +0200 (Mon, 04 Oct 2004) | 2 lines

fix colormap checking in ValidateState, it was throwing out RENDER_COLORMAPPED colormaps (which are not client numbers)

------------------------------------------------------------------------
r4592 | havoc | 2004-10-04 23:28:13 +0200 (Mon, 04 Oct 2004) | 2 lines

fix skybox in hlbsp not rendering

------------------------------------------------------------------------
r4591 | havoc | 2004-10-04 23:13:49 +0200 (Mon, 04 Oct 2004) | 2 lines

MSG_ReadAngle functions now return -180 to +180 range instead of 0-360 range which should fix glitches with player model pitch when looking down

------------------------------------------------------------------------
r4590 | havoc | 2004-10-04 22:44:53 +0200 (Mon, 04 Oct 2004) | 2 lines

305

------------------------------------------------------------------------
r4589 | havoc | 2004-10-04 20:50:30 +0200 (Mon, 04 Oct 2004) | 2 lines

fix negative frags showing up as 65535 and such

------------------------------------------------------------------------
r4588 | havoc | 2004-10-04 18:43:24 +0200 (Mon, 04 Oct 2004) | 2 lines

304

------------------------------------------------------------------------
r4587 | havoc | 2004-10-04 16:15:13 +0200 (Mon, 04 Oct 2004) | 2 lines

fix a very stupid way of addressing memory which is not 64bit compatible in the miptex reader

------------------------------------------------------------------------
r4586 | havoc | 2004-10-04 16:04:05 +0200 (Mon, 04 Oct 2004) | 2 lines

NUM_FOR_EDICT now casts to int so that it never returns a 64bit integer on 64bit compiles which sometimes end up getting passed to printf with the wrong format...

------------------------------------------------------------------------
r4585 | molivier | 2004-10-04 08:58:57 +0200 (Mon, 04 Oct 2004) | 2 lines

Allocated the log queue earlier in Log_Init since Cvar_* functions now print developer information

------------------------------------------------------------------------
r4584 | molivier | 2004-10-04 08:56:58 +0200 (Mon, 04 Oct 2004) | 2 lines

Moved the clamping of volumes higher in the mixing code, so that 16 bit sounds are clamped too

------------------------------------------------------------------------
r4582 | havoc | 2004-10-03 21:15:44 +0200 (Sun, 03 Oct 2004) | 2 lines

304

------------------------------------------------------------------------
r4581 | tomaz | 2004-10-03 21:08:15 +0200 (Sun, 03 Oct 2004) | 2 lines

298

------------------------------------------------------------------------
r4580 | havoc | 2004-10-03 12:27:50 +0200 (Sun, 03 Oct 2004) | 2 lines

remove support for GL_NV_vertex_array_range as it's obsolete and unused

------------------------------------------------------------------------
r4579 | havoc | 2004-10-03 12:17:31 +0200 (Sun, 03 Oct 2004) | 2 lines

added -novideosync disable for WGL swap control

------------------------------------------------------------------------
r4578 | havoc | 2004-10-02 23:09:34 +0200 (Sat, 02 Oct 2004) | 2 lines

fix cvar_string to check if the cvar exists

------------------------------------------------------------------------
r4574 | havoc | 2004-10-01 16:07:59 +0200 (Fri, 01 Oct 2004) | 2 lines

298

------------------------------------------------------------------------
r4573 | havoc | 2004-10-01 16:05:47 +0200 (Fri, 01 Oct 2004) | 2 lines

299

------------------------------------------------------------------------
r4572 | havoc | 2004-10-01 12:43:24 +0200 (Fri, 01 Oct 2004) | 2 lines

323

------------------------------------------------------------------------
r4569 | havoc | 2004-10-01 10:39:08 +0200 (Fri, 01 Oct 2004) | 2 lines

save shorter rtlights lines when cubemap/corona/angles are not used, saves a bit of space

------------------------------------------------------------------------
r4568 | havoc | 2004-10-01 09:54:54 +0200 (Fri, 01 Oct 2004) | 2 lines

fix an accidentally removed variable, and move a couple unused variables into the #else block they're used in

------------------------------------------------------------------------
r4567 | havoc | 2004-09-30 19:23:58 +0200 (Thu, 30 Sep 2004) | 2 lines

made shadowvolume building about 40% faster by not using projectdistance

------------------------------------------------------------------------
r4566 | havoc | 2004-09-30 18:38:54 +0200 (Thu, 30 Sep 2004) | 3 lines

sped up nexuiz rtlights benchmark by 4% by optimizing box cull on models to skip triangle box cull when surface box is entirely inside light box
restructured R_Shadow_ConstructShadowVolume loops a bit to make for less stalls, this seems to have only netted a 0.5% speed gain or so

------------------------------------------------------------------------
r4565 | havoc | 2004-09-30 12:05:01 +0200 (Thu, 30 Sep 2004) | 4 lines

removed a few fields from q3msurface_t
added a facelist to each q3mtexture_t so that the renderer can build a list of faces of the same texture without any face->texture comparisons
rewrote R_Q3BSP_DrawSky and R_Q3BSP_Draw, this improved a nexuiz timedemo with no rtlights by 116%

------------------------------------------------------------------------
r4564 | havoc | 2004-09-29 12:50:28 +0200 (Wed, 29 Sep 2004) | 2 lines

recalculate model->brushq3.num_leafs during loading because some broken q3map/q3map2 compiler versions actually count submodels as leafs in the bsp file

------------------------------------------------------------------------
r4563 | havoc | 2004-09-28 11:15:04 +0200 (Tue, 28 Sep 2004) | 2 lines

updated darkplaces icon with 6 sizes of 32bit (XP icon) and 4 sizes of 8bit (non-XP icon), thanks de-we

------------------------------------------------------------------------
r4561 | havoc | 2004-09-28 08:59:21 +0200 (Tue, 28 Sep 2004) | 2 lines

324

------------------------------------------------------------------------
r4560 | havoc | 2004-09-28 08:38:45 +0200 (Tue, 28 Sep 2004) | 2 lines

implemented DP_EF_NODEPTHTEST extension

------------------------------------------------------------------------
r4559 | havoc | 2004-09-28 07:34:59 +0200 (Tue, 28 Sep 2004) | 2 lines

use a less bizarre method of byte swapping q1bsp/q3bsp headers

------------------------------------------------------------------------
r4558 | tomaz | 2004-09-28 00:03:22 +0200 (Tue, 28 Sep 2004) | 2 lines

325

------------------------------------------------------------------------
r4557 | tomaz | 2004-09-28 00:00:16 +0200 (Tue, 28 Sep 2004) | 2 lines

326

------------------------------------------------------------------------
r4556 | havoc | 2004-09-27 15:41:21 +0200 (Mon, 27 Sep 2004) | 2 lines

327

------------------------------------------------------------------------
r4555 | havoc | 2004-09-27 15:39:27 +0200 (Mon, 27 Sep 2004) | 2 lines

upgraded particle font texture to 512x512 and changed the blood texture, and made blood splats larger (to make use of the more detailed texture)

------------------------------------------------------------------------
r4554 | havoc | 2004-09-27 13:31:52 +0200 (Mon, 27 Sep 2004) | 2 lines

fixed r_shadow_realtime_world_lightmaps cvar control to be a slider, it was a checkbox

------------------------------------------------------------------------
r4553 | havoc | 2004-09-27 09:09:58 +0200 (Mon, 27 Sep 2004) | 2 lines

325

------------------------------------------------------------------------
r4552 | tomaz | 2004-09-27 08:12:30 +0200 (Mon, 27 Sep 2004) | 2 lines

326

------------------------------------------------------------------------
r4551 | havoc | 2004-09-27 03:29:47 +0200 (Mon, 27 Sep 2004) | 2 lines

327 and reformatted notify list to sort by name first

------------------------------------------------------------------------
r4550 | tomaz | 2004-09-27 01:10:06 +0200 (Mon, 27 Sep 2004) | 2 lines

329

------------------------------------------------------------------------
r4549 | havoc | 2004-09-26 16:02:21 +0200 (Sun, 26 Sep 2004) | 2 lines

fix recently added notifies to say who to notify

------------------------------------------------------------------------
r4548 | havoc | 2004-09-26 15:47:27 +0200 (Sun, 26 Sep 2004) | 2 lines

336

------------------------------------------------------------------------
r4546 | havoc | 2004-09-26 15:42:22 +0200 (Sun, 26 Sep 2004) | 2 lines

static entities now light and shadow properly

------------------------------------------------------------------------
r4545 | havoc | 2004-09-26 15:23:06 +0200 (Sun, 26 Sep 2004) | 2 lines

minor cleanup - merged R_UpdateWorld into other places

------------------------------------------------------------------------
r4541 | havoc | 2004-09-26 15:11:04 +0200 (Sun, 26 Sep 2004) | 2 lines

r_fullbright 1 now works properly with r_shadow_realtime_world 1 (why anyone would want to do this? no idea)

------------------------------------------------------------------------
r4540 | havoc | 2004-09-26 14:46:40 +0200 (Sun, 26 Sep 2004) | 5 lines

added r_rtworld, r_rtworldshadows, r_rtdlight, r_rtdlightshadows, and r_lightmapintensity cvars to greatly clean up the handling of the various rtlight/normal rendering modes
ifixed lighting problems on transparent alias models in r_shadow_realtime_world mode with r_shadow_realtime_world_lightmaps < 1 (note: still does not use the rtlights entities, just bsp model light queries like lightmap mode uses)
cleaned up handling regarding RENDER_LIGHT, RENDER_SHADOW, EF_ADDITIVE, alpha, r_fullbright, RENDER_EXTERIORMODEL, and model->flags (now the EF_ADDITIVE and EF_FULLBRIGHT flags were moved to model->flags2)
tag children now inherit RENDER_EXTERIORMODEL from their parent so you can simply attach an external weapon model to the player model and it will appear/disappear according to chase_active appropriately

------------------------------------------------------------------------
r4539 | havoc | 2004-09-26 14:14:37 +0200 (Sun, 26 Sep 2004) | 2 lines

removed some very stale dead code

------------------------------------------------------------------------
r4538 | tomaz | 2004-09-26 13:25:11 +0200 (Sun, 26 Sep 2004) | 2 lines

Fixed some errors in the vid_vsync code.

------------------------------------------------------------------------
r4537 | havoc | 2004-09-26 06:06:45 +0200 (Sun, 26 Sep 2004) | 2 lines

remove unused variable generatenormals

------------------------------------------------------------------------
r4536 | havoc | 2004-09-26 04:23:11 +0200 (Sun, 26 Sep 2004) | 2 lines

fix R_Shadow_UpdateWorldLight (used by editing commands) to set cubemap even if it's an empty string, otherwise it's impossible to remove a cubemap on a light

------------------------------------------------------------------------
r4535 | havoc | 2004-09-23 03:44:33 +0200 (Thu, 23 Sep 2004) | 4 lines

added a Mod_BuildNormals function to accelerate vertex lighting which doesn't need texture vectors
moved vertex blending function from gl_models.c to model_alias.c and renamed accordingly
model loader now compiles frame zero into raw arrays because most models are not animated, this speeds up non-animated models, and anything else idling on frame 0, this eliminates vertex processing in many cases

------------------------------------------------------------------------
r4534 | havoc | 2004-09-21 11:34:06 +0200 (Tue, 21 Sep 2004) | 3 lines

made quakec stuffed quake1 protocol entities work alongside newer protocols, to attempt to fix the ending of Scourge of Armagon (still not working properly yet, camera is not taking the angles except in PROTOCOL_QUAKE mode)
also fixed separator positioning in Com_HexDumpToConsole (used for packet dumps)

------------------------------------------------------------------------
r4533 | havoc | 2004-09-21 11:18:30 +0200 (Tue, 21 Sep 2004) | 2 lines

this should fix a stupid bug with PROTOCOL_DARKPLACES4 clc_ackentities (client wasn't using the right framenum variable)

------------------------------------------------------------------------
r4532 | havoc | 2004-09-21 09:03:49 +0200 (Tue, 21 Sep 2004) | 2 lines

corrected name of NXQ_GFX_LETTERBOX (it was misnamed PXQ_GFX_LETTERBOX, my mistake, sorry)

------------------------------------------------------------------------
r4531 | havoc | 2004-09-21 05:14:39 +0200 (Tue, 21 Sep 2004) | 2 lines

340

------------------------------------------------------------------------
r4530 | havoc | 2004-09-20 23:42:34 +0200 (Mon, 20 Sep 2004) | 2 lines

341

------------------------------------------------------------------------
r4529 | havoc | 2004-09-20 07:51:21 +0200 (Mon, 20 Sep 2004) | 2 lines

added PXQ_GFX_LETTERBOX extension

------------------------------------------------------------------------
r4528 | havoc | 2004-09-20 06:45:51 +0200 (Mon, 20 Sep 2004) | 2 lines

changed net_master's to ghdigital.com and dpmaster.deathmask.net (names instead of IPs)

------------------------------------------------------------------------
r4527 | tomaz | 2004-09-18 23:25:11 +0200 (Sat, 18 Sep 2004) | 2 lines

339

------------------------------------------------------------------------
r4526 | havoc | 2004-09-18 22:46:33 +0200 (Sat, 18 Sep 2004) | 2 lines

340

------------------------------------------------------------------------
r4525 | tomaz | 2004-09-18 19:53:08 +0200 (Sat, 18 Sep 2004) | 2 lines

341

------------------------------------------------------------------------
r4524 | havoc | 2004-09-18 19:48:12 +0200 (Sat, 18 Sep 2004) | 2 lines

343 (+1 -2)

------------------------------------------------------------------------
r4523 | havoc | 2004-09-18 19:44:12 +0200 (Sat, 18 Sep 2004) | 2 lines

revert to saving normal cvar commands instead of seta, for compatibility with other quake engines

------------------------------------------------------------------------
r4522 | tomaz | 2004-09-18 19:30:55 +0200 (Sat, 18 Sep 2004) | 2 lines

Added confirm question to "Reset to Defaults" option.

------------------------------------------------------------------------
r4521 | tomaz | 2004-09-18 00:16:58 +0200 (Sat, 18 Sep 2004) | 2 lines

344

------------------------------------------------------------------------
r4520 | tomaz | 2004-09-18 00:16:00 +0200 (Sat, 18 Sep 2004) | 2 lines

Fixed a missing \n

------------------------------------------------------------------------
r4519 | tomaz | 2004-09-18 00:00:45 +0200 (Sat, 18 Sep 2004) | 2 lines

344

------------------------------------------------------------------------
r4518 | tomaz | 2004-09-17 23:56:13 +0200 (Fri, 17 Sep 2004) | 2 lines

Renamed mod_brush to mod_brushq1.

------------------------------------------------------------------------
r4517 | tomaz | 2004-09-17 23:53:11 +0200 (Fri, 17 Sep 2004) | 2 lines

344

------------------------------------------------------------------------
r4516 | tomaz | 2004-09-17 23:51:20 +0200 (Fri, 17 Sep 2004) | 2 lines

Clears stainmaps on map restart/change based on cl_stainmapsclearonload cvar. Also added to effects menu.

------------------------------------------------------------------------
r4515 | havoc | 2004-09-17 23:27:58 +0200 (Fri, 17 Sep 2004) | 2 lines

344

------------------------------------------------------------------------
r4514 | havoc | 2004-09-17 23:25:04 +0200 (Fri, 17 Sep 2004) | 4 lines

added set (create/set a cvar) and seta (create/set a saved cvar) commands, now config saving uses seta, and this allows mods to add their own cvars in default.cfg easily
cleaned up some of the command/cvar startup sequence, the menu commands and cvars were being registered AFTER config loading and video init, now they're registered before like they should be
cleaned up some cvar code and added developer printing of the more important cvar calls

------------------------------------------------------------------------
r4513 | havoc | 2004-09-17 23:19:13 +0200 (Fri, 17 Sep 2004) | 2 lines

missing \n on one dprint in ValidateState

------------------------------------------------------------------------
r4512 | black | 2004-09-17 20:41:51 +0200 (Fri, 17 Sep 2004) | 2 lines

Fixed str_cvar.

------------------------------------------------------------------------
r4511 | havoc | 2004-09-17 03:13:06 +0200 (Fri, 17 Sep 2004) | 2 lines

another round angles to int bug (this time in PF_vectoyaw)

------------------------------------------------------------------------
r4510 | havoc | 2004-09-17 03:03:03 +0200 (Fri, 17 Sep 2004) | 2 lines

fix stupid quake precision problem with PF_vectoangles (it rounded pitch to integer!)

------------------------------------------------------------------------
r4509 | havoc | 2004-09-17 02:33:05 +0200 (Fri, 17 Sep 2004) | 2 lines

use double precision for coord and angle conversions...  might help with jerky camera in some mods?

------------------------------------------------------------------------
r4508 | havoc | 2004-09-17 02:32:25 +0200 (Fri, 17 Sep 2004) | 2 lines

fix parser bug that read scale into alpha in PROTOCOL_DARKPLACES5

------------------------------------------------------------------------
r4507 | havoc | 2004-09-16 22:41:06 +0200 (Thu, 16 Sep 2004) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r4506 | havoc | 2004-09-16 22:20:40 +0200 (Thu, 16 Sep 2004) | 2 lines

344

------------------------------------------------------------------------
r4505 | havoc | 2004-09-16 22:00:11 +0200 (Thu, 16 Sep 2004) | 2 lines

optimized Mod_BuildBumpVectors slightly

------------------------------------------------------------------------
r4504 | molivier | 2004-09-15 18:06:51 +0200 (Wed, 15 Sep 2004) | 2 lines

Fixed project file for Dev-C++, from Kazashi

------------------------------------------------------------------------
r4501 | havoc | 2004-09-15 01:03:30 +0200 (Wed, 15 Sep 2004) | 2 lines

fix up another quoted commandline issue (this one being in commandline reconstruction for the cmdline cvar, not used for anything important)

------------------------------------------------------------------------
r4500 | havoc | 2004-09-15 00:57:23 +0200 (Wed, 15 Sep 2004) | 2 lines

fixed totally mixed up vis culling (as a result of botched bmodel vis handling - oops)

------------------------------------------------------------------------
r4499 | havoc | 2004-09-15 00:41:10 +0200 (Wed, 15 Sep 2004) | 2 lines

PROTOCOL_DARKPLACES5

------------------------------------------------------------------------
r4498 | havoc | 2004-09-15 00:15:19 +0200 (Wed, 15 Sep 2004) | 2 lines

344 - minor things

------------------------------------------------------------------------
r4496 | molivier | 2004-09-14 08:19:00 +0200 (Tue, 14 Sep 2004) | 2 lines

socklen_t is "int" in the Winsocks API

------------------------------------------------------------------------
r4495 | havoc | 2004-09-14 03:36:23 +0200 (Tue, 14 Sep 2004) | 4 lines

now saves r_shadow cvars that are available in the graphics options menu
separated R_Shadow_NewWorldLight into R_Shadow_NewWorldLight to allocate light and R_Shadow_UpdateWorldLight to assign properties, so that lights can be updated in place rather than reallocating them (mainly saves on hassles with r_debuglight testing while editing lights, which were being renumbered by every edit)
R_Shadow_UpdateWorldLight now tolerates radius 0, color 0 0 0, and snaps angles to the 0-360 range

------------------------------------------------------------------------
r4493 | havoc | 2004-09-13 23:39:27 +0200 (Mon, 13 Sep 2004) | 2 lines

341 - some hud items added

------------------------------------------------------------------------
r4491 | tomaz | 2004-09-13 00:20:43 +0200 (Mon, 13 Sep 2004) | 2 lines

337

------------------------------------------------------------------------
r4490 | tomaz | 2004-09-12 20:11:24 +0200 (Sun, 12 Sep 2004) | 2 lines

Added support for 16 joystick buttons.

------------------------------------------------------------------------
r4489 | tomaz | 2004-09-12 19:04:31 +0200 (Sun, 12 Sep 2004) | 2 lines

Merged CL_RocketTrail2 into CL_RocketTrail.

------------------------------------------------------------------------
r4488 | tomaz | 2004-09-12 18:18:06 +0200 (Sun, 12 Sep 2004) | 2 lines

Fixed positioning of light editing display, it's was not following the console properly.

------------------------------------------------------------------------
r4487 | tomaz | 2004-09-12 18:16:12 +0200 (Sun, 12 Sep 2004) | 2 lines

Made cl_beams_relative only affect view-attached beams.

------------------------------------------------------------------------
r4486 | tomaz | 2004-09-12 00:02:50 +0200 (Sun, 12 Sep 2004) | 2 lines

343

------------------------------------------------------------------------
r4485 | tomaz | 2004-09-12 00:02:20 +0200 (Sun, 12 Sep 2004) | 2 lines

Added vid_vsync cvar and also to put it in the video options menu.

------------------------------------------------------------------------
r4478 | tomaz | 2004-09-11 20:31:37 +0200 (Sat, 11 Sep 2004) | 2 lines

Fixed a bug in the commandline parser when giving it more than one + command.

------------------------------------------------------------------------
r4477 | tomaz | 2004-09-11 20:11:33 +0200 (Sat, 11 Sep 2004) | 2 lines

Fixed a crash in R_EditLights_PasteInfo_f.

------------------------------------------------------------------------
r4474 | havoc | 2004-09-11 17:31:23 +0200 (Sat, 11 Sep 2004) | 2 lines

rewrote Cmd_StuffCmds_f (commandline parser), it now properly handles quoted strings, + and - inside a word, and numbers beginning with + or -

------------------------------------------------------------------------
r4473 | havoc | 2004-09-11 02:57:59 +0200 (Sat, 11 Sep 2004) | 2 lines

apparently M_ToggleMenu_f is not what to call...  Call_MR_ToggleMenu_f is

------------------------------------------------------------------------
r4472 | havoc | 2004-09-11 02:54:00 +0200 (Sat, 11 Sep 2004) | 2 lines

fix undefined function warning

------------------------------------------------------------------------
r4471 | havoc | 2004-09-11 02:47:20 +0200 (Sat, 11 Sep 2004) | 2 lines

make CL_NextDemo put up menu if there's no demo to play (this makes startdemos command put up menu if there are no demos, better than staring at console)

------------------------------------------------------------------------
r4470 | havoc | 2004-09-11 02:46:26 +0200 (Sat, 11 Sep 2004) | 2 lines

fix very unreliable jumping (it was doing a stepdown back onto the floor instantly if framerate was too high or slowmo too low)

------------------------------------------------------------------------
r4469 | havoc | 2004-09-11 02:45:46 +0200 (Sat, 11 Sep 2004) | 2 lines

another attempt to fix quoted strings in windows commandline, but more so a cleanup

------------------------------------------------------------------------
r4468 | tomaz | 2004-09-11 02:42:41 +0200 (Sat, 11 Sep 2004) | 2 lines

345

------------------------------------------------------------------------
r4466 | havoc | 2004-09-10 20:20:06 +0200 (Fri, 10 Sep 2004) | 2 lines

fixed unterminated character constant in my last fix

------------------------------------------------------------------------
r4465 | havoc | 2004-09-10 20:19:05 +0200 (Fri, 10 Sep 2004) | 2 lines

fix quoted string parsing

------------------------------------------------------------------------
r4464 | havoc | 2004-09-09 21:20:30 +0200 (Thu, 09 Sep 2004) | 2 lines

socklen_t is missing on windows...  use size_t there, I hope this is right (winxp64 testing needed)

------------------------------------------------------------------------
r4458 | havoc | 2004-09-09 13:21:44 +0200 (Thu, 09 Sep 2004) | 2 lines

two bugs... back to 350

------------------------------------------------------------------------
r4457 | tomaz | 2004-09-09 08:12:00 +0200 (Thu, 09 Sep 2004) | 2 lines

347

------------------------------------------------------------------------
r4452 | tomaz | 2004-09-08 08:03:41 +0200 (Wed, 08 Sep 2004) | 2 lines

350 !!!

------------------------------------------------------------------------
r4451 | tomaz | 2004-09-08 01:30:36 +0200 (Wed, 08 Sep 2004) | 2 lines

351

------------------------------------------------------------------------
r4450 | tomaz | 2004-09-08 01:03:09 +0200 (Wed, 08 Sep 2004) | 2 lines

352

------------------------------------------------------------------------
r4447 | tomaz | 2004-09-07 20:23:35 +0200 (Tue, 07 Sep 2004) | 2 lines

356

------------------------------------------------------------------------
r4446 | tomaz | 2004-09-07 20:19:35 +0200 (Tue, 07 Sep 2004) | 3 lines

Added r_editlights_copyinfo and r_editlights_pasteinfo commands to clone the properties of a light, all except for origin.
Also added a check for r_editlights.integer in R_Shadow_EditLights_EditAll_f to avoid to spam the console with warnings.

------------------------------------------------------------------------
r4445 | tomaz | 2004-09-07 19:48:04 +0200 (Tue, 07 Sep 2004) | 3 lines

Reverting the DP_MOVETYPEWALK_NONCLIENTS commit.
How about if we actually remove todo items that are already done?

------------------------------------------------------------------------
r4444 | tomaz | 2004-09-07 19:42:57 +0200 (Tue, 07 Sep 2004) | 2 lines

Added an extension to indicate that MOVETYPE_WALK works on non-clients.

------------------------------------------------------------------------
r4443 | havoc | 2004-09-07 19:13:58 +0200 (Tue, 07 Sep 2004) | 2 lines

fixed STANDALONETEST so it works again

------------------------------------------------------------------------
r4442 | tomaz | 2004-09-07 19:00:44 +0200 (Tue, 07 Sep 2004) | 2 lines

Made hl map loading halve the lightmap samples, to fit hl's 0-1 range into quake's 0-2 range.

------------------------------------------------------------------------
r4441 | tomaz | 2004-09-06 23:19:36 +0200 (Mon, 06 Sep 2004) | 2 lines

358

------------------------------------------------------------------------
r4440 | black | 2004-09-06 12:36:28 +0200 (Mon, 06 Sep 2004) | 2 lines

Fixed fgets (before it has been ignoring the line that contained the EOF char).

------------------------------------------------------------------------
r4439 | black | 2004-09-06 10:06:40 +0200 (Mon, 06 Sep 2004) | 2 lines

Adding Sys_GetClipboardData to the SDL driver.

------------------------------------------------------------------------
r4438 | tomaz | 2004-09-05 13:25:21 +0200 (Sun, 05 Sep 2004) | 2 lines

359

------------------------------------------------------------------------
r4437 | tomaz | 2004-09-05 13:18:49 +0200 (Sun, 05 Sep 2004) | 2 lines

Added two cvars (sbar_alpha_bg and sbar_alpha_fg) to replace sbar_alpha, one controls background as 0-1, and one controls everything else as 0-1

------------------------------------------------------------------------
r4436 | tomaz | 2004-09-05 05:32:21 +0200 (Sun, 05 Sep 2004) | 2 lines

360

------------------------------------------------------------------------
r4435 | havoc | 2004-09-04 16:29:52 +0200 (Sat, 04 Sep 2004) | 2 lines

363 - added an item about replacing sbar_alpha with two cvars

------------------------------------------------------------------------
r4434 | havoc | 2004-09-04 15:16:00 +0200 (Sat, 04 Sep 2004) | 2 lines

more tolerance to deviations in calculated plane distances compared to the stored planes

------------------------------------------------------------------------
r4433 | tomaz | 2004-09-04 11:58:27 +0200 (Sat, 04 Sep 2004) | 2 lines

362

------------------------------------------------------------------------
r4432 | havoc | 2004-09-04 11:52:39 +0200 (Sat, 04 Sep 2004) | 2 lines

363 after some cleaning

------------------------------------------------------------------------
r4431 | molivier | 2004-09-03 17:19:18 +0200 (Fri, 03 Sep 2004) | 2 lines

Dpmaster has address mapping now

------------------------------------------------------------------------
r4430 | havoc | 2004-09-03 16:21:31 +0200 (Fri, 03 Sep 2004) | 2 lines

365

------------------------------------------------------------------------
r4429 | havoc | 2004-09-03 16:14:44 +0200 (Fri, 03 Sep 2004) | 6 lines

zym models are now loaded into the same structs as alias models in memory, this reduces code a lot and gives the full feature set (rtlights/skins)
zym models are now optimized when loading to eliminate duplicate vertex data (one of their more significant design flaws)
mdl/md2/md3 models no longer have stored svector/tvector/normal arrays, instead generating them on demand like skeletal models (this is slower but saves a *lot* of memory)
zym collisions are not implemented (yet)
zym bones are not reported as tags (yet)

------------------------------------------------------------------------
r4428 | havoc | 2004-09-03 13:03:47 +0200 (Fri, 03 Sep 2004) | 2 lines

converted portal building over to use polygon functions instead of winding

------------------------------------------------------------------------
r4427 | havoc | 2004-09-03 13:02:28 +0200 (Fri, 03 Sep 2004) | 2 lines

fixed r_drawportals - the meshqueue was not begun yet

------------------------------------------------------------------------
r4426 | havoc | 2004-09-03 12:32:29 +0200 (Fri, 03 Sep 2004) | 2 lines

fixed bugs with collision brush building, and added a great deal more error checking on them

------------------------------------------------------------------------
r4425 | havoc | 2004-09-03 08:26:27 +0200 (Fri, 03 Sep 2004) | 2 lines

added -novorbis commandline option to allow disabling ogg vorbis support even if the library is present

------------------------------------------------------------------------
r4424 | havoc | 2004-09-03 04:36:56 +0200 (Fri, 03 Sep 2004) | 2 lines

use main varray_vertex3f2 array (forgot this in previous commit)

------------------------------------------------------------------------
r4423 | havoc | 2004-09-03 04:24:30 +0200 (Fri, 03 Sep 2004) | 2 lines

added varray_svector3f, varray_tvector3f, and varray_normal3f arrays

------------------------------------------------------------------------
r4422 | havoc | 2004-09-03 03:40:43 +0200 (Fri, 03 Sep 2004) | 2 lines

added cl_particles_explosions_bubbles/sparks/smoke/shell cvars, got rid of cl_explosions cvar (it is equivilant to the shell cvar) and updated menu

------------------------------------------------------------------------
r4421 | havoc | 2004-09-03 03:39:42 +0200 (Fri, 03 Sep 2004) | 2 lines

fixed number of displayed scores in the minideathmatchoverlay in GAME_TRANSFUSION

------------------------------------------------------------------------
r4419 | havoc | 2004-09-02 15:46:30 +0200 (Thu, 02 Sep 2004) | 2 lines

now uses de-we's darkplaces icon in mingw builds, and has proper file info on the exe's properties dialog

------------------------------------------------------------------------
r4418 | havoc | 2004-09-02 15:16:31 +0200 (Thu, 02 Sep 2004) | 2 lines

being glued to the floor while swimming = bad

------------------------------------------------------------------------
r4417 | havoc | 2004-09-01 10:05:05 +0200 (Wed, 01 Sep 2004) | 2 lines

added DP_QC_FINDFLAGS and DP_QC_FINDCHAINFLAGS extensions

------------------------------------------------------------------------
r4416 | havoc | 2004-09-01 09:38:54 +0200 (Wed, 01 Sep 2004) | 2 lines

368

------------------------------------------------------------------------
r4415 | havoc | 2004-09-01 09:37:36 +0200 (Wed, 01 Sep 2004) | 2 lines

cl.viewzoomold/new are now reset in CL_ClearState

------------------------------------------------------------------------
r4414 | havoc | 2004-09-01 09:02:44 +0200 (Wed, 01 Sep 2004) | 2 lines

GAME_NETHERWORLD patch: a bunch of cvars and some menu changes

------------------------------------------------------------------------
r4413 | havoc | 2004-08-31 11:13:47 +0200 (Tue, 31 Aug 2004) | 2 lines

368

------------------------------------------------------------------------
r4412 | havoc | 2004-08-31 10:29:47 +0200 (Tue, 31 Aug 2004) | 2 lines

367 (+3 todo items)

------------------------------------------------------------------------
r4410 | havoc | 2004-08-30 18:08:05 +0200 (Mon, 30 Aug 2004) | 2 lines

364

------------------------------------------------------------------------
r4409 | tomaz | 2004-08-30 16:48:27 +0200 (Mon, 30 Aug 2004) | 2 lines

365

------------------------------------------------------------------------
r4408 | tomaz | 2004-08-30 16:47:35 +0200 (Mon, 30 Aug 2004) | 2 lines

Renamed QuadraticSpline code in curves.c to QuadraticBSpline.

------------------------------------------------------------------------
r4407 | molivier | 2004-08-30 14:03:31 +0200 (Mon, 30 Aug 2004) | 2 lines

Fixed the loading of ".skin" files (the skin numbers were reversed)

------------------------------------------------------------------------
r4406 | molivier | 2004-08-30 14:01:48 +0200 (Mon, 30 Aug 2004) | 2 lines

Removed an unused define, and renamed another one

------------------------------------------------------------------------
r4405 | molivier | 2004-08-30 13:59:52 +0200 (Mon, 30 Aug 2004) | 2 lines

Fixed a couple of warnings

------------------------------------------------------------------------
r4404 | havoc | 2004-08-30 11:27:10 +0200 (Mon, 30 Aug 2004) | 3 lines

fixed severe bugs in QuadForPlane (broken axis selection and use of the wrong planenormal components in some math)
modified Divide to not rotate the point list, this is a minor un-optimization of the algorithm but should improve consistency (unclipped polygons come out the same as they went in)

------------------------------------------------------------------------
r4403 | havoc | 2004-08-30 11:12:13 +0200 (Mon, 30 Aug 2004) | 2 lines

fix crash when transparent meshes were used in first frame rendered

------------------------------------------------------------------------
r4402 | havoc | 2004-08-30 11:11:35 +0200 (Mon, 30 Aug 2004) | 2 lines

collision.h doesn't need winding.h anymore

------------------------------------------------------------------------
r4401 | havoc | 2004-08-30 11:10:43 +0200 (Mon, 30 Aug 2004) | 2 lines

more documentation on B-Splines

------------------------------------------------------------------------
r4400 | havoc | 2004-08-30 11:09:57 +0200 (Mon, 30 Aug 2004) | 2 lines

make sure particles are reset on level change by clearing the array

------------------------------------------------------------------------
r4399 | havoc | 2004-08-29 11:08:44 +0200 (Sun, 29 Aug 2004) | 2 lines

367 and all unfinished todo items labeled by category

------------------------------------------------------------------------
r4398 | havoc | 2004-08-29 00:37:53 +0200 (Sun, 29 Aug 2004) | 2 lines

how'd this get here?

------------------------------------------------------------------------
r4396 | havoc | 2004-08-28 00:21:07 +0200 (Sat, 28 Aug 2004) | 2 lines

367

------------------------------------------------------------------------
r4395 | havoc | 2004-08-27 11:53:18 +0200 (Fri, 27 Aug 2004) | 2 lines

added GAME_NETHERWORLD

------------------------------------------------------------------------
r4394 | havoc | 2004-08-27 11:07:22 +0200 (Fri, 27 Aug 2004) | 2 lines

368

------------------------------------------------------------------------
r4392 | havoc | 2004-08-27 10:42:18 +0200 (Fri, 27 Aug 2004) | 2 lines

369

------------------------------------------------------------------------
r4391 | havoc | 2004-08-26 23:08:38 +0200 (Thu, 26 Aug 2004) | 2 lines

modified Tomaz credits

------------------------------------------------------------------------
r4390 | tomaz | 2004-08-26 10:43:02 +0200 (Thu, 26 Aug 2004) | 2 lines

369

------------------------------------------------------------------------
r4389 | havoc | 2004-08-26 09:43:22 +0200 (Thu, 26 Aug 2004) | 2 lines

370

------------------------------------------------------------------------
r4388 | havoc | 2004-08-26 05:10:32 +0200 (Thu, 26 Aug 2004) | 2 lines

fixed te_explosion2 prototype in comment to include colorlength (as it already does in dpextensions.qc)

------------------------------------------------------------------------
r4387 | havoc | 2004-08-26 01:57:46 +0200 (Thu, 26 Aug 2004) | 2 lines

md3 skin loading for player models which have no shader names works

------------------------------------------------------------------------
r4386 | havoc | 2004-08-26 01:56:24 +0200 (Thu, 26 Aug 2004) | 2 lines

thanks to Jeff Ford (qbism) for this fix to md3 player model loading, the base skin now works

------------------------------------------------------------------------
r4385 | tomaz | 2004-08-26 01:05:25 +0200 (Thu, 26 Aug 2004) | 2 lines

Added Tei's "whack" that adds a drop down shadow on all text. r_textshadow 1 to enable.

------------------------------------------------------------------------
r4384 | havoc | 2004-08-25 22:31:17 +0200 (Wed, 25 Aug 2004) | 2 lines

changed Collision_NewBrushFromPlanes to use new polygon.c code, this got rid of the winding allocations and moved everything onto the stack, a little cleaner (and the new polygon.c code is faster than winding.c)

------------------------------------------------------------------------
r4383 | tomaz | 2004-08-25 19:00:28 +0200 (Wed, 25 Aug 2004) | 2 lines

3371 items left.

------------------------------------------------------------------------
r4382 | tomaz | 2004-08-25 12:46:18 +0200 (Wed, 25 Aug 2004) | 2 lines

373 items left.

------------------------------------------------------------------------
r4381 | havoc | 2004-08-25 11:42:31 +0200 (Wed, 25 Aug 2004) | 2 lines

3 notifies done

------------------------------------------------------------------------
r4380 | havoc | 2004-08-25 11:33:19 +0200 (Wed, 25 Aug 2004) | 2 lines

a few more things done

------------------------------------------------------------------------
r4379 | havoc | 2004-08-25 11:32:06 +0200 (Wed, 25 Aug 2004) | 2 lines

implemented loading of particles/particlefont.tga and particles/nexbeam.tga

------------------------------------------------------------------------
r4378 | havoc | 2004-08-25 10:55:00 +0200 (Wed, 25 Aug 2004) | 2 lines

fixed a couple potential crashes due to nodestack overflow, as suggested by Vic

------------------------------------------------------------------------
r4377 | havoc | 2004-08-25 10:50:52 +0200 (Wed, 25 Aug 2004) | 2 lines

Mem_AllocPool flags and parent parameters added, now there can be multiple temporary mempools by using the POOLFLAG_TEMP option, and removed Mem_AllocNestedPool

------------------------------------------------------------------------
r4376 | havoc | 2004-08-25 10:08:00 +0200 (Wed, 25 Aug 2004) | 2 lines

+5 notify, +1 done, -6 todo, +3 todo

------------------------------------------------------------------------
r4375 | tomaz | 2004-08-25 08:51:57 +0200 (Wed, 25 Aug 2004) | 2 lines

376 items left.

------------------------------------------------------------------------
r4374 | tomaz | 2004-08-25 08:48:04 +0200 (Wed, 25 Aug 2004) | 2 lines

Slightly tweaked CL_ParticleExplosion2 by VorteX.

------------------------------------------------------------------------
r4373 | havoc | 2004-08-25 08:11:21 +0200 (Wed, 25 Aug 2004) | 4 lines

cleaned up all standing in a sloped corner and getting hurt glitches by adding an SV_SetOnGround function which is called in SV_WalkMove in the right places (incase SV_FlyMove does not set it), which also fixed stair stepup smoothing (it needs FL_ONGROUND to not be flipping on and off during a step up)
added stair stepdown (instead of going flying off stairs)
added stair stepdown smoothing

------------------------------------------------------------------------
r4372 | havoc | 2004-08-25 04:07:48 +0200 (Wed, 25 Aug 2004) | 2 lines

slightly changed color of iceblast in prydon

------------------------------------------------------------------------
r4371 | havoc | 2004-08-25 00:43:17 +0200 (Wed, 25 Aug 2004) | 2 lines

one new todo 3 item, one other 3 done

------------------------------------------------------------------------
r4370 | tomaz | 2004-08-24 20:18:17 +0200 (Tue, 24 Aug 2004) | 2 lines

Still 378 items.

------------------------------------------------------------------------
r4369 | tomaz | 2004-08-24 20:17:31 +0200 (Tue, 24 Aug 2004) | 2 lines

Tried to make the vore spike trail to be blue under GAME_PRYDON mode. Failed and somehow made it white instead.

------------------------------------------------------------------------
r4368 | tomaz | 2004-08-24 20:09:03 +0200 (Tue, 24 Aug 2004) | 2 lines

Added GAME_PRYDON.

------------------------------------------------------------------------
r4367 | tomaz | 2004-08-24 18:54:57 +0200 (Tue, 24 Aug 2004) | 2 lines

Somehow the svector bug which was d was readded as -d. Fixed that. 378 items left.

------------------------------------------------------------------------
r4366 | havoc | 2004-08-24 04:10:46 +0200 (Tue, 24 Aug 2004) | 2 lines

notified sublim3 of 4 items, categorized more items, added 2 or 3 items

------------------------------------------------------------------------
r4365 | havoc | 2004-08-23 10:20:45 +0200 (Mon, 23 Aug 2004) | 2 lines

broke rtlights, oops  (shadowtest was reversed)

------------------------------------------------------------------------
r4364 | havoc | 2004-08-23 09:25:34 +0200 (Mon, 23 Aug 2004) | 2 lines

missed a uint that should be GLuint

------------------------------------------------------------------------
r4363 | havoc | 2004-08-23 07:35:22 +0200 (Mon, 23 Aug 2004) | 2 lines

added GL_ARB_shader_objects, GL_ARB_shading_language_100, GL_ARB_vertex_shader, GL_ARB_fragment_shader extensions (not used for anything yet)

------------------------------------------------------------------------
r4362 | havoc | 2004-08-23 07:34:04 +0200 (Mon, 23 Aug 2004) | 2 lines

now only does stair smoothing when onground (thanks to Sajt for noticing this bug)

------------------------------------------------------------------------
r4361 | havoc | 2004-08-23 04:10:27 +0200 (Mon, 23 Aug 2004) | 2 lines

merged R_Shadow_Stage_LightWithShadows and R_Shadow_Stage_LightWithoutShadows to make a R_Shadow_Stage_Light which takes a shadowtest parameter, just a bit of code reduction

------------------------------------------------------------------------
r4360 | tomaz | 2004-08-22 19:15:39 +0200 (Sun, 22 Aug 2004) | 2 lines

380 items left.

------------------------------------------------------------------------
r4359 | tomaz | 2004-08-22 18:20:33 +0200 (Sun, 22 Aug 2004) | 2 lines

Added sv_maxrate cvar to server setup menu.

------------------------------------------------------------------------
r4358 | tomaz | 2004-08-22 17:37:58 +0200 (Sun, 22 Aug 2004) | 2 lines

Made ValidateState warn and not error out about colormap > maxclients.

------------------------------------------------------------------------
r4357 | tomaz | 2004-08-22 13:45:41 +0200 (Sun, 22 Aug 2004) | 2 lines

383 items left.

------------------------------------------------------------------------
r4356 | tomaz | 2004-08-22 13:37:47 +0200 (Sun, 22 Aug 2004) | 2 lines

Made gl_picmip affect only maps, models, and sprites by setting their TEXF_PICMIP flag.

------------------------------------------------------------------------
r4355 | tomaz | 2004-08-22 13:12:04 +0200 (Sun, 22 Aug 2004) | 2 lines

Changed 360. to 360.0

------------------------------------------------------------------------
r4354 | tomaz | 2004-08-22 03:58:50 +0200 (Sun, 22 Aug 2004) | 2 lines

384 items left.

------------------------------------------------------------------------
r4353 | tomaz | 2004-08-22 03:58:08 +0200 (Sun, 22 Aug 2004) | 2 lines

Added TEXF_PICMIP to the list of TEXF_ flags.

------------------------------------------------------------------------
r4352 | tomaz | 2004-08-22 03:30:48 +0200 (Sun, 22 Aug 2004) | 2 lines

Made qc profile command post an error message instead of crashing when used during demo playback.

------------------------------------------------------------------------
r4351 | tomaz | 2004-08-22 03:08:47 +0200 (Sun, 22 Aug 2004) | 2 lines

385 items left.

------------------------------------------------------------------------
r4350 | havoc | 2004-08-22 00:27:41 +0200 (Sun, 22 Aug 2004) | 2 lines

notified Todd about 3 items being done

------------------------------------------------------------------------
r4349 | tomaz | 2004-08-21 18:45:15 +0200 (Sat, 21 Aug 2004) | 2 lines

389 items.

------------------------------------------------------------------------
r4348 | tomaz | 2004-08-21 18:43:41 +0200 (Sat, 21 Aug 2004) | 2 lines

Made Sys_Error print the error message to the console / logfile.

------------------------------------------------------------------------
r4347 | tomaz | 2004-08-21 18:42:10 +0200 (Sat, 21 Aug 2004) | 2 lines

Close logfile at shutdown.

------------------------------------------------------------------------
r4346 | havoc | 2004-08-21 01:57:43 +0200 (Sat, 21 Aug 2004) | 2 lines

finished labeling categories of 0 difficulty items

------------------------------------------------------------------------
r4345 | tomaz | 2004-08-20 22:54:40 +0200 (Fri, 20 Aug 2004) | 2 lines

Forgot this when doing the embedded conchar commit

------------------------------------------------------------------------
r4344 | tomaz | 2004-08-20 22:53:11 +0200 (Fri, 20 Aug 2004) | 2 lines

down to 393

------------------------------------------------------------------------
r4343 | tomaz | 2004-08-20 22:50:39 +0200 (Fri, 20 Aug 2004) | 2 lines

embedded a fallback conchars.tga so it can load in an empty directory with a visible console (used to use the checkerboard texture)

------------------------------------------------------------------------
r4342 | tomaz | 2004-08-20 22:49:18 +0200 (Fri, 20 Aug 2004) | 2 lines

Added de-we to the credits

------------------------------------------------------------------------
r4341 | havoc | 2004-08-20 08:58:23 +0200 (Fri, 20 Aug 2004) | 2 lines

went through most of todo and cleaned things up, not finished labeling them by category yet, but todo is now down to 402 items

------------------------------------------------------------------------
r4340 | tomaz | 2004-08-20 02:00:18 +0200 (Fri, 20 Aug 2004) | 2 lines

Enabled tested and verified that the clipboard paste works in the console (Win32 only)

------------------------------------------------------------------------
r4339 | tomaz | 2004-08-19 14:34:15 +0200 (Thu, 19 Aug 2004) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r4338 | tomaz | 2004-08-19 02:09:30 +0200 (Thu, 19 Aug 2004) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r4337 | tomaz | 2004-08-19 00:23:01 +0200 (Thu, 19 Aug 2004) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r4336 | tomaz | 2004-08-19 00:22:29 +0200 (Thu, 19 Aug 2004) | 2 lines

Fixed collision: client getting fraction out of bounds errors when in a map the client does not have

------------------------------------------------------------------------
r4335 | tomaz | 2004-08-18 00:52:14 +0200 (Wed, 18 Aug 2004) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r4334 | tomaz | 2004-08-18 00:50:53 +0200 (Wed, 18 Aug 2004) | 2 lines

Added lightstyle interpolation.

------------------------------------------------------------------------
r4333 | havoc | 2004-08-17 01:51:06 +0200 (Tue, 17 Aug 2004) | 2 lines

fixed normalmap handling (my vectors were backwards), and corrected normalmap generator accordingly

------------------------------------------------------------------------
r4331 | havoc | 2004-08-13 01:31:48 +0200 (Fri, 13 Aug 2004) | 2 lines

now checks tangent vector crossproduct against surface normal to see if the tangents came out backwards and flips them if so, this fixed all the nasty bumpmapping problems

------------------------------------------------------------------------
r4330 | havoc | 2004-08-11 19:25:58 +0200 (Wed, 11 Aug 2004) | 2 lines

fixed sound problems (I had totally messed up the panning calcs, oops)

------------------------------------------------------------------------
r4329 | havoc | 2004-08-10 04:12:41 +0200 (Tue, 10 Aug 2004) | 2 lines

converted S_Update to take a matrix, and internal snd_dma functions to use that matrix where applicable (only spatialization)

------------------------------------------------------------------------
r4328 | havoc | 2004-08-10 04:10:12 +0200 (Tue, 10 Aug 2004) | 2 lines

added identitymatrix const struct which can be used wherever

------------------------------------------------------------------------
r4327 | havoc | 2004-08-09 23:35:53 +0200 (Mon, 09 Aug 2004) | 2 lines

fix unused variable k warning

------------------------------------------------------------------------
r4326 | havoc | 2004-08-09 23:29:47 +0200 (Mon, 09 Aug 2004) | 2 lines

don't show editlights cursor position when not in editlights mode

------------------------------------------------------------------------
r4325 | havoc | 2004-08-09 15:07:37 +0200 (Mon, 09 Aug 2004) | 2 lines

now shows cursor location in editlights mode

------------------------------------------------------------------------
r4324 | havoc | 2004-08-09 14:59:31 +0200 (Mon, 09 Aug 2004) | 2 lines

rocket glow is now more orange, less pale

------------------------------------------------------------------------
r4323 | havoc | 2004-08-09 12:12:49 +0200 (Mon, 09 Aug 2004) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r4322 | havoc | 2004-08-09 00:55:57 +0200 (Mon, 09 Aug 2004) | 3 lines

redesigned rocket explosion effect, now a simple spray of small sparks, nothing else
added pt_ember (a spark particle which leaves a trail of sparks), not used though (was used experimentally) and edited CL_MoveParticles a little bit to make it possible to spawn particles during the particle update loop

------------------------------------------------------------------------
r4321 | havoc | 2004-08-09 00:52:55 +0200 (Mon, 09 Aug 2004) | 4 lines

changed rocket explosion color to be more redish orange
changed rocket trail color to be more redish orange
doubled brightness of modelflags lights (they weren't very noticable)

------------------------------------------------------------------------
r4320 | tomaz | 2004-08-09 00:52:45 +0200 (Mon, 09 Aug 2004) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r4316 | tomaz | 2004-08-08 23:51:58 +0200 (Sun, 08 Aug 2004) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r4315 | tomaz | 2004-08-08 23:49:43 +0200 (Sun, 08 Aug 2004) | 2 lines

made TE_EXPLOSION2 use a spherical spawn pattern rather than cube shape

------------------------------------------------------------------------
r4314 | tomaz | 2004-08-08 23:26:23 +0200 (Sun, 08 Aug 2004) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r4313 | tomaz | 2004-08-08 23:07:19 +0200 (Sun, 08 Aug 2004) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r4312 | tomaz | 2004-08-08 23:04:51 +0200 (Sun, 08 Aug 2004) | 2 lines

Fixed the missing colorlength param on te_explosion2

------------------------------------------------------------------------
r4311 | havoc | 2004-08-08 22:17:16 +0200 (Sun, 08 Aug 2004) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r4310 | tomaz | 2004-08-08 22:06:59 +0200 (Sun, 08 Aug 2004) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r4309 | black | 2004-08-08 01:21:54 +0200 (Sun, 08 Aug 2004) | 3 lines

-Fixed a bad bugfix in the menu router.
-Added read-only support for files outside of data/ to the new vm.

------------------------------------------------------------------------
r4308 | havoc | 2004-08-07 17:52:21 +0200 (Sat, 07 Aug 2004) | 2 lines

effect dlights weren't casting shadows (oops)

------------------------------------------------------------------------
r4307 | havoc | 2004-08-07 17:51:42 +0200 (Sat, 07 Aug 2004) | 2 lines

fixed r_showtris

------------------------------------------------------------------------
r4306 | molivier | 2004-08-07 15:08:55 +0200 (Sat, 07 Aug 2004) | 2 lines

Improved sound resampling. It can handle sounds up to 96KHz stereo at a constant precision, even if they're very long, since the algorithm now works second by second.

------------------------------------------------------------------------
r4305 | havoc | 2004-08-06 15:06:07 +0200 (Fri, 06 Aug 2004) | 2 lines

rearranged SCR_UpdateScreen, now puts 2D graphics in the two views in r_stereo_sidebyside mode (but not in any other mode), and 2D graphics are rendered into both color planes with the anaglyph modes

------------------------------------------------------------------------
r4301 | havoc | 2004-08-06 10:01:37 +0200 (Fri, 06 Aug 2004) | 2 lines

added DP_QC_MULTIPLETEMPSTRINGS extension (thanks to fuh for pointing out I should make this detectable to the QC)

------------------------------------------------------------------------
r4299 | havoc | 2004-08-05 15:50:38 +0200 (Thu, 05 Aug 2004) | 5 lines

this patch adds a number of stereo viewing modes (shutter glasses and video glasses not supported yet)
added r_stereo_redblue and r_stereo_redgreen and r_stereo_redcyan (anaglyph 3d glasses)
added r_stereo_sidebyside (no glasses, recommend using the smallest viewsize to get them lined up with your eyes, then stare straight ahead...  warning: eye strain)
added r_stereo_separation (sets how far apart the eyes are in the world, default is 4 units, technically this should be 1.33, about 2 inches, but the quake player is a midget compared to the world...  so that doesn't look right)

------------------------------------------------------------------------
r4297 | black | 2004-08-03 10:39:50 +0200 (Tue, 03 Aug 2004) | 2 lines

Changed S_LocalSound to play multiple sounds at a time.

------------------------------------------------------------------------
r4296 | tomaz | 2004-08-02 20:00:26 +0200 (Mon, 02 Aug 2004) | 2 lines

Added CTRL+V paste into the console for win32 users.

------------------------------------------------------------------------
r4295 | molivier | 2004-08-02 16:18:46 +0200 (Mon, 02 Aug 2004) | 2 lines

Put all gamemode information (name, game dir, ...) into an array to ease maintenance.

------------------------------------------------------------------------
r4290 | havoc | 2004-07-27 11:18:10 +0200 (Tue, 27 Jul 2004) | 4 lines

removed particle compacting stage, this fixed all 'disappearing decals' problems, and caused a slight redesign to support dead particles in the array (now classified as pt_dead)
removed pressure particle support (since the freeparticle array it reused is gone now), pressure property still exists but is unused
added friction to a few more particle effects

------------------------------------------------------------------------
r4289 | havoc | 2004-07-26 08:11:23 +0200 (Mon, 26 Jul 2004) | 2 lines

removed gl_delayfinish cvar as it's now a speed loss with gl_finish 0

------------------------------------------------------------------------
r4288 | havoc | 2004-07-26 08:09:26 +0200 (Mon, 26 Jul 2004) | 2 lines

added gl_finish cvar, defaults to 0, this was a noticable speed gain (22.5% on timedemo demo1 if not fillrate limited)

------------------------------------------------------------------------
r4287 | tomaz | 2004-07-23 12:29:52 +0200 (Fri, 23 Jul 2004) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r4286 | tomaz | 2004-07-23 12:01:08 +0200 (Fri, 23 Jul 2004) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r4284 | molivier | 2004-07-22 15:35:24 +0200 (Thu, 22 Jul 2004) | 2 lines

Added 3 new QuakeC extensions: DP_SND_DIRECTIONLESSATTNNONE, DP_SND_OGGVORBIS and DP_SND_STEREOWAV

------------------------------------------------------------------------
r4283 | molivier | 2004-07-22 13:05:34 +0200 (Thu, 22 Jul 2004) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r4281 | havoc | 2004-07-22 02:38:41 +0200 (Thu, 22 Jul 2004) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r4280 | molivier | 2004-07-21 14:46:00 +0200 (Wed, 21 Jul 2004) | 2 lines

Fixed a warning when compiling with GCC (missing type)

------------------------------------------------------------------------
r4279 | molivier | 2004-07-20 14:26:55 +0200 (Tue, 20 Jul 2004) | 2 lines

Updated Transfusion map list for version 1.1 beta3

------------------------------------------------------------------------
r4278 | molivier | 2004-07-20 11:59:46 +0200 (Tue, 20 Jul 2004) | 2 lines

Fixed the sliders and the toggles in the options menu

------------------------------------------------------------------------
r4277 | tomaz | 2004-07-17 22:25:04 +0200 (Sat, 17 Jul 2004) | 2 lines

added graphics options menu and put realtime lighting stuff in it

------------------------------------------------------------------------
r4276 | tomaz | 2004-07-17 22:17:36 +0200 (Sat, 17 Jul 2004) | 2 lines

added r_editlights_editall command, same as _edit but affects all lights

------------------------------------------------------------------------
r4275 | tomaz | 2004-07-17 22:15:25 +0200 (Sat, 17 Jul 2004) | 2 lines

made gl_texture_anisotropy take effect immediately like gl_texturemode rather than needing an r_restart

------------------------------------------------------------------------
r4274 | tomaz | 2004-07-17 22:10:28 +0200 (Sat, 17 Jul 2004) | 2 lines

Fixed a color bug that made realtime lights to be severly broken.

------------------------------------------------------------------------
r4273 | black | 2004-07-16 17:35:26 +0200 (Fri, 16 Jul 2004) | 3 lines

-Added SDL cd playing support (though not all functions are supported).
-Added (in the SDL driver) the console command cddrive to handle multiple cd drives.

------------------------------------------------------------------------
r4272 | havoc | 2004-07-15 22:34:49 +0200 (Thu, 15 Jul 2004) | 2 lines

cleaned up EntityState code somewhat, added beginnings of new protocol (not used yet)

------------------------------------------------------------------------
r4271 | black | 2004-07-15 15:01:48 +0200 (Thu, 15 Jul 2004) | 2 lines

-Added SDL sound support (still needs a bit debugging, though).

------------------------------------------------------------------------
r4270 | black | 2004-07-14 15:22:01 +0200 (Wed, 14 Jul 2004) | 4 lines

-Added the preprocessor constant USE_DSOUND.
-Moved some prototypes around in sys.h a bit.
-Moved Sys_SendKeyEvents from sys_win.c to vid_wgl.c.

------------------------------------------------------------------------
r4269 | havoc | 2004-07-14 14:52:10 +0200 (Wed, 14 Jul 2004) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r4268 | havoc | 2004-07-14 14:31:59 +0200 (Wed, 14 Jul 2004) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r4267 | black | 2004-07-12 20:54:01 +0200 (Mon, 12 Jul 2004) | 5 lines

-The mouse wheels now work in Windows (now button presses are detected event-based)
-The left and middle mouse button arent switched any more.
-The library SDL version and the linked SDL version are displayed now (perhaps change
 the outputted text)

------------------------------------------------------------------------
r4266 | coderjoe | 2004-07-11 19:58:54 +0200 (Sun, 11 Jul 2004) | 2 lines

Add OpenQuartz support, provided by Toddd.

------------------------------------------------------------------------
r4265 | black | 2004-07-11 16:56:33 +0200 (Sun, 11 Jul 2004) | 3 lines

-Removed Sys_Quit and added Sys_Shutdown which will be called by Host_Shutdown.
-The SDL main driver is works more or less now.

------------------------------------------------------------------------
r4264 | black | 2004-07-10 14:27:22 +0200 (Sat, 10 Jul 2004) | 2 lines

Fixed a bug in the menu.

------------------------------------------------------------------------
r4263 | molivier | 2004-07-06 10:38:27 +0200 (Tue, 06 Jul 2004) | 2 lines

Removed the functions "S_RawSamples_*" and "S_ResampleBuffer16Stereo". They're useless now that the video code uses the common sound API.

------------------------------------------------------------------------
r4262 | havoc | 2004-07-06 09:06:10 +0200 (Tue, 06 Jul 2004) | 4 lines

USETEXMATRIX is now a #ifdef rather than a #if
now parses tyrlite light types properly (though doesn't do much special with them)
(this was an update I was sitting on for a month, forgot about it, sorry.)

------------------------------------------------------------------------
r4261 | molivier | 2004-07-05 15:28:58 +0200 (Mon, 05 Jul 2004) | 2 lines

Fixed a crash when using "-nosound"

------------------------------------------------------------------------
r4260 | havoc | 2004-07-05 04:19:57 +0200 (Mon, 05 Jul 2004) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r4259 | molivier | 2004-07-02 17:31:52 +0200 (Fri, 02 Jul 2004) | 2 lines

Oops. Forgot to remove "wavefile.[ch]"

------------------------------------------------------------------------
r4258 | molivier | 2004-07-02 17:30:22 +0200 (Fri, 02 Jul 2004) | 5 lines

Modified the sound code so it can handle sounds outside of a "sound" subdirectory.
Changed the video code so it uses the common sound code (nice side-effect: DP video soundtracks can now be Ogg Vorbis files). Removed "wavefile.[ch]" and updated the project files accordingly.
Fixed log timestamps on Win32.
Cleaned a bit of code and a few header files inclusions here and there.

------------------------------------------------------------------------
r4257 | black | 2004-06-26 16:32:53 +0200 (Sat, 26 Jun 2004) | 2 lines

Added support for my experimental ng menu(qc).

------------------------------------------------------------------------
r4256 | black | 2004-06-25 17:13:05 +0200 (Fri, 25 Jun 2004) | 3 lines

Added the cmd prvm_global <program> <global> which displays the value of the
specific global. This makes debugging easier.

------------------------------------------------------------------------
r4254 | molivier | 2004-06-25 15:38:31 +0200 (Fri, 25 Jun 2004) | 2 lines

Fixed partially the sound code for DP video captures. It still can't sync with the video stream capture itself, but at least it produces a correct WAV file.

------------------------------------------------------------------------
r4253 | molivier | 2004-06-24 16:49:07 +0200 (Thu, 24 Jun 2004) | 2 lines

DP now handles correctly demos containing "svc_disconnect" messages (fix Quake Done Quick With A Vengeance demos)

------------------------------------------------------------------------
r4251 | molivier | 2004-06-23 16:14:11 +0200 (Wed, 23 Jun 2004) | 2 lines

Removed unused functions S_AmbientOff and S_AmbientOn. Moved S_ClearBuffer declaration into "snd_dma.c" so it doesn't need an implementation in "snd_null.c"

------------------------------------------------------------------------
r4250 | molivier | 2004-06-23 16:11:05 +0200 (Wed, 23 Jun 2004) | 2 lines

Oops. I involuntary changed the default Linux sound config from OSS to ALSA 2 months ago. Reverted back that change.

------------------------------------------------------------------------
r4249 | molivier | 2004-06-23 16:06:45 +0200 (Wed, 23 Jun 2004) | 2 lines

A couple of minor simplifications in the screenshot / video code

------------------------------------------------------------------------
r4248 | molivier | 2004-06-16 14:06:24 +0200 (Wed, 16 Jun 2004) | 2 lines

Added support for Dev-C++, a MinGW32 IDE <http://www.bloodshed.net/dev/devcpp.html>

------------------------------------------------------------------------
r4247 | havoc | 2004-05-27 01:03:44 +0200 (Thu, 27 May 2004) | 2 lines

Tomaz renamed r_picmip to gl_picmip, r_max_size to gl_max_size, r_max_scrapsize to gl_max_scrapsize

------------------------------------------------------------------------
r4245 | havoc | 2004-05-26 13:28:04 +0200 (Wed, 26 May 2004) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r4244 | havoc | 2004-05-26 13:25:12 +0200 (Wed, 26 May 2004) | 2 lines

Tomaz fixed key repeats in the console

------------------------------------------------------------------------
r4243 | havoc | 2004-05-23 10:41:21 +0200 (Sun, 23 May 2004) | 4 lines

now reloads rtlights only when map changes, not renderer restarts, this means rtlights changes are not lost when video mode changes
autoloads rtlights when map changes, even if not in realtime lighting mode
compiles lights and loads their cubemaps without checking for visibility first (to force loading on first frame, not during gameplay)

------------------------------------------------------------------------
r4238 | havoc | 2004-05-22 10:11:03 +0200 (Sat, 22 May 2004) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r4237 | havoc | 2004-05-22 05:13:09 +0200 (Sat, 22 May 2004) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r4236 | havoc | 2004-05-22 05:12:27 +0200 (Sat, 22 May 2004) | 2 lines

Host_Name_f now validates player names, stripping \r and \n control codes

------------------------------------------------------------------------
r4235 | havoc | 2004-05-22 05:00:40 +0200 (Sat, 22 May 2004) | 2 lines

sort

------------------------------------------------------------------------
r4234 | havoc | 2004-05-22 05:00:07 +0200 (Sat, 22 May 2004) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r4233 | havoc | 2004-05-22 04:59:36 +0200 (Sat, 22 May 2004) | 2 lines

added sv_gameplayfix_grenadebouncedownsteps, sv_gameplayfix_noairborncorpse, sv_gameplayfix_stepwhilejumping, sv_gameplayfix_swiminbmodels cvars to be able to disable DP's physics enhancements

------------------------------------------------------------------------
r4232 | havoc | 2004-05-22 04:42:03 +0200 (Sat, 22 May 2004) | 2 lines

rtlights were crashing when there's no vis in a q3bsp

------------------------------------------------------------------------
r4230 | havoc | 2004-05-22 04:12:33 +0200 (Sat, 22 May 2004) | 2 lines

forgot to sort the todo

------------------------------------------------------------------------
r4229 | havoc | 2004-05-22 04:11:56 +0200 (Sat, 22 May 2004) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r4227 | havoc | 2004-05-22 00:25:29 +0200 (Sat, 22 May 2004) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r4226 | havoc | 2004-05-22 00:18:45 +0200 (Sat, 22 May 2004) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r4224 | havoc | 2004-05-21 21:45:13 +0200 (Fri, 21 May 2004) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r4223 | havoc | 2004-05-21 21:42:06 +0200 (Fri, 21 May 2004) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r4222 | havoc | 2004-05-21 21:20:51 +0200 (Fri, 21 May 2004) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r4221 | havoc | 2004-05-21 21:18:15 +0200 (Fri, 21 May 2004) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r4220 | havoc | 2004-05-21 21:09:21 +0200 (Fri, 21 May 2004) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r4219 | havoc | 2004-05-21 20:59:21 +0200 (Fri, 21 May 2004) | 2 lines

Tomaz renamed r_shadow_polygon* cvars to r_shadow_shadow_polygon*

------------------------------------------------------------------------
r4218 | havoc | 2004-05-21 20:56:54 +0200 (Fri, 21 May 2004) | 2 lines

Tomaz made Mem_Free only clear if developer is on, this may speed up engine shutdown

------------------------------------------------------------------------
r4217 | havoc | 2004-05-21 20:55:30 +0200 (Fri, 21 May 2004) | 2 lines

Tomaz renamed cl_fake* networking cvars to cl_net*

------------------------------------------------------------------------
r4216 | havoc | 2004-05-21 20:53:58 +0200 (Fri, 21 May 2004) | 2 lines

Tomaz made the progs/bolt.mdl and progs/bolt2.mdl loading not complain if missing

------------------------------------------------------------------------
r4215 | havoc | 2004-05-21 10:29:04 +0200 (Fri, 21 May 2004) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r4214 | havoc | 2004-05-21 04:56:10 +0200 (Fri, 21 May 2004) | 2 lines

Tomaz fixed the name timer glitch which caused blank names when restarting a server

------------------------------------------------------------------------
r4213 | havoc | 2004-05-21 03:30:23 +0200 (Fri, 21 May 2004) | 2 lines

Tomaz added r_skyscroll1/2 to the menu

------------------------------------------------------------------------
r4212 | havoc | 2004-05-21 02:49:52 +0200 (Fri, 21 May 2004) | 2 lines

handle sky scroll wrapping better

------------------------------------------------------------------------
r4211 | havoc | 2004-05-21 02:40:53 +0200 (Fri, 21 May 2004) | 2 lines

Tomaz implemented r_skyscroll1/2 cvars to control sky scrolling speeds

------------------------------------------------------------------------
r4210 | havoc | 2004-05-21 02:38:50 +0200 (Fri, 21 May 2004) | 2 lines

Tomaz implemented the vid_pixelaspect patch provided by Grisha Spivak

------------------------------------------------------------------------
r4209 | havoc | 2004-05-21 01:24:41 +0200 (Fri, 21 May 2004) | 2 lines

added GAME_NEOTERIC

------------------------------------------------------------------------
r4208 | havoc | 2004-05-21 01:18:41 +0200 (Fri, 21 May 2004) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r4207 | havoc | 2004-05-21 01:17:57 +0200 (Fri, 21 May 2004) | 2 lines

changed Son of Man's data directory to sonofman, as requested by Supajoe

------------------------------------------------------------------------
r4206 | havoc | 2004-05-21 01:05:55 +0200 (Fri, 21 May 2004) | 2 lines

GL_TransformToScreen now properly calculates out[2], thanks to Vic for pointing out the flaw

------------------------------------------------------------------------
r4205 | havoc | 2004-05-20 23:05:15 +0200 (Thu, 20 May 2004) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r4204 | havoc | 2004-05-20 22:33:00 +0200 (Thu, 20 May 2004) | 2 lines

Tomaz made cl_avidemo screenshot saving use no mallocs

------------------------------------------------------------------------
r4203 | havoc | 2004-05-20 21:29:04 +0200 (Thu, 20 May 2004) | 2 lines

Tomaz cleaned up some double ;; lines (strange stuff)

------------------------------------------------------------------------
r4202 | havoc | 2004-05-20 20:57:28 +0200 (Thu, 20 May 2004) | 2 lines

Tomaz optimized the cl_avidemo mode by making it keep around the image processing buffers, two less mallocs per frame

------------------------------------------------------------------------
r4200 | havoc | 2004-05-19 09:22:37 +0200 (Wed, 19 May 2004) | 2 lines

... actually 16 looks better as a start size

------------------------------------------------------------------------
r4199 | havoc | 2004-05-19 09:22:06 +0200 (Wed, 19 May 2004) | 2 lines

updated cl_explosions_size_start and cl_explosions_size_end to 64 and 128 respectively

------------------------------------------------------------------------
r4198 | havoc | 2004-05-19 09:20:12 +0200 (Wed, 19 May 2004) | 3 lines

restructured parts of explosion code
cl_explosions_size_start and cl_explosions_size_end now work

------------------------------------------------------------------------
r4196 | havoc | 2004-05-19 02:49:08 +0200 (Wed, 19 May 2004) | 3 lines

moved screenshot base name stuff to common.c, out of fs.c (by adding a gamescreenshotname variable, set like gamename and gamedirname)
added support for multiple -game directories (-game a -game b -game c ...)

------------------------------------------------------------------------
r4195 | havoc | 2004-05-19 00:01:56 +0200 (Wed, 19 May 2004) | 2 lines

Tomaz changed skybox rendering/loading to flip skyboxes and use cubemaps directly (no visual differences, just prefers cubemaps now) and reordered suffix tables to load in the order px posx rt

------------------------------------------------------------------------
r4194 | havoc | 2004-05-18 23:48:55 +0200 (Tue, 18 May 2004) | 2 lines

Tomaz fixed Image_CopyMux

------------------------------------------------------------------------
r4193 | havoc | 2004-05-18 23:28:40 +0200 (Tue, 18 May 2004) | 2 lines

new optimized Image_CopyMux is broken, disabled until it's fixed

------------------------------------------------------------------------
r4192 | havoc | 2004-05-18 23:04:59 +0200 (Tue, 18 May 2004) | 2 lines

Tomaz added support for loading a cubemap as skybox

------------------------------------------------------------------------
r4191 | havoc | 2004-05-18 22:48:56 +0200 (Tue, 18 May 2004) | 2 lines

Tomaz fixed black models in unlit maps

------------------------------------------------------------------------
r4190 | havoc | 2004-05-18 20:55:36 +0200 (Tue, 18 May 2004) | 2 lines

Tomaz patch to implement controllable fade rate in explosions

------------------------------------------------------------------------
r4189 | havoc | 2004-05-18 20:26:12 +0200 (Tue, 18 May 2004) | 2 lines

Vic optimized Image_CopyMux

------------------------------------------------------------------------
r4188 | havoc | 2004-05-18 08:26:07 +0200 (Tue, 18 May 2004) | 2 lines

merged RSurfShader_Water_Callback and RSurfShader_Wall_Vertex_Callback and made them more consistent, water lightmaps are now basically supported (vertex though)

------------------------------------------------------------------------
r4187 | havoc | 2004-05-18 08:24:22 +0200 (Tue, 18 May 2004) | 2 lines

allow drawing coronas fainter than 1 (it was checking r_coronas.integer)

------------------------------------------------------------------------
r4186 | havoc | 2004-05-18 08:13:31 +0200 (Tue, 18 May 2004) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r4185 | havoc | 2004-05-18 06:35:35 +0200 (Tue, 18 May 2004) | 2 lines

separated rtlight (light[]) settings from normal glow dlights, this means no more anomalies involving cubemaps on glowing models and such, all pflags are ignored on dlights, only rtlights are affected

------------------------------------------------------------------------
r4184 | havoc | 2004-05-17 22:09:21 +0200 (Mon, 17 May 2004) | 2 lines

Tomaz added lightning settings to effects options menu

------------------------------------------------------------------------
r4183 | havoc | 2004-05-17 22:06:10 +0200 (Mon, 17 May 2004) | 2 lines

Tomaz added some cl_explosions cvars, more work on this to come

------------------------------------------------------------------------
r4182 | havoc | 2004-05-17 21:46:52 +0200 (Mon, 17 May 2004) | 2 lines

cleaned up PF_fopen filename rejection, now rejects more unsafe names, including control characters (yes I expect problems with player names as a result)

------------------------------------------------------------------------
r4181 | havoc | 2004-05-17 21:27:00 +0200 (Mon, 17 May 2004) | 2 lines

Tomaz patch to fopen builtin which now tries to read files outside data/ (but won't try to write or append outside data/), for better compatibility with other engines that don't use data/ in their FRIK_FILE implementation

------------------------------------------------------------------------
r4180 | havoc | 2004-05-17 21:18:31 +0200 (Mon, 17 May 2004) | 2 lines

Tomaz's con_backscroll patch, backscroll is no longer reset by new prints, and remains locked on the same position in the history

------------------------------------------------------------------------
r4179 | havoc | 2004-05-17 21:08:44 +0200 (Mon, 17 May 2004) | 3 lines

changed Com_HexDumpToConsole to print space separated 4 byte groups, added some comments, and cleaned up the readability of it
thanks to Tomaz for the beginnings of this patch

------------------------------------------------------------------------
r4178 | havoc | 2004-05-17 20:22:31 +0200 (Mon, 17 May 2004) | 2 lines

fix r_fullbright being accidentally reset on level change

------------------------------------------------------------------------
r4176 | havoc | 2004-05-16 02:21:11 +0200 (Sun, 16 May 2004) | 2 lines

Tomaz optimized Matrix4x4_CreateFromQuakeEntity

------------------------------------------------------------------------
r4175 | havoc | 2004-05-16 02:19:10 +0200 (Sun, 16 May 2004) | 2 lines

Tomaz optimized AngleVectorsFLU for the roll == 0 case

------------------------------------------------------------------------
r4174 | havoc | 2004-05-16 01:35:18 +0200 (Sun, 16 May 2004) | 2 lines

Tomaz made envmap also save px/nx/py/ny/pz/nz files (GL cubemap)

------------------------------------------------------------------------
r4173 | havoc | 2004-05-16 01:24:11 +0200 (Sun, 16 May 2004) | 2 lines

Tomaz optimized AngleVectors for the roll == 0 case

------------------------------------------------------------------------
r4172 | havoc | 2004-05-15 23:49:10 +0200 (Sat, 15 May 2004) | 2 lines

Tomaz enabled some numpad keys in the console and the insert key, and also fixed up the console edit line rendering so you can move left/right on the editing line

------------------------------------------------------------------------
r4171 | havoc | 2004-05-15 22:43:17 +0200 (Sat, 15 May 2004) | 2 lines

Tomaz renamed all R_Model_Brush functions to R_Q1BSP

------------------------------------------------------------------------
r4170 | havoc | 2004-05-15 22:40:07 +0200 (Sat, 15 May 2004) | 2 lines

added comments to cubemap loader, to explain its confusing logic

------------------------------------------------------------------------
r4169 | havoc | 2004-05-15 22:24:19 +0200 (Sat, 15 May 2004) | 2 lines

Tomaz fixed the envmap command; it was saving black images, and now saves images in the correct order with appropriate flipping, to comply with skybox arrangements

------------------------------------------------------------------------
r4168 | havoc | 2004-05-15 21:35:15 +0200 (Sat, 15 May 2004) | 4 lines

renamed most Image_CopyMux parameters to begin with input to clarify their purpose, inputwidth for example, because these are input properties, not output properties
cleaned up Image_CopyMux, and fixed its handling of inputflipdiagonal to properly work with unequal inputwidth/inputheight
swapped Image_CopyMux numinputcomponents/numoutputcomponents parameters to be more consistent with the 'output, input' order of its other parameters

------------------------------------------------------------------------
r4167 | havoc | 2004-05-15 20:34:46 +0200 (Sat, 15 May 2004) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r4166 | havoc | 2004-05-15 07:52:06 +0200 (Sat, 15 May 2004) | 2 lines

fix skybox loading in q3 shaders, needed to append a _ to the end of the skybox name

------------------------------------------------------------------------
r4165 | havoc | 2004-05-14 17:53:58 +0200 (Fri, 14 May 2004) | 2 lines

Tomaz fixed cubemap loading of skyboxes

------------------------------------------------------------------------
r4164 | havoc | 2004-05-14 02:17:43 +0200 (Fri, 14 May 2004) | 2 lines

Tomaz fixed the skybox arrangement to match glquake/quake2/quake3/3dstudio

------------------------------------------------------------------------
r4163 | havoc | 2004-05-14 02:16:34 +0200 (Fri, 14 May 2004) | 2 lines

Tomaz fixed the stencil support (I had accidentally broken it in my over-zealous resetting of gl related variables)

------------------------------------------------------------------------
r4162 | havoc | 2004-05-14 00:39:18 +0200 (Fri, 14 May 2004) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r4161 | havoc | 2004-05-14 00:02:33 +0200 (Fri, 14 May 2004) | 2 lines

Tomaz's gl_polyblend patch to control intensity of view blends

------------------------------------------------------------------------
r4160 | havoc | 2004-05-13 21:10:44 +0200 (Thu, 13 May 2004) | 2 lines

Tomaz's patch to add fov to options menu

------------------------------------------------------------------------
r4159 | havoc | 2004-05-13 20:41:18 +0200 (Thu, 13 May 2004) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r4158 | havoc | 2004-05-13 20:40:01 +0200 (Thu, 13 May 2004) | 2 lines

Tomaz's nametime patch (prevent frequent name changes on the server)

------------------------------------------------------------------------
r4157 | havoc | 2004-05-13 19:23:09 +0200 (Thu, 13 May 2004) | 2 lines

Tomaz's patch to name screenshots based on gamemode or -game if specified

------------------------------------------------------------------------
r4148 | havoc | 2004-05-13 00:08:29 +0200 (Thu, 13 May 2004) | 3 lines

Tomaz's patch to ask the driver for a gl_texture_anisotropy limit, and apply that limit
also fixed a bunch of extension variables that were not being reset on resolution changes

------------------------------------------------------------------------
r4147 | havoc | 2004-05-12 20:03:11 +0200 (Wed, 12 May 2004) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r4146 | havoc | 2004-05-12 18:57:48 +0200 (Wed, 12 May 2004) | 2 lines

now ignores darkplaces-sdl and darkplaces-dedicated executables, removed darkplaces-3dfx executable (as it has been abandoned for a long time)

------------------------------------------------------------------------
r4145 | havoc | 2004-05-12 18:55:42 +0200 (Wed, 12 May 2004) | 2 lines

Tomaz's patch for r_waterwarp with controllable intensity

------------------------------------------------------------------------
r4144 | havoc | 2004-05-12 18:52:39 +0200 (Wed, 12 May 2004) | 2 lines

Tomaz's patch for optimized vectorlength calls in the vertex lighting code, as Vic suggested

------------------------------------------------------------------------
r4141 | molivier | 2004-05-04 12:10:10 +0200 (Tue, 04 May 2004) | 2 lines

Fixed a few warnings regarding casts of lvalues (deprecated in GCC 3.3, unsupported in GCC 3.4)

------------------------------------------------------------------------
r4138 | molivier | 2004-05-04 10:45:14 +0200 (Tue, 04 May 2004) | 2 lines

Removed the printings at the end of ALSA driver initialization. Fixed the soundinfo format string for the DMA pointer

------------------------------------------------------------------------
r4131 | havoc | 2004-05-03 12:11:16 +0200 (Mon, 03 May 2004) | 2 lines

credited Elric for some of his great contributions, and removed the warnings about music files often using 50mb or so of memory, as Elric made them stream

------------------------------------------------------------------------
r4120 | havoc | 2004-05-02 05:54:31 +0200 (Sun, 02 May 2004) | 2 lines

clean up vector parsing in ED_ParseEpair, now stores 0 into any vector components that can not be read due to end of string

------------------------------------------------------------------------
r4118 | molivier | 2004-04-29 09:54:05 +0200 (Thu, 29 Apr 2004) | 3 lines

The log file is now started and stopped at run-time whenever the value of the "log_file" cvar changes. Added timestamps at the beginning and at the end of the log files. Increased the log queue size from 256 to 512.
DP now appends the new logs instead of overwritting the files (except when using "-condebug", it overwrites "qconsole.log").

------------------------------------------------------------------------
r4117 | molivier | 2004-04-29 09:51:11 +0200 (Thu, 29 Apr 2004) | 2 lines

Updated ALSA driver (API version 1.0). The vast majority of the code comes from QuakeForge, like the previous versions

------------------------------------------------------------------------
r4116 | molivier | 2004-04-29 09:48:32 +0200 (Thu, 29 Apr 2004) | 2 lines

Fixed a bug in the Ogg Vorbis streaming code that can cause sound files to be unplayable if the sound device is set to a lower speed

------------------------------------------------------------------------
r4115 | havoc | 2004-04-18 03:47:46 +0200 (Sun, 18 Apr 2004) | 2 lines

merged R_DrawSurfaceChain into R_DrawSurfaces loop

------------------------------------------------------------------------
r4114 | havoc | 2004-04-18 03:24:54 +0200 (Sun, 18 Apr 2004) | 2 lines

more consistent and helpful model loading error messages

------------------------------------------------------------------------
r4113 | havoc | 2004-04-16 10:06:36 +0200 (Fri, 16 Apr 2004) | 2 lines

fixed the huge networking problems regarding invalid reference frames

------------------------------------------------------------------------
r4112 | havoc | 2004-04-16 08:36:32 +0200 (Fri, 16 Apr 2004) | 2 lines

made the player setup menu actually change the rate cvar (like it was supposed to)

------------------------------------------------------------------------
r4111 | molivier | 2004-04-16 08:28:12 +0200 (Fri, 16 Apr 2004) | 2 lines

Fine-grained CD volume for NetBSD. Made the CD error message "Bad track number" a normal (non-developer) message. Zeroed the 3rd and 4th channel volumes in the Linux CD module too. The initial CD volume is now printed at startup (developer message).

------------------------------------------------------------------------
r4110 | havoc | 2004-04-16 08:08:18 +0200 (Fri, 16 Apr 2004) | 3 lines

renamed r_shadow_worldshadows to r_shadow_realtime_world_shadows
renamed r_shadow_dlightshadows to r_shadow_realtime_dlight_shadows, and added r_shadow_realtime_world_dlightshadows to control dlight shadows in realtime world mode

------------------------------------------------------------------------
r4109 | havoc | 2004-04-16 08:06:24 +0200 (Fri, 16 Apr 2004) | 2 lines

make WinMain commandline parser handle quoted strings

------------------------------------------------------------------------
r4108 | molivier | 2004-04-15 16:24:03 +0200 (Thu, 15 Apr 2004) | 2 lines

Fine-grained CD volume support for Linux. Note that it uses the CD player internal volume, not the system audio mixer. The BSD version should follow very soon; if someone knows how to do that on Win32, I would be glad to hear from him.

------------------------------------------------------------------------
r4107 | molivier | 2004-04-15 08:04:09 +0200 (Thu, 15 Apr 2004) | 2 lines

Fixed streaming of sounds with a sample rate different from the engine output rate. Streamed sounds are now processed by 1 sec steps, to avoid lossing samples in ResampleSfx among other things (it could occur when resampling from 48KHz to 44KHz for instance).

------------------------------------------------------------------------
r4106 | havoc | 2004-04-14 10:47:14 +0200 (Wed, 14 Apr 2004) | 2 lines

r_ambient no longer alters the lightmap in q1bsp, instead it adds another render pass (this makes sense for performance as it's a cheat anyway, no optimization needed)

------------------------------------------------------------------------
r4105 | havoc | 2004-04-14 09:53:38 +0200 (Wed, 14 Apr 2004) | 2 lines

renamed q3mface_t to q3msurface_t

------------------------------------------------------------------------
r4104 | havoc | 2004-04-14 09:34:44 +0200 (Wed, 14 Apr 2004) | 3 lines

renamed model->numsurfaces to model->nummodelsurfaces
renamed model->brushq1.firstmodelsurface and model->brushq1.nummodelsurfaces to model->firstmodelsurface and model->nummodelsurfaces

------------------------------------------------------------------------
r4103 | havoc | 2004-04-14 08:17:43 +0200 (Wed, 14 Apr 2004) | 2 lines

merged R_DrawWorld into DrawSky/Draw so that rmain can just call DrawSky and Draw on the world entity like any other

------------------------------------------------------------------------
r4102 | molivier | 2004-04-14 08:02:02 +0200 (Wed, 14 Apr 2004) | 2 lines

The Linux CD module now uses O_NONBLOCK when opening the CDROM device to avoid failure if there's no CD in the player

------------------------------------------------------------------------
r4101 | havoc | 2004-04-14 07:13:50 +0200 (Wed, 14 Apr 2004) | 2 lines

cleaned up submodel loading, and wrote a big description of how quake worked (since it was so confusing), as well as how it now works

------------------------------------------------------------------------
r4100 | havoc | 2004-04-14 06:59:06 +0200 (Wed, 14 Apr 2004) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r4099 | havoc | 2004-04-14 06:58:31 +0200 (Wed, 14 Apr 2004) | 2 lines

added a number of tips and a sound features section

------------------------------------------------------------------------
r4098 | havoc | 2004-04-14 06:47:31 +0200 (Wed, 14 Apr 2004) | 2 lines

fix sprite pitch; apparently quake did not negate their pitch after all...

------------------------------------------------------------------------
r4097 | havoc | 2004-04-12 09:58:04 +0200 (Mon, 12 Apr 2004) | 2 lines

another change for transfusion (remove the little frag counts display from the sbar)

------------------------------------------------------------------------
r4096 | havoc | 2004-04-12 09:34:02 +0200 (Mon, 12 Apr 2004) | 2 lines

patch from transfusion team to change transfusion hud layout a bit (moves minideathmatch overlay to be across the top of the screen, and centers the sbar even in deathmatch)

------------------------------------------------------------------------
r4095 | havoc | 2004-04-12 09:30:47 +0200 (Mon, 12 Apr 2004) | 2 lines

patch from transfusion team to add taunts to transfusion bind menu

------------------------------------------------------------------------
r4094 | molivier | 2004-04-11 19:41:17 +0200 (Sun, 11 Apr 2004) | 2 lines

The first step towards a real CD volume setting (only the fake CD tracks volume are correctly supported for the moment). Removed a couple of useless definitions in "sound.h".

------------------------------------------------------------------------
r4093 | molivier | 2004-04-11 19:34:51 +0200 (Sun, 11 Apr 2004) | 2 lines

Added an error message when the sound mixer requests more samples from a stream than its buffer can contain

------------------------------------------------------------------------
r4092 | havoc | 2004-04-10 04:20:09 +0200 (Sat, 10 Apr 2004) | 2 lines

reverse pitch direction on PFLAGS_FULLDYNAMIC light entities to match tenebrae

------------------------------------------------------------------------
r4091 | molivier | 2004-04-09 21:37:18 +0200 (Fri, 09 Apr 2004) | 2 lines

The base size of the log queue is 256 bytes, not 4 (it was a test for the queue automatic resizing that was commited by mistake)

------------------------------------------------------------------------
r4090 | molivier | 2004-04-08 15:11:51 +0200 (Thu, 08 Apr 2004) | 4 lines

Added a "log_file" cvar to control the log file name (default: "" which means no log, "-condebug" sets it to "qconsole.log"). Added a "log_sync" cvar to control whether or not the log output is flushed at each write (default: 0, "-condebug" sets it to 1).
Note that we now need to wait until the cvars are initialized to start logging the console, so the logging system puts every message printed before that in a logging queue that is proceed when the log file is actually opened.
Renamed "Con_LogPrint" and "Con_LogPrintf" to "Log_Print" and "Log_Printf" respectively. Added "FS_VPrintf"

------------------------------------------------------------------------
r4089 | molivier | 2004-04-08 14:59:34 +0200 (Thu, 08 Apr 2004) | 2 lines

"soundlist" now tells you if a sound is streamed and whether it is mono or stereo

------------------------------------------------------------------------
r4088 | havoc | 2004-04-07 06:36:11 +0200 (Wed, 07 Apr 2004) | 2 lines

fixed entities disappearing when partially submerged in water (it was a very stupid bounding box bug)

------------------------------------------------------------------------
r4087 | molivier | 2004-04-06 15:08:07 +0200 (Tue, 06 Apr 2004) | 2 lines

Removed an unused cvar (logfile)

------------------------------------------------------------------------
r4086 | molivier | 2004-04-06 07:58:07 +0200 (Tue, 06 Apr 2004) | 2 lines

Fixed cl_nodelta 1

------------------------------------------------------------------------
r4085 | molivier | 2004-04-05 09:00:19 +0200 (Mon, 05 Apr 2004) | 4 lines

Fake CD tracks support; DP now tries to play "sound/cdtracks/trackXX.wav" instead of CD track XX. If it fails, it tries "trackXX.ogg", and then the real CD track if any. CD console commands should work as expected.
"cd_shared.c" is now part of the common files so it allows people to compile DP without real CD support, but with fake CD tracks support. "cd_null.c" is now a null driver, at the same level as "cd_linux.c" or "cd_win.c".
Fixed the broken return value of S_StartSound and a potential memory leak in S_StopAllSounds in the process.

------------------------------------------------------------------------
r4084 | molivier | 2004-04-05 08:51:41 +0200 (Mon, 05 Apr 2004) | 2 lines

Fixed the "-path" option. A couple of FS variables were never initialized explicitly

------------------------------------------------------------------------
r4083 | havoc | 2004-04-05 08:49:31 +0200 (Mon, 05 Apr 2004) | 2 lines

inlined Host_EndGame in CL_ParseServerMessage's svc_disconnect case and greatly reduced its code (removing the server shutdown, etc), this fixed an infinite recursion shutdown crash introduced by the Host_ShutdownServer changes

------------------------------------------------------------------------
r4082 | molivier | 2004-04-05 08:45:47 +0200 (Mon, 05 Apr 2004) | 2 lines

Fixed Win32 dedicated server input

------------------------------------------------------------------------
r4081 | havoc | 2004-04-05 08:20:23 +0200 (Mon, 05 Apr 2004) | 4 lines

fixed very annoying '5 second timeout' bug in Host_ShutdownServer (the local client was timing out on the NetConn_SendToAll because the server was ignoring the client's reply packets, by setting sv.active = false too early)
added Host_ShutdownServer call near every CL_Disconnect call, for consistency
CL_Disconnect and Host_ShutdownServer now report their calls as dprints (previously they were entirely silent)

------------------------------------------------------------------------
r4080 | havoc | 2004-04-04 01:20:30 +0200 (Sun, 04 Apr 2004) | 2 lines

make shrak work (lots of SOLID_BSP/MOVETYPE_PUSH entities with no models)

------------------------------------------------------------------------
r4079 | havoc | 2004-04-03 03:34:56 +0200 (Sat, 03 Apr 2004) | 2 lines

fixed missing newline after map name in join message

------------------------------------------------------------------------
r4078 | molivier | 2004-04-02 15:23:20 +0200 (Fri, 02 Apr 2004) | 2 lines

Added a CHANNELFLAG_LOCALSOUND flag for channels playing a client-side sound, such as menu sounds for instance. Added the ability to pause/resume channels. When the game is paused, all non-local sounds are now automatically paused (previously, no new sound was started during the pause, but those already created were played normally).

------------------------------------------------------------------------
r4077 | molivier | 2004-04-02 09:27:05 +0200 (Fri, 02 Apr 2004) | 2 lines

Oops... It seems this malloc/free was actually intended (part of a piece of code protected by a WORKINGLQUAKE define)

------------------------------------------------------------------------
r4076 | molivier | 2004-04-02 09:12:10 +0200 (Fri, 02 Apr 2004) | 2 lines

strncpy -> {strlcpy,memcpy}. Replaced the "forceloop" boolean in "channel_t" by a flags field.

------------------------------------------------------------------------
r4075 | molivier | 2004-04-02 09:08:54 +0200 (Fri, 02 Apr 2004) | 2 lines

Replaced a direct call to "malloc" and "free", and removed several misuses of "Z_Malloc" where using the temp mempool was sufficient.

------------------------------------------------------------------------
r4074 | havoc | 2004-04-02 00:42:40 +0200 (Fri, 02 Apr 2004) | 2 lines

fixed animated textures in realtime lighting mode (now calls R_UpdateTextureInfo)

------------------------------------------------------------------------
r4073 | havoc | 2004-04-02 00:10:17 +0200 (Fri, 02 Apr 2004) | 2 lines

fix the namelen parameter in the getsockname call

------------------------------------------------------------------------
r4072 | havoc | 2004-04-02 00:07:23 +0200 (Fri, 02 Apr 2004) | 2 lines

now uses getsockname to find out what address/port a newly opened socket is at, so it won't say 0.0.0.0:0 anymore

------------------------------------------------------------------------
r4071 | molivier | 2004-04-01 11:46:46 +0200 (Thu, 01 Apr 2004) | 2 lines

Fixed a warning (unused variable)

------------------------------------------------------------------------
r4070 | havoc | 2004-04-01 04:06:20 +0200 (Thu, 01 Apr 2004) | 2 lines

default to r_shadow_realtime_dlight 1 mode

------------------------------------------------------------------------
r4069 | havoc | 2004-03-31 18:14:54 +0200 (Wed, 31 Mar 2004) | 2 lines

disabled triangle normal validation because the validator was broken and just spewing warnings

------------------------------------------------------------------------
r4068 | molivier | 2004-03-31 15:41:22 +0200 (Wed, 31 Mar 2004) | 2 lines

OpenBSD doesn't define _PATH_SOUND

------------------------------------------------------------------------
r4065 | havoc | 2004-03-31 03:33:56 +0200 (Wed, 31 Mar 2004) | 2 lines

disabled the invalid model check in Mod_CheckLoaded as it was preventing the game from working with missing models

------------------------------------------------------------------------
r4064 | havoc | 2004-03-31 03:33:16 +0200 (Wed, 31 Mar 2004) | 2 lines

fix NODRAW flag check (don't draw NODRAW shaders)

------------------------------------------------------------------------
r4063 | havoc | 2004-03-31 03:08:50 +0200 (Wed, 31 Mar 2004) | 3 lines

now supports missing models
trying to load a non-existent map no longer kills the server

------------------------------------------------------------------------
r4062 | havoc | 2004-03-28 18:19:36 +0200 (Sun, 28 Mar 2004) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r4061 | molivier | 2004-03-26 15:22:26 +0100 (Fri, 26 Mar 2004) | 2 lines

The portable_samplepair_t structure has no need to be public

------------------------------------------------------------------------
r4060 | molivier | 2004-03-26 15:20:39 +0100 (Fri, 26 Mar 2004) | 2 lines

Removed a couple of useless inclusions

------------------------------------------------------------------------
r4058 | havoc | 2004-03-25 15:36:17 +0100 (Thu, 25 Mar 2004) | 2 lines

include <> above ""

------------------------------------------------------------------------
r4057 | molivier | 2004-03-25 10:47:01 +0100 (Thu, 25 Mar 2004) | 2 lines

Moved the WAV loading code out of "snd_mem.c". Removed a couple of useless definitions in "sound.h".

------------------------------------------------------------------------
r4056 | molivier | 2004-03-24 14:40:43 +0100 (Wed, 24 Mar 2004) | 2 lines

Factorized some code in the shared library loaders

------------------------------------------------------------------------
r4055 | molivier | 2004-03-24 09:06:56 +0100 (Wed, 24 Mar 2004) | 3 lines

Fixed the sounds not being advanced in time while not being listened. This is a long standing bug I think, it looks like the original Quake source code has it too, though I haven't tested. Each channel now remembers the last time it was painted, and so it can resume the play at the appropriate position if it missed some painting rounds.
Also, added a check to avoid looped sounds being overridden when picking a channel.

------------------------------------------------------------------------
r4054 | havoc | 2004-03-23 20:32:38 +0100 (Tue, 23 Mar 2004) | 2 lines

rtlights shouldn't do anything with sky and water (this fixes shadowing problems mainly)

------------------------------------------------------------------------
r4053 | molivier | 2004-03-23 16:59:10 +0100 (Tue, 23 Mar 2004) | 2 lines

Fixed the WAV file loading code (loopstart was always 0 if the sound was looped)

------------------------------------------------------------------------
r4052 | molivier | 2004-03-23 09:28:28 +0100 (Tue, 23 Mar 2004) | 2 lines

Ogg vorbis streaming support; the code decides whether it will cache or stream the sound depending on the file and uncompressed sound sizes. It should be stable enough for a regular use now; you lose a few FPS once every second or so of course, it's not free, but you can expect the Vorbis stream to use between 5 and 12 times less memory than before, depending on the sound quality and the number of SFX sources using it. This patch also contains a couple of fixes (a pretty annoying typo in the OSS and BSD driver - 22051Hz instead of 22050Hz, and a potential memory leak in WAV loader)

------------------------------------------------------------------------
r4051 | molivier | 2004-03-23 08:59:09 +0100 (Tue, 23 Mar 2004) | 2 lines

Added a mempool parameter to FS_LoadFile

------------------------------------------------------------------------
r4050 | havoc | 2004-03-23 08:44:34 +0100 (Tue, 23 Mar 2004) | 2 lines

fixed a memory leak if an image file loaded but failed to decode

------------------------------------------------------------------------
r4049 | havoc | 2004-03-22 19:43:32 +0100 (Mon, 22 Mar 2004) | 2 lines

commented out mini scoreboard in nexuiz hud

------------------------------------------------------------------------
r4048 | havoc | 2004-03-22 17:15:19 +0100 (Mon, 22 Mar 2004) | 2 lines

fixed two warnings on glGetDoublev calls

------------------------------------------------------------------------
r4047 | havoc | 2004-03-22 11:08:37 +0100 (Mon, 22 Mar 2004) | 2 lines

q3bsp pvs works again (was checking loadmodel when it should have been checking model)

------------------------------------------------------------------------
r4046 | havoc | 2004-03-22 11:04:48 +0100 (Mon, 22 Mar 2004) | 9 lines

worked around an ATI driver bug with glColor during GL_EXT_compiled_vertex_array locks being ignored - R_Shadow_RenderLighting dot3 paths now lock around each pass instead of the whole set of final passes - ATI PLEASE FIX THIS, the GL_EXT_compiled_vertex_array spec says all settings can be changed during a lock!
reorganized R_Shadow_RenderLighting to reduce code duplication a bit
enabled scissor without stencil support (the bug was in the lack of a valid projectmatrix)
added 3 tmu vertex lighting path (uses XYZ attenuation via textures, and vertex shading) which is mainly for use on 3+ tmu cards in 16bit color mode
renamed R_Shadow_VertexLighting functions to R_Shadow_VertexShading and made their names more clear
fixed a bug in the R_Shadow_VertexShading math (now normalizes the vertex->light vector as well as normal vector)
made some functions static
added an #ifndef USETEXMATRIX around the cpu matrix transform functions as they're not used anymore due to USETEXMATRIX code

------------------------------------------------------------------------
r4045 | havoc | 2004-03-22 10:22:38 +0100 (Mon, 22 Mar 2004) | 2 lines

fix scissoring bugs with r_shadow_realtime_dlight - the projectmatrix was not being set for glFrustum and glOrtho cases, now it is (by reading back from GL)

------------------------------------------------------------------------
r4044 | havoc | 2004-03-22 10:19:28 +0100 (Mon, 22 Mar 2004) | 2 lines

uncommented a lot of GL functions

------------------------------------------------------------------------
r4042 | havoc | 2004-03-19 11:16:43 +0100 (Fri, 19 Mar 2004) | 2 lines

removed -fexpensive-optimizations (which is turned on by -O2), added -funroll-loops

------------------------------------------------------------------------
r4041 | havoc | 2004-03-18 11:49:02 +0100 (Thu, 18 Mar 2004) | 2 lines

fixed 'black models' bugs in RecursiveLightPoint code

------------------------------------------------------------------------
r4040 | havoc | 2004-03-18 06:15:08 +0100 (Thu, 18 Mar 2004) | 2 lines

fixed r_fullbright

------------------------------------------------------------------------
r4039 | havoc | 2004-03-17 07:48:04 +0100 (Wed, 17 Mar 2004) | 2 lines

expanded cl_max_beams from 24 to 256

------------------------------------------------------------------------
r4038 | havoc | 2004-03-17 04:43:50 +0100 (Wed, 17 Mar 2004) | 2 lines

bsp model shadows are now enlarged by r_shadow_projectdistance (to cure problems with nearby surfaces casting shadow volumes too small)

------------------------------------------------------------------------
r4036 | havoc | 2004-03-16 10:49:59 +0100 (Tue, 16 Mar 2004) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r4035 | havoc | 2004-03-16 10:49:16 +0100 (Tue, 16 Mar 2004) | 2 lines

optimized away most texmatrix comparisons (now checks unit->texmatrixenabled which just dodges the comparisons)

------------------------------------------------------------------------
r4029 | coderjoe | 2004-03-16 07:40:42 +0100 (Tue, 16 Mar 2004) | 2 lines

fix newlines

------------------------------------------------------------------------
r4028 | havoc | 2004-03-16 01:30:49 +0100 (Tue, 16 Mar 2004) | 2 lines

doubled brightness of most dlights, and halved brightness of lightmap dlight rendering, this should make dlights and rtlights look mostly the same

------------------------------------------------------------------------
r4027 | havoc | 2004-03-16 01:27:51 +0100 (Tue, 16 Mar 2004) | 2 lines

added a note to optimize the MAX_DLIGHTS loop somehow

------------------------------------------------------------------------
r4026 | havoc | 2004-03-16 00:49:18 +0100 (Tue, 16 Mar 2004) | 2 lines

optimized R_Mesh_State to only update most settings if there is an active texture on the unit

------------------------------------------------------------------------
r4025 | molivier | 2004-03-15 09:52:06 +0100 (Mon, 15 Mar 2004) | 2 lines

Renamed ogg.[ch] to snd_ogg.[ch]

------------------------------------------------------------------------
r4024 | havoc | 2004-03-15 09:24:46 +0100 (Mon, 15 Mar 2004) | 2 lines

enabled USETEXMATRIX because it wasn't broken after all (testing mistake made me think it was)

------------------------------------------------------------------------
r4023 | molivier | 2004-03-15 09:00:02 +0100 (Mon, 15 Mar 2004) | 2 lines

Removed the little endian -> native endian conversion from the sound resampling function. The sound file reading functions now take care of that.

------------------------------------------------------------------------
r4022 | molivier | 2004-03-15 08:56:04 +0100 (Mon, 15 Mar 2004) | 2 lines

Made use of the common functions BuffLittle{Short,Long} in "snd_mem.c" instead of reinventing the wheel. Made a few variables static in the process.

------------------------------------------------------------------------
r4021 | havoc | 2004-03-15 08:00:14 +0100 (Mon, 15 Mar 2004) | 3 lines

3d texcoords now must use rmeshstate_t.pointer_texcoord3f instead of pointer_texcoord, this allows texture matrices and such
implemented (broken and disabled) texture matrix optimizations in R_Shadow_RenderLighting, I'm still trying to figure out what is wrong

------------------------------------------------------------------------
r4020 | havoc | 2004-03-15 06:27:02 +0100 (Mon, 15 Mar 2004) | 2 lines

reorganized texture setup code in R_Shadow_RenderLighting to be cleaner, fixed CVA locking in voodoo1/2 paths (it was locked while the color array update was happening, no good)

------------------------------------------------------------------------
r4019 | havoc | 2004-03-14 10:58:53 +0100 (Sun, 14 Mar 2004) | 2 lines

fixed 2d attenuation texturing (it was all black due to an attenuationz matrix bug)

------------------------------------------------------------------------
r4018 | havoc | 2004-03-14 10:50:52 +0100 (Sun, 14 Mar 2004) | 2 lines

added a tip about using the color control menu to calibrate for proper quake viewing

------------------------------------------------------------------------
r4017 | havoc | 2004-03-14 06:31:45 +0100 (Sun, 14 Mar 2004) | 2 lines

got rid of Cshader system as it really wasn't helping anything, now all surfaces types use one R_DrawSurfaceChain function, which calls the appropriate passes

------------------------------------------------------------------------
r4016 | havoc | 2004-03-14 00:50:03 +0100 (Sun, 14 Mar 2004) | 2 lines

don't draw lighting on sky and water

------------------------------------------------------------------------
r4015 | havoc | 2004-03-14 00:30:20 +0100 (Sun, 14 Mar 2004) | 5 lines

merged static and dynamic rtlight handling almost entirely (even uses DrawShadowVolume and DrawLight to generate cached meshes - however this currently lost the r_shadow_portallight optimizations)
added a surfacelist to model_t containing surface indices for each submodel
merged R_Shadow_DiffuseLighting and R_Shadow_SpecularLighting into R_Shadow_RenderLighting (which takes a lighting parameter containing LIGHTING_DIFFUSE and LIGHTING_SPECULAR flags)
commented out cullradius/cullradius2 in rtlight structs because they weren't used

------------------------------------------------------------------------
r4014 | havoc | 2004-03-14 00:26:17 +0100 (Sun, 14 Mar 2004) | 3 lines

added texmatrix[] to rmeshstate_t and removed R_Mesh_TextureMatrix function
reorganized water rendering code to make it a lot less confusing (especially the r_watershader code)

------------------------------------------------------------------------
r4013 | havoc | 2004-03-14 00:14:29 +0100 (Sun, 14 Mar 2004) | 2 lines

fixed gl_paranoid warnings in R_DrawQueue

------------------------------------------------------------------------
r4012 | havoc | 2004-03-14 00:12:35 +0100 (Sun, 14 Mar 2004) | 2 lines

fixed gl_paranoid warnings caused by gl_texture_anisotropy being less than 1, it is now bound to 1-128 range

------------------------------------------------------------------------
r4011 | black | 2004-03-13 15:43:04 +0100 (Sat, 13 Mar 2004) | 2 lines

DP should read the config files correcly again now.

------------------------------------------------------------------------
r4010 | havoc | 2004-03-13 12:50:11 +0100 (Sat, 13 Mar 2004) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r4009 | havoc | 2004-03-13 08:21:07 +0100 (Sat, 13 Mar 2004) | 2 lines

added const to most parameters to Mod_ShadowMesh_AddMesh

------------------------------------------------------------------------
r4008 | havoc | 2004-03-13 08:12:13 +0100 (Sat, 13 Mar 2004) | 2 lines

q3bsp rendering now uses visframe instead of markframe, also removed some cruft in R_Q3BSP_DrawShadowVolume/R_Q3BSP_DrawLight

------------------------------------------------------------------------
r4007 | molivier | 2004-03-11 09:08:04 +0100 (Thu, 11 Mar 2004) | 2 lines

Changed the way DP detects and handles the CPU endianess. All the tests are done at compile time now. Tested on Win32 (MSVC6 and MinGW32), Linux and NetBSD; should also work on the other BSDs.

------------------------------------------------------------------------
r4006 | havoc | 2004-03-11 01:43:46 +0100 (Thu, 11 Mar 2004) | 2 lines

removed special GAME_FNIGGIUM default for con_forcewhiledisconnected

------------------------------------------------------------------------
r4005 | havoc | 2004-03-10 22:40:02 +0100 (Wed, 10 Mar 2004) | 2 lines

now calls GL_LockArrays manually around each R_Mesh_Draw call instead of locking inside R_Mesh_Draw, so some things can render the same geometry repeatedly (shadow volumes and lighting) without unlocking)

------------------------------------------------------------------------
r4004 | havoc | 2004-03-10 10:52:55 +0100 (Wed, 10 Mar 2004) | 2 lines

removed r_shadow_showtris (superseded by r_showtris)

------------------------------------------------------------------------
r4003 | havoc | 2004-03-10 10:48:53 +0100 (Wed, 10 Mar 2004) | 2 lines

merged CL_ColorPointer into R_Mesh_State

------------------------------------------------------------------------
r4002 | havoc | 2004-03-10 09:35:53 +0100 (Wed, 10 Mar 2004) | 2 lines

R_Mesh_State_Texture and GL_VertexPointer merge once again to become the reborn R_Mesh_State function

------------------------------------------------------------------------
r4001 | havoc | 2004-03-10 08:43:41 +0100 (Wed, 10 Mar 2004) | 3 lines

GL_Color no longer interacts with GL_ColorPointer (so be sure to set GL_ColorPointer if it have been left on something you don't want)
GL_ColorPointer now resets glColor when array is turned off, because glColor gets trashed while color array is on (so sayeth the GL spec, and so proveth the NVIDIA driver)

------------------------------------------------------------------------
r4000 | havoc | 2004-03-10 08:14:24 +0100 (Wed, 10 Mar 2004) | 2 lines

now supports GL_EXT_stencil_two_side extension (found on NV30/R300 class cards), this halves the polycount thrown at the card for shadow volumes, which got me a 77% speed gain on my GFFX5200

------------------------------------------------------------------------
r3998 | havoc | 2004-03-10 07:34:43 +0100 (Wed, 10 Mar 2004) | 2 lines

sorted extension list again

------------------------------------------------------------------------
r3997 | havoc | 2004-03-10 07:33:22 +0100 (Wed, 10 Mar 2004) | 2 lines

added DP_SV_ROTATINGBMODEL extension to list

------------------------------------------------------------------------
r3996 | havoc | 2004-03-10 07:20:56 +0100 (Wed, 10 Mar 2004) | 2 lines

added a few items to the client features list

------------------------------------------------------------------------
r3995 | havoc | 2004-03-10 07:17:56 +0100 (Wed, 10 Mar 2004) | 2 lines

added -benchmark commandline option

------------------------------------------------------------------------
r3994 | havoc | 2004-03-10 06:51:53 +0100 (Wed, 10 Mar 2004) | 2 lines

added showtime/showtime_format and showdate/showdate_format cvars, and moved the fps display to bottom right corner (above the optional time/date displays)

------------------------------------------------------------------------
r3993 | havoc | 2004-03-10 06:48:41 +0100 (Wed, 10 Mar 2004) | 2 lines

added convenience function Sys_TimeString which calls strftime into a temporary buffer and returns the string, now Sys_Print uses this

------------------------------------------------------------------------
r3992 | havoc | 2004-03-10 06:47:18 +0100 (Wed, 10 Mar 2004) | 2 lines

added an extern for cmdline cvar

------------------------------------------------------------------------
r3991 | havoc | 2004-03-10 04:28:04 +0100 (Wed, 10 Mar 2004) | 2 lines

added Print versions of Printf functions and made all calls that do not need formating use the Print versions; yes this is a cosmetic cleanup, prints are too rare to have any performance improvements.

------------------------------------------------------------------------
r3990 | havoc | 2004-03-10 01:06:05 +0100 (Wed, 10 Mar 2004) | 2 lines

clean up an unnecessary snprintf

------------------------------------------------------------------------
r3989 | havoc | 2004-03-09 23:25:44 +0100 (Tue, 09 Mar 2004) | 2 lines

added scr_conforcewhiledisconnected cvar so it is possible to disable the console forcing (and defaults off in GAME_FNIGGIUM)

------------------------------------------------------------------------
r3988 | havoc | 2004-03-09 23:14:07 +0100 (Tue, 09 Mar 2004) | 2 lines

"edict" command no longer crashes if given -1 as edict number

------------------------------------------------------------------------
r3987 | havoc | 2004-03-09 22:59:59 +0100 (Tue, 09 Mar 2004) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r3986 | havoc | 2004-03-09 22:56:49 +0100 (Tue, 09 Mar 2004) | 2 lines

reorganized SV_FlyMove to merge the two paths (new simple/old complex approaches)

------------------------------------------------------------------------
r3985 | havoc | 2004-03-09 21:35:51 +0100 (Tue, 09 Mar 2004) | 4 lines

worked around curve collision problems by doing special sort-of-axial edge planes on triangle collisions (ultimately the collision routine needs to do edge/edge collisions somehow to make this unnecessary)
now snaps triangle mesh vertices to 1/32 of a unit precision to keep the plane calculations a little more accurate (note: this is done at collision time), although this doesn't seem to be necessary
collision nudge values are now configurable via cvars (collision_ cvars, warning: things tend to break if startnudge != endnudge, and enternudge should be the same as leavenudge)

------------------------------------------------------------------------
r3982 | havoc | 2004-03-09 05:59:14 +0100 (Tue, 09 Mar 2004) | 2 lines

now supports loading skybox specified by q3 sky shaders

------------------------------------------------------------------------
r3981 | havoc | 2004-03-09 05:56:04 +0100 (Tue, 09 Mar 2004) | 2 lines

fix saving of rtlights files (everything past cubemap was getting lost)

------------------------------------------------------------------------
r3979 | havoc | 2004-03-07 09:15:17 +0100 (Sun, 07 Mar 2004) | 2 lines

fix two signed/unsigned comparison warnings

------------------------------------------------------------------------
r3978 | havoc | 2004-03-07 02:06:17 +0100 (Sun, 07 Mar 2004) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r3976 | havoc | 2004-03-06 03:09:08 +0100 (Sat, 06 Mar 2004) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r3975 | havoc | 2004-03-06 02:54:44 +0100 (Sat, 06 Mar 2004) | 2 lines

con_notify is now measured in cl.time, not realtime, so cl_avidemo doesn't have terribly brief notify messages in it when rendering slowly

------------------------------------------------------------------------
r3974 | molivier | 2004-03-05 14:12:52 +0100 (Fri, 05 Mar 2004) | 2 lines

Don't use coronas for muzzleflashes

------------------------------------------------------------------------
r3973 | havoc | 2004-03-05 06:01:02 +0100 (Fri, 05 Mar 2004) | 2 lines

no view tilt when dead in GAME_FNIGGIUM

------------------------------------------------------------------------
r3972 | havoc | 2004-03-05 03:27:13 +0100 (Fri, 05 Mar 2004) | 2 lines

fixed noclipping rendering nothing (there was no vis update)

------------------------------------------------------------------------
r3971 | havoc | 2004-03-05 03:11:22 +0100 (Fri, 05 Mar 2004) | 2 lines

improve console text parsing a little (now handles \r line endings as well as \n, and strips whitespace before the line, just for completeness)

------------------------------------------------------------------------
r3970 | havoc | 2004-03-04 20:12:12 +0100 (Thu, 04 Mar 2004) | 2 lines

fix monsters ignoring player underwater if a bmodel is in the area (inopen was being set by bmodels)

------------------------------------------------------------------------
r3967 | molivier | 2004-03-04 14:17:37 +0100 (Thu, 04 Mar 2004) | 2 lines

Fixed key bindings menu (we have a range of 1024 key numbers now)

------------------------------------------------------------------------
r3966 | molivier | 2004-03-04 14:14:53 +0100 (Thu, 04 Mar 2004) | 2 lines

Removed a few warnings in MSVC6

------------------------------------------------------------------------
r3965 | havoc | 2004-03-04 08:06:00 +0100 (Thu, 04 Mar 2004) | 2 lines

separate collision curve geometry from rendering, this means lower detail collision curves for more performance

------------------------------------------------------------------------
r3964 | havoc | 2004-03-04 07:20:20 +0100 (Thu, 04 Mar 2004) | 2 lines

implemented r_subdivisions_ cvars to control q3bsp patches, adaptive LOD based on flatness, etc

------------------------------------------------------------------------
r3963 | havoc | 2004-03-04 03:11:03 +0100 (Thu, 04 Mar 2004) | 2 lines

fix r_editlights_edit not accepting some commands

------------------------------------------------------------------------
r3962 | havoc | 2004-03-04 02:27:46 +0100 (Thu, 04 Mar 2004) | 2 lines

r_showtris is now a float cvar which controls intensity, rather than just a flag

------------------------------------------------------------------------
r3961 | havoc | 2004-03-03 16:26:27 +0100 (Wed, 03 Mar 2004) | 2 lines

made r_showtris transparent (quite faint actually), color coded different types of geometry, and now shows all tris (even hud), cleaned up a few qgl calls (GL_Clear added, etc) to make it more reliable

------------------------------------------------------------------------
r3960 | havoc | 2004-03-03 08:05:05 +0100 (Wed, 03 Mar 2004) | 2 lines

fix Q3BSP submodels to have no GetPVS function (or assorted other functions which would fail)

------------------------------------------------------------------------
r3959 | havoc | 2004-03-03 07:50:56 +0100 (Wed, 03 Mar 2004) | 2 lines

fixed bmodel realtime lighting/shadowing render crashes (and bogus shadows from them)

------------------------------------------------------------------------
r3958 | havoc | 2004-03-03 07:00:42 +0100 (Wed, 03 Mar 2004) | 2 lines

added r_showtris

------------------------------------------------------------------------
r3957 | havoc | 2004-03-03 06:25:07 +0100 (Wed, 03 Mar 2004) | 2 lines

realtime dlight shadows are now nearly the speed of compiled lights

------------------------------------------------------------------------
r3956 | havoc | 2004-03-02 21:29:58 +0100 (Tue, 02 Mar 2004) | 4 lines

temporarily disabled compiled rtlights (they'll make a comeback after dynamic rtlight optimizations are finished)
dynamic rtlight shadow volumes for bmodels are now generated from a single mesh for the entire model, in which only some ranges of triangles are marked, this finally cured the performance problems with dlight
s

------------------------------------------------------------------------
r3955 | havoc | 2004-03-02 06:34:58 +0100 (Tue, 02 Mar 2004) | 2 lines

fix rtlights cubemapname load/save

------------------------------------------------------------------------
r3953 | havoc | 2004-03-02 03:27:59 +0100 (Tue, 02 Mar 2004) | 2 lines

fix the inverted bumps on some surfaces (no longer uses CrossProduct to get the svector)

------------------------------------------------------------------------
r3949 | havoc | 2004-03-02 01:26:59 +0100 (Tue, 02 Mar 2004) | 2 lines

forgot to init the effects variable in the light parser

------------------------------------------------------------------------
r3947 | havoc | 2004-03-02 01:22:31 +0100 (Tue, 02 Mar 2004) | 2 lines

dlights using light_lev now need the PFLAG_FULLDYNAMIC flag set to operate, otherwise they are ignored, this was necessary (lights that did not remove themselves were being treated as proper dlights), it is also now more tenebrae compatible (EF_FULLDYNAMIC translated to PFLAG_FULLDYNAMIC in GAME_TENEBRAE mode)

------------------------------------------------------------------------
r3946 | havoc | 2004-03-01 19:56:32 +0100 (Mon, 01 Mar 2004) | 2 lines

more cleanups of R_RenderScene (now r_view_ variables exist which are copied from the r_refdef fields each frame, these variables can easily be reconfigured for texture renders for mirrors or whatever)

------------------------------------------------------------------------
r3945 | havoc | 2004-03-01 06:03:46 +0100 (Mon, 01 Mar 2004) | 2 lines

remove unused variable i in V_ParseDamage

------------------------------------------------------------------------
r3944 | havoc | 2004-03-01 06:01:36 +0100 (Mon, 01 Mar 2004) | 2 lines

remove unused variable i in CL_ParseStartSoundPacket

------------------------------------------------------------------------
r3943 | havoc | 2004-03-01 05:59:51 +0100 (Mon, 01 Mar 2004) | 2 lines

screenshots are now saved to screenshots/ and videos are now saved to video/, and both now use the name template dp%06d.tga or .jpg, GAME_FNIGGIUM uses fniggium%06d.tga or .jpg as per Sajt's request

------------------------------------------------------------------------
r3942 | havoc | 2004-03-01 05:29:38 +0100 (Mon, 01 Mar 2004) | 2 lines

fixed cubemap upload scaling crash (was using power of 2 size for parsing input, should have used input size)

------------------------------------------------------------------------
r3941 | havoc | 2004-03-01 05:20:33 +0100 (Mon, 01 Mar 2004) | 2 lines

fixed viewblends which were broken the past few days

------------------------------------------------------------------------
r3940 | havoc | 2004-03-01 04:49:14 +0100 (Mon, 01 Mar 2004) | 3 lines

upgraded network protocol to DP5, now sends precise entity angles (except for EF_LOWPRECISION entities), this increases normal entity data by 3 bytes (18 bytes for origin+angles, was 15 bytes in DP4, still 9 bytes for EF_LOWPRECISION origin+angles), upgraded a few other parts of protocol to precise angles and/or floats as well (client data updates now use float for punchvector and velocity
)

------------------------------------------------------------------------
r3939 | havoc | 2004-03-01 02:58:02 +0100 (Mon, 01 Mar 2004) | 4 lines

cleaned up rtlight handling, merging most code between world rtlights and dlights (which now could conceivably be compiled if static)
moved R_ShadowVolumeLighting to r_shadow.c
added RENDER_LIGHT flag to entity_render_t to make rtlighting optional per entity

------------------------------------------------------------------------
r3938 | havoc | 2004-03-01 02:54:54 +0100 (Mon, 01 Mar 2004) | 2 lines

forgot to commit this as part of the SV_TouchAreaGrid fix

------------------------------------------------------------------------
r3937 | havoc | 2004-03-01 02:46:35 +0100 (Mon, 01 Mar 2004) | 2 lines

fixed SV_TouchAreaGrid to not crash if SV_IncreaseEdicts is called during a touch function, by making a list of edicts to touch and then running through the list afterward

------------------------------------------------------------------------
r3936 | havoc | 2004-03-01 02:29:43 +0100 (Mon, 01 Mar 2004) | 2 lines

safety checked lightmap access in Mod_Q1BSP_RecursiveLightPoint as one map Sajt uses was crashing, it now rounds off coords to be inside the lightmap

------------------------------------------------------------------------
r3935 | havoc | 2004-02-28 16:41:43 +0100 (Sat, 28 Feb 2004) | 2 lines

default a few cvars accordingly for GAME_TENEBRAE mode

------------------------------------------------------------------------
r3934 | havoc | 2004-02-28 16:18:21 +0100 (Sat, 28 Feb 2004) | 2 lines

support angles on light entities

------------------------------------------------------------------------
r3933 | havoc | 2004-02-28 16:15:55 +0100 (Sat, 28 Feb 2004) | 2 lines

support skin and pflags in light entity loader

------------------------------------------------------------------------
r3931 | havoc | 2004-02-26 20:28:15 +0100 (Thu, 26 Feb 2004) | 2 lines

PF_traceline/PF_tracebox can now use world as the edict

------------------------------------------------------------------------
r3930 | havoc | 2004-02-26 20:25:38 +0100 (Thu, 26 Feb 2004) | 2 lines

made the static light built message a dprint

------------------------------------------------------------------------
r3929 | havoc | 2004-02-26 03:06:11 +0100 (Thu, 26 Feb 2004) | 2 lines

TEU uses teu.rc, not quake.rc

------------------------------------------------------------------------
r3926 | havoc | 2004-02-25 19:42:31 +0100 (Wed, 25 Feb 2004) | 2 lines

renamed brush model pvs stuff to be in brush struct instead of brushq1 and brushq3 structs

------------------------------------------------------------------------
r3925 | havoc | 2004-02-25 19:41:19 +0100 (Wed, 25 Feb 2004) | 2 lines

MOVETYPE_BOUNCE change: an explosion above gibs will now cause them to bounce into the air, rather than skidding to a halt immediately like they were doing

------------------------------------------------------------------------
r3924 | havoc | 2004-02-25 13:42:41 +0100 (Wed, 25 Feb 2004) | 2 lines

enable MOVE_ values on PF_tracebox (already enabled on PF_traceline)

------------------------------------------------------------------------
r3923 | havoc | 2004-02-24 18:10:27 +0100 (Tue, 24 Feb 2004) | 2 lines

fixed black fullbrights on models in realtime mode

------------------------------------------------------------------------
r3922 | havoc | 2004-02-22 19:56:51 +0100 (Sun, 22 Feb 2004) | 4 lines

fixed GL_Scissor call in rtlight code (apparently I need to feed it a top to bottom rectangle... ?  must be something weird in the transform math as GL uses bottom to top)
made q1bsp and q3bsp a little more alike (regarding pvs clusters), now q3bsp has all the same pvs cluster fields as q3bsp
added fake lightgrid and pvs data to q3bsp loading when map is unlit or unvised respectively, this should improve internal consistency

------------------------------------------------------------------------
r3921 | havoc | 2004-02-22 18:09:13 +0100 (Sun, 22 Feb 2004) | 2 lines

allow "rate" command to be executed on server when sent from client

------------------------------------------------------------------------
r3920 | havoc | 2004-02-22 07:48:42 +0100 (Sun, 22 Feb 2004) | 2 lines

fixed a possible crash in R_DrawCoronas (it was using rd->origin where it should have used wl->origin)

------------------------------------------------------------------------
r3919 | havoc | 2004-02-21 22:05:21 +0100 (Sat, 21 Feb 2004) | 9 lines

cleaned up R_RenderView setup code a bit, and shuffled SCR_CalcRefdef stuff to SCR_UpdateScreen
scissor is now on during all of R_RenderView (including rtlight portions), and GL_Scissor is used to set it instead of direct qglScissor calls, also GL_ScissorTest is used
r_farclip is now calculated without need for... just about anything, this allowed shuffling the setup code around a bit
various cleanups to allow multiple view renders per frame
added scr_zoomwindow cvars to do a (silly) zoomed view picture-in-picture overlay, it works but turned out useless in playtesting unless you want to stare at a shambler's chest... ugh
R_AnimateLight and R_BuildLightList merged to become R_UpdateLights
some setup code from R_RenderView became a new function R_UpdateWorld
GL_SetupView_ViewPort calls replaced by qglViewport calls, as it was a mostly useless wrapper

------------------------------------------------------------------------
r3918 | havoc | 2004-02-21 15:19:26 +0100 (Sat, 21 Feb 2004) | 2 lines

timedemo now also prints min/avg/max fps

------------------------------------------------------------------------
r3917 | havoc | 2004-02-21 13:51:19 +0100 (Sat, 21 Feb 2004) | 2 lines

added rate limiting to player setup menu

------------------------------------------------------------------------
r3916 | havoc | 2004-02-21 12:58:08 +0100 (Sat, 21 Feb 2004) | 2 lines

rate limited networking ("rate" command in client console, limited by sv_maxrate cvar on server), also cleaned up some of the MAX_DATAGRAM and similar defines (now only uses NET_MAXMESSAGE)

------------------------------------------------------------------------
r3915 | havoc | 2004-02-21 08:43:37 +0100 (Sat, 21 Feb 2004) | 2 lines

cl_fakelocalping cvars now produce the specified ping time (rather than twice it) by lagging each way only 50% of the requested ping

------------------------------------------------------------------------
r3914 | havoc | 2004-02-21 08:39:41 +0100 (Sat, 21 Feb 2004) | 2 lines

remove unused stripextension code

------------------------------------------------------------------------
r3913 | havoc | 2004-02-21 08:37:36 +0100 (Sat, 21 Feb 2004) | 9 lines

moved light matrix generation out of the render code and into the light creation code (rtlight and dlight setup) to save time and simplify things
rtlights and dlights now have an orientation matrix (this allows cubemaps to be rotated)
rtlights can now have corona flares, and it is adjustable per light (also on dlights)
r_coronas cvar now controls corona intensity, and menu now has r_coronas slider instead of checkbox
dlights now have color[]/radius settings instead of just colored intensity, so the radius can be independently controlled again (this mainly improves realtime dlight behaviors)
dlights can now have cubemaps, light styles, optional shadows (rather than always on), and better color/radius settings (and all this is tenebrae compatible) using the light_lev, color, style, skin (cubemap number, only available if modelindex is 0), and pflags (1 is no shadow, 2 is draw corona which is ignored by darkplaces because it always draws a corona) fields in the quakec entities
now supports tenebrae dlight fields (light_lev, color, style, pflags), this means dlights can now have cubemaps (skin, only used if modelindex is 0), light style (style), color (color) and radius (light_lev) with more precision than glow_ fields, and pflags (flag 1 is no shadow, flag 2 is corona which is ignored because dlights always have a corona in darkplaces), also loads tenebrae mods
added TENEBRAE_GFX_DLIGHTS extension

------------------------------------------------------------------------
r3912 | havoc | 2004-02-20 18:04:03 +0100 (Fri, 20 Feb 2004) | 2 lines

fixed loading of replacement frame images (it was stripping the .spr extension, weird), and reduced spr internal image handling code a bit by using a second alpha palette

------------------------------------------------------------------------
r3911 | havoc | 2004-02-20 17:31:03 +0100 (Fri, 20 Feb 2004) | 2 lines

upgraded Image_CopyMux to be able to output constant byte values as well as indexed components

------------------------------------------------------------------------
r3910 | havoc | 2004-02-20 17:15:40 +0100 (Fri, 20 Feb 2004) | 2 lines

possible improvement to infinite perspective matrix generation

------------------------------------------------------------------------
r3909 | havoc | 2004-02-20 03:50:18 +0100 (Fri, 20 Feb 2004) | 2 lines

remove the exec default.cfg call from the reset to defaults, I have no idea why it was there

------------------------------------------------------------------------
r3907 | havoc | 2004-02-18 15:46:06 +0100 (Wed, 18 Feb 2004) | 2 lines

improved error message for missing cubemap images, no longer complains during cubemap loading, as long as one or more sides are found

------------------------------------------------------------------------
r3906 | havoc | 2004-02-18 15:37:36 +0100 (Wed, 18 Feb 2004) | 2 lines

now loads each cubemap only once, no matter how many lights use it

------------------------------------------------------------------------
r3905 | havoc | 2004-02-18 15:06:38 +0100 (Wed, 18 Feb 2004) | 2 lines

cubemap filters for rtlights are now supported

------------------------------------------------------------------------
r3904 | havoc | 2004-02-18 11:32:06 +0100 (Wed, 18 Feb 2004) | 3 lines

added gl_lightmaps cvar (for looking at the raw lightmaps in the map without textures)
added r_shadow_realtime_world_lightmaps cvar (turn on/off lightmaps in r_shadow_realtime_world mode, also can be a fraction to control brightness)

------------------------------------------------------------------------
r3903 | havoc | 2004-02-18 11:29:30 +0100 (Wed, 18 Feb 2004) | 2 lines

fix some warnings

------------------------------------------------------------------------
r3898 | havoc | 2004-02-17 03:13:34 +0100 (Tue, 17 Feb 2004) | 2 lines

reduced size of viewblend triangle from 64000 units to 64 units, in hopes of curing precision problems on some graphics cards (NVIDIA and ATI both) causing a missing line on the blend

------------------------------------------------------------------------
r3895 | black | 2004-02-12 17:50:06 +0100 (Thu, 12 Feb 2004) | 2 lines

Forgot to add a couple of return statements to a switch block.

------------------------------------------------------------------------
r3894 | black | 2004-02-11 19:56:43 +0100 (Wed, 11 Feb 2004) | 2 lines

Fixed: Removed not needed variable.

------------------------------------------------------------------------
r3893 | black | 2004-02-11 18:43:27 +0100 (Wed, 11 Feb 2004) | 2 lines

Added some menu builtins and changed VM_registercvar (it takes one parameter more now).

------------------------------------------------------------------------
r3892 | molivier | 2004-02-11 08:25:20 +0100 (Wed, 11 Feb 2004) | 2 lines

Added automatic unloading of unused sounds. The "silentlymissing" boolean is now part of a flags bit field in the "sfx_t" structure.

------------------------------------------------------------------------
r3891 | molivier | 2004-02-11 08:22:09 +0100 (Wed, 11 Feb 2004) | 2 lines

Commented out some unused static functions in "ui.c" to get rid of GCC warnings

------------------------------------------------------------------------
r3890 | molivier | 2004-02-11 08:20:58 +0100 (Wed, 11 Feb 2004) | 2 lines

Updated the MinGW note according to the new makefiles

------------------------------------------------------------------------
r3889 | molivier | 2004-02-11 08:20:15 +0100 (Wed, 11 Feb 2004) | 2 lines

I forgot to add the new sound functions to "snd_null.c"

------------------------------------------------------------------------
r3888 | havoc | 2004-02-10 22:09:57 +0100 (Tue, 10 Feb 2004) | 3 lines

change joystick key numbers to start at 768 instead of 1024 (this gives 512 keys, 256 mouse, 256 joystick)
enlarge various key arrays to hold 1024 keys

------------------------------------------------------------------------
r3887 | havoc | 2004-02-10 21:54:54 +0100 (Tue, 10 Feb 2004) | 2 lines

corrections and additions

------------------------------------------------------------------------
r3886 | havoc | 2004-02-10 21:54:20 +0100 (Tue, 10 Feb 2004) | 2 lines

recalculate farclip immediately before rendering, instead of from the previous frame, cures some quick turn glitches

------------------------------------------------------------------------
r3885 | black | 2004-02-10 17:03:44 +0100 (Tue, 10 Feb 2004) | 2 lines

The mouse buttons now use the range 512 - 1023 and the joystick/aux stuff starts at 1024. I **hope** this won't be changed as I've just fixed the msys.qc.

------------------------------------------------------------------------
r3884 | molivier | 2004-02-10 08:14:03 +0100 (Tue, 10 Feb 2004) | 2 lines

Added a couple of function skeletons for the automatic unloading of unused sounds (coming very soon). Removed the empty functions S_BeginPrecaching, S_EndPrecaching and S_ClearPrecache. I broke the "silentlymissing" sound flag recently, it could be set even if the sound was successfully loaded (this flag doesn't seem to be used in any active part of the code, but until I sort this out it's better to have it right); anyhow it's fixed now. Switched "silentlymissing"'s type to "qboolean" in the process. Fixed an implicit conversion warning when calling Sys_Sleep in MSVC6.

------------------------------------------------------------------------
r3883 | molivier | 2004-02-09 10:26:45 +0100 (Mon, 09 Feb 2004) | 2 lines

The test used in the FS_Read function to detect the end of a compressed file was incorrect, causing some big files to be truncated when unzipped. Many thanks to Fuh for poiting out this mistake to me

------------------------------------------------------------------------
r3882 | havoc | 2004-02-09 08:08:45 +0100 (Mon, 09 Feb 2004) | 2 lines

fix a particle trail bug with freshly spawned entities that leave a trail, I don't really understand how this bug happens (or why it doesn't happen all the time), but it is fixed

------------------------------------------------------------------------
r3881 | havoc | 2004-02-09 06:50:53 +0100 (Mon, 09 Feb 2004) | 4 lines

changed shader parsing to use strcasecmp just incase some shader has a weird case on the surfaceparms
made some of the q3bsp warnings use dprintf because they're probably annoying users
switched to simpler tracebrush bsp recursion code (the old code crashed for me occasionally, but I've been unable to reproduce that problem again, so I guess it's fixed too, or something)

------------------------------------------------------------------------
r3880 | havoc | 2004-02-09 06:21:04 +0100 (Mon, 09 Feb 2004) | 2 lines

fix video modes menu to not let you select the extra 0x0 mode

------------------------------------------------------------------------
r3879 | havoc | 2004-02-08 20:02:24 +0100 (Sun, 08 Feb 2004) | 2 lines

added Willis's dpmaster to list

------------------------------------------------------------------------
r3878 | havoc | 2004-02-06 22:36:30 +0100 (Fri, 06 Feb 2004) | 2 lines

trying to make this binary

------------------------------------------------------------------------
r3877 | havoc | 2004-02-06 22:30:18 +0100 (Fri, 06 Feb 2004) | 2 lines

DOS line endings, and now marked binary (I hope)

------------------------------------------------------------------------
r3876 | havoc | 2004-02-06 19:48:19 +0100 (Fri, 06 Feb 2004) | 2 lines

updated readme

------------------------------------------------------------------------
r3875 | havoc | 2004-02-06 19:45:46 +0100 (Fri, 06 Feb 2004) | 2 lines

increased numverts/numtris/skinwidth/skinheight limits to 65536, and made r_fullbrights affect model skins

------------------------------------------------------------------------
r3874 | havoc | 2004-02-06 06:24:44 +0100 (Fri, 06 Feb 2004) | 2 lines

renamed r_shadow_shadows to r_shadow_dlightshadows and added r_shadow_worldshadows cvar

------------------------------------------------------------------------
r3873 | havoc | 2004-02-06 06:22:17 +0100 (Fri, 06 Feb 2004) | 2 lines

fixed Mod_Q3BSP_BoxTouchingPVS to handle unvised maps properly

------------------------------------------------------------------------
r3872 | havoc | 2004-02-06 06:20:02 +0100 (Fri, 06 Feb 2004) | 2 lines

rewrote PF_tokenize to not use memory allocations

------------------------------------------------------------------------
r3871 | havoc | 2004-02-06 06:18:17 +0100 (Fri, 06 Feb 2004) | 2 lines

increased size of ditherpattern texture to try to work around the odd 'not black' dither bug (succeeded? yes, but no closer to figuring out why it was misbehaving in the first place)

------------------------------------------------------------------------
r3870 | havoc | 2004-02-06 06:17:08 +0100 (Fri, 06 Feb 2004) | 2 lines

gl_texturemode should not affect TEXF_FORCENEAREST and TEXF_FORCELINEAR textures

------------------------------------------------------------------------
r3869 | warp | 2004-02-06 05:55:54 +0100 (Fri, 06 Feb 2004) | 2 lines

This is your key system, this is your key system after being mostly replaced with Twilight's and then modified.

------------------------------------------------------------------------
r3868 | havoc | 2004-02-03 20:22:06 +0100 (Tue, 03 Feb 2004) | 2 lines

optimized BoxTouchingPVS code to no longer be recursive

------------------------------------------------------------------------
r3867 | havoc | 2004-02-03 05:52:39 +0100 (Tue, 03 Feb 2004) | 2 lines

support tga's with incomplete colormaps (less than 256 colors), I HOPE this is correct

------------------------------------------------------------------------
r3866 | havoc | 2004-02-03 03:16:13 +0100 (Tue, 03 Feb 2004) | 2 lines

added some names for certain characters: ` backquote, ~ tilde, ' apostrophe, " quote (note that ` and ~ are not bindable anyway, hardwired in the engine)

------------------------------------------------------------------------
r3865 | coderjoe | 2004-02-02 16:02:19 +0100 (Mon, 02 Feb 2004) | 3 lines

don't need to send WM_SETICON... just set the icon in the window class and
windows will take care of it.

------------------------------------------------------------------------
r3864 | havoc | 2004-02-02 15:55:05 +0100 (Mon, 02 Feb 2004) | 2 lines

fix misplaced extern S_UnblockSound

------------------------------------------------------------------------
r3863 | black | 2004-02-02 15:47:20 +0100 (Mon, 02 Feb 2004) | 2 lines

DS_OK used instead of DD_OK

------------------------------------------------------------------------
r3862 | coderjoe | 2004-02-02 15:44:04 +0100 (Mon, 02 Feb 2004) | 2 lines

get msvc using the new icon

------------------------------------------------------------------------
r3861 | havoc | 2004-02-02 15:41:20 +0100 (Mon, 02 Feb 2004) | 2 lines

cast the char array to unsigned short in the ToAscii call, because windows is insane enough to make it take an unsigned short *, even though it writes byte chars to it

------------------------------------------------------------------------
r3860 | havoc | 2004-02-02 15:37:56 +0100 (Mon, 02 Feb 2004) | 2 lines

winquake.h is gone, absorbed into the respective files which used it, also cleaned out all unneeded winquake.h cruft

------------------------------------------------------------------------
r3859 | havoc | 2004-02-02 15:04:30 +0100 (Mon, 02 Feb 2004) | 2 lines

thanks to de-we for these great icons (I have not figured out how to use them yet, though)

------------------------------------------------------------------------
r3858 | havoc | 2004-02-02 14:22:40 +0100 (Mon, 02 Feb 2004) | 2 lines

fixing up rtlight handling a bit (now always runs the dynlight stage which has been renamed rtlights stage in the r_speeds report)

------------------------------------------------------------------------
r3857 | havoc | 2004-02-02 14:09:30 +0100 (Mon, 02 Feb 2004) | 2 lines

thanks to Mathieu Olivier for these new makefiles

------------------------------------------------------------------------
r3856 | havoc | 2004-02-02 13:45:11 +0100 (Mon, 02 Feb 2004) | 2 lines

fix a logic bug in EntLight handling (should have been checking r_shadow_realtime_world not dlight or flashblend)

------------------------------------------------------------------------
r3855 | havoc | 2004-02-02 05:32:50 +0100 (Mon, 02 Feb 2004) | 2 lines

fixed sv_freezenonclients (now freezes time as well)

------------------------------------------------------------------------
r3854 | havoc | 2004-02-02 05:06:30 +0100 (Mon, 02 Feb 2004) | 2 lines

forgot to init enterfrac2 in the TraceLineBrushFloat code

------------------------------------------------------------------------
r3853 | havoc | 2004-02-02 04:56:38 +0100 (Mon, 02 Feb 2004) | 9 lines

added trace.realfraction field which is now used for comparisons instead of fraction, this allows proper detection of the nearest blocker without the glitches previously seen sometimes on brush-brush boundaries (where the expanded side boundary was closer than the floor it was part of)
optimized q3bsp point traces (point, not line)
optimized q3bsp line traces (finally got that code working, and added optimized line-triangle tracing code for curves which is 52% faster)
optimized q3bsp brush traces (or tried to...  seems to be slower unfortunately, more work to do on this in the future)
BrushForBox now sets the mins/maxs of the brush for culling
reduced q3mnode_t structure by 4 bytes (checks plane pointer now instead of a dedicated isnode variable)
cleaned up some collision code a bit
added some TargetQuake workarounds (spew warnings instead of crashing to console) for weird physics settings (like MOVETYPE_PUSH and SOLID_BSP with no model)

------------------------------------------------------------------------
r3852 | havoc | 2004-02-02 04:36:11 +0100 (Mon, 02 Feb 2004) | 2 lines

added sv_freezenonclients cvar, fixed the bug that caused falling damage when standing on a sloped floor pushing you into a wall, and cleaned up a few other things a bit

------------------------------------------------------------------------
r3851 | havoc | 2004-02-02 03:43:21 +0100 (Mon, 02 Feb 2004) | 2 lines

now always uses glPolygonOffset, and collision brush rendering has been fixed with better glPolygonOffset settings (no more flicker), also uses glPolygonOffset on shadow volumes now (but this probably has any effect in any cases I know of)

------------------------------------------------------------------------
r3850 | havoc | 2004-02-02 03:28:40 +0100 (Mon, 02 Feb 2004) | 2 lines

added several BoxPlane comparison functions to find information on corners relative to the plane (rather than merely checking which side it is on)

------------------------------------------------------------------------
r3849 | havoc | 2004-02-02 03:21:52 +0100 (Mon, 02 Feb 2004) | 2 lines

changed a lot of progs errors to warnings, and it prints QC status for warnings

------------------------------------------------------------------------
r3848 | havoc | 2004-02-01 23:40:39 +0100 (Sun, 01 Feb 2004) | 2 lines

reduced default r_lightningbeams_repeatdistance from 1024 to 128

------------------------------------------------------------------------
r3847 | havoc | 2004-02-01 23:30:51 +0100 (Sun, 01 Feb 2004) | 2 lines

changed Sys_Sleep from (void) to (int milliseconds), now wastes a lot less cpu time while waiting for the next frame

------------------------------------------------------------------------
r3846 | black | 2004-02-01 13:20:05 +0100 (Sun, 01 Feb 2004) | 2 lines

Only one player list is displayed now. Moved it a little bit down so if you set con_notify 2, it wont bother you any more.

------------------------------------------------------------------------
r3845 | havoc | 2004-02-01 00:04:13 +0100 (Sun, 01 Feb 2004) | 2 lines

handle funky ToAscii values (shift/ctrl/alt sometimes produce ascii values for no reason), and also ignore any 0 or 2 character values

------------------------------------------------------------------------
r3841 | molivier | 2004-01-27 10:08:55 +0100 (Tue, 27 Jan 2004) | 2 lines

Slight improvement in the way we include the strl{cat,cpy} declarations and implementations into the code.

------------------------------------------------------------------------
r3840 | molivier | 2004-01-27 09:12:54 +0100 (Tue, 27 Jan 2004) | 2 lines

Don't allow a higher depth than the desktop when using a windowed mode on Win32. It seems X11 already forbids this.

------------------------------------------------------------------------
r3839 | havoc | 2004-01-27 07:13:40 +0100 (Tue, 27 Jan 2004) | 2 lines

use sys_ticrate timing on dedicated servers

------------------------------------------------------------------------
r3838 | havoc | 2004-01-26 09:57:04 +0100 (Mon, 26 Jan 2004) | 2 lines

improved handling of video mode failures

------------------------------------------------------------------------
r3832 | havoc | 2004-01-24 02:00:11 +0100 (Sat, 24 Jan 2004) | 3 lines

changed local server ports to 1 (server) and 2 (client), regardless of cl_port and port cvars
merged cl_netaddress and sv_netaddress into one net_address cvar

------------------------------------------------------------------------
r3831 | havoc | 2004-01-24 01:42:26 +0100 (Sat, 24 Jan 2004) | 2 lines

fix a severe bug with the checking of WSAStartup (basically any socket after the first would fail for no reason)

------------------------------------------------------------------------
r3830 | havoc | 2004-01-23 11:03:13 +0100 (Fri, 23 Jan 2004) | 2 lines

disabled opening of ipv6 sockets since that code still isn't finished (this MIGHT fix win32 problems, not sure yet), and now prints error messages when socket/bind/ioctl calls fail

------------------------------------------------------------------------
r3827 | havoc | 2004-01-21 10:22:19 +0100 (Wed, 21 Jan 2004) | 2 lines

wrap angles on rotating pushers because large angle values are bad for precision

------------------------------------------------------------------------
r3823 | molivier | 2004-01-21 08:29:42 +0100 (Wed, 21 Jan 2004) | 2 lines

Transfusion update: renamed the mod directory to "basetf" instead of "transfusion", and added 6 new maps.

------------------------------------------------------------------------
r3818 | havoc | 2004-01-20 22:03:38 +0100 (Tue, 20 Jan 2004) | 2 lines

-safe now implies -window and disables all GL extensions that offer a disable option

------------------------------------------------------------------------
r3817 | molivier | 2004-01-20 14:18:49 +0100 (Tue, 20 Jan 2004) | 2 lines

Added a check in the WAV loading code to make sure the file is a WAV file before proceeding. Thanks to Urre for pointing out this bug.

------------------------------------------------------------------------
r3815 | havoc | 2004-01-19 23:30:46 +0100 (Mon, 19 Jan 2004) | 2 lines

ignore visofs errors on leaf 0 (solid), thanks to Vic for pointing out the problem in qbsp itself

------------------------------------------------------------------------
r3813 | havoc | 2004-01-19 22:34:59 +0100 (Mon, 19 Jan 2004) | 2 lines

changed comment above FS_CreatePath

------------------------------------------------------------------------
r3810 | havoc | 2004-01-17 05:07:32 +0100 (Sat, 17 Jan 2004) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r3808 | havoc | 2004-01-13 23:14:48 +0100 (Tue, 13 Jan 2004) | 2 lines

fixed a crash with r_lerpsprites 0 mode

------------------------------------------------------------------------
r3806 | black | 2004-01-12 19:48:36 +0100 (Mon, 12 Jan 2004) | 2 lines

Fixed findkeysforcommand hopefully.

------------------------------------------------------------------------
r3805 | molivier | 2004-01-12 08:38:15 +0100 (Mon, 12 Jan 2004) | 2 lines

Added sound support to the NetBSD port. Most of the code comes from the original "snd_sun.c" file, by id Software. Some TODO remains, including the support for the "-snd*" options. Hopefully, the BSD specific code in DP works for the 3 majors BSD flavors, though I cannot test it on FreeBSD and OpenBSD anyway (feedback and test welcome if you have a BSD box at your disposal).

------------------------------------------------------------------------
r3804 | molivier | 2004-01-12 08:33:11 +0100 (Mon, 12 Jan 2004) | 2 lines

Removed a few warnings when compiling with MinGW

------------------------------------------------------------------------
r3803 | havoc | 2004-01-12 04:54:29 +0100 (Mon, 12 Jan 2004) | 2 lines

don't try to upload distorttextures if the texture shader extension is missing

------------------------------------------------------------------------
r3802 | black | 2004-01-11 18:41:08 +0100 (Sun, 11 Jan 2004) | 2 lines

Added the findkeysforcommand builtin to the menu qc. It returns an altstring containing the keys which trigger the searched command.

------------------------------------------------------------------------
r3801 | black | 2004-01-11 18:35:27 +0100 (Sun, 11 Jan 2004) | 2 lines

Hopefully finished the core of the new ui.

------------------------------------------------------------------------
r3781 | havoc | 2004-01-07 13:09:57 +0100 (Wed, 07 Jan 2004) | 2 lines

rewrote COM_ParseToken and COM_ParseTokenConsole to make them buffer size safe (thanks to Vic for pointing out this problem), not that a rewrite was strictly necessary but it probably fixed unknown bugs

------------------------------------------------------------------------
r3780 | havoc | 2004-01-07 13:07:14 +0100 (Wed, 07 Jan 2004) | 2 lines

fix a bad bug in developer printing of out of bounds fraction (crashed Con_Printf by giving it bad parameters)

------------------------------------------------------------------------
r3779 | knghtbrd | 2004-01-01 17:50:10 +0100 (Thu, 01 Jan 2004) | 4 lines

INCOMPLETE SDL video support (don't use it!)  No input, no multiple video
modes, no proper shutdown.  May not even compile anywher but my mac as of
yet.

------------------------------------------------------------------------
r3778 | knghtbrd | 2004-01-01 17:45:56 +0100 (Thu, 01 Jan 2004) | 5 lines

Undo moving cl_available.  This really doesn't belong in system-specific
video code, but it's the only place for that kind of thing unless someone
wants to make the dedicated DarkPlaces binary a lot less bloated.  Not on
my priority list right now.

------------------------------------------------------------------------
r3777 | havoc | 2004-01-01 13:25:36 +0100 (Thu, 01 Jan 2004) | 2 lines

added c_nodes, c_leafs, and c_faces increments in q3bsp rendering to make r_speeds more useful

------------------------------------------------------------------------
r3776 | havoc | 2004-01-01 11:25:05 +0100 (Thu, 01 Jan 2004) | 2 lines

sorry Mathieu, can't use va() in filesystem code, not safe. (this was causing the crosshairs to not work due to heavy reuse of va() buffers)

------------------------------------------------------------------------
r3775 | havoc | 2004-01-01 06:22:21 +0100 (Thu, 01 Jan 2004) | 2 lines

fix a missing ; from knghtbrd's commit

------------------------------------------------------------------------
r3774 | knghtbrd | 2004-01-01 05:39:47 +0100 (Thu, 01 Jan 2004) | 2 lines

Moved an extern to the proper header.

------------------------------------------------------------------------
r3773 | knghtbrd | 2004-01-01 05:01:00 +0100 (Thu, 01 Jan 2004) | 2 lines

Moved cl_available definition to vid_shared.c

------------------------------------------------------------------------
r3772 | havoc | 2004-01-01 03:35:56 +0100 (Thu, 01 Jan 2004) | 2 lines

now runs scripts at startup differently - runs scripts twice, once only executing cvar and exec, then starts video, then runs scripts again

------------------------------------------------------------------------
r3771 | havoc | 2004-01-01 03:33:48 +0100 (Thu, 01 Jan 2004) | 2 lines

fixed the complaints about missing sounds (no longer complains after the initial precache failure)

------------------------------------------------------------------------
r3770 | knghtbrd | 2003-12-31 19:03:49 +0100 (Wed, 31 Dec 2003) | 16 lines

More MacOS X stuff.  The correct test for MacOS X in preprocessor seems to
be defined(__APPLE__) && defined(__MACH__).  MacOS X has strl functions,
so don't bother compiling them.  Also, the correct name and location of
libGL for X11 on a Mac is /usr/X11R6/lib/libGL.1.dylib.  Compiles with one
warning caused by use of dlfcn.h (an emulation of the dynamic ELF object
loader which complains that you really should be using the Mach-O dylib
API instead.)

Compiled with gcc 3.1 (use gcc_select) on MacOS X 10.3 with X11 and the
Xcode Tools installed.  Makefile changes were: null sound/cd, removal of
-lxf86dga from the GLX build, and replacing -ggdb in both places with
plain old -g (someone at Apple needs a LARTing for this...)  SHOULD work
with 10.2 provided that you have developer tools, X11 with devel stuff,
and the dlfcn emulation package from fink.  I can't promise meaningful
support for anything but Panther, sorry.

------------------------------------------------------------------------
r3769 | havoc | 2003-12-31 09:32:54 +0100 (Wed, 31 Dec 2003) | 2 lines

make sure client ports are opened before trying to connect to anything

------------------------------------------------------------------------
r3768 | havoc | 2003-12-31 08:37:22 +0100 (Wed, 31 Dec 2003) | 2 lines

don't even try to support XF86DGA stuff on Mac

------------------------------------------------------------------------
r3767 | havoc | 2003-12-31 08:18:07 +0100 (Wed, 31 Dec 2003) | 2 lines

fix a thinko in big endian support (forgot to use defined() in a #elif)

------------------------------------------------------------------------
r3766 | molivier | 2003-12-30 14:00:48 +0100 (Tue, 30 Dec 2003) | 2 lines

Factorized the file searching algorithm in the FS code. Sorted packaged files list at load time to allow the use of a binary search. Overall, I think you can expect a file search time divided by a factor between 1.5 to 3 depending on your mod and packages layout. Time lost in the file search code on my P233MMX: vanilla Quake (4121 searches while loading the 1st demo): 2.7 sec -> 1.6 sec, Transfusion mod (9752 searches while loading BB1): 18.0 sec -> 7.6 sec

------------------------------------------------------------------------
r3765 | havoc | 2003-12-30 00:47:55 +0100 (Tue, 30 Dec 2003) | 2 lines

updated sv_masterextra1 to point to the newer master server address

------------------------------------------------------------------------
r3764 | havoc | 2003-12-29 06:43:47 +0100 (Mon, 29 Dec 2003) | 2 lines

changed nexuiz hud to display a different (more minimal) sbar pic when viewsize is 110

------------------------------------------------------------------------
r3763 | havoc | 2003-12-29 02:57:38 +0100 (Mon, 29 Dec 2003) | 2 lines

added GAME_SOM (and its hud), and shuffled some hud code around to make things a little cleaner

------------------------------------------------------------------------
r3762 | havoc | 2003-12-28 07:21:36 +0100 (Sun, 28 Dec 2003) | 2 lines

fixed bug with falling (not on ground) MOVETYPE_STEP entities not touching triggers

------------------------------------------------------------------------
r3761 | havoc | 2003-12-28 06:14:29 +0100 (Sun, 28 Dec 2003) | 2 lines

made TryUnstick failure a DPrintf (like TryUnstick success is)

------------------------------------------------------------------------
r3760 | havoc | 2003-12-28 03:14:15 +0100 (Sun, 28 Dec 2003) | 2 lines

added ogg.o to WGL exe build

------------------------------------------------------------------------
r3759 | havoc | 2003-12-28 03:08:10 +0100 (Sun, 28 Dec 2003) | 2 lines

fix a thinko on clip.trace.ent = sv.edicts (it should only be set if startsolid or fraction < 1)

------------------------------------------------------------------------
r3758 | havoc | 2003-12-28 02:05:40 +0100 (Sun, 28 Dec 2003) | 3 lines

fixed fiends jumping through player bug, huge thanks to Tomaz for days of help tracking down this longstanding bug! (it supported rotated collisions with bbox entities - not good!)
refined the COLLISIONPARANOID checks (now centralized in SV_Move)

------------------------------------------------------------------------
r3757 | havoc | 2003-12-28 01:58:38 +0100 (Sun, 28 Dec 2003) | 2 lines

improved support for q3map2 lights (added fade and scale keys supported by rtcw and sof2 respectively)

------------------------------------------------------------------------
r3756 | molivier | 2003-12-27 22:15:16 +0100 (Sat, 27 Dec 2003) | 2 lines

Simple Ogg Vorbis support (no streaming: the file is fully decompressed in memory, you just save disk space). DP will try to load the VorbisFile library at startup and will enable Ogg Vorbis support if it succeeds, so you need the Ogg Vorbis official DLLs. Win32 binaries works, but the Linux binaries are still untested for the moment - they compile successfully though.

------------------------------------------------------------------------
r3755 | havoc | 2003-12-26 18:28:18 +0100 (Fri, 26 Dec 2003) | 2 lines

made an annoying cbox message that I had forgotten to disable, into a COLLISIONPARANOID >= 3 line

------------------------------------------------------------------------
r3754 | havoc | 2003-12-24 22:24:49 +0100 (Wed, 24 Dec 2003) | 2 lines

fix a bug with using the wrong trace end variable in the COLLISIONPARANOID print

------------------------------------------------------------------------
r3753 | havoc | 2003-12-24 22:22:43 +0100 (Wed, 24 Dec 2003) | 2 lines

patched up some compiler warnings in incomplete code

------------------------------------------------------------------------
r3752 | havoc | 2003-12-24 22:07:41 +0100 (Wed, 24 Dec 2003) | 2 lines

added a bunch more COLLISIONPARANOID code trying to track down a physics bug with fiends jumping through players, this defaults off (see end of collision.h)

------------------------------------------------------------------------
r3751 | havoc | 2003-12-24 22:05:17 +0100 (Wed, 24 Dec 2003) | 2 lines

added "sv_saveentfile" command to allow easy dumping of .ent files from maps so they can then be edited in a text editor

------------------------------------------------------------------------
r3750 | havoc | 2003-12-24 19:16:58 +0100 (Wed, 24 Dec 2003) | 2 lines

fixed cloud layers in quake sky loading

------------------------------------------------------------------------
r3749 | black | 2003-12-23 13:12:03 +0100 (Tue, 23 Dec 2003) | 2 lines

Fast commit before Im off for 10 days. Please correct/undo my commit if it breaks something, I havent had time to test everything perfectly but Im hoping that everything works. Merry Christmas everybody !

------------------------------------------------------------------------
r3746 | black | 2003-12-20 19:32:47 +0100 (Sat, 20 Dec 2003) | 2 lines

Added the cvar sbar_alpha.

------------------------------------------------------------------------
r3745 | black | 2003-12-20 19:21:18 +0100 (Sat, 20 Dec 2003) | 2 lines

PR_SetString and PRVM_SetString now point to pr_strings - resp. prog->strings if a NULL string is passed.

------------------------------------------------------------------------
r3744 | black | 2003-12-19 18:54:22 +0100 (Fri, 19 Dec 2003) | 2 lines

Added the console commands edictset and prvm_edictset.

------------------------------------------------------------------------
r3743 | black | 2003-12-19 17:46:48 +0100 (Fri, 19 Dec 2003) | 2 lines

Fixed the crash that occured when the commandline got "too long".

------------------------------------------------------------------------
r3742 | molivier | 2003-12-18 09:59:54 +0100 (Thu, 18 Dec 2003) | 2 lines

Removed a potential buffer overflow and factorized some code

------------------------------------------------------------------------
r3740 | black | 2003-12-17 14:16:47 +0100 (Wed, 17 Dec 2003) | 2 lines

minor, minor change to Host_Init - the loading plaque is now displayed before the menu is initialized

------------------------------------------------------------------------
r3738 | havoc | 2003-12-17 10:50:20 +0100 (Wed, 17 Dec 2003) | 2 lines

fixed a bug with high framerate (or low speed) rotating bmodels failing to push when blocked

------------------------------------------------------------------------
r3737 | molivier | 2003-12-17 08:58:33 +0100 (Wed, 17 Dec 2003) | 2 lines

Fixed AK version of the FS code, it should now behave as expected, without much duplicated code. Factorized "dir" and "ls" console commands code.

------------------------------------------------------------------------
r3736 | havoc | 2003-12-16 16:59:21 +0100 (Tue, 16 Dec 2003) | 2 lines

fix a filesystem directory listing bug in FS_Search

------------------------------------------------------------------------
r3735 | havoc | 2003-12-16 16:26:28 +0100 (Tue, 16 Dec 2003) | 3 lines

rewrote FS_Search, hopefully it will work better now, and it now matches directories inside paks (in other words: listing sound/* will tell you about sound/plats and sound/whatever.wav, this is mainly to be consistent with filesystem directories), it is also no longer two-pass (although simple the two-pass approach was dangerous if the two listings came out different), and it now sorts the listing
rewrote much of matchpattern, now handles path separators specially, and uses a much better approach to handling the * wildcard (no longer looks for the following character, simply tries multiple matchpattern calls until it hits a path separator or gets a match)

------------------------------------------------------------------------
r3733 | black | 2003-12-16 13:43:50 +0100 (Tue, 16 Dec 2003) | 2 lines

Added the togglemenu command for both menus and the chr builtin command (menu qc)

------------------------------------------------------------------------
r3726 | havoc | 2003-12-16 12:08:07 +0100 (Tue, 16 Dec 2003) | 2 lines

added cvar_string extension at the request of Paul Timofeyev

------------------------------------------------------------------------
r3725 | molivier | 2003-12-15 08:48:43 +0100 (Mon, 15 Dec 2003) | 2 lines

Audio CD support for NetBSD; it also compiles on OpenBSD, but I can't test it for now. Plus some diff noise reduction and a minor bug fix in cd_linux.c (the case when the user changes track without using the "cd" command should now be handled correctly)

------------------------------------------------------------------------
r3724 | molivier | 2003-12-12 16:01:14 +0100 (Fri, 12 Dec 2003) | 2 lines

Removed redundant definitions in cd_linux.c

------------------------------------------------------------------------
r3723 | havoc | 2003-12-12 01:28:56 +0100 (Fri, 12 Dec 2003) | 2 lines

made sure EF_FULLBRIGHT works on everything (bmodels were broken)

------------------------------------------------------------------------
r3722 | molivier | 2003-12-11 15:17:34 +0100 (Thu, 11 Dec 2003) | 2 lines

Borland C++ makefile is *so* outdated that I can't even imagine someone is still using it

------------------------------------------------------------------------
r3721 | molivier | 2003-12-11 14:57:59 +0100 (Thu, 11 Dec 2003) | 2 lines

Oops... I forgot to add this file to the previous commit

------------------------------------------------------------------------
r3720 | molivier | 2003-12-11 14:52:46 +0100 (Thu, 11 Dec 2003) | 2 lines

Factorized audio CD code

------------------------------------------------------------------------
r3716 | molivier | 2003-12-10 09:05:25 +0100 (Wed, 10 Dec 2003) | 2 lines

OpenBSD support wasn't very far away...

------------------------------------------------------------------------
r3714 | havoc | 2003-12-09 14:17:46 +0100 (Tue, 09 Dec 2003) | 2 lines

fixed the wall slide stuttering bug (the one that has been annoying me for months), it turned out to be a float precision issue with cliphull selection, and this also fixed the movetogoal bug (monsters not noticing they hit a wall) and also the scrags-flying-through-wall/ceilings bug

------------------------------------------------------------------------
r3712 | molivier | 2003-12-09 09:05:43 +0100 (Tue, 09 Dec 2003) | 2 lines

Early support for NetBSD (the dedicated binary works and the GLX binary compiles)

------------------------------------------------------------------------
r3711 | molivier | 2003-12-09 08:54:59 +0100 (Tue, 09 Dec 2003) | 2 lines

Fixed scr_screenshot_jpeg_quality slider in options menu

------------------------------------------------------------------------
r3710 | havoc | 2003-12-08 09:03:24 +0100 (Mon, 08 Dec 2003) | 2 lines

todo item done: sounds spawn even if out of hearing range (because the player might teleport to them)

------------------------------------------------------------------------
r3709 | havoc | 2003-12-08 08:58:28 +0100 (Mon, 08 Dec 2003) | 2 lines

fixed gcc and linux related compilation problems from Black's recent commit

------------------------------------------------------------------------
r3708 | havoc | 2003-12-08 08:11:31 +0100 (Mon, 08 Dec 2003) | 2 lines

fix the weapon alpha with invisibility in transfusion

------------------------------------------------------------------------
r3707 | havoc | 2003-12-08 06:05:22 +0100 (Mon, 08 Dec 2003) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r3706 | havoc | 2003-12-08 01:22:13 +0100 (Mon, 08 Dec 2003) | 2 lines

added a comment above particle() function to describe its parameters

------------------------------------------------------------------------
r3705 | black | 2003-12-07 19:55:56 +0100 (Sun, 07 Dec 2003) | 3 lines

Added qc fs search functions, so the qcs can easily verify directories contents, etc. -> useful for dynamic content loading.
Changed some 'bool's into read-only cvars to make them accessible for the menu qc.

------------------------------------------------------------------------
r3704 | havoc | 2003-12-07 14:01:28 +0100 (Sun, 07 Dec 2003) | 2 lines

added an easteregg (v_psycho), thanks to Zinx Verituse and Ben Winslow for the original code for this

------------------------------------------------------------------------
r3703 | havoc | 2003-12-07 12:40:03 +0100 (Sun, 07 Dec 2003) | 2 lines

todo item done: now ignores modelflags on view entities and tag attached entities, so there aren't spinning view models and such anymore in Zerstorer and Malice

------------------------------------------------------------------------
r3702 | havoc | 2003-12-07 12:13:25 +0100 (Sun, 07 Dec 2003) | 2 lines

todo item done: turning keys are no longer affected by slowmo

------------------------------------------------------------------------
r3701 | havoc | 2003-12-07 12:08:32 +0100 (Sun, 07 Dec 2003) | 2 lines

todo item done: fixed con_notify cvar (limits number of displayed notify lines)

------------------------------------------------------------------------
r3700 | havoc | 2003-12-07 11:57:29 +0100 (Sun, 07 Dec 2003) | 2 lines

todo item done: added cl_particles_blood_bloodhack cvar so now id1 blood particles use the blood effect, and added this to effects options menu as Force New Blood Effect

------------------------------------------------------------------------
r3699 | havoc | 2003-12-07 11:28:54 +0100 (Sun, 07 Dec 2003) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r3698 | havoc | 2003-12-07 11:26:20 +0100 (Sun, 07 Dec 2003) | 2 lines

added scr_screenshot_jpeg_quality cvar (and added it to the menu)

------------------------------------------------------------------------
r3697 | havoc | 2003-12-07 10:56:51 +0100 (Sun, 07 Dec 2003) | 2 lines

todo item done: added "saveconfig" console command

------------------------------------------------------------------------
r3696 | havoc | 2003-12-07 10:48:29 +0100 (Sun, 07 Dec 2003) | 2 lines

added DP_LITSUPPORT extension

------------------------------------------------------------------------
r3695 | havoc | 2003-12-07 10:39:49 +0100 (Sun, 07 Dec 2003) | 2 lines

todo item done: GAME_FNIGGIUM minimum resolution of 640x480

------------------------------------------------------------------------
r3694 | havoc | 2003-12-07 10:24:41 +0100 (Sun, 07 Dec 2003) | 2 lines

added r_wateralpha to effects menu

------------------------------------------------------------------------
r3693 | havoc | 2003-12-07 09:35:48 +0100 (Sun, 07 Dec 2003) | 2 lines

removed vid_allowhwgamma variable because vid_activewindow is a better thing to check

------------------------------------------------------------------------
r3692 | havoc | 2003-12-07 09:33:54 +0100 (Sun, 07 Dec 2003) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r3691 | havoc | 2003-12-07 09:24:23 +0100 (Sun, 07 Dec 2003) | 2 lines

no longer throttles back framerate when console is active, now only when app is not the focus

------------------------------------------------------------------------
r3690 | havoc | 2003-12-07 09:21:54 +0100 (Sun, 07 Dec 2003) | 2 lines

fixed behavior of vid_activewindow and vid_allowhwgamma in x11 event code, now behaves more like the windows version (gamma is now based on whether the window is the focus, not related to mouse entering/leaving anymore)

------------------------------------------------------------------------
r3689 | havoc | 2003-12-07 09:01:01 +0100 (Sun, 07 Dec 2003) | 2 lines

added CSHIFT_VCSHIFT blend so v_cshift now affects underwater blending (as well as other liquids) for more consistent behavior, and disabled powerup blends in transfusion (at their request)

------------------------------------------------------------------------
r3688 | havoc | 2003-12-04 12:13:57 +0100 (Thu, 04 Dec 2003) | 2 lines

eradicated SZ_Print, thanks to Fuh for pointing out the sheer evil of this function found in nq, qw and q2...  SZ_Print is a strcat onto a sizebuf - note that it could OVERWRITE THE SIZEBUF STRUCT if it is empty (but it was never empty where quake used it).

------------------------------------------------------------------------
r3687 | havoc | 2003-12-04 11:05:12 +0100 (Thu, 04 Dec 2003) | 2 lines

removed need for gfx/menuplyr.lmp (this code wasn't even used anymore, since the menu loads it directly on demand and that is optional)

------------------------------------------------------------------------
r3686 | havoc | 2003-12-04 10:47:38 +0100 (Thu, 04 Dec 2003) | 2 lines

console parsing now behaves like qwcl, thanks to Fuh for pointing out the problems with the winquake COM_ParseToken (it treated : as a single character keyword, thus breaking connect commands involving a port, for example), so I added COM_ParseTokenConsole for the console parsing

------------------------------------------------------------------------
r3676 | havoc | 2003-12-03 03:00:15 +0100 (Wed, 03 Dec 2003) | 2 lines

fix a severe bug with 16bit modes (VID_InitMode in vid_glx.c was taking a stencil parameter which does not exist, and thus stencil was in general always on even in 16bit)

------------------------------------------------------------------------
r3675 | havoc | 2003-12-01 01:17:32 +0100 (Mon, 01 Dec 2003) | 2 lines

added a note about the Creative Technology Ltd patent (US Patent #6384822) on the Carmack's Reverse approach to stencil shadow volume rendering, and changed the rendering algorithm to further distance it from Creative's patent.

------------------------------------------------------------------------
r3674 | black | 2003-11-30 19:33:26 +0100 (Sun, 30 Nov 2003) | 2 lines

The menu isnt initialized for dedicated servers

------------------------------------------------------------------------
r3673 | havoc | 2003-11-30 07:33:33 +0100 (Sun, 30 Nov 2003) | 2 lines

now uses q3bsp surfaceflags when possible instead of shaders (but the trans flag still exists only in shader surfaceparms so they are still read for that)

------------------------------------------------------------------------
r3672 | havoc | 2003-11-30 02:56:29 +0100 (Sun, 30 Nov 2003) | 2 lines

added GAME_FNIGGIUM and GAME_SETHERAL

------------------------------------------------------------------------
r3671 | havoc | 2003-11-30 02:48:34 +0100 (Sun, 30 Nov 2003) | 2 lines

fix a little bug in the FS_Search code (it was checking the pak case sensitivity flag even if it was looking at a directory listing)

------------------------------------------------------------------------
r3670 | havoc | 2003-11-30 02:14:47 +0100 (Sun, 30 Nov 2003) | 2 lines

now parses q3 shaders for surfaceparms (this mainly fixes up the many falsely transparent walls in shader tricks, and also detects nodraw shaders properly)

------------------------------------------------------------------------
r3669 | havoc | 2003-11-30 02:10:51 +0100 (Sun, 30 Nov 2003) | 2 lines

added comment support to COM_ReadAndTokenizeLine

------------------------------------------------------------------------
r3667 | havoc | 2003-11-29 06:32:06 +0100 (Sat, 29 Nov 2003) | 2 lines

added dir and ls console commands (yes they are different), these search paks (although not very good at pattern matching), and FS_Search and FS_FreeSearch functions

------------------------------------------------------------------------
r3666 | havoc | 2003-11-29 06:30:13 +0100 (Sat, 29 Nov 2003) | 2 lines

added a quick hack for nodraw support in q3bsp (I hope this is right)

------------------------------------------------------------------------
r3662 | black | 2003-11-19 15:59:56 +0100 (Wed, 19 Nov 2003) | 2 lines

vid_hardwaregammasupported is now a read-only cvar

------------------------------------------------------------------------
r3661 | black | 2003-11-19 14:56:38 +0100 (Wed, 19 Nov 2003) | 2 lines

Cvars can be read-only now.

------------------------------------------------------------------------
r3659 | havoc | 2003-11-19 11:07:39 +0100 (Wed, 19 Nov 2003) | 2 lines

fixed oriented sprite problems (no longer uses entity angles for them) by rewriting the whole R_SpriteSetup function, it is now VERY optimized and more readable

------------------------------------------------------------------------
r3658 | havoc | 2003-11-19 09:50:19 +0100 (Wed, 19 Nov 2003) | 2 lines

ignore vid_restart commands in configs

------------------------------------------------------------------------
r3657 | molivier | 2003-11-19 08:50:53 +0100 (Wed, 19 Nov 2003) | 2 lines

ClearAllStates cleared the key states twice in vid_wgl.c, and vid_glx.c didn't do that when he closes its window (which caused missed key strokes with vid_restart and the video options menu)

------------------------------------------------------------------------
r3656 | molivier | 2003-11-19 08:45:46 +0100 (Wed, 19 Nov 2003) | 2 lines

Updated MSVC6 DSP file

------------------------------------------------------------------------
r3653 | havoc | 2003-11-18 18:48:40 +0100 (Tue, 18 Nov 2003) | 2 lines

fix an input bug that prevented function keys from working inside console

------------------------------------------------------------------------
r3650 | havoc | 2003-11-17 06:00:50 +0100 (Mon, 17 Nov 2003) | 2 lines

now includes quake palette as a fallback if no gfx/palette.lmp is loaded

------------------------------------------------------------------------
r3649 | havoc | 2003-11-15 05:17:54 +0100 (Sat, 15 Nov 2003) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r3648 | havoc | 2003-11-15 05:16:30 +0100 (Sat, 15 Nov 2003) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r3647 | havoc | 2003-11-15 02:03:37 +0100 (Sat, 15 Nov 2003) | 2 lines

fixed flipped sound (stupid bug in S_Update call)

------------------------------------------------------------------------
r3646 | havoc | 2003-11-14 15:02:56 +0100 (Fri, 14 Nov 2003) | 10 lines

r_refdef.vieworg and r_refdef.viewangles replaced by r_refdef.viewentitymatrix
fixed intermission camera bug (now the right place and angles by copying the entity matrix directly to r_refdef)
fixed intermission listener bug (now the right place by copying the entity matrix to listener variables)
fixed envmap command saving (now reads the correct part of the screen according to GL's bottom to top coordinates, so this works again)
fixed envmap command rendering (it was not hiding view and exterior models)
fixed timerefresh command rendering (it was not properly setting up the view)
merged chase.c into view.c because it really didn't have any good reasons to be separate
renamed listener_forward to listener_viewforward, listener_up to listener_viewup, listener_origin to listener_vieworigin, and converted listener_right to listener_viewleft
renamed vpn to r_viewforward, vup to r_viewup, vright to r_viewright (deprecated, trying to use just r_viewleft but haven't finished converting things over to it yet), r_origin to r_vieworigin

------------------------------------------------------------------------
r3645 | havoc | 2003-11-14 14:55:44 +0100 (Fri, 14 Nov 2003) | 2 lines

removed double newlines (don't have a clue how this file got them)

------------------------------------------------------------------------
r3644 | havoc | 2003-11-14 14:46:28 +0100 (Fri, 14 Nov 2003) | 2 lines

fix a couple signed/unsigned comparison warnings

------------------------------------------------------------------------
r3643 | havoc | 2003-11-14 14:19:24 +0100 (Fri, 14 Nov 2003) | 2 lines

don't draw viewmodel during intermission

------------------------------------------------------------------------
r3639 | molivier | 2003-11-12 12:37:53 +0100 (Wed, 12 Nov 2003) | 2 lines

Options menu has a width of 320, not 640

------------------------------------------------------------------------
r3638 | havoc | 2003-11-12 09:44:54 +0100 (Wed, 12 Nov 2003) | 2 lines

make quake completable again (killtarget problem with double remove call, now just a developer warning instead of an error)

------------------------------------------------------------------------
r3637 | black | 2003-11-11 21:20:11 +0100 (Tue, 11 Nov 2003) | 2 lines

Added {0,0} to vid_resolutions and added the macro/constant VID_RES_COUNT

------------------------------------------------------------------------
r3636 | black | 2003-11-11 21:18:37 +0100 (Tue, 11 Nov 2003) | 2 lines

Added 2 builtins.

------------------------------------------------------------------------
r3635 | havoc | 2003-11-11 05:56:32 +0100 (Tue, 11 Nov 2003) | 2 lines

q3bsp transparency support (note: makes maps that abuse alpha in shaders for special effects look quite weird)

------------------------------------------------------------------------
r3634 | havoc | 2003-11-11 03:36:21 +0100 (Tue, 11 Nov 2003) | 2 lines

q1bsp lightmaps are now always rendered at 2x overbright like software quake and q3bsp (this means all multitexture lightmapped wall methods now require combine)

------------------------------------------------------------------------
r3633 | havoc | 2003-11-10 09:20:04 +0100 (Mon, 10 Nov 2003) | 2 lines

now limits animation lerp time to .1 second to fix a problem with framegroup models changing frame (which they do infrequently) and interpolating the change really slowly

------------------------------------------------------------------------
r3632 | havoc | 2003-11-08 09:33:41 +0100 (Sat, 08 Nov 2003) | 2 lines

added Polygon_Divide_Double and Polygon_Divide_Float functions which take point arrays and such instead of windings, for more flexibility

------------------------------------------------------------------------
r3631 | havoc | 2003-11-08 04:16:11 +0100 (Sat, 08 Nov 2003) | 2 lines

check for many invalid attempts to modify entities (like setmodel on world, or on a free entity)

------------------------------------------------------------------------
r3630 | molivier | 2003-11-07 09:13:43 +0100 (Fri, 07 Nov 2003) | 2 lines

When exiting the color control menu, return to the options menu instead of the main menu

------------------------------------------------------------------------
r3628 | havoc | 2003-11-05 09:18:54 +0100 (Wed, 05 Nov 2003) | 2 lines

call reset functions in init code (not necessary currently, as the compilers currently being used for darkplaces clear uninitialized variables, but a good practice)

------------------------------------------------------------------------
r3627 | havoc | 2003-11-05 09:03:27 +0100 (Wed, 05 Nov 2003) | 2 lines

immense speedups to triangle neighbor building by using an edge hash table (this sped up rtlight loading by 10x or more in some cases)

------------------------------------------------------------------------
r3626 | havoc | 2003-11-05 09:00:34 +0100 (Wed, 05 Nov 2003) | 2 lines

fixed r_restart/vid_restart bugs with skybox (now reloads skybox as it should) and cleaned up skybox loading/unloading (no more memory leaks when changing skybox during game)

------------------------------------------------------------------------
r3625 | havoc | 2003-11-05 05:14:55 +0100 (Wed, 05 Nov 2003) | 2 lines

added r_fullbright (and EF_FULLBRIGHT) support to q3bsp rendering

------------------------------------------------------------------------
r3624 | havoc | 2003-11-05 05:10:10 +0100 (Wed, 05 Nov 2003) | 2 lines

added r_ambient support to q3bsp rendering

------------------------------------------------------------------------
r3623 | havoc | 2003-11-05 04:36:38 +0100 (Wed, 05 Nov 2003) | 6 lines

added r_shadow_showtris
added gl_texture_anisotropy to menu
changed sv_cullentities_trace and _pvs defaults to 0 and 1 respectively (now uses pvs culling because trace culling was too slow in q3bsp)
r_shadow_realtime_world now works in q3bsp (using upgraded Mod_ShadowMesh functions to combine lighting meshes)
rewrote most of R_Q3BSP_DrawFace - now supports singletexture cards, r_shadow_realtime_world, and glow textures

------------------------------------------------------------------------
r3622 | havoc | 2003-11-05 04:34:24 +0100 (Wed, 05 Nov 2003) | 2 lines

added R_Mesh_Draw_ShowTris function which draws a triangle mesh as lines

------------------------------------------------------------------------
r3620 | black | 2003-10-31 20:24:12 +0100 (Fri, 31 Oct 2003) | 2 lines

Added isfunction and changed callfunction so it works

------------------------------------------------------------------------
r3615 | black | 2003-10-30 13:49:30 +0100 (Thu, 30 Oct 2003) | 3 lines

Added 2(3) builtin functions.
Changed the 2d mouse code, so that the relative coords are mapped into the console coord system (mouse speed is always the same in the menu qc).

------------------------------------------------------------------------
r3614 | black | 2003-10-28 23:29:30 +0100 (Tue, 28 Oct 2003) | 4 lines

Fixed a bug that caused some messages to not be logged to the disk (Con_Print calls instead of Con_Printf).
Changed the comment of Con_Print, so it isnt misleading any more.
Fixed a bug so dp wont crash when VM_strzone/VM_strunzone is used.

------------------------------------------------------------------------
r3611 | molivier | 2003-10-28 12:17:36 +0100 (Tue, 28 Oct 2003) | 2 lines

Moved some sound code in preparation of adding Ogg Vorbis support

------------------------------------------------------------------------
r3609 | black | 2003-10-26 22:54:59 +0100 (Sun, 26 Oct 2003) | 3 lines

Changed the way the new vm is handling the unloading of programs - respectively cleaned PRVM_ResetProgs.
Moved the key_dest reset from MR_Restart to M_Shutdown/MP_Shutdown.

------------------------------------------------------------------------
r3608 | black | 2003-10-25 18:28:18 +0200 (Sat, 25 Oct 2003) | 3 lines

Added a new builin function (callfunction)
Fixed my drawqueue clipping code - should work now

------------------------------------------------------------------------
r3605 | molivier | 2003-10-24 08:47:21 +0200 (Fri, 24 Oct 2003) | 2 lines

Fixed FS code so that unpacked files are handled normally when AKVERSION isn't defined

------------------------------------------------------------------------
r3604 | black | 2003-10-23 21:47:08 +0200 (Thu, 23 Oct 2003) | 2 lines

Changed prvm_ed_loadfromfile - it isnt really compatible with the old vm anymore (allows now loading multiple files. Fixed prvm_crashall and altered some error texts.

------------------------------------------------------------------------
r3602 | molivier | 2003-10-22 10:41:27 +0200 (Wed, 22 Oct 2003) | 2 lines

Factorized the code of the S_Play* functions

------------------------------------------------------------------------
r3601 | molivier | 2003-10-22 10:35:11 +0200 (Wed, 22 Oct 2003) | 2 lines

Fixed 2 warnings found by MSVC6

------------------------------------------------------------------------
r3600 | havoc | 2003-10-21 15:02:16 +0200 (Tue, 21 Oct 2003) | 2 lines

removed pragma that disabled signed/unsigned mismatch warnings in MSVC4, as these have all been fixed in the engine already

------------------------------------------------------------------------
r3599 | black | 2003-10-21 14:59:55 +0200 (Tue, 21 Oct 2003) | 2 lines

I hope this fixes some warnings

------------------------------------------------------------------------
r3598 | havoc | 2003-10-21 14:21:26 +0200 (Tue, 21 Oct 2003) | 2 lines

physics code no longer uses allsolid (mainly of concern to q3bsp which rarely set it), only startsolid (allsolid is of course kept for QC compatibility, as non-functional as it may be), and I reenabled movement when in solid (so objects can move out of obstacles they managed to end up inside)

------------------------------------------------------------------------
r3597 | havoc | 2003-10-21 14:18:43 +0200 (Tue, 21 Oct 2003) | 2 lines

SV_Move (and children) now only set trace.ent if there is an impact, not if it was an allsolid situation...  and SV_PointQ1Contents now uses SV_PointSuperContents

------------------------------------------------------------------------
r3596 | black | 2003-10-21 14:08:29 +0200 (Tue, 21 Oct 2003) | 4 lines

Added in_mouse_x and in_mouse_y, which contain the rel. coords of the mouse.
Fixed a bug where PRVM_Stacktrace/PR_Stacktrace were involved.
Added some vm builtin functions to the new vm and changed PRVM_ED_LoadFromFile, so it can load multiple files.

------------------------------------------------------------------------
r3594 | havoc | 2003-10-21 13:43:58 +0200 (Tue, 21 Oct 2003) | 2 lines

moved trace endpos calculation outside of RecursiveHullCheck, to improve code layout consistency between collision box and q1bsp code (no effect on results)

------------------------------------------------------------------------
r3593 | havoc | 2003-10-21 13:34:57 +0200 (Tue, 21 Oct 2003) | 2 lines

one more input underrun check in pvs decompression

------------------------------------------------------------------------
r3591 | black | 2003-10-17 17:30:22 +0200 (Fri, 17 Oct 2003) | 2 lines

Removed some bugs (I forget to change a few pr_argc to prog->argc)

------------------------------------------------------------------------
r3589 | black | 2003-10-17 16:02:34 +0200 (Fri, 17 Oct 2003) | 5 lines

Updated some builtin parameter lists, added 2 functions to the menu builtins.
Added the boolean in_client_mouse (used to indicate wheter mouse position data
should be send to the client.
(Only Win at the moment)

------------------------------------------------------------------------
r3588 | havoc | 2003-10-17 05:32:32 +0200 (Fri, 17 Oct 2003) | 2 lines

read multiple frames from demo if client is falling behind

------------------------------------------------------------------------
r3587 | black | 2003-10-16 19:45:29 +0200 (Thu, 16 Oct 2003) | 2 lines

Fixed crash in Host_Shutdown when MR_Shutdown was 0.

------------------------------------------------------------------------
r3586 | havoc | 2003-10-16 13:41:18 +0200 (Thu, 16 Oct 2003) | 2 lines

handle one error condition I forgot to code in PF_setattachment (modelindex was checked, but did not check for it resolving to a NULL model, as is the case whem modelindex is 0)

------------------------------------------------------------------------
r3584 | havoc | 2003-10-15 09:37:05 +0200 (Wed, 15 Oct 2003) | 2 lines

marked off some completed items and such

------------------------------------------------------------------------
r3583 | havoc | 2003-10-13 23:14:05 +0200 (Mon, 13 Oct 2003) | 2 lines

added r_shadow_help and r_editlights_help commands containing documentation

------------------------------------------------------------------------
r3582 | black | 2003-10-13 14:43:28 +0200 (Mon, 13 Oct 2003) | 2 lines

Fixed windows input (bad,bad hack)

------------------------------------------------------------------------
r3581 | warp | 2003-10-12 11:05:19 +0200 (Sun, 12 Oct 2003) | 2 lines

Whoops, fix some stupidity on my part, should work better.

------------------------------------------------------------------------
r3580 | warp | 2003-10-12 10:43:23 +0200 (Sun, 12 Oct 2003) | 4 lines

Change key handling, er, quite a bit.

Note, Windows is broken by this, it needs fixing up ASAP.

------------------------------------------------------------------------
r3579 | warp | 2003-10-12 07:45:42 +0200 (Sun, 12 Oct 2003) | 2 lines

Tweak the key handling, may need more invasive changes.

------------------------------------------------------------------------
r3578 | black | 2003-10-11 21:46:12 +0200 (Sat, 11 Oct 2003) | 2 lines

Added S_GetCached so the dedicated servers compiles now

------------------------------------------------------------------------
r3577 | havoc | 2003-10-11 21:32:36 +0200 (Sat, 11 Oct 2003) | 2 lines

remove +use and -use commands because they prevent mods from defining them (and they never worked anyway)

------------------------------------------------------------------------
r3576 | black | 2003-10-11 14:14:33 +0200 (Sat, 11 Oct 2003) | 6 lines

Added the drawing functions and added also probably menu only message functions
(almost the same as the server ones, but with different param (order)).
Also added all functions to the menu builtin list (except the menu specific ones :-/).
The drawflag constants are now the drawqueue_drawflag_e enum.
Added function S_GetCached.

------------------------------------------------------------------------
r3572 | havoc | 2003-10-11 07:34:49 +0200 (Sat, 11 Oct 2003) | 2 lines

added DP_QC_TRACE_MOVETYPE_HITMODEL extension (and added DP_QC_TRACE_MOVETYPE_WORLDONLY to extension list) - this means traceline/tracebox can now check model geometry

------------------------------------------------------------------------
r3571 | havoc | 2003-10-11 07:16:19 +0200 (Sat, 11 Oct 2003) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r3570 | havoc | 2003-10-11 05:39:39 +0200 (Sat, 11 Oct 2003) | 2 lines

reverted two bugs introduced by Black (anum red digits were not being loaded, and restored the positioning of the minideathmatchoverlay to exactly where quake had it - my previous commit was 4 pixels off in positioning)

------------------------------------------------------------------------
r3569 | havoc | 2003-10-11 05:25:09 +0200 (Sat, 11 Oct 2003) | 2 lines

fix Sbar_MiniDeathmatchOverlay to draw to the right of the sbar (in non-Nexuiz modes) like quake did

------------------------------------------------------------------------
r3568 | havoc | 2003-10-11 05:12:36 +0200 (Sat, 11 Oct 2003) | 2 lines

added another todo item for dpmod, sorted list again

------------------------------------------------------------------------
r3567 | havoc | 2003-10-11 05:11:49 +0200 (Sat, 11 Oct 2003) | 2 lines

made weapon only 50% invisible in Transfusion with the invisibility powerup, and now being dead or invisible only affects the main viewmodel (not viewmodelforccient entities) to allow more flexibility in mods

------------------------------------------------------------------------
r3563 | havoc | 2003-10-10 06:50:00 +0200 (Fri, 10 Oct 2003) | 2 lines

fixed a crash in PR_objerror (trying to free self when there is no self), and removed an unused prototype called "error();"

------------------------------------------------------------------------
r3562 | havoc | 2003-10-10 06:42:37 +0200 (Fri, 10 Oct 2003) | 2 lines

one more reminder that nested for(i) loops are bad, mmk?

------------------------------------------------------------------------
r3561 | havoc | 2003-10-10 05:07:18 +0200 (Fri, 10 Oct 2003) | 2 lines

this should fix skybox in q3bsp (extra preprocessing pass to look for sky surfaces before rendering normal surfaces, only used if the map has sky surfaces)

------------------------------------------------------------------------
r3560 | havoc | 2003-10-10 03:45:51 +0200 (Fri, 10 Oct 2003) | 2 lines

q3bsp surfaces are now always rendered in the same order, made the q1bsp vis overrun/underrun warnings dprintf's, added some (unused) array merging code in q3bsp loading

------------------------------------------------------------------------
r3558 | black | 2003-10-09 21:48:12 +0200 (Thu, 09 Oct 2003) | 2 lines

Sorry, forgot to remove some debug code from host.c

------------------------------------------------------------------------
r3557 | black | 2003-10-09 21:42:35 +0200 (Thu, 09 Oct 2003) | 4 lines

Added a lot of builtin commands to prvm_cmds.c (mostly from pr_cmds).
Also changed the menu again, so menu_restart doesnt try to reregister cvars
and cmds any more.

------------------------------------------------------------------------
r3556 | havoc | 2003-10-08 23:57:32 +0200 (Wed, 08 Oct 2003) | 2 lines

added back glquake stair step up smoothing, and made it somewhat adjustable (cl_stairsmoothspeed)

------------------------------------------------------------------------
r3555 | havoc | 2003-10-08 23:40:12 +0200 (Wed, 08 Oct 2003) | 2 lines

fixed Apply option in video options menu (I had forgotten to renumber it)

------------------------------------------------------------------------
r3554 | havoc | 2003-10-08 23:00:04 +0200 (Wed, 08 Oct 2003) | 2 lines

fixed a couple warnings on memsetting shm

------------------------------------------------------------------------
r3553 | havoc | 2003-10-08 22:50:28 +0200 (Wed, 08 Oct 2003) | 2 lines

collision brush generation in q3bsp is now *MUCH* faster and uses a lot less memory (technical: now uses two temp windings, repeatedly swapping between them, avoiding all the temporary allocs, to achieve this BufWinding_NewFromPlane and BufWinding_Divide were added)

------------------------------------------------------------------------
r3552 | havoc | 2003-10-08 22:21:37 +0200 (Wed, 08 Oct 2003) | 2 lines

fixed splashing sounds once and for all - now splashes only on transitions involving water/slime, rather than the old 'any liquid except lava' check, so this means no more sky splashing...

------------------------------------------------------------------------
r3551 | havoc | 2003-10-08 04:37:00 +0200 (Wed, 08 Oct 2003) | 2 lines

snd_initialized is now checked by S_FindName and S_PrecacheSound (Thanks to Moz for reporting the -nosound crash)

------------------------------------------------------------------------
r3550 | havoc | 2003-10-08 03:28:19 +0200 (Wed, 08 Oct 2003) | 2 lines

added prvm_cmds.c prvm_edict.c prvm_exec.c prvm_execprogram.h

------------------------------------------------------------------------
r3549 | havoc | 2003-10-08 02:59:57 +0200 (Wed, 08 Oct 2003) | 2 lines

fixed a variable declaration I forgot to move when moving some other code

------------------------------------------------------------------------
r3548 | havoc | 2003-10-08 01:45:14 +0200 (Wed, 08 Oct 2003) | 7 lines

cd audio now tied to sound system
sound system now tied to video system because DirectSound needs a window to work at all (thank you Windows for another useless obstacle)
sound system can now restart (snd_restart command)
vid_stencil cvar removed (now tied to 32bit color)
vid_bitsperpixel now defaults to 32
r_shadow_shadows cvar added (default 1) for stencil shadows on dlights (since vid_stencil is gone)

------------------------------------------------------------------------
r3547 | havoc | 2003-10-07 17:16:43 +0200 (Tue, 07 Oct 2003) | 2 lines

removed a temporary comment from Black

------------------------------------------------------------------------
r3546 | havoc | 2003-10-07 17:15:33 +0200 (Tue, 07 Oct 2003) | 2 lines

fix a signed/unsigned comparison warning

------------------------------------------------------------------------
r3545 | black | 2003-10-07 14:12:01 +0200 (Tue, 07 Oct 2003) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r3544 | black | 2003-10-07 13:56:02 +0200 (Tue, 07 Oct 2003) | 2 lines

AK: Changed makefile temporarily so the new prvm compiles on linux.

------------------------------------------------------------------------
r3543 | black | 2003-10-07 08:19:14 +0200 (Tue, 07 Oct 2003) | 2 lines

Changed dp so the new vm fits in.

------------------------------------------------------------------------
r3542 | havoc | 2003-10-07 06:49:50 +0200 (Tue, 07 Oct 2003) | 2 lines

a stab in the dark at supporting unlit q3bsp maps

------------------------------------------------------------------------
r3541 | black | 2003-10-06 20:52:56 +0200 (Mon, 06 Oct 2003) | 2 lines

Adding the new vm

------------------------------------------------------------------------
r3539 | havoc | 2003-10-05 15:48:03 +0200 (Sun, 05 Oct 2003) | 2 lines

added COM_ReadAndTokenizeLine, a useful parsing function

------------------------------------------------------------------------
r3538 | havoc | 2003-10-05 15:47:26 +0200 (Sun, 05 Oct 2003) | 2 lines

fix a signed/unsigned comparison in PR_UglyValueString

------------------------------------------------------------------------
r3524 | molivier | 2003-10-02 11:04:12 +0200 (Thu, 02 Oct 2003) | 2 lines

The crusade against buffer overflows continues...

------------------------------------------------------------------------
r3521 | molivier | 2003-10-01 14:36:29 +0200 (Wed, 01 Oct 2003) | 2 lines

Fixed/switched the "ev_string" and "ev_field" cases in PR_UglyValueString

------------------------------------------------------------------------
r3520 | molivier | 2003-10-01 14:19:26 +0200 (Wed, 01 Oct 2003) | 2 lines

Mostly [v]sprintf -> [v]snprintf replacements, and a couple of other fixes regarding buffers management

------------------------------------------------------------------------
r3519 | molivier | 2003-09-30 17:07:55 +0200 (Tue, 30 Sep 2003) | 2 lines

More strcpy -> strlcpy and sprintf -> snprintf

------------------------------------------------------------------------
r3518 | molivier | 2003-09-30 14:58:04 +0200 (Tue, 30 Sep 2003) | 2 lines

Lots of str[n]cat, str[n]cpy, and [v]sprintf have been replaced by strlcat, strlcpy and [v]snprintf to insure that they don't write outside of their buffers. More to come later.

------------------------------------------------------------------------
r3517 | molivier | 2003-09-30 14:54:02 +0200 (Tue, 30 Sep 2003) | 2 lines

Added strlcat and strlcpy, from OpenBSD. They are smart replacements for strncat and strncpy - see http://www.courtesan.com/todd/papers/strlcpy.html or their manual pages on the OpenBSD website for details

------------------------------------------------------------------------
r3516 | havoc | 2003-09-30 10:10:38 +0200 (Tue, 30 Sep 2003) | 2 lines

md3 flags support (blood trails, etc)

------------------------------------------------------------------------
r3514 | molivier | 2003-09-30 08:36:41 +0200 (Tue, 30 Sep 2003) | 2 lines

Fixed 2 potential buffer overflows in SearchInfostring

------------------------------------------------------------------------
r3513 | molivier | 2003-09-29 14:32:57 +0200 (Mon, 29 Sep 2003) | 2 lines

The "position" field of the "qfile_t" structure was (correctly) used for 2 differents things; this is clearly bad practice though, so it's no longer the case. Added a missing test in FS_Seek to insure we don't seek outside of a deflated file. Plus some minor cleanups here and there in the FS code.

------------------------------------------------------------------------
r3505 | havoc | 2003-09-22 22:55:31 +0200 (Mon, 22 Sep 2003) | 2 lines

Tomaz's new water effect has been added and looks very nice

------------------------------------------------------------------------
r3504 | havoc | 2003-09-22 22:05:40 +0200 (Mon, 22 Sep 2003) | 2 lines

fixed lightgrid out-of-bounds crash (for example when one hits the very top of a q3bsp)

------------------------------------------------------------------------
r3503 | havoc | 2003-09-22 21:44:20 +0200 (Mon, 22 Sep 2003) | 2 lines

empty lightgrid lump should now work

------------------------------------------------------------------------
r3501 | havoc | 2003-09-22 04:25:31 +0200 (Mon, 22 Sep 2003) | 2 lines

disabled GF3 water shader when water is fogged, fixed too-bright normal water rendering (when GF3 water shader is not used)

------------------------------------------------------------------------
r3500 | havoc | 2003-09-22 03:21:54 +0200 (Mon, 22 Sep 2003) | 2 lines

huge (16%) speed gain on surface rendering by eliminating the surfmesh chain in q1bsp surfaces, now only allows one mesh per surface and the surfmesh_t is embedded in the surface struct

------------------------------------------------------------------------
r3499 | havoc | 2003-09-22 01:23:27 +0200 (Mon, 22 Sep 2003) | 2 lines

removed RSurf_LightCheck because nothing used it anymore

------------------------------------------------------------------------
r3498 | havoc | 2003-09-22 01:08:36 +0200 (Mon, 22 Sep 2003) | 2 lines

r_dlightmap 0 mode removed (vertex dlights on lightmapped walls)

------------------------------------------------------------------------
r3497 | havoc | 2003-09-22 00:45:30 +0200 (Mon, 22 Sep 2003) | 2 lines

engine now defaults to 44100hz sound

------------------------------------------------------------------------
r3496 | havoc | 2003-09-22 00:42:57 +0200 (Mon, 22 Sep 2003) | 2 lines

removed r_shadows (glquake fake shadows)

------------------------------------------------------------------------
r3495 | havoc | 2003-09-22 00:06:27 +0200 (Mon, 22 Sep 2003) | 2 lines

r_colorscale gone, v_overbrightbits (cvar which controlled r_colorscale) gone

------------------------------------------------------------------------
r3494 | havoc | 2003-09-21 23:06:24 +0200 (Sun, 21 Sep 2003) | 2 lines

removed water lighting support

------------------------------------------------------------------------
r3490 | havoc | 2003-09-21 05:34:58 +0200 (Sun, 21 Sep 2003) | 2 lines

now supports skyboxes in q3bsp (note: must use the "sky" key in worldspawn to set the skybox basename like in q2, and it identifies sky shaders by names beginning with "textures/skies/"), and added a little error checking to Mod_Q1BSP_LoadLeafs, and added a couple todo items

------------------------------------------------------------------------
r3480 | havoc | 2003-09-20 11:16:01 +0200 (Sat, 20 Sep 2003) | 2 lines

added GAME_ZYMOTIC

------------------------------------------------------------------------
r3479 | havoc | 2003-09-20 09:34:52 +0200 (Sat, 20 Sep 2003) | 2 lines

finally managed to fix the r_shadow_portallight bug (had to reverse portal handling in many old broken cases), also changed the Portal_Visibility call to take a box instead of a sphere for culling

------------------------------------------------------------------------
r3474 | havoc | 2003-09-19 22:18:30 +0200 (Fri, 19 Sep 2003) | 2 lines

Tomaz's awesome new GeForce3 water effect, thanks!

------------------------------------------------------------------------
r3473 | havoc | 2003-09-19 21:53:57 +0200 (Fri, 19 Sep 2003) | 2 lines

recoded options menus, and replaced scr_2dresolution with vid_conwidth and vid_conheight cvars (and updated menu accordingly)

------------------------------------------------------------------------
r3472 | havoc | 2003-09-19 21:50:51 +0200 (Fri, 19 Sep 2003) | 2 lines

migrated light bounding box generation from r_shadow code to Portal_Visibility code when using r_shadow_portallight 1, I hoped this would fix bugs but it did not, still it is an optimization...

------------------------------------------------------------------------
r3471 | havoc | 2003-09-19 21:48:42 +0200 (Fri, 19 Sep 2003) | 2 lines

flip the X in normalmaps generated from heightmaps (according to FrikaC it was broken)

------------------------------------------------------------------------
r3470 | havoc | 2003-09-19 21:44:00 +0200 (Fri, 19 Sep 2003) | 2 lines

added some SV_CheckVelocity calls to MOVETYPE_WALK code

------------------------------------------------------------------------
r3469 | havoc | 2003-09-19 03:52:41 +0200 (Fri, 19 Sep 2003) | 2 lines

finished a lot of little todo items, mostly regarding server list and networking init bugs, and fixed skybox rendering

------------------------------------------------------------------------
r3468 | havoc | 2003-09-18 21:29:39 +0200 (Thu, 18 Sep 2003) | 2 lines

after an argument with Black it was decided that GAME_NEXUIZ will be weird (in my opinion) and use a bit number instead of a bitfield for STAT_ACTIVEWEAPON

------------------------------------------------------------------------
r3466 | havoc | 2003-09-17 19:51:31 +0200 (Wed, 17 Sep 2003) | 2 lines

the new partial-update entity compression protocol now works for the first time ever

------------------------------------------------------------------------
r3465 | havoc | 2003-09-17 19:49:51 +0200 (Wed, 17 Sep 2003) | 2 lines

forgot to include this file in the previous commit (no longer opens gfx.wad until a lump is requested)

------------------------------------------------------------------------
r3464 | havoc | 2003-09-17 19:48:58 +0200 (Wed, 17 Sep 2003) | 2 lines

no longer opens gfx.wad until a lump is requested (and gracefully fails if not found)

------------------------------------------------------------------------
r3462 | havoc | 2003-09-15 04:21:50 +0200 (Mon, 15 Sep 2003) | 2 lines

fixed empty texture lump handling in q1bsp loading

------------------------------------------------------------------------
r3461 | havoc | 2003-09-15 04:21:13 +0200 (Mon, 15 Sep 2003) | 2 lines

made a commit debugging message only happen with developer_networkentities

------------------------------------------------------------------------
r3460 | havoc | 2003-09-14 23:34:00 +0200 (Sun, 14 Sep 2003) | 2 lines

move developer_networkentities extern to protocol.h

------------------------------------------------------------------------
r3459 | havoc | 2003-09-14 05:52:21 +0200 (Sun, 14 Sep 2003) | 2 lines

more Nexuiz hud stuff from BlackHC, minor style edits to fit in with surrounding code better

------------------------------------------------------------------------
r3458 | havoc | 2003-09-14 05:40:32 +0200 (Sun, 14 Sep 2003) | 2 lines

added an item about corona shaders

------------------------------------------------------------------------
r3457 | havoc | 2003-09-13 22:58:33 +0200 (Sat, 13 Sep 2003) | 3 lines

fixed log2i to use parentheses around n
changed bit2i to use log2i((n) << 1)

------------------------------------------------------------------------
r3456 | havoc | 2003-09-13 22:41:35 +0200 (Sat, 13 Sep 2003) | 2 lines

added bit2i and log2i (these return the base 2 exponent of an integer, perhaps bit2i should be replaced by log2i() - 1 though)

------------------------------------------------------------------------
r3455 | havoc | 2003-09-13 22:39:35 +0200 (Sat, 13 Sep 2003) | 2 lines

fixed an R_InitSky warning regarding transpix being uninitialized, added transpixunion to clean up the aliasing mess (thanks to Black for pointing this out)

------------------------------------------------------------------------
r3454 | havoc | 2003-09-13 22:37:14 +0200 (Sat, 13 Sep 2003) | 2 lines

more developer_networkentities messages

------------------------------------------------------------------------
r3453 | havoc | 2003-09-13 06:50:36 +0200 (Sat, 13 Sep 2003) | 3 lines

renamed PROTOCOL_VERSION stuff to PROTOCOL_QUAKE, PROTOCOL_DARKPLACES1, and so on
mostly fixed network entity bugs

------------------------------------------------------------------------
r3452 | havoc | 2003-09-13 06:49:32 +0200 (Sat, 13 Sep 2003) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r3451 | havoc | 2003-09-13 01:57:58 +0200 (Sat, 13 Sep 2003) | 2 lines

changed teu game dir to "baseteu" at request of teu team

------------------------------------------------------------------------
r3450 | havoc | 2003-09-12 14:47:02 +0200 (Fri, 12 Sep 2003) | 2 lines

aitur fixed some important bugs in the error checks of the md2 model loader, thanks!

------------------------------------------------------------------------
r3440 | havoc | 2003-09-09 00:03:15 +0200 (Tue, 09 Sep 2003) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r3439 | havoc | 2003-09-09 00:00:37 +0200 (Tue, 09 Sep 2003) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r3438 | havoc | 2003-09-04 15:34:15 +0200 (Thu, 04 Sep 2003) | 2 lines

a couple bugfixes in Nehahra demos menu regarding end of menu wrapping (thanks to Vic for pointing out these bugs)

------------------------------------------------------------------------
r3437 | havoc | 2003-09-04 15:30:07 +0200 (Thu, 04 Sep 2003) | 3 lines

fix some glitches in the original commit
clean up blank lines

------------------------------------------------------------------------
r3436 | havoc | 2003-09-04 14:30:46 +0200 (Thu, 04 Sep 2003) | 2 lines

patch from Andreas Kirsh to add Nexuiz hud

------------------------------------------------------------------------
r3435 | havoc | 2003-09-04 11:30:48 +0200 (Thu, 04 Sep 2003) | 2 lines

the Connect failed error is now just a print

------------------------------------------------------------------------
r3434 | havoc | 2003-09-04 11:25:06 +0200 (Thu, 04 Sep 2003) | 2 lines

fix a nasty crash with multiplayer servers (thanks to Willis for finding this bug)

------------------------------------------------------------------------
r3432 | havoc | 2003-08-31 08:35:49 +0200 (Sun, 31 Aug 2003) | 2 lines

fixed a couple stupid bugs

------------------------------------------------------------------------
r3431 | havoc | 2003-08-31 07:25:23 +0200 (Sun, 31 Aug 2003) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r3430 | havoc | 2003-08-31 07:20:33 +0200 (Sun, 31 Aug 2003) | 2 lines

now uses string buffers more sanely and supports multiple strcat buffers (now uses PR_GetTempString), modified PF_VarString to read into a string buffer (FrikaC noticed strcat was being overwritten by print, inconsistent with his implementation of FRIK_FILE)

------------------------------------------------------------------------
r3429 | havoc | 2003-08-31 07:17:06 +0200 (Sun, 31 Aug 2003) | 2 lines

fix a crash related to MAX_EDICTS in "pr_fields" command (thanks to SeienAbunae for reporting this)

------------------------------------------------------------------------
r3428 | havoc | 2003-08-30 03:54:31 +0200 (Sat, 30 Aug 2003) | 5 lines

reverted the massive svs.connectedclients change, now back to svs.clients and svs.maxclients like quake
this fixes mods detecting singleplayer as multiplayer
this fixes frikbot frags updates on the scoreboard
added most of the capability necessary for botclient extension

------------------------------------------------------------------------
r3427 | havoc | 2003-08-29 05:49:00 +0200 (Fri, 29 Aug 2003) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r3426 | havoc | 2003-08-29 05:46:52 +0200 (Fri, 29 Aug 2003) | 2 lines

now prints "Connection refused" if LHNET_Read gets an ECONNREFUSED from inet4 or inet6 (thanks to Andreas Kirsh for this)

------------------------------------------------------------------------
r3425 | havoc | 2003-08-28 16:07:47 +0200 (Thu, 28 Aug 2003) | 3 lines

v_hwgamma is now saved to config (Andreas Kirsh suggested this and I agree)
gl_combine is now saved to config (due to popular demand, although this really should become a separate overbright cvar instead)

------------------------------------------------------------------------
r3424 | havoc | 2003-08-28 15:52:47 +0200 (Thu, 28 Aug 2003) | 2 lines

thanks to Andreas Kirsh for a discussion about using WS_EX_TOPMOST flag on the fullscreen window (hopefully this will keep dialogs from cutting holes in the frame like some people have reported)

------------------------------------------------------------------------
r3421 | havoc | 2003-08-28 10:08:07 +0200 (Thu, 28 Aug 2003) | 2 lines

fixed Prydon Gate behavior regarding the start map (which immediately changes level)

------------------------------------------------------------------------
r3420 | havoc | 2003-08-28 08:32:13 +0200 (Thu, 28 Aug 2003) | 2 lines

experimental (not terribly useful) support for r_shadow_realtime_dlight 1 mode (_world mode put on hold for a while)

------------------------------------------------------------------------
r3419 | havoc | 2003-08-27 15:21:30 +0200 (Wed, 27 Aug 2003) | 2 lines

removed used of PolygonOffset because it caused (extremely minor) visual glitches on the map, and isn't really much help even when using r_drawcollisionbrushes

------------------------------------------------------------------------
r3418 | havoc | 2003-08-27 15:10:41 +0200 (Wed, 27 Aug 2003) | 2 lines

fixed a crash with clusterindex -1 in GetPVS and FatPVS

------------------------------------------------------------------------
r3417 | havoc | 2003-08-27 14:22:00 +0200 (Wed, 27 Aug 2003) | 5 lines

q3bsp curve collisions (technically it can collide against any triangle mesh)
fixed some severe bugs in the q3bsp traceline code
optimized q3bsp tracebrush code - now uses a bbox for the trace, and reduces it to fit each node it encounters, this caused *IMMENSE* speedups!
optimized q3bsp curve collisions to use bbox culling of triangles (to avoid the cost of generating collision brushes most of the time)

------------------------------------------------------------------------
r3416 | molivier | 2003-08-25 08:35:47 +0200 (Mon, 25 Aug 2003) | 2 lines

Removed useless function M_PrintWhite, since M_Print prints in white already. Added M_PrintRed. Added support for sections for the key binding list (for clarity when using a lot of commands), and made it adjust its position depending on the number of commands. Updated Transfusion key binding list.

------------------------------------------------------------------------
r3415 | havoc | 2003-08-25 02:11:52 +0200 (Mon, 25 Aug 2003) | 2 lines

curves are now precomputed at load time, and all surfaces are treated as Q3FACETYPE_MESH (or skipped if they have no triangles)

------------------------------------------------------------------------
r3414 | havoc | 2003-08-25 01:00:26 +0200 (Mon, 25 Aug 2003) | 2 lines

the quadratic spline patches in quake3 maps now work (in english: curves!)

------------------------------------------------------------------------
r3413 | havoc | 2003-08-24 06:00:52 +0200 (Sun, 24 Aug 2003) | 3 lines

no more uses of %g in printf as it tends to lose precision too often (this caused problems with ftos in QuakeC truncating numbers to 6 digits, a problem afflicting Prydon Gate especially)
still tries to print numbers briefly if possible (by checking if their value is an int)

------------------------------------------------------------------------
r3412 | havoc | 2003-08-23 12:30:40 +0200 (Sat, 23 Aug 2003) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r3411 | havoc | 2003-08-23 12:19:26 +0200 (Sat, 23 Aug 2003) | 2 lines

fix severe bug that made chase_up continually increase up to 118 (thanks to yummyluv for pointing this out, and Electro for making me realize why it happened)

------------------------------------------------------------------------
r3410 | havoc | 2003-08-23 10:32:29 +0200 (Sat, 23 Aug 2003) | 2 lines

negate the dnormal instead of negating the dotproduct result

------------------------------------------------------------------------
r3409 | havoc | 2003-08-23 10:30:23 +0200 (Sat, 23 Aug 2003) | 2 lines

diffusenormal lighting was backwards (thanks to Electro for pointing this out)

------------------------------------------------------------------------
r3408 | havoc | 2003-08-23 10:23:54 +0200 (Sat, 23 Aug 2003) | 2 lines

don't call PlayerPreThink/PlayerPostThink on unspawned clients

------------------------------------------------------------------------
r3407 | havoc | 2003-08-23 09:09:13 +0200 (Sat, 23 Aug 2003) | 2 lines

fix a (very bad!) bug with -port cvar setting

------------------------------------------------------------------------
r3406 | havoc | 2003-08-23 09:05:55 +0200 (Sat, 23 Aug 2003) | 3 lines

added error messages when opening sockets (reports both success and failure)
added support for legacy -ip and -port options

------------------------------------------------------------------------
r3405 | havoc | 2003-08-23 08:20:30 +0200 (Sat, 23 Aug 2003) | 2 lines

in the server setup menu, default to 8 players instead of MAX_SCOREBOARD

------------------------------------------------------------------------
r3404 | havoc | 2003-08-23 07:13:31 +0200 (Sat, 23 Aug 2003) | 2 lines

fixed a couple warnings

------------------------------------------------------------------------
r3403 | havoc | 2003-08-23 04:17:04 +0200 (Sat, 23 Aug 2003) | 2 lines

q3bsp is working, but no curves yet, and no realtime lighting support

------------------------------------------------------------------------
r3402 | havoc | 2003-08-23 01:44:31 +0200 (Sat, 23 Aug 2003) | 2 lines

fix handling of .alpha, .renderamt, .scale, and .glow_color defaulting when 0 (it has to compare the float value, not the byte version of it)

------------------------------------------------------------------------
r3401 | molivier | 2003-08-19 10:27:24 +0200 (Tue, 19 Aug 2003) | 2 lines

Someone forgot to increment the number of items in the options menu. Added the "use" button to Transfusion key binding list

------------------------------------------------------------------------
r3400 | havoc | 2003-08-19 06:03:51 +0200 (Tue, 19 Aug 2003) | 2 lines

adjusted up camera height for chase_stevie in GoodVsBad2 as requested by yummyluv

------------------------------------------------------------------------
r3399 | havoc | 2003-08-19 02:43:35 +0200 (Tue, 19 Aug 2003) | 2 lines

forgot to commit these

------------------------------------------------------------------------
r3398 | havoc | 2003-08-19 02:25:08 +0200 (Tue, 19 Aug 2003) | 4 lines

more q3bsp work (and no it still doesn't work right)
converted over most of the engine to use new SUPERCONTENTS_ values (bit flags), and the q1bsp and q3bsp loaders convert to these, conversion to q1 contents and back is supported as well
other stuff...  I've forgotten what

------------------------------------------------------------------------
r3397 | havoc | 2003-08-18 21:31:41 +0200 (Mon, 18 Aug 2003) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r3396 | havoc | 2003-08-14 21:29:42 +0200 (Thu, 14 Aug 2003) | 2 lines

sv_light.c is gone, updated project to remove it

------------------------------------------------------------------------
r3395 | havoc | 2003-08-14 05:48:13 +0200 (Thu, 14 Aug 2003) | 2 lines

q3bsp is still not working yet, but getting closer

------------------------------------------------------------------------
r3394 | havoc | 2003-08-14 01:08:58 +0200 (Thu, 14 Aug 2003) | 2 lines

no time to explain, more changes on the path to q3bsp support

------------------------------------------------------------------------
r3393 | havoc | 2003-08-13 04:17:16 +0200 (Wed, 13 Aug 2003) | 2 lines

more hackish cleanups of PVS stuff, now decompresses the PVS data at load and this got rid of the last of the calls to LeafPVS (now checks the pvs in the leaf directly)

------------------------------------------------------------------------
r3392 | havoc | 2003-08-13 04:16:04 +0200 (Wed, 13 Aug 2003) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r3391 | havoc | 2003-08-13 04:08:11 +0200 (Wed, 13 Aug 2003) | 2 lines

I hope this fixes a md3 tag bug, but don't know

------------------------------------------------------------------------
r3390 | havoc | 2003-08-11 14:20:51 +0200 (Mon, 11 Aug 2003) | 2 lines

moved SV_FatPVS to model code

------------------------------------------------------------------------
r3389 | havoc | 2003-08-10 22:03:05 +0200 (Sun, 10 Aug 2003) | 3 lines

moved RecursiveLightPoint code to model_brush.c (model->brush.LightPoint), removing it from r_light.c and sv_light.c (now no longer needed)
made LightPoint able to return quake3 lightgrid data (diffuse color and direction in addition to ambient)

------------------------------------------------------------------------
r3388 | havoc | 2003-08-10 21:58:45 +0200 (Sun, 10 Aug 2003) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r3387 | havoc | 2003-08-10 15:50:00 +0200 (Sun, 10 Aug 2003) | 2 lines

Q3BSP collisions implemented (although not for patches, which aren't supported anyway, yet, and this is definitely not tested yet)

------------------------------------------------------------------------
r3386 | havoc | 2003-08-09 19:57:02 +0200 (Sat, 09 Aug 2003) | 4 lines

patch supplied by Toddd
changed GAME_BATTLEMECH quit messages
now knows about deathmatch and rambo modes in GAME_BATTLEMECH

------------------------------------------------------------------------
r3385 | havoc | 2003-08-09 19:54:27 +0200 (Sat, 09 Aug 2003) | 2 lines

change GAME_BATTLEMECH gamedir to "base" (patch supplied by Toddd)

------------------------------------------------------------------------
r3384 | havoc | 2003-08-09 19:01:04 +0200 (Sat, 09 Aug 2003) | 5 lines

redesigned blood effects (now looks like droplets until they hit a surface)
added decals for bullet impacts, explosions, plasma, etc
added cl_particles_quality cvar (cranks up the number of particles, reducing their alpha, making softer effects)
removed cl_particles_blood_size and cl_particles_smoke_size cvars

------------------------------------------------------------------------
r3383 | havoc | 2003-08-09 18:56:06 +0200 (Sat, 09 Aug 2003) | 2 lines

fixed loadgame bug with edict references to later edicts (d was pointing at the old address, redesigned how it works to fix this)

------------------------------------------------------------------------
r3379 | havoc | 2003-08-09 00:23:49 +0200 (Sat, 09 Aug 2003) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r3378 | havoc | 2003-08-09 00:22:30 +0200 (Sat, 09 Aug 2003) | 2 lines

fixed compile errors

------------------------------------------------------------------------
r3377 | havoc | 2003-08-09 00:19:01 +0200 (Sat, 09 Aug 2003) | 2 lines

sample implementation of QC replacement physics (already available on website, but it might as well become a maintainable thing in cvs)

------------------------------------------------------------------------
r3376 | havoc | 2003-08-09 00:06:08 +0200 (Sat, 09 Aug 2003) | 3 lines

reverted noclip movement to quake behavior (commented out the free movement call) to fix Cannon Fodder Quake ( http://www.qexpo.com/booths.php?id=5 )
ported sv_user.qc to C (C -> QC -> C again) because it greatly reduces the amount of code and makes it a bit more maintainable

------------------------------------------------------------------------
r3373 | havoc | 2003-08-07 13:01:38 +0200 (Thu, 07 Aug 2003) | 2 lines

multiplayer-only games (Transfusion and so on) now start playing demos as usual, rather than starting a server at startup (unless dedicated or -listen is used)

------------------------------------------------------------------------
r3372 | havoc | 2003-08-07 12:56:24 +0200 (Thu, 07 Aug 2003) | 2 lines

fix a warning

------------------------------------------------------------------------
r3371 | havoc | 2003-08-07 12:44:20 +0200 (Thu, 07 Aug 2003) | 2 lines

simulated packet loss (cl_fakepacketloss_receive, cl_fakepacketloss_send, sv_fakepacketloss_receive, sv_fakepacketloss_send) and ping (cl_fakelocalping_min, cl_fakelocalping_max) for network testing (or to handicap oneself in a local game)

------------------------------------------------------------------------
r3370 | havoc | 2003-08-07 12:41:28 +0200 (Thu, 07 Aug 2003) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r3369 | havoc | 2003-08-07 12:38:26 +0200 (Thu, 07 Aug 2003) | 2 lines

sigh, one more thing I forgot to commit :(

------------------------------------------------------------------------
r3368 | havoc | 2003-08-06 18:33:26 +0200 (Wed, 06 Aug 2003) | 4 lines

working code is better than broken code
code that compiles is good too...
(fix bugs/unfinished code in the DPPROTOCOL_VERSION4 commit)

------------------------------------------------------------------------
r3367 | havoc | 2003-08-06 15:16:48 +0200 (Wed, 06 Aug 2003) | 4 lines

upgraded network protocol to DPPROTOCOL_VERSION4 - this means partial entity updates are now supported (limited bandwidth entity updates), although the "rate" cvar stuff has not been implemented yet...  it also means entirely dynamic resizing of arrays in the server's entity database per client, so memory usage goes *WAY* down (used to be 256mb for 64 players, no matter what map/mod, now entirely adaptive as the game goes)
svs.clients gone, replaced with svs.connectedclients (similar idea except this is an array of pointers, and they are NULL for any unconnected client slots), this means entirely dynamic memory usage depending on number of clients (at least in the server; the client still needs fixing), this also means "maxplayers" is now a cvar (sv_maxplayers internally), not a command
some fixes/cleanups/tweaks (like proper setup of default maxplayers and deathmatch cvar in multiplayer-only games incase someone starts a map from console right away without using the menus)

------------------------------------------------------------------------
r3366 | havoc | 2003-08-06 15:11:33 +0200 (Wed, 06 Aug 2003) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r3365 | havoc | 2003-08-06 12:22:10 +0200 (Wed, 06 Aug 2003) | 2 lines

optimized polygon collision code a bit (optimized node side comparison)

------------------------------------------------------------------------
r3363 | havoc | 2003-08-03 15:20:27 +0200 (Sun, 03 Aug 2003) | 4 lines

added MOVE_WORLDONLY movement type
now does vis traces using MOVE_WORLDONLY to get a significant speed boost (back to the way it was before) and hopefully prevent any problems with transparent solid bmodels blocking visibility of
entities

------------------------------------------------------------------------
r3362 | havoc | 2003-08-03 15:05:22 +0200 (Sun, 03 Aug 2003) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r3361 | havoc | 2003-08-03 15:04:04 +0200 (Sun, 03 Aug 2003) | 2 lines

fix skin loading on mdl (and probably md2) models by not setting numskins unless skin file override is happening

------------------------------------------------------------------------
r3352 | havoc | 2003-07-31 02:26:34 +0200 (Thu, 31 Jul 2003) | 5 lines

corrected a few LittleLongs to LittleFloat in md3 loading (EEP those were bad)
.skin loading is now able to parse the quake3 format, and uses "common/nodraw" or "textures/common/nodraw" for the invisible parts, this also meant supporting replacement tag names in the .skin files...  so that's implemented as well (quite difficult)
COM_ParseToken upgraded to be able to parse .skin files (now identifies more single character tokens, and can return newlines if desired - this required patching lots of code to pass false to it)
added beginnings of support for DPPROTOCOL_VERSION4 in client (I.E. does nothing right now because the server speaks DPPROTOCOL_VERSION3)

------------------------------------------------------------------------
r3351 | havoc | 2003-07-31 02:25:40 +0200 (Thu, 31 Jul 2003) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r3350 | havoc | 2003-07-31 02:16:05 +0200 (Thu, 31 Jul 2003) | 2 lines

simplified dlight fading code

------------------------------------------------------------------------
r3346 | havoc | 2003-07-29 01:47:05 +0200 (Tue, 29 Jul 2003) | 2 lines

added code for protocol 4, not hooked up or tested

------------------------------------------------------------------------
r3345 | havoc | 2003-07-29 01:46:11 +0200 (Tue, 29 Jul 2003) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r3344 | havoc | 2003-07-28 13:45:56 +0200 (Mon, 28 Jul 2003) | 2 lines

I hope this fixes tags on md3 models, but I don't have any idea...

------------------------------------------------------------------------
r3343 | havoc | 2003-07-28 13:02:26 +0200 (Mon, 28 Jul 2003) | 2 lines

fix setattachment (it was setting tag_index to i, should have been i + 1), also added some developer warnings if it fails

------------------------------------------------------------------------
r3340 | havoc | 2003-07-27 07:23:35 +0200 (Sun, 27 Jul 2003) | 2 lines

disable -Werror because it makes a mess of releases if anyone has warnings (like a certain release I made a few days ago...  and then got 5 or so 'it doesn't compile' reports from Linux users :)

------------------------------------------------------------------------
r3339 | havoc | 2003-07-27 07:20:17 +0200 (Sun, 27 Jul 2003) | 2 lines

remove an unused variable (and kill the one incorrect use of it)

------------------------------------------------------------------------
r3338 | havoc | 2003-07-27 07:13:27 +0200 (Sun, 27 Jul 2003) | 2 lines

added MAX_PACKETFRAGMENT to limit size of reliable packets, and also try to keep effects from pushing it over the limit either, this means the only possible way to push it over the limit is entity updates, and if exceeding the limit the packets might be lost, possibly dropping the player...  but at least everything else should work now.

------------------------------------------------------------------------
r3337 | havoc | 2003-07-27 06:52:19 +0200 (Sun, 27 Jul 2003) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r3335 | havoc | 2003-07-26 12:52:35 +0200 (Sat, 26 Jul 2003) | 2 lines

missing )

------------------------------------------------------------------------
r3333 | havoc | 2003-07-26 11:34:23 +0200 (Sat, 26 Jul 2003) | 3 lines

changed .skin loading behavior to compare mesh name, not shader name, this matches quake3 behavior
now shows r_notexture if a texture is missing on md2/md3 and missing .skin replacements

------------------------------------------------------------------------
r3332 | havoc | 2003-07-26 10:28:43 +0200 (Sat, 26 Jul 2003) | 2 lines

report if skins are missing in SkinFiles system

------------------------------------------------------------------------
r3331 | havoc | 2003-07-26 02:18:35 +0200 (Sat, 26 Jul 2003) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r3330 | havoc | 2003-07-26 02:09:41 +0200 (Sat, 26 Jul 2003) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r3329 | havoc | 2003-07-26 02:08:21 +0200 (Sat, 26 Jul 2003) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r3328 | havoc | 2003-07-26 00:35:59 +0200 (Sat, 26 Jul 2003) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r3327 | havoc | 2003-07-25 11:23:03 +0200 (Fri, 25 Jul 2003) | 2 lines

marked a couple done, and sorted

------------------------------------------------------------------------
r3326 | havoc | 2003-07-25 11:19:31 +0200 (Fri, 25 Jul 2003) | 2 lines

added DP_GFX_SKINFILES and DP_GFX_QUAKE3MODELTAGS extensions

------------------------------------------------------------------------
r3325 | havoc | 2003-07-25 10:56:56 +0200 (Fri, 25 Jul 2003) | 2 lines

support for %s_%i.skin files on alias models (I.E. progs/test.mdl_0.skin), which contain "replace" commands, followed by the name of the mesh skin to replace ("default" for mdl/md2), and the replacement name, any skins that are not replaced are set to not draw (this means of course that a model can have extra pieces that become invisible in some skins)

------------------------------------------------------------------------
r3324 | havoc | 2003-07-24 23:45:53 +0200 (Thu, 24 Jul 2003) | 3 lines

removed gl.h from the list
added note that the dx includes can be found in q1source.zip on the id ftp

------------------------------------------------------------------------
r3323 | havoc | 2003-07-24 23:43:23 +0200 (Thu, 24 Jul 2003) | 2 lines

wsipx.h is not needed anymore, removed from the list

------------------------------------------------------------------------
r3322 | havoc | 2003-07-24 23:14:06 +0200 (Thu, 24 Jul 2003) | 2 lines

a correction about mingw makefile

------------------------------------------------------------------------
r3321 | havoc | 2003-07-24 22:08:50 +0200 (Thu, 24 Jul 2003) | 2 lines

added Battlemech (thanks to Todd for submitting the patch, though I replaced his quit messages)

------------------------------------------------------------------------
r3320 | havoc | 2003-07-24 21:30:54 +0200 (Thu, 24 Jul 2003) | 4 lines

md3 tag attachments (implemented but untested), also the capability to attach any entity to any other entity without tags (I.E. Q2 vwep models should work if attached to tag "")
redesigned large portions of entity networking (client and server) to deal with the hierarchical entity associations, viewmodel handling (client and server), view handling (client)
this may have fixed some unknown bugs regarding viewmodels and such (I hope so, it's cleaner, although more complicated)

------------------------------------------------------------------------
r3319 | havoc | 2003-07-24 20:45:20 +0200 (Thu, 24 Jul 2003) | 2 lines

cleaned up quit message system, now GAME_GOODVSBAD2's quit messages work and it's easy to add other games, also added back quake messages for quake/hipnotic/rogue modes

------------------------------------------------------------------------
r3318 | havoc | 2003-07-24 09:20:18 +0200 (Thu, 24 Jul 2003) | 2 lines

a little more explanation of shadow edge code

------------------------------------------------------------------------
r3317 | havoc | 2003-07-24 08:12:03 +0200 (Thu, 24 Jul 2003) | 2 lines

quite possibly the smallest ever commit - deleting an obsolete comment

------------------------------------------------------------------------
r3316 | warp | 2003-07-23 00:02:47 +0200 (Wed, 23 Jul 2003) | 2 lines

Kill an unused increment.

------------------------------------------------------------------------
r3315 | havoc | 2003-07-22 22:02:16 +0200 (Tue, 22 Jul 2003) | 2 lines

now loads md3 tags

------------------------------------------------------------------------
r3314 | havoc | 2003-07-22 21:23:37 +0200 (Tue, 22 Jul 2003) | 2 lines

fixed TE_BLOOD2 (by making it go away, it was not used by anyone, now an empty slot named TE_UNUSED1)

------------------------------------------------------------------------
r3312 | havoc | 2003-07-22 20:50:38 +0200 (Tue, 22 Jul 2003) | 2 lines

collision code cleanups (model->brush.TraceBox is now used for everything except of course bbox collisions which use Collision_ClipTrace_Box)

------------------------------------------------------------------------
r3311 | havoc | 2003-07-22 20:45:55 +0200 (Tue, 22 Jul 2003) | 2 lines

get rid of bobbing when dead

------------------------------------------------------------------------
r3310 | havoc | 2003-07-22 20:44:34 +0200 (Tue, 22 Jul 2003) | 2 lines

added VectorLerp

------------------------------------------------------------------------
r3309 | havoc | 2003-07-22 20:42:43 +0200 (Tue, 22 Jul 2003) | 2 lines

added Q2 and Q3 contents flags

------------------------------------------------------------------------
r3308 | havoc | 2003-07-22 20:12:51 +0200 (Tue, 22 Jul 2003) | 2 lines

viewmodels should not emit dlights (they spawn around 0 0 0), thanks to Tomaz for reporting this

------------------------------------------------------------------------
r3307 | havoc | 2003-07-22 20:08:08 +0200 (Tue, 22 Jul 2003) | 2 lines

gl_flashblend 1 now disables model dlighting like it was supposed to (thanks to Tomaz for reporting this)

------------------------------------------------------------------------
r3306 | havoc | 2003-07-22 19:22:21 +0200 (Tue, 22 Jul 2003) | 2 lines

fix major editing mistake in Mod_LoadSkinFrame (it was using basepixels_width/height for nmappixels), thanks to Tomaz for finding this bug

------------------------------------------------------------------------
r3305 | havoc | 2003-07-22 18:35:40 +0200 (Tue, 22 Jul 2003) | 2 lines

add a couple Mem_CheckSentinelsGlobal calls to loadimagepixels when developer_memorydebug is on (I really can't imagine these ever being needed, but might as well check)

------------------------------------------------------------------------
r3304 | havoc | 2003-07-22 18:31:39 +0200 (Tue, 22 Jul 2003) | 3 lines

use proper string for conn->address when accepting a new client (otherwise it could easily be so bogus as to trash the netconn structure)
thanks very much to Tomaz for tracking down this major bug

------------------------------------------------------------------------
r3303 | havoc | 2003-07-22 18:28:27 +0200 (Tue, 22 Jul 2003) | 2 lines

expose the developer_memory and developer_memorydebug cvars for use in other modules

------------------------------------------------------------------------
r3301 | havoc | 2003-07-22 02:46:50 +0200 (Tue, 22 Jul 2003) | 2 lines

two more dpzoo items

------------------------------------------------------------------------
r3300 | havoc | 2003-07-22 02:41:57 +0200 (Tue, 22 Jul 2003) | 2 lines

thanks to Tomaz for pestering me about the fact his last project files didn't get committed somehow (I KNOW I did commit it!  but it didn't stick somehow)

------------------------------------------------------------------------
r3299 | havoc | 2003-07-22 00:36:38 +0200 (Tue, 22 Jul 2003) | 2 lines

more changes

------------------------------------------------------------------------
r3298 | havoc | 2003-07-22 00:24:03 +0200 (Tue, 22 Jul 2003) | 2 lines

some more battlemech related todo items

------------------------------------------------------------------------
r3297 | havoc | 2003-07-21 23:26:10 +0200 (Mon, 21 Jul 2003) | 2 lines

added a battlemech bug report

------------------------------------------------------------------------
r3296 | havoc | 2003-07-21 22:48:44 +0200 (Mon, 21 Jul 2003) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r3295 | havoc | 2003-07-21 06:15:18 +0200 (Mon, 21 Jul 2003) | 2 lines

fix an error in a last minute change (was using maxcontentlength in Write, which takes contentlength)

------------------------------------------------------------------------
r3294 | havoc | 2003-07-21 06:04:31 +0200 (Mon, 21 Jul 2003) | 2 lines

skip over NULL sockets in cl_sockets and sv_sockets lists

------------------------------------------------------------------------
r3293 | havoc | 2003-07-21 06:03:12 +0200 (Mon, 21 Jul 2003) | 2 lines

patch up some major cracks in the armor of the functions (they now don't like being passed NULL for anything)

------------------------------------------------------------------------
r3292 | havoc | 2003-07-21 01:21:40 +0200 (Mon, 21 Jul 2003) | 2 lines

marked gl_texturemode bug as done (apparently I fixed it at some point long ago and forgot about fixing it), thanks to Vic for noticing this

------------------------------------------------------------------------
r3291 | havoc | 2003-07-19 19:53:04 +0200 (Sat, 19 Jul 2003) | 4 lines

added SV_PointContents
moved PointContents and FindNonSolidLocation function pointers into brush from brushq1
added TraceBox function pointer to brush (but no implementations of it yet)

------------------------------------------------------------------------
r3290 | havoc | 2003-07-19 19:51:39 +0200 (Sat, 19 Jul 2003) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r3289 | havoc | 2003-07-18 23:20:03 +0200 (Fri, 18 Jul 2003) | 2 lines

thanks to Tomaz for updating the project files

------------------------------------------------------------------------
r3288 | havoc | 2003-07-18 21:42:08 +0200 (Fri, 18 Jul 2003) | 2 lines

*** empty log message ***

------------------------------------------------------------------------
r3286 | havoc | 2003-07-18 20:40:01 +0200 (Fri, 18 Jul 2003) | 3 lines

finally I decided to commit my todo list, for whoever wants to contribute to the effort of finishing items on it
NOTE: I sort this periodically, so if any items are out of order they will be sorted later

------------------------------------------------------------------------
r3285 | havoc | 2003-07-18 19:24:44 +0200 (Fri, 18 Jul 2003) | 2 lines

now loads q3 bsp (but can't render it or collide with it, so don't try it)

------------------------------------------------------------------------
r3284 | havoc | 2003-07-17 16:57:05 +0200 (Thu, 17 Jul 2003) | 7 lines

moved all type-specific model fields to respective structures (alias, sprite, brush)
renamed model_t brush to brushq1, and created brush, brushq2, brushq3, currently brush only has entities, all else is type specific
wrote the beginnings of a q3 bsp loader (and of course the headers)
added functions CL_PointContents and CL_FindNonSolidLocation to simplify queries of world model (and make it more maintainable when q3bsp support is finished)
added r_shadow_glossintensity cvar (default 1) for glossmap textures
added r_shadow_gloss2intensity cvar (default 0.25) for forced gloss

------------------------------------------------------------------------
r3278 | havoc | 2003-07-15 11:09:24 +0200 (Tue, 15 Jul 2003) | 2 lines

turn down optimizations to -O2 because some versions of gcc are buggy on higher settings

------------------------------------------------------------------------
r3277 | havoc | 2003-07-15 11:07:27 +0200 (Tue, 15 Jul 2003) | 2 lines

increase number of digits for memlist reports

------------------------------------------------------------------------
r3276 | havoc | 2003-07-15 11:06:38 +0200 (Tue, 15 Jul 2003) | 2 lines

jpeg screenshot support in cl_avidemo recording

------------------------------------------------------------------------
r3275 | havoc | 2003-07-14 17:46:58 +0200 (Mon, 14 Jul 2003) | 6 lines

added r_lightning.c to move the lightning beam rendering code out of cl_main.c
shrunk entity_t struct a bit (by removing some stuff from persistent which had similar/identical values in render)
restructured/refactored some of entity relinking (now all relinking happens in cl_main.c where it belongs, moved viewmodel stuff out of view code)
restructured how viewmodels are handled
streamlined/cleanedup/refactored V_CalcRefdef (and merged in V_UpdateBlends and V_AddIdle and V_CalcBob)

------------------------------------------------------------------------
r3274 | havoc | 2003-07-14 17:38:23 +0200 (Mon, 14 Jul 2003) | 3 lines

now reports resamplesfx calls that don't involve resampling (of course only if developer is on)
now reports if memory allocation failed for a sound during loading

------------------------------------------------------------------------
r3272 | rain | 2003-07-14 10:23:51 +0200 (Mon, 14 Jul 2003) | 3 lines

Fix the event mask so that the gamma is reset when DP loses the focus or
the pointer leaves the window.

------------------------------------------------------------------------
r3271 | havoc | 2003-07-14 10:21:52 +0200 (Mon, 14 Jul 2003) | 2 lines

now defaults to 20% brightness conback because I got the first of many reports of 'broken console'

------------------------------------------------------------------------
r3270 | havoc | 2003-07-14 09:48:16 +0200 (Mon, 14 Jul 2003) | 4 lines

added scr_conbrightness cvar
added scr_conspeed, scr_conalpha, and scr_conbrightness cvars to options menu
moved definitions and externs of scr_conspeed, scr_conalpha, and scr_conbrightness cvars to cl_screen.c/screen.h

------------------------------------------------------------------------
r3269 | havoc | 2003-07-14 09:46:44 +0200 (Mon, 14 Jul 2003) | 2 lines

fix loading of skins that end in ".tga" or similar (now strips image extensions off the shader name before loading the textures)

------------------------------------------------------------------------
r3268 | havoc | 2003-07-13 19:54:42 +0200 (Sun, 13 Jul 2003) | 2 lines

added some (untested) terrain code for whomever cares

------------------------------------------------------------------------
r3267 | havoc | 2003-07-13 19:53:50 +0200 (Sun, 13 Jul 2003) | 3 lines

compare coop.value instead of coop.integer
(no difference in any mod I know of, but...)

------------------------------------------------------------------------
r3266 | havoc | 2003-07-13 19:49:10 +0200 (Sun, 13 Jul 2003) | 2 lines

added a very important part of GAME_GOODVSBAD2 support (it was not in the gamelist array and thus its levels were not listed)

------------------------------------------------------------------------
r3265 | havoc | 2003-07-13 12:22:32 +0200 (Sun, 13 Jul 2003) | 2 lines

GL_EXT_texture_filter_anisotropic support (thanks zinx!)

------------------------------------------------------------------------
r3263 | havoc | 2003-07-13 06:20:50 +0200 (Sun, 13 Jul 2003) | 2 lines

slight simplification of fog layer in alias skins

------------------------------------------------------------------------
r3262 | havoc | 2003-07-13 06:09:47 +0200 (Sun, 13 Jul 2003) | 2 lines

fixed a severe bug in texcoord2f[] reading in Mod_BuildTextureVectorsAndNormals

------------------------------------------------------------------------
r3261 | havoc | 2003-07-12 18:50:07 +0200 (Sat, 12 Jul 2003) | 2 lines

fix a bunch of things that should have been checking if the model (usually cl.worldmodel) was not NULL before calling its functions

------------------------------------------------------------------------
r3260 | havoc | 2003-07-12 18:49:09 +0200 (Sat, 12 Jul 2003) | 2 lines

now sends nops to server as unreliable, to avoid trashing the reliable packet system, this fixed connecting through NAT (!)

------------------------------------------------------------------------
r3258 | havoc | 2003-07-12 17:05:33 +0200 (Sat, 12 Jul 2003) | 2 lines

NetConn_Write should print packets even if LHNET_Write returns 0

------------------------------------------------------------------------
r3257 | havoc | 2003-07-12 16:59:53 +0200 (Sat, 12 Jul 2003) | 2 lines

added GL_HALFLIFE_MAP_CVAR extension to list (the cvar is ancient)

------------------------------------------------------------------------
r3256 | havoc | 2003-07-12 16:57:20 +0200 (Sat, 12 Jul 2003) | 2 lines

added .ent file loading to client

------------------------------------------------------------------------
r3243 | havoc | 2003-07-12 12:01:17 +0200 (Sat, 12 Jul 2003) | 2 lines

added DP_GFX_EXTERNALTEXTURES extension to list

------------------------------------------------------------------------
r3233 | havoc | 2003-07-12 05:09:32 +0200 (Sat, 12 Jul 2003) | 2 lines

got rid of frags per hour and time connected in scoreboard (both full size and mini) because both depended on scoreboard_t->entertime (which has been removed as it was not accurate)

------------------------------------------------------------------------
r3232 | havoc | 2003-07-12 05:07:49 +0200 (Sat, 12 Jul 2003) | 3 lines

all outputs of Mod_BuildTextureVectorsAndNormals are now optional
slightly optimized Mod_BuildTextureVectorsAndNormals

------------------------------------------------------------------------
r3228 | havoc | 2003-07-11 09:45:10 +0200 (Fri, 11 Jul 2003) | 2 lines

added cvars r_lerpsprites, r_lerpmodels, and r_waterscroll (and to menu as well)

------------------------------------------------------------------------
r3227 | havoc | 2003-07-11 09:44:17 +0200 (Fri, 11 Jul 2003) | 2 lines

added a note about another kind of terrain strip and documented code for generating the strips

------------------------------------------------------------------------
r3225 | havoc | 2003-07-10 06:33:57 +0200 (Thu, 10 Jul 2003) | 2 lines

err I guess BuildGammaTable8 was used!

------------------------------------------------------------------------
r3224 | havoc | 2003-07-10 06:30:53 +0200 (Thu, 10 Jul 2003) | 2 lines

#if 0'd out a few unused functions

------------------------------------------------------------------------
r3223 | havoc | 2003-07-10 06:21:51 +0200 (Thu, 10 Jul 2003) | 4 lines

server no longer responds to any netquake control packets (must use netchan-style commands to connect)
connection process now uses getchallenge-connect approach to prevent join floods (who knows maybe I fixed NAT by doing this too, somehow)
improved some of the command packet handling

------------------------------------------------------------------------
r3222 | havoc | 2003-07-10 06:19:22 +0200 (Thu, 10 Jul 2003) | 2 lines

added decals to effects options menu

------------------------------------------------------------------------
r3221 | havoc | 2003-07-10 06:15:39 +0200 (Thu, 10 Jul 2003) | 3 lines

added a tip to runaway loop error (suggesting use of the profile command)
made all possible exit paths of the execution update profile counts properly before exiting

------------------------------------------------------------------------
r3220 | havoc | 2003-07-10 06:12:34 +0200 (Thu, 10 Jul 2003) | 2 lines

added 'readable' version of a particular line of code in shadow volume building

------------------------------------------------------------------------
r3191 | havoc | 2003-07-08 12:06:53 +0200 (Tue, 08 Jul 2003) | 2 lines

check svc_setview against MAX_EDICTS

------------------------------------------------------------------------
r3190 | havoc | 2003-07-08 12:04:59 +0200 (Tue, 08 Jul 2003) | 2 lines

fixed a buffer overflow in SV_BroadcastPrintf

------------------------------------------------------------------------
r3189 | havoc | 2003-07-08 12:03:46 +0200 (Tue, 08 Jul 2003) | 2 lines

more of the fixes to clients joining and properly setting up edicts (forgot to commit this with sv_main.c and pr_edict.c)

------------------------------------------------------------------------
r3188 | havoc | 2003-07-08 12:00:47 +0200 (Tue, 08 Jul 2003) | 6 lines

fixed a lot of problems with filling out client edicts properly (or rather, not filling them out properly) which mostly appeared when doing changelevel or restart
fixed nameless player joins/exits (finally!)
code cleanups
other little things stomped
took another stab at fixing bogus entities being linked into areagrid (presumably caused by SV_IncreaseEdicts), hopefully fixing it this time (as if that wasn't the hope with all the previous attempts)

------------------------------------------------------------------------
r3186 | havoc | 2003-07-08 11:54:27 +0200 (Tue, 08 Jul 2003) | 2 lines

some enhancements to timeout handling inspired by ProQuake fixes - net_connecttimeout cvar (a short timeout until first packet in connection), net_messagerejointimeout cvar (only kicks off old client matching peeraddress if the client has reached this message timeout)

------------------------------------------------------------------------
r3185 | havoc | 2003-07-08 11:51:12 +0200 (Tue, 08 Jul 2003) | 2 lines

redesigned much of PF_VarString to clean it up (shorter, faster, etc)

------------------------------------------------------------------------
r3184 | havoc | 2003-07-08 11:50:21 +0200 (Tue, 08 Jul 2003) | 3 lines

fixed model shadows going through walls (by making everything use a constant project distance - clearly there are other solutions to the problem of a model using too low a project distance, but this works...)
some code shuffling (mostly to match up with a previous version I was comparing against)

------------------------------------------------------------------------
r3170 | havoc | 2003-07-06 09:50:07 +0200 (Sun, 06 Jul 2003) | 2 lines

renamed GAME_GOODVSBAD2 executable to gvb2

------------------------------------------------------------------------
r3169 | havoc | 2003-07-06 09:49:39 +0200 (Sun, 06 Jul 2003) | 2 lines

reverted RunParticleEffect appearance in non-GOODVSBAD2 mode because they were far too different looking

------------------------------------------------------------------------
r3168 | havoc | 2003-07-06 09:48:57 +0200 (Sun, 06 Jul 2003) | 2 lines

allow traceline to take unusual values for nomonsters parameter again (like original quake traceline)

------------------------------------------------------------------------
r3163 | havoc | 2003-07-04 03:36:14 +0200 (Fri, 04 Jul 2003) | 2 lines

because gethostbyname("0.0.0.0") fails in windows, the fallback was being called and it was broken, replaced it with a working one based on sscanf

------------------------------------------------------------------------
r3162 | havoc | 2003-07-04 01:56:12 +0200 (Fri, 04 Jul 2003) | 2 lines

fix htons warnings in MSVC (thanks to Tomaz for reporting this, apparently MSVC warns about passing int to functions taking unsigned short)

------------------------------------------------------------------------
r3161 | havoc | 2003-07-04 01:40:07 +0200 (Fri, 04 Jul 2003) | 2 lines

fixed numerous bugs with explosion hull shape (now looks consistently correct for the first time ever)

------------------------------------------------------------------------
r3160 | havoc | 2003-07-03 23:23:09 +0200 (Thu, 03 Jul 2003) | 2 lines

Tomaz updated the darkplaces project file (thanks!)

------------------------------------------------------------------------
r3149 | havoc | 2003-07-03 09:01:34 +0200 (Thu, 03 Jul 2003) | 2 lines

ambients should be forced to loop as well

------------------------------------------------------------------------
r3148 | havoc | 2003-07-03 08:59:54 +0200 (Thu, 03 Jul 2003) | 3 lines

sounds now follow their owner (so riding a lift doesn't leave the sound at the start position, for example)
static sounds now automatically loop even if they have no cue list

------------------------------------------------------------------------
r3147 | havoc | 2003-07-03 02:45:48 +0200 (Thu, 03 Jul 2003) | 2 lines

got rid of sv_predict because it caused too many problems with mods trying to have multiple entities attached to eachother

------------------------------------------------------------------------
r3137 | havoc | 2003-07-02 07:58:28 +0200 (Wed, 02 Jul 2003) | 3 lines

added snd_staticvolume to snd_null.c
fixed prototype of SND_Spatialize in sound.h

------------------------------------------------------------------------
r3136 | havoc | 2003-07-02 07:48:36 +0200 (Wed, 02 Jul 2003) | 4 lines

added support for GAME_GOODVSBAD2
moved Hostname option from Player Setup to server setup menu, and renamed it "Server name"
added snd_staticvolume cvar to control volume of static sounds

------------------------------------------------------------------------
r3135 | havoc | 2003-07-02 07:44:34 +0200 (Wed, 02 Jul 2003) | 2 lines

added GAME_GOODVSBAD2 and GAME_TEU

------------------------------------------------------------------------
r3134 | havoc | 2003-07-02 05:50:33 +0200 (Wed, 02 Jul 2003) | 3 lines

redesigned menuplyr handling again - now allocates memory for it instead of using a static buffer
merged together some menuplyr code

------------------------------------------------------------------------
r3133 | havoc | 2003-07-02 04:26:26 +0200 (Wed, 02 Jul 2003) | 2 lines

changed brush model API - now uses function pointers for some of the brush model functions (intent to transition over to this completely)

------------------------------------------------------------------------
r3119 | havoc | 2003-07-01 20:43:42 +0200 (Tue, 01 Jul 2003) | 9 lines

redesigned how the renderer handles much of it's state (R_Mesh_State turned into R_Mesh_State_Textures - no longer handles blendfunc and depthmask and depthtest and vertex pointers and so on)
batching is gone
VAR support is gone (but may make a return someday)
dynamic shadow volumes are now more optimized (removal of unused verts)
added a glossary of terminology to the start of r_shadow.c
added gl_mesh_testarrayelement and gl_mesh_testmanualfeeding cvars for testing/debugging purposes in the backend (incase vertex array state is a mess)
added gl_paranoid cvar (enables CHECKGLERROR and verifies geometry before rendering it)
added gl_printcheckerror cvar (prints location of every CHECKGLERROR statement as it executes, for tracking code flow)

------------------------------------------------------------------------
r3118 | havoc | 2003-07-01 20:32:11 +0200 (Tue, 01 Jul 2003) | 2 lines

extremely minor optimization to linking edicts into area grid

------------------------------------------------------------------------
r3111 | havoc | 2003-07-01 04:59:36 +0200 (Tue, 01 Jul 2003) | 2 lines

Disable singleplayer menu in Nexuiz (just like Transfusion does)

------------------------------------------------------------------------
r3107 | havoc | 2003-06-29 01:09:08 +0200 (Sun, 29 Jun 2003) | 4 lines

reverted SV_Physics_Step to exactly match quake (shorter though)
removed a clear velocity statement in SV_Physics_Toss
some whitespace cleanup

------------------------------------------------------------------------
r3106 | havoc | 2003-06-27 22:25:54 +0200 (Fri, 27 Jun 2003) | 2 lines

fix timedemos (it was not starting the timer because it was misjudging what the next frame number is)

------------------------------------------------------------------------
r3104 | havoc | 2003-06-26 18:51:35 +0200 (Thu, 26 Jun 2003) | 2 lines

a prototype for the long dead function S_Alloc removed (thanks to Vic for mentioning this)

------------------------------------------------------------------------
r3103 | havoc | 2003-06-26 18:21:20 +0200 (Thu, 26 Jun 2003) | 2 lines

fix a bug in non-monster interpolation code (it was checking RENDER_STEP and doing a really bad job of it too, thanks to Vic for reporting this bug)

------------------------------------------------------------------------
r3102 | havoc | 2003-06-24 17:10:58 +0200 (Tue, 24 Jun 2003) | 2 lines

ReceivedMessage now sets lastMessageTime when a valid message or ack is received, this fixes the timeout problems (yes, all of them)

------------------------------------------------------------------------
r3095 | havoc | 2003-06-22 12:31:36 +0200 (Sun, 22 Jun 2003) | 2 lines

initialize the various server properties when parsing an infoResponse incase some are not set

------------------------------------------------------------------------
r3094 | havoc | 2003-06-22 12:07:16 +0200 (Sun, 22 Jun 2003) | 2 lines

Forgot to include lhnet in the previous commit and tried to abort the commit but apparently it was nearly done (which messed up netconn.[ch] such that I could not add or delete netconn.[ch], so I deleted that from cvs and added it again)

------------------------------------------------------------------------
r3093 | havoc | 2003-06-22 11:58:55 +0200 (Sun, 22 Jun 2003) | 3 lines

This is the network rewrite I've been working on for over a week; multiplayer should work through NAT routers now.
A few other commits (a new clientcolors extension for example) have snuck their way into this commit because they were waiting while the cvs was down.

------------------------------------------------------------------------
r3092 | havoc | 2003-06-22 11:55:02 +0200 (Sun, 22 Jun 2003) | 2 lines

report invalid edicts when attempting to link them

------------------------------------------------------------------------
r3090 | havoc | 2003-06-21 13:05:32 +0200 (Sat, 21 Jun 2003) | 2 lines

added developer_memorydebug cvar (does CheckSentinelsGlobal on all Mem_Alloc calls)

------------------------------------------------------------------------
r3080 | havoc | 2003-06-09 06:19:09 +0200 (Mon, 09 Jun 2003) | 2 lines

Sbar_UpdateScoreboard was totally unused in quake, it's history (as are the arrays it used)

------------------------------------------------------------------------
r3073 | havoc | 2003-06-08 07:47:20 +0200 (Sun, 08 Jun 2003) | 2 lines

fix a couple EDICT_NUM errors that often happened when loading savegames with more than 256 entities

------------------------------------------------------------------------
r3072 | havoc | 2003-06-08 07:43:44 +0200 (Sun, 08 Jun 2003) | 2 lines

cleaned up Host_Error a bit

------------------------------------------------------------------------
r3071 | havoc | 2003-06-08 07:42:58 +0200 (Sun, 08 Jun 2003) | 2 lines

fix SOLID_BSP with non-BSP model error that can occur after a Host_Error (fixed by using Mod_CheckLoaded)

------------------------------------------------------------------------
r3070 | havoc | 2003-06-07 21:21:07 +0200 (Sat, 07 Jun 2003) | 2 lines

KRIMZON_SV_PARSECLIENTCOMMAND extension (untested currently!)

------------------------------------------------------------------------
r3069 | havoc | 2003-06-07 21:20:06 +0200 (Sat, 07 Jun 2003) | 2 lines

no longer uses -Werror on exe builds

------------------------------------------------------------------------
r3068 | havoc | 2003-06-07 21:19:16 +0200 (Sat, 07 Jun 2003) | 2 lines

fix an uninitialized variable warning in win32

------------------------------------------------------------------------
r3067 | havoc | 2003-06-04 21:26:35 +0200 (Wed, 04 Jun 2003) | 2 lines

fixed forged packet identification to only care about address (not port) and do so in a cleaner way than before

------------------------------------------------------------------------
r3066 | havoc | 2003-06-04 21:24:41 +0200 (Wed, 04 Jun 2003) | 2 lines

added support for gl_mesh_copyarrays 0 mode in most shaders

------------------------------------------------------------------------
r3065 | havoc | 2003-06-04 21:22:31 +0200 (Wed, 04 Jun 2003) | 2 lines

fixed a bunch of signed/unsigned mismatch warnings in newer gcc versions (mostly related to size_t being unsigned)

------------------------------------------------------------------------
r3063 | havoc | 2003-06-03 07:18:04 +0200 (Tue, 03 Jun 2003) | 2 lines

fixed bug that used bmodel collision geometry on non-SOLID_BSP entities (thanks to FrikaC for reporting this bug)

------------------------------------------------------------------------
r3059 | havoc | 2003-05-28 15:57:47 +0200 (Wed, 28 May 2003) | 2 lines

got rid of my attempts to delay sending the ServerInfo packet until the first message from the client, because the ServerInfo packet is already handled by the quake reliable message system and thus will be re-sent multiple times...  back to the drawing board on my attempts to fix quake through NAT routers

------------------------------------------------------------------------
r3057 | havoc | 2003-05-28 04:00:46 +0200 (Wed, 28 May 2003) | 2 lines

apparently -Werr isn't valid in gcc3.2, so switch to -Werror

------------------------------------------------------------------------
r3051 | havoc | 2003-05-26 20:58:16 +0200 (Mon, 26 May 2003) | 2 lines

2D art can now be drawn using vertex pointers

------------------------------------------------------------------------
r3050 | havoc | 2003-05-26 20:57:25 +0200 (Mon, 26 May 2003) | 2 lines

added back -Werr so warnings are errors

------------------------------------------------------------------------
r3049 | havoc | 2003-05-26 20:52:04 +0200 (Mon, 26 May 2003) | 2 lines

fix some warnings I kept forgetting

------------------------------------------------------------------------
r3048 | havoc | 2003-05-26 20:20:52 +0200 (Mon, 26 May 2003) | 3 lines

removed directional shading on explosions because it was a nuisance to maintain (and strangely they seem to look better now)
explosion rendering now supports gl_mesh_copyarrays 0

------------------------------------------------------------------------
r3047 | havoc | 2003-05-26 20:18:59 +0200 (Mon, 26 May 2003) | 2 lines

fix a warning caused by the fact vertex pointers are now const

------------------------------------------------------------------------
r3046 | havoc | 2003-05-26 20:17:48 +0200 (Mon, 26 May 2003) | 2 lines

vertex pointers are now const

------------------------------------------------------------------------
r3045 | havoc | 2003-05-26 18:35:14 +0200 (Mon, 26 May 2003) | 4 lines

added R_ScrollTexCoord2f (copies while texture coordinates with an offset)
added multitexture path to skysphere rendering (10% speed gain) and modified combine setup in gl_backend to support GL_INTERPOLATE_ARB behaving like GL_DECAL
added support for gl_mesh_copyarrays 0 mode in skysphere rendering (1% speed gain)

------------------------------------------------------------------------
r3044 | havoc | 2003-05-26 15:25:59 +0200 (Mon, 26 May 2003) | 3 lines

fixed realtime lighting bugs with gl_mesh_batching 1 (... by not using batching while rendering realtime lighting - I was unable to figure out what was causing the problem)
some cleanups to realtime lighting code (mostly fixing some bugs with incorrect counting of meshes/triangles (for r_speeds reports), and optimized out unnecessary vertex copying in the final lighting application pass)

------------------------------------------------------------------------
r3043 | havoc | 2003-05-26 15:23:27 +0200 (Mon, 26 May 2003) | 2 lines

no longer uses R_Shadow_VertexBuffer, instead uses aliasvert_vertex3f

------------------------------------------------------------------------
r3040 | havoc | 2003-05-26 03:01:36 +0200 (Mon, 26 May 2003) | 3 lines

fixed connection process again
added developer prints for changes to sendserverinfo

------------------------------------------------------------------------
r3039 | havoc | 2003-05-26 00:47:36 +0200 (Mon, 26 May 2003) | 2 lines

fix an unused variable warning

------------------------------------------------------------------------
r3038 | havoc | 2003-05-26 00:46:31 +0200 (Mon, 26 May 2003) | 6 lines

some cleanups to hostcache (got rid of driver/address stuff and expanded the strings, also increased number of cache slots)
connecting to a server is now much more direct (does not use hostcache)
now ignores the address string received in server info packets because it's often bogus in dp (sorry...  but not really avoidable)
slist reports now include the address of the server (useful!!) and are much wider (79 characters) to give more room for info
the NOROUTINGFIX option has been kind of merged away, whether the server uses it or not is still optional (search for routing fix)

------------------------------------------------------------------------
r3037 | havoc | 2003-05-26 00:38:29 +0200 (Mon, 26 May 2003) | 2 lines

no longer needed (makefile does it all now)

------------------------------------------------------------------------
r3036 | havoc | 2003-05-26 00:37:49 +0200 (Mon, 26 May 2003) | 2 lines

merged makefile, makefile.mingw (outdated) and makefile.mingwcross into one makefile

------------------------------------------------------------------------
r3035 | havoc | 2003-05-26 00:35:07 +0200 (Mon, 26 May 2003) | 2 lines

removed rick.cube-sol.net from master server list because it's not resolving and was really delaying server lists

------------------------------------------------------------------------
r3034 | havoc | 2003-05-26 00:33:03 +0200 (Mon, 26 May 2003) | 2 lines

merged dll handling code into sys_shared.c because the code in sys_linux.c was for both windows and linux, no real point in separating them

------------------------------------------------------------------------
r3033 | havoc | 2003-05-25 18:26:02 +0200 (Sun, 25 May 2003) | 2 lines

fix darkplaces-dedicated.exe building to open a console

------------------------------------------------------------------------
r3032 | havoc | 2003-05-25 18:17:37 +0200 (Sun, 25 May 2003) | 2 lines

Sys_Print added to handle the output of text to the terminal (since this varies from platform to platform and may depend on whether it is dedicated)

------------------------------------------------------------------------
r3031 | havoc | 2003-05-25 17:48:00 +0200 (Sun, 25 May 2003) | 5 lines

darkplaces-dedicated.exe now builds
sys_linux.c (needs new name badly!) modified to support windows for purposes of darkplaces-dedicated.exe
Sys_Printf probably no longer works properly with darkplaces.exe (but we'll see)
darkplaces.exe should now be a proper windows app again (how I got --mwindows in there I don't know), so -dedicated may work

------------------------------------------------------------------------
r3030 | havoc | 2003-05-25 13:59:58 +0200 (Sun, 25 May 2003) | 2 lines

alias model fake shadows can now be cached

------------------------------------------------------------------------
r3029 | havoc | 2003-05-25 13:44:31 +0200 (Sun, 25 May 2003) | 3 lines

fixed a severe bug with pointer_color state tracking (no longer checks .colorarray, so you don't have to do the GL_Color/GL_UseColorArray call before R_Mesh_State anymore), this fixes explosion coloring when using pointer_color for other stuff rendered immediately before it
fixed a crash when entire sequentialchain is emptied while trying to get space for a new cache item (this happened!  I can't guess why though)

------------------------------------------------------------------------
r3028 | havoc | 2003-05-25 13:40:34 +0200 (Sun, 25 May 2003) | 2 lines

simplified explosion rendering a little (probably a very minor slowdown, but more maintainable)

------------------------------------------------------------------------
r3027 | havoc | 2003-05-24 16:53:30 +0200 (Sat, 24 May 2003) | 2 lines

alias model (q1/q2/q3) rendering now supports gl_mesh_copyarrays 0 (even caches lighting!) for a speed boost (enough to compensate for the current loss on world rendering), note that only normal rendering uses this so far (more rendering functions to upgrade)

------------------------------------------------------------------------
r3026 | havoc | 2003-05-24 16:48:33 +0200 (Sat, 24 May 2003) | 2 lines

made id_pointer fields of rcachearrayrequest_t const (because they'll never be used as pointers anyway)

------------------------------------------------------------------------
r3025 | havoc | 2003-05-24 16:47:32 +0200 (Sat, 24 May 2003) | 3 lines

disabled various testing code in R_Mesh_CacheArray
fixed a bug with pointer_color if gl_mesh_floatcolors is false (it was incorrectly comparing p to varray_buf_color4f, it should have compared it to NULL)

------------------------------------------------------------------------
r3023 | havoc | 2003-05-24 09:18:47 +0200 (Sat, 24 May 2003) | 2 lines

possible stability improvement in VID_Shutdown - moved ChangeDisplaySettings call after DestroyWindow

------------------------------------------------------------------------
r3021 | havoc | 2003-05-23 20:38:34 +0200 (Fri, 23 May 2003) | 4 lines

aliasvertex_t no longer exists, models are now stored as arrays of vertex3f, svector3f, tvector3f, normal3f
cleaned up loaders somewhat (they're still nasty as always)
now validates elements in mdl model files

------------------------------------------------------------------------
r3020 | havoc | 2003-05-23 20:36:28 +0200 (Fri, 23 May 2003) | 2 lines

added R_Mesh_CacheArray (not yet used by anything, but has been tested with some code in gl_rsurf.c), a generic dynamic data caching system intended for vertex arrays

------------------------------------------------------------------------
r3019 | havoc | 2003-05-23 09:43:26 +0200 (Fri, 23 May 2003) | 6 lines

added gl_mesh_batching (default on) which merges several meshes in a row to reduce overhead of array locking and drawing
added MESH_VAR and MESH_BATCH defines to allow relevant code to be disabled (MESH_VAR is currently disabled because it's somewhat broken last I checked)
added custom array pointer support in R_Mesh_State (MainState and TextureState), this is experimental but works fine
added gl_mesh_copyarrays (default off) which tells renderer code that it should use custom array pointer support instead of copying (currently testable on surface rendering - not a good use, too many Pointer calls for very little geometry)
some other cleanups

------------------------------------------------------------------------
r3018 | havoc | 2003-05-23 09:38:25 +0200 (Fri, 23 May 2003) | 2 lines

console logging (-condebug) now starts earlier in the startup process (just after the filesystem)

------------------------------------------------------------------------
r3017 | havoc | 2003-05-23 08:58:34 +0200 (Fri, 23 May 2003) | 2 lines

more preparation for quake2 bsp support

------------------------------------------------------------------------
r3016 | havoc | 2003-05-23 08:30:36 +0200 (Fri, 23 May 2003) | 2 lines

merged SV_Physics_Client into SV_Physics (not difficult)

------------------------------------------------------------------------
r3015 | havoc | 2003-05-23 08:28:05 +0200 (Fri, 23 May 2003) | 2 lines

cleaned up/simplified Sys_Error, now should never get in a recursive crash loop, but also lost the timeout on dedicated server errors as a result (if engine crashes, the server will leave up a dialog eternally until someone closes it)

------------------------------------------------------------------------
r3009 | havoc | 2003-05-21 14:15:06 +0200 (Wed, 21 May 2003) | 2 lines

renamed "precache" cvar to "snd_precache" because it's name was very confusing

------------------------------------------------------------------------
r3008 | havoc | 2003-05-21 13:24:20 +0200 (Wed, 21 May 2003) | 4 lines

added support for q2 .wal images (not yet tested but suspected as working)
cleaned up multiple format loader hub, now parses a list of formats things to try
cleaned up invalid image size detection (now all format loaders check for >4096 and <=0 in each axis)

------------------------------------------------------------------------
r3007 | havoc | 2003-05-21 11:08:15 +0200 (Wed, 21 May 2003) | 2 lines

beginning to add Q2 bsp support (Q3 bsp support coming later)

------------------------------------------------------------------------
r3006 | havoc | 2003-05-21 11:05:15 +0200 (Wed, 21 May 2003) | 2 lines

added a note about an id bug with triggers and ignoring .owner (the fact they don't)

------------------------------------------------------------------------
r3005 | molivier | 2003-05-19 09:11:22 +0200 (Mon, 19 May 2003) | 2 lines

Fix Transfusion bug 030429-01 (If you go to the console from the options menu, then exit the console, you can't get back to the menu)

------------------------------------------------------------------------
r3001 | havoc | 2003-05-17 12:29:35 +0200 (Sat, 17 May 2003) | 2 lines

fixed a bug with Host_Startdemos_f that caused it to never shorten the list of demos (it forgot to clear the remaining slots)

------------------------------------------------------------------------
r3000 | havoc | 2003-05-16 13:34:56 +0200 (Fri, 16 May 2003) | 2 lines

corrected call to Image_HasAlpha to be Image_CheckAlpha

------------------------------------------------------------------------
r2999 | havoc | 2003-05-16 13:10:32 +0200 (Fri, 16 May 2003) | 3 lines

replaced a loop that checked for alpha pixels with a call to Image_HasAlpha
fixed a memory leak on s->maskpixels (due to memory pools this leak was probably not too bad)

------------------------------------------------------------------------
r2998 | havoc | 2003-05-16 13:09:23 +0200 (Fri, 16 May 2003) | 2 lines

added DP_GFX_SKYBOX and DP_CL_LOADSKY extensions

------------------------------------------------------------------------
r2996 | havoc | 2003-04-29 18:04:40 +0200 (Tue, 29 Apr 2003) | 3 lines

new entity protocol has been canceled due to a fatal design flaw only detected today (insufficient data on history of entities)
added explanation of old entity protocol and how it will be revised to use partial entity updates (without breaking compatibility with old clients!)

------------------------------------------------------------------------
r2989 | havoc | 2003-04-26 12:21:02 +0200 (Sat, 26 Apr 2003) | 2 lines

reverted dynamic allocation of sv.edicts because there are FAR too many broken pointer cases, however shrinking the edict_t to just a couple pointers and dynamically allocating the data they point to, keeps memory usage way down

------------------------------------------------------------------------
r2988 | havoc | 2003-04-26 12:19:21 +0200 (Sat, 26 Apr 2003) | 2 lines

increased default gl_mesh_maxverts to 65536, and also increased the limit to that

------------------------------------------------------------------------
r2987 | havoc | 2003-04-26 12:03:42 +0200 (Sat, 26 Apr 2003) | 2 lines

cleaned up UDP_Init a bit

------------------------------------------------------------------------
r2985 | havoc | 2003-04-25 16:43:10 +0200 (Fri, 25 Apr 2003) | 4 lines

sv.edicts (and related things) are now dynamically reallocated as more edicts are used
no edict_t *'s exist in any persistent structures anymore, using edict numbers in all such cases (as it turns out the only such structs were client_t in server.h and link_t in progs.h)
edicts are unlinked before reallocation and relinked after reallocation to keep the link_t pointers valid

------------------------------------------------------------------------
r2984 | havoc | 2003-04-25 16:39:22 +0200 (Fri, 25 Apr 2003) | 2 lines

UDP_Init now tries to bind to INADDR_ANY and various others in sequence

------------------------------------------------------------------------
r2983 | havoc | 2003-04-25 14:44:22 +0200 (Fri, 25 Apr 2003) | 3 lines

pk3 is now case insensitive to match quake3 behavior (however pak is still case sensitive)
FS_FileExtension has been basically rewritten, it was taking the first . in the filename (which might even be part of a directory name)

------------------------------------------------------------------------
r2981 | havoc | 2003-04-23 13:48:05 +0200 (Wed, 23 Apr 2003) | 2 lines

increased runaway loop counter 10x (now 10 million opcodes before runaway error

------------------------------------------------------------------------
r2975 | havoc | 2003-04-21 13:27:09 +0200 (Mon, 21 Apr 2003) | 2 lines

always do r_shadow_realtime_dlight if r_shadow_realtime_world is on

------------------------------------------------------------------------
r2974 | havoc | 2003-04-21 13:26:22 +0200 (Mon, 21 Apr 2003) | 2 lines

nudge dlights out of walls if they're too close

------------------------------------------------------------------------
r2973 | havoc | 2003-04-21 12:05:18 +0200 (Mon, 21 Apr 2003) | 2 lines

added TEXF_CLAMP flag on model and sprite textures (software quake did not support out of bounds texcoords, so repeat is clearly unnecessary and even undesirable)

------------------------------------------------------------------------
r2970 | havoc | 2003-04-20 07:48:03 +0200 (Sun, 20 Apr 2003) | 2 lines

thanks to "backslash" for submitting a patch to support Intellimouse Explorer's two extra buttons (side buttons), I expanded the patch to support up to 10 mouse buttons (plus mwheelup/mwheeldown) in both GLX and WGL ports.

------------------------------------------------------------------------
r2969 | havoc | 2003-04-20 07:39:54 +0200 (Sun, 20 Apr 2003) | 2 lines

fix flipped sprites

------------------------------------------------------------------------
r2963 | havoc | 2003-04-18 14:11:30 +0200 (Fri, 18 Apr 2003) | 4 lines

reorganized aliaslayer_t handling to fix a few bugs
fixed md2 models
fixed skinless models

------------------------------------------------------------------------
r2962 | havoc | 2003-04-18 14:03:57 +0200 (Fri, 18 Apr 2003) | 2 lines

very minor correction to a comment

------------------------------------------------------------------------
r2961 | havoc | 2003-04-18 14:03:09 +0200 (Fri, 18 Apr 2003) | 2 lines

inlined the only call of R_ModelLightPoint (in R_LightModel)

------------------------------------------------------------------------
r2960 | havoc | 2003-04-18 14:01:12 +0200 (Fri, 18 Apr 2003) | 2 lines

greatly improved pointfile command, it now shows a huge beam crosshair at the site of the leak entity

------------------------------------------------------------------------
r2959 | havoc | 2003-04-18 13:59:16 +0200 (Fri, 18 Apr 2003) | 2 lines

parser can now handle recursive commands (although this still doesn't work with the whole Cmd_Argv/Cmd_Argc stuff)

------------------------------------------------------------------------
r2958 | havoc | 2003-04-18 13:58:05 +0200 (Fri, 18 Apr 2003) | 2 lines

Fixed bug in record command (it was running a map command before getting the demo name, which gets replaced by the map command parameter, causing the demo to always be named the same as the map)

------------------------------------------------------------------------
r2957 | havoc | 2003-04-18 13:53:26 +0200 (Fri, 18 Apr 2003) | 2 lines

fix model lighting (pitch was backwards)

------------------------------------------------------------------------
r2948 | havoc | 2003-04-15 00:23:12 +0200 (Tue, 15 Apr 2003) | 2 lines

added some extensions I forgot to put in the list before

------------------------------------------------------------------------
r2945 | havoc | 2003-04-14 14:18:45 +0200 (Mon, 14 Apr 2003) | 2 lines

removed special cases for transfusion in server search messages (now prints gamename)

------------------------------------------------------------------------
r2944 | havoc | 2003-04-14 05:04:10 +0200 (Mon, 14 Apr 2003) | 2 lines

expanded stats reporting (when in developer mode) of how many entities were processed during loading (now displays parsed/inhibited/spawned/died)

------------------------------------------------------------------------
r2943 | havoc | 2003-04-13 12:45:08 +0200 (Sun, 13 Apr 2003) | 2 lines

expanded UDP_Read and UDP_Write error messages to include the function parameters

------------------------------------------------------------------------
r2942 | havoc | 2003-04-10 06:03:59 +0200 (Thu, 10 Apr 2003) | 2 lines

Mod_FindNonSolidLocation fixed for no map case (again)

------------------------------------------------------------------------
r2935 | havoc | 2003-04-08 10:11:45 +0200 (Tue, 08 Apr 2003) | 2 lines

fix two more fs_gamedir mixups (loading saved games should now work, as well as video playback)

------------------------------------------------------------------------
r2934 | havoc | 2003-04-08 10:02:01 +0200 (Tue, 08 Apr 2003) | 2 lines

added DP_QUAKE3_MODEL extension (thanks to Elric for pointing out the need for this)

------------------------------------------------------------------------
r2929 | havoc | 2003-04-07 08:40:44 +0200 (Mon, 07 Apr 2003) | 2 lines

disable use of scissor when stencil is not available (sure seems like a driver bug, scissor should work)

------------------------------------------------------------------------
r2928 | havoc | 2003-04-07 07:31:37 +0200 (Mon, 07 Apr 2003) | 3 lines

some more minor cleanups
bug with dlights when not using stencil has not been found yet

------------------------------------------------------------------------
r2927 | havoc | 2003-04-07 03:45:34 +0200 (Mon, 07 Apr 2003) | 2 lines

fixed M_ScanSaves to use FS_Open properly

------------------------------------------------------------------------
r2926 | havoc | 2003-04-07 03:44:56 +0200 (Mon, 07 Apr 2003) | 2 lines

fixed name of dpavi.wav file to work correctly with FS_Open (this is in commented out code though so it doesn't matter)

------------------------------------------------------------------------
r2925 | havoc | 2003-04-07 03:43:11 +0200 (Mon, 07 Apr 2003) | 2 lines

forgot to make a couple changes before committing this

------------------------------------------------------------------------
r2924 | havoc | 2003-04-07 03:28:47 +0200 (Mon, 07 Apr 2003) | 3 lines

split r_shadow_realtime into r_shadow_realtime_world (which requires stencil) and r_shadow_realtime_dlight (which works without stencil)
one bug remains with scissoring dlights without stencil, I'll try to figure out this problem soon

------------------------------------------------------------------------
r2920 | havoc | 2003-04-06 21:24:33 +0200 (Sun, 06 Apr 2003) | 2 lines

redesigned surfmesh allocation in brush model loader, in preparation for some more drastic changes

------------------------------------------------------------------------
r2919 | havoc | 2003-04-06 21:23:34 +0200 (Sun, 06 Apr 2003) | 2 lines

release build optimizations changed - removed -funroll-loops, added -O9

------------------------------------------------------------------------
r2910 | havoc | 2003-04-06 02:23:21 +0200 (Sun, 06 Apr 2003) | 2 lines

revised EntityFrame4 function prototypes (no I still haven't coded this)

------------------------------------------------------------------------
r2909 | havoc | 2003-04-05 18:53:14 +0200 (Sat, 05 Apr 2003) | 2 lines

optimized shadow volume generation a bit (only projects vertices that are necessary)

------------------------------------------------------------------------
r2901 | havoc | 2003-04-03 22:56:05 +0200 (Thu, 03 Apr 2003) | 2 lines

preparation for a new protocol upgrade to use partial frame updates

------------------------------------------------------------------------
r2900 | havoc | 2003-04-03 22:55:08 +0200 (Thu, 03 Apr 2003) | 2 lines

got rid of use of eye in entity database

------------------------------------------------------------------------
r2899 | havoc | 2003-04-03 22:49:31 +0200 (Thu, 03 Apr 2003) | 2 lines

added MAX_NETRELIABLE define (currently same as MAX_DATAGRAM, but will change someday)

------------------------------------------------------------------------
r2897 | molivier | 2003-04-03 10:02:14 +0200 (Thu, 03 Apr 2003) | 2 lines

Added support for JPEG screenshots. You can toggle that with the cvar "scr_screenshot_jpeg" or the option menu. Note that you'll need the libjpeg library DLL.

------------------------------------------------------------------------
r2895 | havoc | 2003-04-03 02:11:08 +0200 (Thu, 03 Apr 2003) | 3 lines

fix for server dying when someone times out
some other cleanups (some Sys_Printf calls turned into Con_Printf, some comments added about DropClient calls)

------------------------------------------------------------------------
r2894 | havoc | 2003-04-02 20:51:59 +0200 (Wed, 02 Apr 2003) | 2 lines

fix for incorrect rounding of vertex locations when using RENDER_LOWPRECISION (now it always rounds to nearest)

------------------------------------------------------------------------
r2892 | havoc | 2003-04-02 02:22:15 +0200 (Wed, 02 Apr 2003) | 3 lines

cleaned up pr_builtins array (now uses NULL instead of PF_fixme) and now reports builtin number if an unknown builtin is called
fixed name of PF_setcolor (was setcolors)

------------------------------------------------------------------------
r2891 | havoc | 2003-04-02 02:20:10 +0200 (Wed, 02 Apr 2003) | 2 lines

fixed NET_SendToAll

------------------------------------------------------------------------
r2890 | havoc | 2003-03-31 23:46:06 +0200 (Mon, 31 Mar 2003) | 2 lines

added some commented out code to Image_HeightmapToNormalmap explaining how to do heightmap to normalmap conversion a little bit differently (very insignificant difference, purely code for those who care)

------------------------------------------------------------------------
r2889 | havoc | 2003-03-31 23:43:50 +0200 (Mon, 31 Mar 2003) | 2 lines

QSG_FILE removed because some mods use the old builtin numbers and think that QSG_FILE would provide them (FRIK_FILE remains, which uses the new numbers already)

------------------------------------------------------------------------
r2888 | havoc | 2003-03-30 21:19:06 +0200 (Sun, 30 Mar 2003) | 2 lines

dlights now cast shadows in realtime lighting mode again (actually they already did, but it wasn't working for world, because world didn't have the shadow flag set)

------------------------------------------------------------------------
r2887 | havoc | 2003-03-30 21:18:05 +0200 (Sun, 30 Mar 2003) | 2 lines

no longer complains about missing ambient liquid sounds in nexuiz

------------------------------------------------------------------------
r2886 | havoc | 2003-03-30 10:40:28 +0200 (Sun, 30 Mar 2003) | 2 lines

removed a couple unused hz_bitstream_read functions

------------------------------------------------------------------------
r2878 | havoc | 2003-03-29 21:02:11 +0100 (Sat, 29 Mar 2003) | 2 lines

fix zym model rendering (wrong vertex padding)

------------------------------------------------------------------------
r2877 | havoc | 2003-03-29 19:58:11 +0100 (Sat, 29 Mar 2003) | 2 lines

Elric added deflated file support for pk3 archives (in other words: compressed pk3 now work), even with FS_Seek support, I'm amazed, thanks Elric! :)

------------------------------------------------------------------------
r2875 | havoc | 2003-03-28 17:45:23 +0100 (Fri, 28 Mar 2003) | 2 lines

corrected the misspelled name GAME_NEXIUZ (and related things) to GAME_NEXUIZ (and related things)

------------------------------------------------------------------------
r2873 | havoc | 2003-03-28 16:47:33 +0100 (Fri, 28 Mar 2003) | 3 lines

UDP_StringToAddr did not work with less than full x.x.x.x:x specifications, now it supports all the stuff PartialIPAddress supported (filling in most significant components with myAddr, etc)
UDP_Read and UDP_Write now log entire packets to console if developer_networking is on

------------------------------------------------------------------------
r2872 | havoc | 2003-03-28 16:45:20 +0100 (Fri, 28 Mar 2003) | 2 lines

add support for NAT fix in the client (by no longer checking the port a connection accepted came from)

------------------------------------------------------------------------
r2871 | havoc | 2003-03-28 16:43:52 +0100 (Fri, 28 Mar 2003) | 2 lines

added developer_networking cvar

------------------------------------------------------------------------
r2870 | havoc | 2003-03-28 14:27:15 +0100 (Fri, 28 Mar 2003) | 2 lines

Thanks to faded (of the tenebrae team) for provoking me to recite a lengthy explanation of NAT nightmares, and realize this very simple fix for NQ server support of clients behind NAT routers (send first message from the player socket instead of the accept socket)

------------------------------------------------------------------------
r2869 | havoc | 2003-03-28 14:24:11 +0100 (Fri, 28 Mar 2003) | 2 lines

changed behavior of SV_DropClient a bit (now calls ClientDisconnect QC function even if crash is true, as it's the client being harshly dropped, not the server dying), and made the final svc_disconnect an unreliable message

------------------------------------------------------------------------
r2868 | havoc | 2003-03-28 14:22:06 +0100 (Fri, 28 Mar 2003) | 2 lines

refactored NET_SendToAll, it is debatable whether it is more readable or not, but it works the same, and is shorter, and I think it is slightly more understandable than the mess it used to be

------------------------------------------------------------------------
r2867 | havoc | 2003-03-28 11:31:28 +0100 (Fri, 28 Mar 2003) | 2 lines

net_inetslist (and the corresponding menu as well) now work without being an active server (dfunc.controlSock is now used for all transactions involved, and since there is always one of those...)

------------------------------------------------------------------------
r2866 | havoc | 2003-03-28 11:29:42 +0100 (Fri, 28 Mar 2003) | 6 lines

MSG_ReadFloat now checks if the message has enough bytes for a float before trying to decode it (why id forgot this I don't know)
added MSG_ReadBigShort, MSG_ReadBigLong, MSG_ReadBigFloat, MSG_ReadBytes
renamed MSG_ReadShort to MSG_ReadLittleShort, MSG_ReadLong to MSG_ReadLittleLong, and MSG_ReadFloat to MSG_ReadLittleFloat
added #defines for MSG_ReadShort, MSG_ReadLong, and MSG_ReadFloat to use their Little versions
optimized/cleaned up MSG_Read functions (some are now significantly shorter)

------------------------------------------------------------------------
r2865 | havoc | 2003-03-28 09:37:13 +0100 (Fri, 28 Mar 2003) | 5 lines

net_wins.c is gone, winsock support merged into net_udp.c
numerous other cleanups/changes also done to net_udp.c (to try to simplify it, hopefully work better, that kind of stuff)
support for partial IP addresses has been removed (that is you say you can't simply type 'connect 1.123' and have it expand to xxx.xxx.1.123 where xxx.xxx came from your own IP address, however hostnames still work fine)
also the automatic changing of the hostname cvar according to internet hostname has been removed, so servers will be called "UNNAMED" if they don't set it, rather than using their internet hostname

------------------------------------------------------------------------
r2864 | havoc | 2003-03-28 04:33:18 +0100 (Fri, 28 Mar 2003) | 2 lines

renamed all net_wins.c functions to UDP instead of WINS, this allows use of net_bsd.c and net_udp.h instead of net_win.c and net_wins.h

------------------------------------------------------------------------
r2863 | havoc | 2003-03-28 04:23:13 +0100 (Fri, 28 Mar 2003) | 2 lines

removed winsock_initialized counter as there are no longer two things initializing winsock (wins and wipx), only one

------------------------------------------------------------------------
r2862 | havoc | 2003-03-28 04:21:12 +0100 (Fri, 28 Mar 2003) | 2 lines

no longer dynamically loads portions of wsock32.dll (because it required static linking anyway for other parts, no point)

------------------------------------------------------------------------
r2861 | havoc | 2003-03-28 04:18:57 +0100 (Fri, 28 Mar 2003) | 2 lines

forgot to remove #include "net_wipx.h"

------------------------------------------------------------------------
r2860 | havoc | 2003-03-28 04:04:44 +0100 (Fri, 28 Mar 2003) | 2 lines

removed winsock ipx support

------------------------------------------------------------------------
r2858 | havoc | 2003-03-27 13:25:32 +0100 (Thu, 27 Mar 2003) | 2 lines

Fix for win32 dedicated servers (oh it still doesn't compile, other problems remain with sys_win.c, but this one thing has been annoying me long enough)

------------------------------------------------------------------------
r2857 | havoc | 2003-03-27 09:58:58 +0100 (Thu, 27 Mar 2003) | 2 lines

Elric's pk3 support (no support for compressed files yet, that's still to come)

------------------------------------------------------------------------
r2856 | havoc | 2003-03-27 09:58:07 +0100 (Thu, 27 Mar 2003) | 2 lines

Elric added BuffBigLong, BuffBigShort, BuffLittleLong, and BuffLittleShort functions intended for reading from misaligned locations in file memory buffers (these read as bytes rather than entire numbers, so memory misalignments are not a problem on Sparc and certain other CPUs)

------------------------------------------------------------------------
r2855 | havoc | 2003-03-27 09:04:27 +0100 (Thu, 27 Mar 2003) | 2 lines

added FRIK_FILE (aka QSG_FILE) extension, this brings string handling and text file access to the QuakeC support (note: files go in gamedir/data/)

------------------------------------------------------------------------
r2854 | havoc | 2003-03-27 09:02:43 +0100 (Thu, 27 Mar 2003) | 2 lines

added Math_atov function (ascii to vector), tries to parse any imaginable vector (even badly formatted ones with varying numbers of spaces)

------------------------------------------------------------------------
r2853 | havoc | 2003-03-27 09:01:33 +0100 (Thu, 27 Mar 2003) | 2 lines

create directories when opening any file for writing, because it's a real pain having to do it elsewhere

------------------------------------------------------------------------
r2848 | havoc | 2003-03-22 11:23:38 +0100 (Sat, 22 Mar 2003) | 2 lines

got rid of R_NewMap, directly calls R_Modules_NewMap instead

------------------------------------------------------------------------
r2847 | havoc | 2003-03-22 11:22:53 +0100 (Sat, 22 Mar 2003) | 2 lines

fix decals bug introduced by transition to matrix use

------------------------------------------------------------------------
r2846 | havoc | 2003-03-21 22:54:43 +0100 (Fri, 21 Mar 2003) | 2 lines

added more SV_CheckVelocity calls on players for safety sake

------------------------------------------------------------------------
r2845 | havoc | 2003-03-21 22:52:04 +0100 (Fri, 21 Mar 2003) | 2 lines

Thanks to IceDagger for pointing out this important optimization to multipass specular rendering - removes one pass (dropping from 6 to 5 passes on GF2, 5 to 4 passes on GF3/Radeon) by squaring specular even on the first pass

------------------------------------------------------------------------
r2844 | havoc | 2003-03-21 22:47:57 +0100 (Fri, 21 Mar 2003) | 2 lines

This is a patch from Elric greatly cleaning up the filesystem portions of the engine, and partially prepares the engine for .pk3 support (yay), this also removes support for gzipped files (but that had been disabled for months anyway)

------------------------------------------------------------------------
r2842 | havoc | 2003-03-15 05:54:47 +0100 (Sat, 15 Mar 2003) | 5 lines

varray_* rewritten to remove padding (varray_vertex3f, varray_texcoord2f, varray_texcoord3f, varray_color4f now exist), this required changes to a huge amount of code (but netted a 30% speed gain typically)
fixed some various bugs
added voodoo1/2 support in realtime lighting engine (well, except for the fact it still requires stencil, which voodoo1/2 don't have, this will be addressed later when world lights and dlights are independently controlled)
changed lightning beams a bit (they're now white) and due to a request I added support for r_lightningbeam_qmbtexture (loads textures/particles/lightning.pcx and knows approximately how to use it, I recommend changing r_lightningbeam_repeatdistance to make it look right)

------------------------------------------------------------------------
r2841 | havoc | 2003-03-15 05:53:24 +0100 (Sat, 15 Mar 2003) | 3 lines

added loading of .ent files if found (overriding entities in bsp)
added sv_entpatch cvar (to allow disabling the feature)

------------------------------------------------------------------------
r2840 | molivier | 2003-03-13 17:10:51 +0100 (Thu, 13 Mar 2003) | 2 lines

Makefiles cleanups: r_explosion.o was declared twice in all Makefiles; removed some commented-out commands; diff reduction between makefile and makefile.mingwcross; forgot to call builddate previously; strip was even called on non-release binaries.

------------------------------------------------------------------------
r2839 | havoc | 2003-03-12 16:38:46 +0100 (Wed, 12 Mar 2003) | 2 lines

fix for 16bit textures looking awful (bug in the alpha check for 8bit)

------------------------------------------------------------------------
r2821 | molivier | 2003-03-10 08:05:45 +0100 (Mon, 10 Mar 2003) | 2 lines

Fixed a MSVC6 warning in matrixlib. Added a "Public server" yes/no line in the server creation menu. Removed a duplicated cvar declaration in "net.h".

------------------------------------------------------------------------
r2820 | havoc | 2003-03-09 21:33:23 +0100 (Sun, 09 Mar 2003) | 2 lines

Vic informed me of the AGP settings (0-0.25, 0-0.25, 0.25-0.75) and video memory settings (0-0.25, 0-0.25, 0.75-1) for use with GL_NV_vertex_array_range, they seem to have no effect but the defaults have been updated (to 0.2, 0.2, 0.7) to choose AGP

------------------------------------------------------------------------
r2819 | havoc | 2003-03-09 17:42:54 +0100 (Sun, 09 Mar 2003) | 2 lines

GL_NV_vertex_array_range support added, but disabled by default because for some reason it's halving my framerate rather than making it faster

------------------------------------------------------------------------
r2818 | havoc | 2003-03-09 12:39:08 +0100 (Sun, 09 Mar 2003) | 2 lines

changed R_Mesh_ system (again), now uses R_Mesh_GetSpace to set up varray_* pointers, then fills in the data, then calls R_Mesh_Draw (this can be done repeatedly, but vertex data should *NOT* be modified after the first call)

------------------------------------------------------------------------
r2817 | havoc | 2003-03-09 12:19:57 +0100 (Sun, 09 Mar 2003) | 2 lines

Mod_FindNonSolidLocation now takes a radius and can output to a different vector than the input (purpose: the sphere is nudged out of any surfaces in the area, this makes realtime lighting look a lot better as the lights aren't too close to the surface)

------------------------------------------------------------------------
r2813 | havoc | 2003-03-07 10:34:15 +0100 (Fri, 07 Mar 2003) | 10 lines

menu.c - changed M_DrawSlider to take a value and a min/max range, now prints the current value of the cvar as well
menu.c, menu.h, gl_draw.c - added new color control options menu (the gl_draw.c change is merely adding a "ditherpattern" texture)
menu.c - added "Delay refresh (faster)" to options menu (gl_delayfinish cvar)
menu.c - added "Game Speed" to options menu (slowmo cvar)
vid_wgl.c, vid_glx.c, vid_null.c, vid_shared.c, vid.h, palette.c, palette.h, host.c - gamma system redesigned (VID_SetGamma now takes ramps, VID_GetGamma added, other cruft removed), moved VID_UpdateGamma to vid_shared.c, gamma is now turned off when darkplaces is minimized in X11 (unmapped), and when it's window is not active in Windows as well
vid_wgl.c - trailing whitespace fixed
vid_shared.c - added v_color_enable, v_color_black_[rgb], v_color_grey_[rgb], and v_color_white_[rgb] cvars as another way to adjust color settings
gl_draw.c - added support for v_color_* cvars, removed support for darkening screen (not possible to do in color)
vid_glx.c - got rid of unfinished X11 colormap based gamma code (using XF86 VidMode extension instead)

------------------------------------------------------------------------
r2812 | havoc | 2003-03-07 10:33:07 +0100 (Fri, 07 Mar 2003) | 2 lines

unfinished beginnings of support for voodoo1/voodoo2 class paths for realtime lighting (no shadows however)

------------------------------------------------------------------------
r2811 | havoc | 2003-03-07 10:31:46 +0100 (Fri, 07 Mar 2003) | 2 lines

now uses TEXF_FORCELINEAR on lightmaps

------------------------------------------------------------------------
r2810 | havoc | 2003-03-07 10:31:10 +0100 (Fri, 07 Mar 2003) | 2 lines

added TEXF_FORCENEAREST and TEXF_FORCELINEAR flags

------------------------------------------------------------------------
r2809 | havoc | 2003-03-07 10:30:21 +0100 (Fri, 07 Mar 2003) | 7 lines

got rid of AreaNode stuff, now only has AreaGrid (had to add sv_areagrid_outside node)
renamed sv_useareanodes to sv_debugmove (inverted behavior)
SV_CreateAreaGrid now has a minimum grid size (sv_areagrid_mingridsize cvar), this greatly improved performance in helm18
SV_ClipToAreaGrid and SV_TouchAreaGrid no longer process any edicts twice (edict_t now has areagridmarknumber for this purpose)
increased AREA_GRID from 16 to 512
added SV_ClipToNode function to get rid of duplicate code in SV_ClipToAreaGrid

------------------------------------------------------------------------
r2808 | havoc | 2003-03-07 10:28:12 +0100 (Fri, 07 Mar 2003) | 2 lines

added gl_delayfinish cvar (default off, used to always be on)

------------------------------------------------------------------------
r2807 | havoc | 2003-03-07 10:27:33 +0100 (Fri, 07 Mar 2003) | 2 lines

added invpow (arbitrary logarithm, finds a power that the base number would need to be raised to, to get the requested number)

------------------------------------------------------------------------
r2806 | havoc | 2003-03-07 10:26:11 +0100 (Fri, 07 Mar 2003) | 2 lines

added DrawQ_SuperPic, fixed severe bug in DrawQ_Mesh (was not allocating enough room in drawqueue for the texcoords), DrawQ_Pic and DrawQ_Fill now use DrawQ_SuperPic

------------------------------------------------------------------------
r2805 | havoc | 2003-03-07 10:24:59 +0100 (Fri, 07 Mar 2003) | 7 lines

view.c, cl_parse.c, cl_main.c, gl_rmain.c - trying to remove all uses of origin, angles, or scale fields of entity_render_t
view.c, gl_rmain.c - viewmodel entities are now processed in view.c instead of gl_rmain.c
view.c now uses matrix and inversematrix for view damage kicks

what this means:
the QC feature viewmodelforclient now works

------------------------------------------------------------------------
r2804 | havoc | 2003-03-07 10:23:33 +0100 (Fri, 07 Mar 2003) | 2 lines

added Matrix4x4_OriginFromMatrix, and Matrix4x4_ScaleFromMatrix

------------------------------------------------------------------------
r2802 | havoc | 2003-03-05 08:20:40 +0100 (Wed, 05 Mar 2003) | 2 lines

got an email about this being out of date, fixed

------------------------------------------------------------------------
r2797 | havoc | 2003-03-02 08:20:28 +0100 (Sun, 02 Mar 2003) | 3 lines

changed gloss behavior, now darkens light intensity (to 25% of normal) instead of assuming gloss texture is dim, this is consistent with tenebrae behavior, inconsistent with doom3 behavior (sigh...), this makes OgrO's model skins look a lot better
no longer spews 'refusing to create light' warnings when loading map light entities that actually aren't lights at all

------------------------------------------------------------------------
r2796 | havoc | 2003-03-02 08:18:14 +0100 (Sun, 02 Mar 2003) | 2 lines

fix external model skins (they weren't rendering)

------------------------------------------------------------------------
r2795 | havoc | 2003-03-02 02:30:44 +0100 (Sun, 02 Mar 2003) | 3 lines

changed lots of printf to Con_Printf
removed some trailing whitespace

------------------------------------------------------------------------
r2794 | havoc | 2003-02-28 12:31:14 +0100 (Fri, 28 Feb 2003) | 2 lines

fix improper handling of overbright pixels when saving screenshots

------------------------------------------------------------------------
r2793 | havoc | 2003-02-28 12:28:10 +0100 (Fri, 28 Feb 2003) | 15 lines

lights now have an orientation (this isn't editable yet, and is infact not really supported for rotated lights at the moment, their bbox would need to be rotated)
lights now use bbox culling instead of radius (because they aren't round in 2D texture mode)
fixed LOTS of light culling bugs (particularly with surface selection)
fixed scissor to be more efficient (smaller) when easily done (entirely infront of view) and fixed some bugs
got rid of ShadowSphere code in gl_rmain.c (it was not used)
added back RadiusFromBounds (and optimized it) and added RadiusFromBoundsAndOrigin
removed trailing whitespace in mathlib.c
added BoxesOverlap macro to mathlib.h
fixed a portal-flow bug when a light lies directly inside a portal polygon (now checks both leafs involved, very mild search tolerance for leafs around the light)
added back 3d attenuation texture (true spherical lights make a return, r_shadow_texture3d cvar controls this)
fixed light-bleeding in attenuation textures at the edges (fixed a bug in the biasing during texture generation, now the edge is always black as it should be)
realtime lighting texture generation (attenuation/normalizationcubemap) now has some macros for more easily adjusting texture resolutions
reduced resolution of attenuation and normalization textures
added a bunch more rendering paths for diffuse and specular lighting, to reduce number of passes in a few cases (and allow use of 3D attenuation texture)

------------------------------------------------------------------------
r2792 | havoc | 2003-02-28 12:27:10 +0100 (Fri, 28 Feb 2003) | 2 lines

some added structures in in preparation for another protocol version bump (to add partial entity updates to avoid kicking people off server when packet buffer fills up in a single frame - yes this means rate capping and such will be possible)

------------------------------------------------------------------------
r2791 | havoc | 2003-02-28 12:09:24 +0100 (Fri, 28 Feb 2003) | 2 lines

fix chthon lightning (ugh, how did I manage to use polygon lightning for this, I made polygon lightning optional per beam for this very reason!)

------------------------------------------------------------------------
r2787 | havoc | 2003-02-27 01:00:31 +0100 (Thu, 27 Feb 2003) | 2 lines

changed TEXF_CLAMP to use GL_CLAMP_TO_EDGE (GL_EXT_texture_edge_clamp or GL_SGIS_texture_edge_clamp) instead of GL_CLAMP because it's a more useful behavior all-round, also fixed normalization cubemap on non-NVIDIA cards by doing this (I was properly using GL_CLAMP for attenuation texture, but not for normalization cubemap... *slaps self*)

------------------------------------------------------------------------
r2786 | havoc | 2003-02-26 13:47:49 +0100 (Wed, 26 Feb 2003) | 2 lines

adjustable r_shadow_projectdistance for testing (trying to identify Radeon bug)

------------------------------------------------------------------------
r2782 | havoc | 2003-02-26 02:41:00 +0100 (Wed, 26 Feb 2003) | 2 lines

Too fine an AREA_GRID seems to be dropping performance in normal quake maps (I hope this fixes the performance).

------------------------------------------------------------------------
r2775 | havoc | 2003-02-21 10:24:53 +0100 (Fri, 21 Feb 2003) | 3 lines

added new method of culling irrelevant entity collisions - a grid of areas
the areanode system still lingers because it can cope with things the grid can not (entities outside the grid, or too large for the alloted 16 grid links per entity)

------------------------------------------------------------------------
r2774 | havoc | 2003-02-21 10:22:58 +0100 (Fri, 21 Feb 2003) | 2 lines

added VectorMultiply (not used by anything, but for completeness...)

------------------------------------------------------------------------
r2773 | havoc | 2003-02-21 10:22:27 +0100 (Fri, 21 Feb 2003) | 2 lines

disable step interpolation unless entity is MOVETYPE_STEP

------------------------------------------------------------------------
r2771 | havoc | 2003-02-20 10:22:08 +0100 (Thu, 20 Feb 2003) | 3 lines

optional polygon collisions, not ready for practical use yet, also support for brush collisions
not terribly optimized (fast enough though)

------------------------------------------------------------------------
r2770 | havoc | 2003-02-20 10:20:36 +0100 (Thu, 20 Feb 2003) | 2 lines

added #include "portals.h"

------------------------------------------------------------------------
r2769 | havoc | 2003-02-20 10:17:42 +0100 (Thu, 20 Feb 2003) | 2 lines

some minor cleanup of PartialIPAddress (and some comments about how stupid it is) and a comment about hostname coming from network address being stupid, and some whitespace

------------------------------------------------------------------------
r2768 | havoc | 2003-02-20 10:15:46 +0100 (Thu, 20 Feb 2003) | 2 lines

now counts (very approximate) cost of builtin functions called by progs, profile command reports this in addition to the instructions count, also profile now reports a whole list, not just the top 10

------------------------------------------------------------------------
r2767 | havoc | 2003-02-20 10:13:31 +0100 (Thu, 20 Feb 2003) | 2 lines

simplified "connect local" a bit

------------------------------------------------------------------------
r2766 | havoc | 2003-02-20 10:12:25 +0100 (Thu, 20 Feb 2003) | 2 lines

optional portal based determination of lit surfaces (good speed gain, enough to make dpdm2 somewhat playable, on by default)

------------------------------------------------------------------------
r2751 | havoc | 2003-02-17 03:59:50 +0100 (Mon, 17 Feb 2003) | 2 lines

no longer adopt colors from server updates (this means demos no longer change your colors, and other such annoyances)

------------------------------------------------------------------------
r2750 | havoc | 2003-02-17 01:58:53 +0100 (Mon, 17 Feb 2003) | 2 lines

improved Com_HexDumpToConsole, it now prints properly (not with a data byte on the left side followed by offset number, and other sillyness), and also prints a text listing beside the hex, it remains the same width as the old hex-only listing.

------------------------------------------------------------------------
r2741 | havoc | 2003-02-14 02:27:10 +0100 (Fri, 14 Feb 2003) | 2 lines

optimized some functions like SV_WallFriction and SV_FlyMove, no known behavioral changes (the code is a lot simpler however)

------------------------------------------------------------------------
r2740 | havoc | 2003-02-14 02:22:29 +0100 (Fri, 14 Feb 2003) | 2 lines

fix some bugs with r_fullbright, no lights, and other such cases

------------------------------------------------------------------------
r2739 | havoc | 2003-02-14 02:17:51 +0100 (Fri, 14 Feb 2003) | 2 lines

added con_notify cvar, which controls how many console notify lines are displayed (default 4 like quake, max 32)

------------------------------------------------------------------------
r2738 | havoc | 2003-02-14 02:16:41 +0100 (Fri, 14 Feb 2003) | 2 lines

added VectorBlend and Matrix4x4_Blend

------------------------------------------------------------------------
r2737 | havoc | 2003-02-14 02:15:06 +0100 (Fri, 14 Feb 2003) | 2 lines

don't crash on NULL model in entity culling

------------------------------------------------------------------------
r2736 | havoc | 2003-02-12 19:09:58 +0100 (Wed, 12 Feb 2003) | 2 lines

restructured LDFLAGS a bit to make sure libraries come last (especially -lm as the very last), also moved debugging/profiling flags to be first

------------------------------------------------------------------------
r2735 | havoc | 2003-02-12 01:11:07 +0100 (Wed, 12 Feb 2003) | 2 lines

get rid of yet another entity_frame_t on the stack, this is the last one, hopefully the last stack overflow

------------------------------------------------------------------------
r2734 | havoc | 2003-02-12 00:55:46 +0100 (Wed, 12 Feb 2003) | 2 lines

fix two more stack overflows on win32 (in one case two 3.25mb entity_frame_t structs resided on the stack at once!)

------------------------------------------------------------------------
r2733 | havoc | 2003-02-11 15:03:15 +0100 (Tue, 11 Feb 2003) | 2 lines

another stack overflow fixed, this one more on the order of 300k+?

------------------------------------------------------------------------
r2732 | havoc | 2003-02-11 14:48:34 +0100 (Tue, 11 Feb 2003) | 2 lines

fixed another stack overflow on win32, apparently a 64k packet buffer on the stack causes a stack overflow - yeesh win32 stack is pathetic

------------------------------------------------------------------------
r2731 | havoc | 2003-02-11 00:55:33 +0100 (Tue, 11 Feb 2003) | 2 lines

fix win32 stack overflows in CL_ParseServerInfo, it was choking on the sheer quantity of memory used by model and sound precache names

------------------------------------------------------------------------
r2730 | havoc | 2003-02-10 22:04:09 +0100 (Mon, 10 Feb 2003) | 2 lines

added cl_noplayershadow cvar to allow disabling player shadow

------------------------------------------------------------------------
r2729 | havoc | 2003-02-10 22:02:29 +0100 (Mon, 10 Feb 2003) | 2 lines

almost lost this very important part of the MAX_EDICTS commit

------------------------------------------------------------------------
r2727 | havoc | 2003-02-10 15:46:15 +0100 (Mon, 10 Feb 2003) | 9 lines

MAX_EDICTS has changed to 32768.  Yes this is madness.  Thanks to banshee for prompting this necessity to run his map helm10000!
Sound protocol has been upgraded to be able to send 16bit entity numbers (this allows going beyond the old 8192 limit)
MAX_ENTITY_DATABASE is now dependent on MAX_EDICTS
MAX_DATAGRAM increased from 8000 to 65536
MAX_MSGLEN has been removed (now uses MAX_DATAGRAM)
NET_MAXMESSAGE is now dependent on MAX_DATAGRAM
SV_PushMove's list of moved entities has been moved into sv.moved_edicts (just an array of pointers) and their original origin and angles have been moved into edict_t, this avoids stack crashes on win32 with the new edict limit
increased MAX_MODELS and MAX_SOUNDS from 1024 to 4096 (this is not really necessary but a good idea)

------------------------------------------------------------------------
r2726 | havoc | 2003-02-01 15:20:07 +0100 (Sat, 01 Feb 2003) | 2 lines

makefile to use for cross compiling mingw builds

------------------------------------------------------------------------
r2725 | havoc | 2003-02-01 09:42:18 +0100 (Sat, 01 Feb 2003) | 2 lines

fixed targa quake sky loading

------------------------------------------------------------------------
r2723 | havoc | 2003-01-31 08:27:31 +0100 (Fri, 31 Jan 2003) | 3 lines

chthon lightning no longer uses beam polygons
lightning beams are now relative to their owner entity (if they have one), this makes aiming lightning look instantaneous for the first time ever in quake

------------------------------------------------------------------------
r2722 | havoc | 2003-01-31 08:24:12 +0100 (Fri, 31 Jan 2003) | 2 lines

limited pitch range to that of quake

------------------------------------------------------------------------
r2710 | havoc | 2003-01-28 03:19:51 +0100 (Tue, 28 Jan 2003) | 2 lines

corrected comment again, indicating that the offset for polygon 3 is in the bottom right, not in the top left

------------------------------------------------------------------------
r2709 | havoc | 2003-01-28 03:14:14 +0100 (Tue, 28 Jan 2003) | 2 lines

corrected numbering of polygons in comment (oops)

------------------------------------------------------------------------
r2708 | havoc | 2003-01-28 03:13:37 +0100 (Tue, 28 Jan 2003) | 2 lines

added a lot of comments to lightning beam code

------------------------------------------------------------------------
r2704 | warp | 2003-01-27 10:38:31 +0100 (Mon, 27 Jan 2003) | 3 lines

The gcc 2.95 problem was in fact OP_STORE_V doing nasty things to numbers that were not quite 'valid' floats, so we now just copy as ints.
This allows us to make the string handling /much/ cleaner again.

------------------------------------------------------------------------
r2703 | havoc | 2003-01-27 08:37:18 +0100 (Mon, 27 Jan 2003) | 2 lines

fixed some very ewww bugs (a few .c files made their way into the .o lists)

------------------------------------------------------------------------
r2702 | havoc | 2003-01-27 08:36:22 +0100 (Mon, 27 Jan 2003) | 2 lines

corrected rtlights loading of cubemapname (stupid typo)

------------------------------------------------------------------------
r2701 | havoc | 2003-01-27 03:54:54 +0100 (Mon, 27 Jan 2003) | 14 lines

lightning beams have been replaced with a polygon effect which renders faster than the model effect and looks...  oh umm... about 100x better, old effect still available - cl_beampolygons 0 to go back to models - some r_lightningbeam_* cvars added for tweaking new effect
r_speeds now reports some realtime lighting info
shadowless light support added
(unsuccessful) attempt to fix r_drawportals by moving the call to happen whether portal rendering was used or not
comment about possible optimization to shadow volumes added (rather, inverted light volumes and how to get maximum performance from them)
light styles are now checked for validity (must be in the right number range)
tiny cleanup to cubemap name handling (cubemaps are still not actually supported)
r_editlights_rtlightcolorscale and sizescale are now applied only in LoadWorldLights and SaveWorldLights, not in light creation (also somewhat to compensate for this fact, .lights loading has been tweaked to double the brightness)
torch light colors changed (more orange)
r_editlights_spawn no longer takes parameters
r_editlights_edit now has subcommands instead of setting all properties, the commands are: origin, originx, originy, originz, move, movex, movey, movez, radius, color, style, cubemap, shadows
r_editlights_toggleshadow added (useful for point and click shadow toggling)
display overlay now shown when pointing at a light in editing mode, indicating all properties of the light

------------------------------------------------------------------------
r2700 | havoc | 2003-01-23 21:10:07 +0100 (Thu, 23 Jan 2003) | 3 lines

entity shadow casting is now optional per entity (EF_NOSHADOW added), and special entities (static entities like torchs, and tempentities like beams) do not cast shadows
intermission player does not cast shadows and the cameraman in Nehahra movie and cinematics no longer casts shadows

------------------------------------------------------------------------
r2699 | havoc | 2003-01-23 20:34:11 +0100 (Thu, 23 Jan 2003) | 2 lines

added resolutions 320x240, 400x300, 1152x864, 1280x1024, 1600x1200, 1792x1344, 1920x1440, 2048x1536

------------------------------------------------------------------------
r2698 | havoc | 2003-01-22 01:49:13 +0100 (Wed, 22 Jan 2003) | 2 lines

reduced intensity and radius of teleport flash

------------------------------------------------------------------------
r2697 | havoc | 2003-01-22 01:42:44 +0100 (Wed, 22 Jan 2003) | 2 lines

removed allsolid check from droptofloor

------------------------------------------------------------------------
r2696 | havoc | 2003-01-22 01:42:05 +0100 (Wed, 22 Jan 2003) | 2 lines

turned off mipmapping on attenuation texture

------------------------------------------------------------------------
r2695 | havoc | 2003-01-17 00:53:26 +0100 (Fri, 17 Jan 2003) | 7 lines

works with NULL worldmodel
fixed overbright lighting!  (light flickering is now smooth and everything)
added r_editlights_rtlightssizescale and r_editlights_rtlightscolorscale which scale light properties when loading as well as saving (to undo the change - this can be exploited to modify all lights in the level)
reduced used area of attenuation texture a little to ensure black edges
changed defaults for attenuation texture settings and rtlights sizescale/colorscale to greatly improve performance while still looking good
now defaults to no fake bumpmapping on walls (saves texture memory and looks better to me)

------------------------------------------------------------------------
r2694 | havoc | 2003-01-15 14:21:19 +0100 (Wed, 15 Jan 2003) | 2 lines

changed a debugging notice about texture loading

------------------------------------------------------------------------
r2693 | havoc | 2003-01-15 14:13:28 +0100 (Wed, 15 Jan 2003) | 2 lines

now checks for NULL worldmodel

------------------------------------------------------------------------
r2692 | havoc | 2003-01-15 14:12:47 +0100 (Wed, 15 Jan 2003) | 2 lines

now prints image size (was printing garbage before)

------------------------------------------------------------------------
r2691 | havoc | 2003-01-15 14:12:14 +0100 (Wed, 15 Jan 2003) | 2 lines

tiny cleanup to RotatePointAroundVector (uses a VectorCopy instead of 3 lines)

------------------------------------------------------------------------
r2690 | havoc | 2003-01-15 14:09:16 +0100 (Wed, 15 Jan 2003) | 2 lines

fixed bumpmapping!  now looks correct

------------------------------------------------------------------------
r2689 | havoc | 2003-01-15 14:05:32 +0100 (Wed, 15 Jan 2003) | 3 lines

expanded string table offset table from 1024 to 65536, there must be a better solution than this though...
this fixes savegame loading (which allocates lots of negative string offsets)

------------------------------------------------------------------------
r2688 | havoc | 2003-01-15 14:01:21 +0100 (Wed, 15 Jan 2003) | 2 lines

added developer_memory cvar (default off) to decide whether to print memory debugging messages if developer is on

------------------------------------------------------------------------
r2687 | havoc | 2003-01-15 13:59:40 +0100 (Wed, 15 Jan 2003) | 2 lines

now checks if worldmodel is NULL again, some comment cleanups and clarifications

------------------------------------------------------------------------
r2686 | havoc | 2003-01-15 12:40:17 +0100 (Wed, 15 Jan 2003) | 2 lines

cleanup of precache messages and assorted comments

------------------------------------------------------------------------
r2685 | molivier | 2003-01-06 15:28:37 +0100 (Mon, 06 Jan 2003) | 2 lines

E4M9 was added to the Transfusion map list

------------------------------------------------------------------------
r2684 | havoc | 2002-12-25 00:00:59 +0100 (Wed, 25 Dec 2002) | 3 lines

loadimagepixels is a little cleaner now (yes made cleaner by goto...) and dprints info about loaded images
critical bug in image_loadskin fixed (s->basepixels_width and height were not being set)

------------------------------------------------------------------------
r2683 | havoc | 2002-12-24 23:59:23 +0100 (Tue, 24 Dec 2002) | 2 lines

detect bogus texture upload attempts and print the info to console

------------------------------------------------------------------------
r2682 | havoc | 2002-12-22 23:56:09 +0100 (Sun, 22 Dec 2002) | 10 lines

unified model skinframe loaders used for mdl, md2, md3, and bsp textures (both external and internal where applicable)
imageskin_t and image_loadskin/image_freeskin functions added to image.[ch] for use by the unified skinframe loaders
added palette_nocolormap
split r_shadow_bumpscale cvar into r_shadow_bumpscale_bumpmap (for _bump textures) and r_shadow_bumpscale_basetexture (self explanatory)
now loads _norm normalmap textures (tenebrae compatibility)
_nmap normalmap texture support removed (it was broken in the previous release and I don't need to bog down the texture loader with even more unnecessary names)
r_shadow_lightattenuationpower added (default 2, to leave it looking identical to previous versions, this controls the falloff curve of light)
renamed detailtextures array to mod_shared_detailtextures and moved it and related code to model_shared.[ch]
removed progs/missile.mdl shadow casting check (in r_shadow_realtime mode) I had forgotten to remove before committing last time

------------------------------------------------------------------------
r2681 | molivier | 2002-12-11 18:51:31 +0100 (Wed, 11 Dec 2002) | 2 lines

Some stupid Linux machines (i.e. Mandrake) seem to ignore their own network properties; in this case, we use the loopback address as the default one. Also, fixed an inoffensive bug when binding the UDP control socket.

------------------------------------------------------------------------
r2680 | havoc | 2002-12-11 04:06:44 +0100 (Wed, 11 Dec 2002) | 2 lines

I guess those glLoadIdentity calls were more important than expected

------------------------------------------------------------------------
r2679 | havoc | 2002-12-09 13:37:59 +0100 (Mon, 09 Dec 2002) | 3 lines

removed glLoadIdentity calls (they were all useless where they were used)
commented out unused GL functions

------------------------------------------------------------------------
r2678 | havoc | 2002-12-09 13:35:08 +0100 (Mon, 09 Dec 2002) | 3 lines

added Electro's smoke trail tweaks
decals now follow the bmodel they stuck to

------------------------------------------------------------------------
r2677 | molivier | 2002-12-03 11:16:37 +0100 (Tue, 03 Dec 2002) | 2 lines

Removed some warnings in MSVC6

------------------------------------------------------------------------
r2676 | molivier | 2002-12-03 11:15:01 +0100 (Tue, 03 Dec 2002) | 2 lines

Updated Transfusion map list

------------------------------------------------------------------------
r2675 | havoc | 2002-12-02 21:06:27 +0100 (Mon, 02 Dec 2002) | 2 lines

fix textured DrawQ_Fill problem when DrawQ_Fill is the first 2d primitive rendered (thanks Tomaz)

------------------------------------------------------------------------
r2672 | havoc | 2002-12-02 05:52:47 +0100 (Mon, 02 Dec 2002) | 2 lines

another bugfix for WORKINGLQUAKE code

------------------------------------------------------------------------
r2671 | havoc | 2002-12-02 02:55:54 +0100 (Mon, 02 Dec 2002) | 3 lines

md3 model support and some cleanups to skin loading and other things in the mdl and md2 loaders
md3 tags are not loaded yet

------------------------------------------------------------------------
r2670 | havoc | 2002-12-02 02:53:51 +0100 (Mon, 02 Dec 2002) | 2 lines

beginnings of some proper server list code, commented out for now

------------------------------------------------------------------------
r2669 | havoc | 2002-12-02 02:52:13 +0100 (Mon, 02 Dec 2002) | 5 lines

changed master server list around a bit (added rick.cube-sol.net and my master server as well)
master server list can now have gaps
ipaddr is now parsed from the getserversResponse properly (thanks Rick)
now reports port number in developer print for sending messages to master servers

------------------------------------------------------------------------
r2668 | havoc | 2002-12-02 02:43:50 +0100 (Mon, 02 Dec 2002) | 3 lines

reverted to fast version of trianglefacinglight code, as it was found to be a speed gain in benchmarks compared to the light radius checking version
fixed an unitialized variable warning

------------------------------------------------------------------------
r2667 | havoc | 2002-12-02 02:33:33 +0100 (Mon, 02 Dec 2002) | 2 lines

added loadtextureimagebumpasnmap

------------------------------------------------------------------------
r2666 | havoc | 2002-12-02 02:31:32 +0100 (Mon, 02 Dec 2002) | 2 lines

water moves around again

------------------------------------------------------------------------
r2665 | havoc | 2002-12-02 02:28:30 +0100 (Mon, 02 Dec 2002) | 4 lines

optimized single frame lerp case
removed FetchSkinFrame
mesh rendering loop now... advances the mesh

------------------------------------------------------------------------
r2664 | havoc | 2002-12-02 02:25:32 +0100 (Mon, 02 Dec 2002) | 3 lines

cleaned up shadow volume culling somewhat
added r_shadow_cull cvar to decide whether or not to apply shadow volume culling

------------------------------------------------------------------------
r2663 | havoc | 2002-12-02 01:42:25 +0100 (Mon, 02 Dec 2002) | 3 lines

renamed and altered SZ_HexDumpToConsole to be Com_HexDumpToConsole which takes a qbyte * and a size, instead of a sizebuf_t
added SZ_HexDumptoConsole which just calls Com_HexDumpToConsole

------------------------------------------------------------------------
r2662 | havoc | 2002-12-01 21:08:22 +0100 (Sun, 01 Dec 2002) | 2 lines

fix compiling problems in MSVC (thanks Tomaz)

------------------------------------------------------------------------
r2661 | havoc | 2002-12-01 09:28:39 +0100 (Sun, 01 Dec 2002) | 2 lines

a few more glquake and glqwcl compatibility fixes

------------------------------------------------------------------------
r2660 | havoc | 2002-12-01 05:40:37 +0100 (Sun, 01 Dec 2002) | 2 lines

added a simplified CL_TraceLine in the WORKINGLQUAKE code and enabled particle collisions in WORKINGLQUAKE

------------------------------------------------------------------------
r2659 | havoc | 2002-11-30 10:44:26 +0100 (Sat, 30 Nov 2002) | 4 lines

decals added back due to popular demand, currently not at all optimized (they're just particles) and not clipped to surfaces
cl_decals 1 to enable (this is saved to config), cl_decals_time and cl_decals_fadetime change settings for them (these are also saved to config)
redesigned particle additive flag to be a blend mode number (PBLEND_ALPHA, PBLEND_ADD, or PBLEND_MOD - for decals), lots of special hacks for the nifty new PBLEND_MOD mode

------------------------------------------------------------------------
r2658 | havoc | 2002-11-29 01:33:13 +0100 (Fri, 29 Nov 2002) | 2 lines

-width and -height can now be used alone (instead of having to use both) for better compatibility with stock glquake behavior

------------------------------------------------------------------------
r2657 | havoc | 2002-11-28 04:41:10 +0100 (Thu, 28 Nov 2002) | 2 lines

mdl/md2 transitioned to meshes

------------------------------------------------------------------------
r2656 | havoc | 2002-11-28 03:33:39 +0100 (Thu, 28 Nov 2002) | 3 lines

most of the new alias mesh system is in place now...
reversed lighting direction in R_LightModel because it was backwards (weird...)

------------------------------------------------------------------------
r2655 | havoc | 2002-11-27 01:22:15 +0100 (Wed, 27 Nov 2002) | 4 lines

changed format of aliasvertex_t to use floats (hopefully this is a speedup, it sure bloats memory use - 36 bytes each, compared to 4 bytes in mdl/md2)
corrected scale for md3 vertices mentioned in header (md3 is still not supported yet)
added some unfinished mesh structures to begin support for md3

------------------------------------------------------------------------
r2654 | havoc | 2002-11-26 22:01:02 +0100 (Tue, 26 Nov 2002) | 2 lines

cleaned up md3 structs

------------------------------------------------------------------------
r2653 | havoc | 2002-11-26 21:55:37 +0100 (Tue, 26 Nov 2002) | 2 lines

removed model_t mdlmd2data_frames (no longer needed)

------------------------------------------------------------------------
r2652 | havoc | 2002-11-26 21:49:13 +0100 (Tue, 26 Nov 2002) | 4 lines

mdl and md2 vertices are now stored in a different structure called aliasvertex_t, it has all the features of mdl, md2 and md3 formats and simplifies interpolation, it also has precomputed texture vectors for faster realtime lighting.
normals are no longer interpolated if not needed (fake shadows and shadow volumes do not need them)
added VectorM, VectorMAM, VectorMAMAM and VectorMAMAMAM macros to make aliasvertex_t interpolation code more readable

------------------------------------------------------------------------
r2651 | havoc | 2002-11-26 21:38:41 +0100 (Tue, 26 Nov 2002) | 2 lines

BuildTriangleNeighbors now detects edges shared by three triangles, fixes weird shadow bugs in a few places

------------------------------------------------------------------------
r2650 | havoc | 2002-11-25 02:16:06 +0100 (Mon, 25 Nov 2002) | 2 lines

most of Q2's keyboard handling ported over - what this means: keypad is now separately bindable (bind kp_pgup and such)

------------------------------------------------------------------------
r2649 | havoc | 2002-11-25 02:08:50 +0100 (Mon, 25 Nov 2002) | 2 lines

reverse engineered md3 format and wrote struct declarations (this is *NOT* based on Q3 SDK source)

------------------------------------------------------------------------
r2645 | havoc | 2002-11-22 13:43:30 +0100 (Fri, 22 Nov 2002) | 4 lines

r_shadows is now ignored when in r_shadow_realtime mode
r_shadow_realtime 3 added (no depth test on visible shadow volumes)
visible shadow volumes now have backface culling disabled, to better demonstrate the overdraw

------------------------------------------------------------------------
r2644 | havoc | 2002-11-21 19:26:48 +0100 (Thu, 21 Nov 2002) | 2 lines

implemented PR_GetString and PR_SetString from QWSV source, these work around the map change crash bugs in gcc 2.95.3

------------------------------------------------------------------------
r2643 | havoc | 2002-11-21 19:24:38 +0100 (Thu, 21 Nov 2002) | 2 lines

defaulting to r_surfaceworldnode 1

------------------------------------------------------------------------
r2642 | havoc | 2002-11-21 11:56:30 +0100 (Thu, 21 Nov 2002) | 2 lines

fixed a silly and harmless typo in RSurfShader_Water (*chain++ should have been chain++)

------------------------------------------------------------------------
r2640 | havoc | 2002-11-20 13:54:15 +0100 (Wed, 20 Nov 2002) | 6 lines

CalcSurfaceExtents now uses surf->poly_verts instead of edges
brush model bounding box calculations are now based on meshes instead of edges
CalcSurfaceExtents has been merged into Mod_GenerateSurfacePolygon
msurface_t firstedge and numedges have been removed (they were only used for generating the polygon during loading)
shuffled around msurface_t fields in order of most common access at the top, to least common at the bottom, this is in an attempt to reduce wasted memory traffic

------------------------------------------------------------------------
r2639 | havoc | 2002-11-20 12:18:50 +0100 (Wed, 20 Nov 2002) | 3 lines

removed all 3x4 matrix support (wasn't used, and isn't likely to ever be used)
moved Matrix4x4_Print to mathlib.[ch] because it really doesn't belong in the entirely quake-independent matrixlib.[ch]

------------------------------------------------------------------------
r2638 | havoc | 2002-11-20 12:10:37 +0100 (Wed, 20 Nov 2002) | 2 lines

softwaretransform hasn't been used in ages, I thought I had already gotten rid of it...

------------------------------------------------------------------------
r2632 | havoc | 2002-11-16 14:52:08 +0100 (Sat, 16 Nov 2002) | 2 lines

got rid of all the (no longer used) cached_ fields in the msurface_t struct, except for cached_dlight

------------------------------------------------------------------------
r2631 | havoc | 2002-11-16 14:35:36 +0100 (Sat, 16 Nov 2002) | 2 lines

merged GL_DrawRangeElements into R_Mesh_Draw for a mild speed gain

------------------------------------------------------------------------
r2630 | havoc | 2002-11-16 13:49:34 +0100 (Sat, 16 Nov 2002) | 2 lines

lightmap update checking is now handled very differently; each brush model has a set of lightmap chains for each light style, and they are marked if the light style's value changes, similarly dlights mark surfaces they touch as well...  both use surf->cached_dlight...  this doesn't seem to be a speed gain (or loss) at present, but allows further restructuring which should be a speed gain

------------------------------------------------------------------------
r2629 | havoc | 2002-11-16 02:24:03 +0100 (Sat, 16 Nov 2002) | 3 lines

rewrote how texture chains are handled, they are now stored outside the surfaces, and are rebuilt as the player moves through the world (bmodel texture chains are just left untouched)
good efficiency improvement I think

------------------------------------------------------------------------
r2628 | havoc | 2002-11-16 02:00:26 +0100 (Sat, 16 Nov 2002) | 2 lines

fixed fiends teleporting when they check if a jump is a good one or not

------------------------------------------------------------------------
r2621 | molivier | 2002-11-14 09:05:05 +0100 (Thu, 14 Nov 2002) | 2 lines

The Linux version doesn't need libjpeg.h anymore

------------------------------------------------------------------------
r2620 | havoc | 2002-11-11 22:36:09 +0100 (Mon, 11 Nov 2002) | 2 lines

thanks to Vic for pointing out the fact I should be using + 0.5f when dealing with the alias texcoords

------------------------------------------------------------------------
r2619 | havoc | 2002-11-11 06:04:53 +0100 (Mon, 11 Nov 2002) | 2 lines

thanks to Tomaz for finding a severe bug in CopyTranslateOnly (it was copying the X translate into all 3 translate components)

------------------------------------------------------------------------
r2618 | havoc | 2002-11-10 06:03:42 +0100 (Sun, 10 Nov 2002) | 11 lines

added Nexiuz TE_ effects (prefixed TE_TEI_) and Nexiuz plasma trail (an override for EF_BRIGHTFIELD)
Nexiuz mode disables fullbrights
reshaped some of the particle structure (flags is gone, broken apart into separate fields again)
added tex_beam (which uses a separate texture instead of the particle font because it needs to repeat)
simplified some of the texture font generation (tex_ variables now indicate where to put the images in the texture)
now resets trail positions if entity was not active in previous frame
now gives packet dump when Host_Error is called during client message parsing code
now frees the model(s) being loaded when Host_Error is called during model loading code
removed modelflush command because it crashes the realtime lighting code (which points to leafs and surfaces in the world model, a problem which does not exist with r_restart and vid_restart)
R_Stain and R_CalcBeamVerts now use const where appropriate

------------------------------------------------------------------------
r2617 | havoc | 2002-11-10 03:51:31 +0100 (Sun, 10 Nov 2002) | 2 lines

add GAME_NEXIUZ gamemode

------------------------------------------------------------------------
r2616 | havoc | 2002-11-10 03:49:45 +0100 (Sun, 10 Nov 2002) | 2 lines

fixed Mod_LoadZymoticModel - it had TONS of crashs

------------------------------------------------------------------------
r2615 | havoc | 2002-11-10 03:34:19 +0100 (Sun, 10 Nov 2002) | 2 lines

fix crashs on maps with missing textures

------------------------------------------------------------------------
r2614 | havoc | 2002-11-10 03:26:47 +0100 (Sun, 10 Nov 2002) | 2 lines

fix which crosshair texture is used

------------------------------------------------------------------------
r2613 | havoc | 2002-11-10 03:22:43 +0100 (Sun, 10 Nov 2002) | 2 lines

don't send free entities!  (I've been observing this bug for months)

------------------------------------------------------------------------
r2610 | havoc | 2002-11-09 00:26:54 +0100 (Sat, 09 Nov 2002) | 7 lines

Elric's changes:
JPEG texture loading using libjpeg (entirely optional at runtime - if not present, it won't load it)
gl_extensionfunctionlist_t is now renamed dllfunction_t and part of a shared system for library opening/function retrieval (functions Sys_LoadLibrary, Sys_GetProcAddress, Sys_UnloadLibrary - for this the library handles are considered void *'s)
LordHavoc's changes:
fixed libjpeg support in non-win32 by using jpeglib.h - honors jpeglib.h's idea of boolean - Linux libjpeg is compiled with boolean as int, unlike windows where it is apparently byte - unfortunately this also means you need libjpeg-devel installed to compile it in non-win32, not sure what can be done about this (but most people seem to have that anyway...)
looks for libjpeg.so.62 instead of libjpeg.so

------------------------------------------------------------------------
r2609 | havoc | 2002-11-07 21:50:05 +0100 (Thu, 07 Nov 2002) | 7 lines

glossmap textures are now brighter (no change to forced gloss brightness)
now clears lights when reloading lights
r_editlights_quakelightsizescale cvar added, default 0.8, controls size of lights imported from maps, gets a major speed gain but makes the map a little darker
R_Shadow_NewWorldLight now checks if radius or color is too dim and won't spawn such lights
in editing mode the centers of lights are visible now (as crosshair images)
light selection is now done a bit differently - the more precisely you point at a light, the higher it's rating gets, sometimes surpassing the closer lights in the area

------------------------------------------------------------------------
r2608 | havoc | 2002-11-07 21:42:36 +0100 (Thu, 07 Nov 2002) | 2 lines

changed a server protocol error to use Host_Error

------------------------------------------------------------------------
r2607 | havoc | 2002-11-07 21:41:50 +0100 (Thu, 07 Nov 2002) | 2 lines

when realtime mode fails now mentions setting vid_bitsperpixel to 32 as well

------------------------------------------------------------------------
r2606 | havoc | 2002-11-07 21:40:28 +0100 (Thu, 07 Nov 2002) | 2 lines

LoadTGA now loads colormapped and greyscale targas (as found in qe1m1 project)

------------------------------------------------------------------------
r2605 | havoc | 2002-11-07 21:38:57 +0100 (Thu, 07 Nov 2002) | 2 lines

don't allow stencil without bitsperpixel 32

------------------------------------------------------------------------
r2600 | havoc | 2002-11-04 16:56:31 +0100 (Mon, 04 Nov 2002) | 2 lines

added comments explaining what all the fields of surfmesh_t do

------------------------------------------------------------------------
r2599 | havoc | 2002-11-04 02:28:08 +0100 (Mon, 04 Nov 2002) | 2 lines

removed use of 3D textures

------------------------------------------------------------------------
r2598 | havoc | 2002-11-04 02:23:30 +0100 (Mon, 04 Nov 2002) | 2 lines

renamed r_staticworldlights to r_shadow_staticworldlights

------------------------------------------------------------------------
r2597 | havoc | 2002-11-04 02:09:33 +0100 (Mon, 04 Nov 2002) | 11 lines

now clears stencil to 128 instead of 0, this avoids problems with arbitrary incr/decr orders
stencil shadows are now always erased by glClear, never by drawing again, removes r_shadow_erasebydrawing cvar
shadow volumes now have a nudge away from the surface that cast them, this is controlled by the r_shadow_shadownudge cvar (default 1 unit), avoids rare z fighting issues
shadow volume projection distance is now not infinite for alias model volumes, because they are more well-behaved than the world shadows...
msurface_t poly_radius and poly_radius2 removed
now validates elements in more parts of loading (hoped this would reveal a model shadow bug, but it didn't)
Mod_ShadowMesh_AddVertex now uses a hash table search to speed up static shadow volume building (unfortunately this doesn't seem to be the real speed problem)
removed ALLOCMESHINPIECES option from Mod_ShadowMesh code
removed non-PRECOMPUTEDSHADOWVOLUMES option from static shadow volume creation
removed some unused variables

------------------------------------------------------------------------
r2596 | havoc | 2002-11-04 00:10:45 +0100 (Mon, 04 Nov 2002) | 2 lines

fix polygon distance checks (the radius comparison was completely wrong)

------------------------------------------------------------------------
r2595 | havoc | 2002-11-04 00:07:26 +0100 (Mon, 04 Nov 2002) | 2 lines

added support for glPolygonOffset (not used though)

------------------------------------------------------------------------
r2593 | havoc | 2002-10-31 16:35:42 +0100 (Thu, 31 Oct 2002) | 2 lines

untested support for tenebrae override/ textures directory

------------------------------------------------------------------------
r2592 | havoc | 2002-10-31 16:17:40 +0100 (Thu, 31 Oct 2002) | 2 lines

make view kicks (both angle and origin) occur before gun is oriented, so it follows the view exactly

------------------------------------------------------------------------
r2591 | havoc | 2002-10-30 16:28:26 +0100 (Wed, 30 Oct 2002) | 2 lines

fixed all the signed/unsigned mismatch warnings

------------------------------------------------------------------------
r2590 | havoc | 2002-10-30 16:23:48 +0100 (Wed, 30 Oct 2002) | 2 lines

commented out two unused static const int variables gcc 3.3 noticed

------------------------------------------------------------------------
r2589 | havoc | 2002-10-30 12:46:08 +0100 (Wed, 30 Oct 2002) | 2 lines

fix viewmodel crash

------------------------------------------------------------------------
r2588 | havoc | 2002-10-29 22:06:11 +0100 (Tue, 29 Oct 2002) | 2 lines

minor update to texture flags and logic stuff

------------------------------------------------------------------------
r2587 | havoc | 2002-10-29 22:04:07 +0100 (Tue, 29 Oct 2002) | 2 lines

fix for use of cubemaps on hardware without 3d texture support

------------------------------------------------------------------------
r2586 | havoc | 2002-10-29 20:29:58 +0100 (Tue, 29 Oct 2002) | 2 lines

view model is now properly lit in realtime mode

------------------------------------------------------------------------
r2585 | havoc | 2002-10-29 19:55:05 +0100 (Tue, 29 Oct 2002) | 2 lines

color the torch light

------------------------------------------------------------------------
r2584 | havoc | 2002-10-29 19:36:06 +0100 (Tue, 29 Oct 2002) | 2 lines

tweak large flame lights a bit more

------------------------------------------------------------------------
r2583 | havoc | 2002-10-29 19:31:12 +0100 (Tue, 29 Oct 2002) | 4 lines

bumpscale is now adjustable (r_shadow_bumpscale) for experimenting (it's not saved to config)
.lights loading now has the correct light intensity
torchs now spawn lights above their location so the shadow is cast down, not up

------------------------------------------------------------------------
r2582 | havoc | 2002-10-29 19:01:43 +0100 (Tue, 29 Oct 2002) | 2 lines

now lights are automatically loaded from the .bsp, .lights, or .rtlights if available

------------------------------------------------------------------------
r2581 | havoc | 2002-10-29 16:44:15 +0100 (Tue, 29 Oct 2002) | 2 lines

* LordHavoc slaps self for having loadmodel->mempool references where he should have had r_shadow_mempool references

------------------------------------------------------------------------
r2580 | havoc | 2002-10-29 16:36:49 +0100 (Tue, 29 Oct 2002) | 3 lines

changed how QC interpreter handles edict field access - the entvars struct is now a pointer - yes this changed that many files...
discovered gcc 2.95.3 is the sole cause of map change crashs in the QC interpreter - it does not compile pr_exec.c correctly somehow (I think OP_ADDRESS is the only place it has a problem), makefile now refers to gcc-3.1 (maybe this should be changed, but oh well for now)

------------------------------------------------------------------------
r2574 | havoc | 2002-10-28 15:26:49 +0100 (Mon, 28 Oct 2002) | 2 lines

faster number to edict lookup (sv.edictstable) and faster edict to number lookup (edict_t now has a number inside it)

------------------------------------------------------------------------
r2573 | havoc | 2002-10-28 15:24:33 +0100 (Mon, 28 Oct 2002) | 2 lines

check for negative pr_depth in PR_Crash just to be obsessive

------------------------------------------------------------------------
r2572 | havoc | 2002-10-28 15:23:41 +0100 (Mon, 28 Oct 2002) | 2 lines

fixed CopyEntity builtin, now only copies the vars (not the physics info and such)

------------------------------------------------------------------------
r2571 | havoc | 2002-10-28 10:17:44 +0100 (Mon, 28 Oct 2002) | 3 lines

implemented scissor rect clipping of lights in realtime lighting mode
DP is no longer fillrate limited on my GF4 at 640x480 :)

------------------------------------------------------------------------
r2570 | havoc | 2002-10-27 14:15:43 +0100 (Sun, 27 Oct 2002) | 38 lines

gloss now works correctly
major speedups to realtime lighting mode (it's now actually playable on my machine)

world lights are now handled by r_shadow.c instead of the lights list in the world model
world lights can be ingame edited/loaded/saved (the file name ends in .rtlights), this is all controlled by r_editlights* commands/cvars
realtime lighting cvars renamed from r_light_* to r_shadow_*
r_shadow_realtime takes the place of r_shadows modes 2 and 3, mode 1 is realtime lighting, mode 2 is realtime lighting plus visible shadow volumes overlaid
r_shadow_lightingmode variable added (updated each frame) indicating whether or not realtime lighting is active
changed how player model and chase_active is handled (player model is now considered a forced RENDER_EXTERIORMODEL), so player now casts shadows
R_Shadow_Volume no longer takes a vertex parameter, it is implied that it is in varray_vertex (since all the code relied on this fact anyway)
R_Shadow_Volume's code has been split out into reusable functions (R_Shadow_ProjectVertices, R_Shadow_MakeTriangleShadowFlags, R_Shadow_BuildShadowVolumeTriangles)
R_Shadow_RenderLighting split into R_Shadow_DiffuseLighting and R_Shadow_SpecularLighting since sometimes it's usable to use more than one call to diffuse lighting (colormapped models)
R_Model_Alias_DrawLight now handles colormapping
added Light_CullBox and LightAndVis_CullBox functions for culling shadow volumes
R_DrawWorldLightShadowVolume has been moved to r_shadow.c
Mod_ShadowMesh_Begin now takes an initial number of triangles to hold, number of triangles in each additional shadowmesh is now based on previous mesh
R_Model_Brush_DrawLightForSurfaceList added to greatly reduce wasted lighting
rewrote visibility logic in R_Model_Brush_DrawLight, now uses different approachs for bmodels and world
lights are now pvs culled (according to what leafs are visible to the viewer, and what leafs are visible to the light)
R_Shadow_Stage_EraseShadowVolumes now returns an int, indicating whether or not to draw the shadow volumes again to erase
rewrote how texture info based on entity and time is updated (it is now a function called R_UpdateTextureInfo)
fixed a ton of bugs relating to animated textures and transparency of bmodels (also changed texture_t currentframe to no longer be an array)
disabled building of surface neighbors (oh sure I made it a lot faster and stuff, but it's still not practical, and is no longer necessary)
changed parameters of model_t DrawLight function to no longer take distbias and subtract
Mod_ProcessLightList is no longer called
mlight_t fields relating to shadow volumes have been commented out
Mod_ValidateElements function added
notes on enormous cost added to Mod_BuildTextureVectorsAndNormals (188 float operations per triangle, and 39 float operations per vertex)
added (disabled) code for allocating and freeing shadowmeshs in pieces, just for obsessive memory corruption detection (none was found)
Mod_ShadowMesh_AddTriangle and Mod_ShadowMesh_AddMesh functions added, and Mod_ShadowMesh_AddPolygon now uses AddTriangle (this is a slowdown but I'm not sure it matters that it is, it fills out meshs more completely)
added (disabled) code for Mod_ShadowMesh_Finish to work without reallocating meshs
R_Shadow_ResizeTriangleFacingLight and R_Shadow_ResizeShadowElements added
R_Shadow_RenderShadowMeshVolume added (properly renders shadowmesh_t chains, fixing all the bugs with static shadow volume rendering)
r_shadow_blankbumptexture is now 1x1
r_shadow_blankglosstexture and r_shadow_blankwhitetexture added (both 1x1)
added a 4 texture path for r_shadowtexture3d 0 mode
when static shadow volumes are constructed for world lights, it is now done by constructing a combined mesh of all lit geometry, and then casting shadows from that (this reduces shadow volume edges greatly, since separate polygons become a continuous mesh during the mesh creation)

------------------------------------------------------------------------
r2569 | havoc | 2002-10-27 14:10:42 +0100 (Sun, 27 Oct 2002) | 2 lines

added a FIXME note about skyboxes and vid_restart

------------------------------------------------------------------------
r2568 | havoc | 2002-10-27 13:13:53 +0100 (Sun, 27 Oct 2002) | 2 lines

set depth and stencil clear values

------------------------------------------------------------------------
r2567 | havoc | 2002-10-27 13:11:48 +0100 (Sun, 27 Oct 2002) | 2 lines

check for out of bounds fraction

------------------------------------------------------------------------
r2566 | havoc | 2002-10-27 13:00:37 +0100 (Sun, 27 Oct 2002) | 2 lines

add an error check for invalid maxfrac before returning it, nothing significant

------------------------------------------------------------------------
r2564 | havoc | 2002-10-26 17:23:58 +0200 (Sat, 26 Oct 2002) | 2 lines

fix for drawing explosions and sky twice as much as necessary (!), no longer does a 360 degree sweep on both axis, one axis is only 180 degrees

------------------------------------------------------------------------
r2562 | havoc | 2002-10-25 14:30:55 +0200 (Fri, 25 Oct 2002) | 2 lines

fix for lift blocking due to imprecision at very low frame times (slowmo)

------------------------------------------------------------------------
r2561 | havoc | 2002-10-25 13:15:08 +0200 (Fri, 25 Oct 2002) | 2 lines

minor whitespace cleanup

------------------------------------------------------------------------
r2551 | havoc | 2002-10-22 09:13:13 +0200 (Tue, 22 Oct 2002) | 6 lines

reworked visibility a bit (added VIS_CullBox and VIS_CullSphere) so it can be pretty accurate
made pvs surface/leaf lists to make R_SurfaceWorldNode as fast as possible
world geometry now casts shadows from frontfaces instead of backfaces
fixed most shadowing bugs
static shadow volumes now work (other than one bug I'm trying to find) and are on by default

------------------------------------------------------------------------
r2550 | havoc | 2002-10-22 09:10:26 +0200 (Tue, 22 Oct 2002) | 2 lines

added a comment describing GL triangle strip order (why add it to this?  convenience)

------------------------------------------------------------------------
r2549 | havoc | 2002-10-22 09:05:24 +0200 (Tue, 22 Oct 2002) | 3 lines

make profile now works
no longer prints 'Compiling whatever.c' and so on as per Mercury's request

------------------------------------------------------------------------
r2548 | havoc | 2002-10-22 09:03:44 +0200 (Tue, 22 Oct 2002) | 2 lines

cast shadows from frontfaces instead of backfaces

------------------------------------------------------------------------
r2547 | havoc | 2002-10-22 09:02:47 +0200 (Tue, 22 Oct 2002) | 2 lines

don't use 3d textures on drivers that don't explicitly advertise it as an extension

------------------------------------------------------------------------
r2546 | havoc | 2002-10-21 09:21:01 +0200 (Mon, 21 Oct 2002) | 2 lines

change maximum lerp time from 1 second to 0.1 seconds (this was a mistake in a previous commit)

------------------------------------------------------------------------
r2545 | molivier | 2002-10-21 08:07:25 +0200 (Mon, 21 Oct 2002) | 2 lines

The new video menu is clean now (or at least cleaner). Updated Transfusion map list

------------------------------------------------------------------------
r2542 | havoc | 2002-10-20 01:23:03 +0200 (Sun, 20 Oct 2002) | 5 lines

reorganized how heartbeat timing works (much simpler and cleaner now)
sv_heartbeatperiod controls how often a heartbeat is sent
sv_public controls whether heartbeats are sent at all (default: 0)
sv_masterextra1 added (points at a master server that a friend just put online)

------------------------------------------------------------------------
r2541 | molivier | 2002-10-19 12:12:49 +0200 (Sat, 19 Oct 2002) | 2 lines

Implemented a very simple video mode selection menu. The way it handles the various resolutions is still very naive, so expect another update soon.

------------------------------------------------------------------------
r2540 | molivier | 2002-10-19 11:43:46 +0200 (Sat, 19 Oct 2002) | 2 lines

Added a test when freeing textures (glt->image can be NULL if the program exits because of a lack of memory at startup). Also, Transfusion doesn't have a "start" map, so Transfusion dedicated servers shouldn't use it as their default map. Removed a preprocessor warning in r_shadow.c

------------------------------------------------------------------------
r2536 | havoc | 2002-10-17 04:44:08 +0200 (Thu, 17 Oct 2002) | 2 lines

trying less optimizations in hopes that it will fix the crashs

------------------------------------------------------------------------
r2535 | havoc | 2002-10-17 04:39:30 +0200 (Thu, 17 Oct 2002) | 2 lines

MSVC has a pathetic stack size.

------------------------------------------------------------------------
r2534 | havoc | 2002-10-17 00:33:16 +0200 (Thu, 17 Oct 2002) | 2 lines

oops, removed the wrong one

------------------------------------------------------------------------
r2533 | havoc | 2002-10-17 00:26:56 +0200 (Thu, 17 Oct 2002) | 2 lines

remove unused variables

------------------------------------------------------------------------
r2531 | havoc | 2002-10-16 23:48:14 +0200 (Wed, 16 Oct 2002) | 21 lines

fixed some dynamic lighting bugs related to glowing self
rmeshstate_t now has alphascale
now clears stencil from shadows differently (draws shadow volume over again to clear)
R_LightModel now does GL_Color or GL_UseColorArray depending on whether the model has any shading
model->DrawBaseLighting function is gone, now just a few special cases in the normal Draw function
removed R_NotCulledBox
added PVS_CullBox, R_CullSphere, and PVS_CullSphere
visiblevolume flag is gone from shadow rendering code (visible volumes are now automatic depending on what stage the shadow system is in)
R_DrawShadowVolumes is gone (now just a special option to R_ShadowVolumeLighting)
cubemap textures now upload correctly
doubled the bumpyness of surfaces to make bumpmapping noticable (still less than tenebrae)
fixed crash when loading external map textures
now supports _luma as an alternate name for _glow map textures (tenebrae compatibility)
can now override _bump, _gloss, and _glow/_luma textures that were generated from the map
bumpmapping works on the map now (that was a stupid typo...)
now uses alpha buffering for multi-pass lighting effects
r_shadows 3 now works on Geforce2 (2tex no3D 3 pass per layer) and Radeon (2tex 3D 2 pass per layer - Radeon has 3 texture units but the lighting code is most efficient with 2 units, and 3D textures use up 2 texture units on Radeon... lame...)
gloss isn't working yet
r_shadows 3 mode supports up to 64x overbright lighting now (by rendering light multiple times)
fixed palettes (this fixes oddities like seeing sky behind fullbrights)

------------------------------------------------------------------------
r2530 | molivier | 2002-10-16 10:26:48 +0200 (Wed, 16 Oct 2002) | 2 lines

Added back "turn left" and "turn right" to the Transfusion bind list. Added 2 new Transfusion maps (e4m8 and maim)

------------------------------------------------------------------------
r2529 | havoc | 2002-10-16 01:22:36 +0200 (Wed, 16 Oct 2002) | 2 lines

made the QueueWantsMore message a Con_DPrintf

------------------------------------------------------------------------
r2528 | havoc | 2002-10-14 21:37:40 +0200 (Mon, 14 Oct 2002) | 2 lines

cruft

------------------------------------------------------------------------
r2527 | havoc | 2002-10-14 21:34:01 +0200 (Mon, 14 Oct 2002) | 2 lines

fix jitter in interpolation of monster movement

------------------------------------------------------------------------
r2526 | havoc | 2002-10-14 21:05:23 +0200 (Mon, 14 Oct 2002) | 5 lines

R_LoadTexture functions take a palette pointer now
there are many palettes available now (d_8to24table renamed to palette_complete)
R_LoadTexture is gone, use R_LoadTexture2D instead
bumpmaps are now generated for models and maps (sigh, so much reworking of their loaders)

------------------------------------------------------------------------
r2522 | havoc | 2002-10-14 00:13:57 +0200 (Mon, 14 Oct 2002) | 24 lines

added TEXF_CLAMP flag for textures
r_shadows 3 mode is under heavy construction
changed pvsframecount stuff to be part of the model structure
new function Mod_BuildTextureVectorsAndNormals added
changed/improved how animating textures work
surface texture chains are now permanent for the lifetime of the model, and are specific to each submodel
surface textures now have a rendertype field which is updated every time R_PrepareSurfaces is called, values are SURFRENDER_ADD, SURFRENDER_ALPHA, or SURFRENDER_OPAQUE
added SHADERSTAGE_BASELIGHTING
added surfaceneighbors system (currently disabled because it increases load time greatly)
surface meshs are now allocated by a single function to simplify things
more heavy construction on static shadow volumes (which aren't working correctly)
VectorNormalize, VectorNormalize2, and VectorNormalizeDouble macros no longer produce infinite vectors if given null vectors
corrected names of dot3 enums
reduced duplicate code in texture manager with some new arrays for gl texture type enums
added GL_SetupView_Mode_PerspectiveInfiniteFarClip based on code from tenebrae
texture state management now has combinergb and combinealpha for each texture unit
aliasvert array went away
aliasvert_svectors, aliasvert_tvectors, and aliasvert_normals added (note: padded to 4 floats)
aliasvertnorm replaced with aliasvert_normals (adjusted code to use 4 float padding)
new r_light_* cvars allow tweaking of r_shadows 3 lighting system
R_DrawShadowSphere now works correctly
fixed fakeshadows appearing ontop of transparent stuff
got rid of unused RSurfShader_Wall_Fullbright

------------------------------------------------------------------------
r2520 | molivier | 2002-10-11 08:20:33 +0200 (Fri, 11 Oct 2002) | 2 lines

Added Frag'M to the Transfusion map list

------------------------------------------------------------------------
r2518 | havoc | 2002-10-09 19:25:05 +0200 (Wed, 09 Oct 2002) | 2 lines

fixed glowing entities disappearing randomly (by testing more thoroughly)

------------------------------------------------------------------------
r2515 | havoc | 2002-10-07 20:43:12 +0200 (Mon, 07 Oct 2002) | 2 lines

Elric rewrote the makefile, it is quite self explanatory when run.

------------------------------------------------------------------------
r2513 | havoc | 2002-10-07 01:09:46 +0200 (Mon, 07 Oct 2002) | 2 lines

now checks for both TexImage3D built into the OpenGL library and for GL_EXT_texture3D (glTexImage3DEXT, etc)

------------------------------------------------------------------------
r2512 | havoc | 2002-10-06 18:51:35 +0200 (Sun, 06 Oct 2002) | 3 lines

make r_shadows 3 mode mostly match lighting conditions of the lightmaps
r_shadows 3 mode now checks SURF_SHADOWCAST and SURF_SHADOWLIGHT flags

------------------------------------------------------------------------
r2511 | havoc | 2002-10-06 17:08:22 +0200 (Sun, 06 Oct 2002) | 2 lines

fix restart command

------------------------------------------------------------------------
r2510 | havoc | 2002-10-06 17:07:48 +0200 (Sun, 06 Oct 2002) | 2 lines

clean up map changes a little more

------------------------------------------------------------------------
r2509 | havoc | 2002-10-06 16:45:53 +0200 (Sun, 06 Oct 2002) | 3 lines

fix fragment texture image creation so it has depth 1
error if fragment texture is attempted with texture types other than 2D

------------------------------------------------------------------------
r2508 | havoc | 2002-10-06 16:43:11 +0200 (Sun, 06 Oct 2002) | 2 lines

GL_DrawRangeElements now reports if it got a bogus indexcount and vertex range

------------------------------------------------------------------------
r2507 | havoc | 2002-10-06 16:40:58 +0200 (Sun, 06 Oct 2002) | 2 lines

R_ShadowMesh_Finish now discards empty meshs

------------------------------------------------------------------------
r2506 | havoc | 2002-10-06 16:23:32 +0200 (Sun, 06 Oct 2002) | 2 lines

detect 3D textures as GL_EXT_texture3D again

------------------------------------------------------------------------
r2505 | havoc | 2002-10-06 15:58:23 +0200 (Sun, 06 Oct 2002) | 2 lines

use qbyte * math instead of void * math to keep MSVC happy

------------------------------------------------------------------------
r2504 | havoc | 2002-10-06 05:24:47 +0200 (Sun, 06 Oct 2002) | 3 lines

3D attenuation texture works now
also fixed the commandline options -width and such (untested)

------------------------------------------------------------------------
r2503 | havoc | 2002-10-05 21:32:43 +0200 (Sat, 05 Oct 2002) | 2 lines

backend now supports 1D, 2D, 3D, and Cubemap texture binding

------------------------------------------------------------------------
r2502 | havoc | 2002-10-05 16:38:14 +0200 (Sat, 05 Oct 2002) | 4 lines

texcoord arrays are now 3 component (padded to 4 floats)
rewrote zym model loader
partially rewrote skysphere rendering

------------------------------------------------------------------------
r2499 | havoc | 2002-10-05 00:31:51 +0200 (Sat, 05 Oct 2002) | 2 lines

now uploads a 3D attenuation texture (not used yet)

------------------------------------------------------------------------
r2498 | havoc | 2002-10-05 00:28:42 +0200 (Sat, 05 Oct 2002) | 3 lines

forgot to add prototypes for new texture functions to r_textures.h
fixed misreporting of texture memory use (was reporting 0 for all textures because sides was 0)

------------------------------------------------------------------------
r2497 | havoc | 2002-10-04 23:04:11 +0200 (Fri, 04 Oct 2002) | 4 lines

1D, 3D, and cubemap textures are now supported (in addition to 2D)
added detection of GL_EXT_texture3D, GL_ARB_texture_cube_map, and GL_ARB_texture_env_dot3
shadow volume rendering mode now depends on all of the above being present (but doesn't use them yet)

------------------------------------------------------------------------
r2496 | havoc | 2002-10-04 15:52:01 +0200 (Fri, 04 Oct 2002) | 4 lines

shadow volume rendering still very incomplete, but works mostly
committing this before I add 3D textures to the texture manager
(alert: this is the last version of the stencil shadow rendering that will work with TNT class hardware (and not well), 3D textures will be required and will not work on TNT class... sorry.  vertex just looks too horrible)

------------------------------------------------------------------------
r2494 | molivier | 2002-10-04 08:05:46 +0200 (Fri, 04 Oct 2002) | 2 lines

Added a couple more "const". Fixed "+map" in the command line for dedicated servers. Updated LordHavoc email address in the multiplayer menu. Removed some duplicated code.

------------------------------------------------------------------------
r2493 | havoc | 2002-10-03 19:11:24 +0200 (Thu, 03 Oct 2002) | 4 lines

massive coding has been done on shadow volumes (some scrapped code which will be removed, some incomplete code, etc)
some model fixes relating to gl_combine - r_quickmodels is gone
off-screen models were not being culled (oops)

------------------------------------------------------------------------
r2492 | molivier | 2002-10-03 08:51:52 +0200 (Thu, 03 Oct 2002) | 2 lines

From LordHavoc: the r_quickmodels cvar wasn't used anywhere; it's fixed.

------------------------------------------------------------------------
r2491 | molivier | 2002-10-03 08:36:54 +0200 (Thu, 03 Oct 2002) | 2 lines

Removed an unused variable in gl_draw.c (Forest, could you double check this one please?). Removed an useless include in vid_null.c

------------------------------------------------------------------------
r2490 | molivier | 2002-10-02 14:02:15 +0200 (Wed, 02 Oct 2002) | 2 lines

Fixed dedicated server (the server was never really spawned)

------------------------------------------------------------------------
r2489 | molivier | 2002-10-02 09:02:14 +0200 (Wed, 02 Oct 2002) | 2 lines

Made a few changes to makefile so we can switch compiler more easily

------------------------------------------------------------------------
r2488 | molivier | 2002-10-02 08:50:45 +0200 (Wed, 02 Oct 2002) | 2 lines

Tried to be a little smarter with the heartbeats, using a simple priority mecanism. Added a few "const" here and there in the net code. Fixed heartbeat code on Win32 (added Loop_Heartbeat and Datagram_Heartbeat to net_win.c; oups...)

------------------------------------------------------------------------
r2486 | havoc | 2002-09-30 20:01:08 +0200 (Mon, 30 Sep 2002) | 4 lines

optimized trianglefacing calculation, per Vic's recommendation (yes it's all one statement now)
shadow functions now take a vertex array pointer, to make them more broadly useful (in precomputation perhaps?)
beginning work on a precomputed shadow volumes system for static lights

------------------------------------------------------------------------
r2485 | havoc | 2002-09-30 16:55:28 +0200 (Mon, 30 Sep 2002) | 4 lines

bmodel shadow volumes
static lights (in maps with .lights files) now cast shadow volumes (this combined with the above makes dpdm1 and dpdm2 unplayably slow - need to do precomputed world shadow volumes)
(note: like the previous shadow volume commits, this is still just visible volumes when you use r_shadows 2, purely experimental still)

------------------------------------------------------------------------
r2484 | havoc | 2002-09-30 16:52:26 +0200 (Mon, 30 Sep 2002) | 2 lines

smoke from bullet impacts and rocket trails now grows in size a little as it fades

------------------------------------------------------------------------
r2482 | havoc | 2002-09-30 08:53:30 +0200 (Mon, 30 Sep 2002) | 2 lines

gl backend now has functions for color array and flat color states (GL_UseColorArray and GL_Color), this gets a 9.76% speed gain in bigass1 for me

------------------------------------------------------------------------
r2481 | havoc | 2002-09-30 05:37:53 +0200 (Mon, 30 Sep 2002) | 2 lines

fix changelevel, and simplify restart code

------------------------------------------------------------------------
r2480 | havoc | 2002-09-30 04:34:37 +0200 (Mon, 30 Sep 2002) | 2 lines

fix view blends

------------------------------------------------------------------------
r2479 | havoc | 2002-09-30 04:19:36 +0200 (Mon, 30 Sep 2002) | 2 lines

newline to keep gcc3 happy

------------------------------------------------------------------------
r2478 | havoc | 2002-09-30 04:07:32 +0200 (Mon, 30 Sep 2002) | 2 lines

forgot to commit this

------------------------------------------------------------------------
r2477 | havoc | 2002-09-30 03:57:43 +0200 (Mon, 30 Sep 2002) | 2 lines

new experimental shadow volumes, try r_shadows 2 to see the shadow volumes cast by dlights

------------------------------------------------------------------------
r2476 | havoc | 2002-09-30 03:09:13 +0200 (Mon, 30 Sep 2002) | 2 lines

added radius and radius2 (squared radius) fields to model structure

------------------------------------------------------------------------
r2475 | havoc | 2002-09-30 03:05:10 +0200 (Mon, 30 Sep 2002) | 2 lines

ent field added back to dlight structures

------------------------------------------------------------------------
r2474 | havoc | 2002-09-30 03:00:31 +0200 (Mon, 30 Sep 2002) | 3 lines

now uses more smoke particles for gunshots, looks better
more WORKINGLQUAKE stuff

------------------------------------------------------------------------
r2473 | havoc | 2002-09-30 02:55:17 +0200 (Mon, 30 Sep 2002) | 2 lines

added -gl_driver commandline option, and cleaned up some glX init stuff a bit

------------------------------------------------------------------------
r2469 | havoc | 2002-09-29 04:06:55 +0200 (Sun, 29 Sep 2002) | 2 lines

fix DrawQ_Fill rendering (Pic with no string)

------------------------------------------------------------------------
r2468 | havoc | 2002-09-29 01:59:46 +0200 (Sun, 29 Sep 2002) | 4 lines

fixed vid_restart
now destroys the window (did not before)
fixed stupid behavior in MainWndProc handling of WM_DESTROY (it's no longer caught)

------------------------------------------------------------------------
r2467 | havoc | 2002-09-28 14:41:50 +0200 (Sat, 28 Sep 2002) | 2 lines

needed one more prototype

------------------------------------------------------------------------
r2466 | havoc | 2002-09-28 14:34:15 +0200 (Sat, 28 Sep 2002) | 2 lines

trying to fix many forward references in input code

------------------------------------------------------------------------
r2465 | havoc | 2002-09-28 12:54:36 +0200 (Sat, 28 Sep 2002) | 3 lines

major speedup to alias model fake shadow rendering
now traces in direction of light instead of straight down, this causes a shadow to be cast on a wall in some cases (desirable)

------------------------------------------------------------------------
r2464 | havoc | 2002-09-28 12:50:34 +0200 (Sat, 28 Sep 2002) | 3 lines

disabled smoke from explosions, it was a minor effect and used too much fillrate
added fractalnoise to the WORKINGLQUAKE section at the top, and fixed an oldtime reference in WORKINGLQUAKE code

------------------------------------------------------------------------
r2463 | havoc | 2002-09-28 12:23:16 +0200 (Sat, 28 Sep 2002) | 2 lines

fix restart command (can't do the "connect local" for a restart)

------------------------------------------------------------------------
r2457 | havoc | 2002-09-28 07:35:21 +0200 (Sat, 28 Sep 2002) | 2 lines

map and load commands are now delayed until the video system is started, this fixes crashs caused by the video system starting after the configs are read

------------------------------------------------------------------------
r2456 | havoc | 2002-09-28 06:44:44 +0200 (Sat, 28 Sep 2002) | 2 lines

2D is now drawn using R_Mesh system

------------------------------------------------------------------------
r2455 | havoc | 2002-09-28 06:43:45 +0200 (Sat, 28 Sep 2002) | 2 lines

fixed glOrtho call

------------------------------------------------------------------------
r2454 | havoc | 2002-09-28 06:42:02 +0200 (Sat, 28 Sep 2002) | 2 lines

added sparks and smoke to explosions

------------------------------------------------------------------------
r2453 | havoc | 2002-09-27 14:02:23 +0200 (Fri, 27 Sep 2002) | 4 lines

CL_TraceLine can now return what entity was hit (this isn't actually used, and accounts for most of the changed files)
r_shadows returns, currently only supported on alias models (they are the only ones with a DrawFakeShadow function)
added Matrix4x4_Transform3x3

------------------------------------------------------------------------
r2452 | havoc | 2002-09-27 09:30:05 +0200 (Fri, 27 Sep 2002) | 4 lines

stencil is now supported (optional, off by default, use vid_stencil to enable)
vid_ cvars are updated when VID_Mode succeeds
GL stencil functions enabled

------------------------------------------------------------------------
r2451 | havoc | 2002-09-27 07:49:29 +0200 (Fri, 27 Sep 2002) | 2 lines

alias mdl/md2 models now have a mdlmd2data_triangleneighbors array

------------------------------------------------------------------------
r2450 | havoc | 2002-09-27 07:23:34 +0200 (Fri, 27 Sep 2002) | 3 lines

added Mod_FindTriangleWithEdge and Mod_BuildTriangleNeighbors functions (not used by anything)
added Mod_LoadModels function, which is called when renderer is restarted or "modelflush" is used, it reloads all models that are used

------------------------------------------------------------------------
r2449 | havoc | 2002-09-27 07:06:51 +0200 (Fri, 27 Sep 2002) | 2 lines

added newline to end of Draw_CachePic error message

------------------------------------------------------------------------
r2447 | molivier | 2002-09-26 09:28:53 +0200 (Thu, 26 Sep 2002) | 2 lines

Updated Transfusion map list

------------------------------------------------------------------------
r2446 | molivier | 2002-09-26 09:20:59 +0200 (Thu, 26 Sep 2002) | 2 lines

The call to alloca has been removed. This function has a quite bad reputation and MinGW didn't want it anyway.

------------------------------------------------------------------------
r2445 | havoc | 2002-09-26 04:55:14 +0200 (Thu, 26 Sep 2002) | 2 lines

increased maximum stack depth

------------------------------------------------------------------------
r2444 | havoc | 2002-09-26 04:38:38 +0200 (Thu, 26 Sep 2002) | 2 lines

limit entity movement lerp to 10th of a second

------------------------------------------------------------------------
r2443 | havoc | 2002-09-26 03:45:12 +0200 (Thu, 26 Sep 2002) | 2 lines

fix for repeated mode switchs losing keyboard/mouse focus

------------------------------------------------------------------------
r2442 | havoc | 2002-09-26 03:24:41 +0200 (Thu, 26 Sep 2002) | 13 lines

this commit adds video mode switching, and preferred mode is saved to config, no more need for -window/-width/-height/-bpp (they still work)
IN_Init and IN_Shutdown code has been merged into VID_InitMode and VID_Shutdown code in each of the video systems
VID_InitCvars renamed to VID_Shared_Init
VID_Open and VID_Close functions added in vid_shared, Host_Init now calls VID_Open
S_Open/Close and CDAudio_Open/Close added (none of these do anything yet)
VID_Open and VID_Close call R_Modules_Start, S_Open, and CDAudio_Open and their corresponding Close functions
VID_Restart_f added (vid_restart command)
vid_hidden now starts true (to avoid any refreshs until video is started)
vid_fullscreen/width/height/bitsperpixel are now saved to config
VID_Open is called after configs are parsed
Render_Init now longer starts/stops modules
IN_MouseEvent in vid_wgl.c no longer clamps pitch (since that's done by IN_PostMove)

------------------------------------------------------------------------
r2441 | havoc | 2002-09-25 04:38:01 +0200 (Wed, 25 Sep 2002) | 2 lines

added -gl_driver commandline option, it's useless though (crashs when I try it on my voodoo2)

------------------------------------------------------------------------
r2437 | havoc | 2002-09-25 00:17:31 +0200 (Wed, 25 Sep 2002) | 2 lines

fix warnings

------------------------------------------------------------------------
r2436 | havoc | 2002-09-25 00:11:44 +0200 (Wed, 25 Sep 2002) | 2 lines

fix some prototype warnings

------------------------------------------------------------------------
r2435 | havoc | 2002-09-25 00:11:08 +0200 (Wed, 25 Sep 2002) | 2 lines

update file list

------------------------------------------------------------------------
r2434 | havoc | 2002-09-25 00:10:21 +0200 (Wed, 25 Sep 2002) | 2 lines

fix a warning on argv

------------------------------------------------------------------------
r2433 | havoc | 2002-09-25 00:09:40 +0200 (Wed, 25 Sep 2002) | 2 lines

remove an unused extension function list

------------------------------------------------------------------------
r2432 | havoc | 2002-09-24 14:16:28 +0200 (Tue, 24 Sep 2002) | 8 lines

Thanks to Elric for adding dpmaster support!
slist command renamed to net_slist, net_inetslist command added
"heartbeat" command notifies master server(s) of your server's presence (this is automatic, but you can force a heartbeat)
sv_master1 through sv_master4 cvars contain master server addresses, they all default to "" (none), this may change if someone hosts a darkplaces master server and wants it added to the defaults...  (note: these cvars ARE saved to config)
com_modname contains the currently running mod directory name (for example id1, darkplaces, transfusion, etc)
some Con_DPrintf's have been added to the server query code, so if you want to know if people are checking out your server, it should tell you about it now (I think?)
some Con_DPrintf's exist in the inetslist code so you can watch the packet flow

------------------------------------------------------------------------
r2428 | havoc | 2002-09-24 10:38:27 +0200 (Tue, 24 Sep 2002) | 2 lines

whitespace changes by Elric

------------------------------------------------------------------------
r2427 | havoc | 2002-09-24 09:42:04 +0200 (Tue, 24 Sep 2002) | 5 lines

static crosshair is now drawn during sbar stage (where it should be), fixes the bug where it appeared infront of the menus
world crosshair size is now constant on the screen
rearranged code greatly
it just works better, ok?

------------------------------------------------------------------------
r2426 | havoc | 2002-09-24 09:05:13 +0200 (Tue, 24 Sep 2002) | 4 lines

now pretends gfx.wad pics are in the gfx/ directory, this changes the override path for gfx.wad pics (statusbar images in other words) to be for example gfx/blah.tga, however the old override path (no prepended gfx/) is still supported for compatibility with previous versions (mainly just for sake of conchars and conback)
Sbar_Init now called from Render_Init instead of Host_Init (it was being called before the texture system was started...)
Sbar_Init now registers an sbar module, with corresponding start/shutdown/newmap functions, so when the renderer is restarted, the pics are precached again

------------------------------------------------------------------------
r2425 | havoc | 2002-09-24 08:59:49 +0200 (Tue, 24 Sep 2002) | 2 lines

fixed.

------------------------------------------------------------------------
r2424 | havoc | 2002-09-23 08:13:17 +0200 (Mon, 23 Sep 2002) | 2 lines

default to 640x480x16 again, just for consistency with other engines

------------------------------------------------------------------------
r2423 | havoc | 2002-09-23 07:59:01 +0200 (Mon, 23 Sep 2002) | 2 lines

wglGetExtensionsString is properly detected now (was checking for an extension string, but none is present outside the wgl extensions list, which is a chicken and egg problem, now just checks if the function exists, like the spec says to do)

------------------------------------------------------------------------
r2422 | havoc | 2002-09-23 07:56:04 +0200 (Mon, 23 Sep 2002) | 2 lines

VID_CompareMode removed

------------------------------------------------------------------------
r2421 | havoc | 2002-09-23 06:37:33 +0200 (Mon, 23 Sep 2002) | 5 lines

almost completely rewrote vid_wgl's mode code, there is no modelist of any kind anymore
vid_wgl works again
VID_Init renamed to VID_InitMode, it returns false if it was unsuccessful
VID_Mode added, which prints mode change message to console and passes on to VID_InitMode

------------------------------------------------------------------------
r2420 | havoc | 2002-09-23 06:24:51 +0200 (Mon, 23 Sep 2002) | 2 lines

now uses VID_Shutdown instead of VID_SetDefaultMode (which hardly does anything in vid_wgl anyway)

------------------------------------------------------------------------
r2419 | havoc | 2002-09-23 06:20:04 +0200 (Mon, 23 Sep 2002) | 2 lines

no need to include winquake.h

------------------------------------------------------------------------
r2418 | eviltypeguy | 2002-09-23 04:02:33 +0200 (Mon, 23 Sep 2002) | 2 lines

Make formatting sane

------------------------------------------------------------------------
r2414 | havoc | 2002-09-22 02:29:49 +0200 (Sun, 22 Sep 2002) | 2 lines

fixed crash on startup and shutdown

------------------------------------------------------------------------
r2413 | havoc | 2002-09-22 02:19:43 +0200 (Sun, 22 Sep 2002) | 3 lines

VID_Init now takes an int bpp parameter
finished some work on the wgl VID_Init code

------------------------------------------------------------------------
r2412 | havoc | 2002-09-22 02:17:46 +0200 (Sun, 22 Sep 2002) | 2 lines

const.

------------------------------------------------------------------------
r2411 | havoc | 2002-09-22 02:16:50 +0200 (Sun, 22 Sep 2002) | 2 lines

Mem_Free on a const pointer apparently irritates MSVC but not gcc...  hush MSVC

------------------------------------------------------------------------
r2410 | havoc | 2002-09-22 01:18:41 +0200 (Sun, 22 Sep 2002) | 2 lines

DOS line endings

------------------------------------------------------------------------
r2397 | havoc | 2002-09-20 07:29:09 +0200 (Fri, 20 Sep 2002) | 2 lines

fix for glowing invisible models showing up (artifact items staying visible after pickup in darkplaces mod - the glow still stays though)

------------------------------------------------------------------------
r2396 | havoc | 2002-09-20 01:51:53 +0200 (Fri, 20 Sep 2002) | 2 lines

fix for beams coming from invisible objects

------------------------------------------------------------------------
r2392 | havoc | 2002-09-19 20:01:45 +0200 (Thu, 19 Sep 2002) | 3 lines

shuffled cl_light and some of cl_tent into cl_main and remaining cl_tent code into cl_parse
got rid of bitprofile console command because it only worked for old protocol (probably should add it back for new protocol though)

------------------------------------------------------------------------
r2391 | havoc | 2002-09-18 07:02:10 +0200 (Wed, 18 Sep 2002) | 2 lines

disable profiling by default

------------------------------------------------------------------------
r2390 | havoc | 2002-09-18 06:57:21 +0200 (Wed, 18 Sep 2002) | 2 lines

move CL_RelinkBeams after CL_RelinkNetworkEntities so position is up to date

------------------------------------------------------------------------
r2389 | havoc | 2002-09-18 06:51:59 +0200 (Wed, 18 Sep 2002) | 3 lines

make lightning come from player's gun
fix lightning visibility (wasn't calculating bounding box before)

------------------------------------------------------------------------
r2388 | havoc | 2002-09-18 05:50:21 +0200 (Wed, 18 Sep 2002) | 3 lines

matchpattern can now be case insensitive if desired
pak filename matching is now case insensitive

------------------------------------------------------------------------
r2387 | havoc | 2002-09-18 01:23:45 +0200 (Wed, 18 Sep 2002) | 2 lines

you can now build a darkplaces-dedicated executable as well as a darkplaces-glx executable (and infact this is done automatically :)

------------------------------------------------------------------------
r2386 | havoc | 2002-09-17 23:47:10 +0200 (Tue, 17 Sep 2002) | 2 lines

sparks and rain are now beam particles

------------------------------------------------------------------------
r2385 | havoc | 2002-09-17 23:27:46 +0200 (Tue, 17 Sep 2002) | 2 lines

added R_CalcBeamVerts function, calculates vertex array for beam polygon

------------------------------------------------------------------------
r2384 | havoc | 2002-09-17 23:25:51 +0200 (Tue, 17 Sep 2002) | 3 lines

colors for DrawQ_Mesh are now float rather than byte, and vertices are padded to 4 floats per vertex
R_DrawQueue conversion to R_Mesh is getting closer to done

------------------------------------------------------------------------
r2383 | havoc | 2002-09-17 03:40:59 +0200 (Tue, 17 Sep 2002) | 8 lines

m.wantoverbright is gone
done manually by the few things that wanted it (tweaking the texrgbscale in other words, and their own local colorscale variables)
mesh_colorscale renamed to r_colorscale, and now available throughout rendering (no need to wait for the results of R_Mesh_State before scaling your colors)
lightscalebit renamed to r_lightmapscalebit
lightscale is gone (wasn't used)
msurface_t cached_lightscalebit renamed accordingly to cached_lightmapscalebit
starting work on converting the 2D system to use R_Mesh calls

------------------------------------------------------------------------
r2379 | havoc | 2002-09-15 22:13:59 +0200 (Sun, 15 Sep 2002) | 4 lines

integer dlight code is now 32bit (instead of 64bit)
stain creation code is now floating point
stain creation code is now linear falloff instead of 1/(x*x), to make stains more consistent with respect to radius (their center density is exactly known)

------------------------------------------------------------------------
r2378 | havoc | 2002-09-14 02:25:02 +0200 (Sat, 14 Sep 2002) | 2 lines

enlarge bbox for visibility purposes if there is a glow or other such effect

------------------------------------------------------------------------
r2376 | havoc | 2002-09-13 06:03:54 +0200 (Fri, 13 Sep 2002) | 2 lines

GL_SetupView_* functions added, they replace most of R_Mesh_Start's functionality (it still exists and does the remaining things), GL_SetupView_* functions should be used for setting up a view (obviously) for rendering, view orientation and perspective and all that...

------------------------------------------------------------------------
r2375 | havoc | 2002-09-13 05:33:36 +0200 (Fri, 13 Sep 2002) | 2 lines

unused variable arraylocked removed

------------------------------------------------------------------------
r2373 | havoc | 2002-09-13 00:31:18 +0200 (Fri, 13 Sep 2002) | 2 lines

got rid of gl_mesh_drawmode, now only gl_mesh_drawrangeelements remains, this got rid of support for non-vertex-array rendering, also now c_meshs and c_meshtris are counted by GL_DrawRangeElements (c_meshtris was renamed to c_meshelements)

------------------------------------------------------------------------
r2372 | havoc | 2002-09-12 18:07:13 +0200 (Thu, 12 Sep 2002) | 4 lines

varray_element is gone, instead you pass your own element array to R_Mesh_Draw
this got a 3.5% speed gain in cavetest2bench
also, R_Mesh_ResizeCheck now takes only a numverts parameter, since numtriangles was only used for the varray_element array

------------------------------------------------------------------------
r2371 | havoc | 2002-09-12 16:55:25 +0200 (Thu, 12 Sep 2002) | 3 lines

manually inlined GL_LockArray and GL_UnlockArray in the only places they were used
RGB fragment textures are no longer aligned on 3 pixel boundaries, changed UNPACK_ALIGNMENT to allow this

------------------------------------------------------------------------
r2365 | havoc | 2002-09-12 14:20:01 +0200 (Thu, 12 Sep 2002) | 2 lines

added pr_traceqc cvar, to enable serious spew (printing every opcode executed to console) for extreme debugging

------------------------------------------------------------------------
r2364 | havoc | 2002-09-12 14:15:34 +0200 (Thu, 12 Sep 2002) | 2 lines

a little extra error checking in keynum lookup

------------------------------------------------------------------------
r2363 | havoc | 2002-09-11 17:05:44 +0200 (Wed, 11 Sep 2002) | 13 lines

VID_Init now takes mode settings (fullscreen, width, height)
commandline options like -window and -width are now parsed by vid_shared code
vid_width, vid_height, and vid_bitsperpixel cvars added, vid_mode removed
VID_CompareMode added, for simpler mode matching (returns a double, smaller value is better match)
GL_OpenLibrary takes a library name to load
GL_OpenLibrary, GL_CloseLibrary, and GL_GetProcAddress have been moved to platform specific vid_ files (wgl and glx)
gl_platform added (example values: "WGL", "GLX")
gl_platformextensions added (containing any extensions reported by platform specific strings)
gl_checkextension renamed to GL_CheckExtension for consistency
glXQueryExtensionsString and glXGetProcAddressARB support
looks up GLX_SGI_video_sync extension
removed halfscreen hack from vid_wgl (the code that tried to identify dual monitor configurations and use only one of them)

------------------------------------------------------------------------
r2362 | havoc | 2002-09-11 16:55:46 +0200 (Wed, 11 Sep 2002) | 3 lines

whitespace
lots of things are now const pointers

------------------------------------------------------------------------
r2361 | havoc | 2002-09-11 16:12:30 +0200 (Wed, 11 Sep 2002) | 2 lines

check for -safe

------------------------------------------------------------------------
r2360 | havoc | 2002-09-11 15:59:53 +0200 (Wed, 11 Sep 2002) | 2 lines

R_SetSkyBox now takes a const char *

------------------------------------------------------------------------
r2359 | havoc | 2002-09-11 15:57:54 +0200 (Wed, 11 Sep 2002) | 2 lines

whitespace

------------------------------------------------------------------------
r2358 | havoc | 2002-09-11 15:54:36 +0200 (Wed, 11 Sep 2002) | 2 lines

check for -safe

------------------------------------------------------------------------
r2357 | havoc | 2002-09-11 15:49:07 +0200 (Wed, 11 Sep 2002) | 2 lines

whitespace

------------------------------------------------------------------------
r2356 | havoc | 2002-09-11 15:48:31 +0200 (Wed, 11 Sep 2002) | 2 lines

check for -safe

------------------------------------------------------------------------
r2355 | havoc | 2002-09-11 06:03:27 +0200 (Wed, 11 Sep 2002) | 5 lines

BoxOnPlaneSideFunc code - gone, replaced by BoxOnPlaneSide
BOX_ON_PLANE_SIDE macro - gone, no replacement necessary (use BoxOnPlaneSide)
R_CullBox and R_CulledBox macros have been replaced by optimized functions
this gets a minor speed gain overall

------------------------------------------------------------------------
r2354 | havoc | 2002-09-11 03:19:39 +0200 (Wed, 11 Sep 2002) | 2 lines

major speed gain in cavetest2 by checking if the portal is facing the wrong way

------------------------------------------------------------------------
r2353 | havoc | 2002-09-11 02:15:23 +0200 (Wed, 11 Sep 2002) | 2 lines

memheaders are now doubly linked, so Mem_Free goes faster than it used to

------------------------------------------------------------------------
r2352 | havoc | 2002-09-11 01:04:07 +0200 (Wed, 11 Sep 2002) | 2 lines

corrected an error message in .lights code

------------------------------------------------------------------------
r2351 | havoc | 2002-09-11 00:47:05 +0200 (Wed, 11 Sep 2002) | 2 lines

no need to update lightmaps if using r_vertexsurfaces

------------------------------------------------------------------------
r2350 | havoc | 2002-09-11 00:27:59 +0200 (Wed, 11 Sep 2002) | 3 lines

optimizing R_DrawSurfaces and WorldNode functions
visframe and pvsframe are now arrays rather than part of the surface struct, resulting in less cache misses

------------------------------------------------------------------------
r2349 | havoc | 2002-09-10 19:17:18 +0200 (Tue, 10 Sep 2002) | 2 lines

enable optimizations again (oops)

------------------------------------------------------------------------
r2348 | havoc | 2002-09-10 19:12:15 +0200 (Tue, 10 Sep 2002) | 3 lines

surfaces are now texture sorted rather than shader sorted, OpaqueWall renderers have been reorganized to minimize state checks, which offers a minor speedup
r_vertexsurfacesthreshold is gone, no longer supported...

------------------------------------------------------------------------
r2347 | havoc | 2002-09-10 18:54:12 +0200 (Tue, 10 Sep 2002) | 2 lines

fixed combine overbright behavior

------------------------------------------------------------------------
r2346 | havoc | 2002-09-09 17:58:36 +0200 (Mon, 09 Sep 2002) | 2 lines

expanded console buffer from 16k to 128k, and changed scroll amount to be dependent on visible console height (scrolls half the visible area instead of just 2 lines)

------------------------------------------------------------------------
r2345 | havoc | 2002-09-09 17:31:26 +0200 (Mon, 09 Sep 2002) | 2 lines

fixed typo

------------------------------------------------------------------------
r2344 | havoc | 2002-09-09 17:30:16 +0200 (Mon, 09 Sep 2002) | 3 lines

svs.clients is now allocated dynamically according to svs.maxclients, and there is now a function for updating svs.maxclients called SV_SetMaxClients
this cuts the memory usage in singleplayer by 17mb

------------------------------------------------------------------------
r2343 | havoc | 2002-09-09 16:30:09 +0200 (Mon, 09 Sep 2002) | 2 lines

removed modelsortedsurfaces

------------------------------------------------------------------------
r2342 | havoc | 2002-09-06 18:51:51 +0200 (Fri, 06 Sep 2002) | 2 lines

mempools now have sentinel checks, for completeness

------------------------------------------------------------------------
r2341 | havoc | 2002-09-06 14:05:29 +0200 (Fri, 06 Sep 2002) | 2 lines

whitespace cleanup

------------------------------------------------------------------------
r2340 | havoc | 2002-09-06 13:48:47 +0200 (Fri, 06 Sep 2002) | 2 lines

transform matrix is now separate from R_Mesh_State, a new function called R_Mesh_Matrix takes up the task of changing transforms, and is used a lot less frequently in the engine than R_Mesh_State, this gets a nice speed gain in cavetest2

------------------------------------------------------------------------
r2339 | havoc | 2002-09-06 11:45:51 +0200 (Fri, 06 Sep 2002) | 4 lines

now uses hardware transforms
fixed a bunch of bugs in matrixlib
view matrix is now calculated using Matrix4x4 functions instead of GL calls

------------------------------------------------------------------------
r2338 | havoc | 2002-09-06 09:14:15 +0200 (Fri, 06 Sep 2002) | 2 lines

corrected function names reported in various backend not active errors (by using a #define that uses __func__ to get the function name as a string)

------------------------------------------------------------------------
r2337 | havoc | 2002-09-06 08:51:18 +0200 (Fri, 06 Sep 2002) | 7 lines

vertex arrays renamed to varray_ and exposed to rest of engine
mesh_maxtris and mesh_maxverts exposed (really only intended for R_Mesh_ResizeCheck #define)
R_Mesh_GetBuffer is gone, R_Mesh_State takes it's place for most of it's functionality
R_Mesh_ResizeCheck (a #define) will expand arrays on the fly if a mesh is too big (note: be sure to use this if you have a mesh that may be more than 1024 triangles, 3072 verts)
R_Mesh_Draw takes the place of R_Mesh_Render and takes two parameters (number of verts and number of triangles)
fixed bug that caused sky to appear through models when sky was onscreen (R_DrawWorld must be called at a specific point in rendering, had forgotten that)

------------------------------------------------------------------------
r2334 | havoc | 2002-09-05 16:38:39 +0200 (Thu, 05 Sep 2002) | 2 lines

currenttriangle and currentvertex no longer exist, also firstvert and firsttriangle no longer exist in the internal mesh structure

------------------------------------------------------------------------
r2333 | havoc | 2002-09-05 16:24:16 +0200 (Thu, 05 Sep 2002) | 2 lines

surfvertex_t is gone, in it's place are non-interleaved arrays, which keeps things simpler...

------------------------------------------------------------------------
r2332 | havoc | 2002-09-05 16:22:28 +0200 (Thu, 05 Sep 2002) | 2 lines

moved state update from R_Mesh_Render to R_Mesh_Draw_GetBuffer

------------------------------------------------------------------------
r2331 | havoc | 2002-09-05 15:05:23 +0200 (Thu, 05 Sep 2002) | 2 lines

buf_mesh is no longer a pointer, since there is only one of it

------------------------------------------------------------------------
r2330 | havoc | 2002-09-05 14:07:55 +0200 (Thu, 05 Sep 2002) | 3 lines

added r_surfaceworldnode and r_cullsurface cvars (it is recommended that these both be on, or both be off)
shuffled around WorldNode, DrawSurfaces, PrepareSurfaces, SurfMarkLights, and other related code a great deal, it is now somewhat cleaner

------------------------------------------------------------------------
r2329 | havoc | 2002-09-05 12:24:32 +0200 (Thu, 05 Sep 2002) | 2 lines

added getsurfaceclippedpoint builtin

------------------------------------------------------------------------
r2328 | havoc | 2002-09-05 12:10:47 +0200 (Thu, 05 Sep 2002) | 28 lines

you can now (try to) play in maps you don't have, and models you don't have are shown as little multicolored things
added CL_BoundingBoxForEntity to clean up the various mins/maxs calculations in the engine
no longer spews clc_nops to server past the first signon stage
the clc_nops sent to the server are now sent using unreliable packets (because queuing them up as reliable made no sense and spewed warnings when developer was on)
failed client to server reliable messages now print a hexdump of the message contents when developer is on
there is now Mod_PointContents (this is different than Mod_PointInLeaf because a lot of calls to Mod_PointInLeaf were just wanting the contents, and it's not convenient to check for NULL (no world model) in the caller
r_speeds no longer reports a "walls" count, as it was often nearly identical to faces and simplified the code to remove it
r_speeds faces count may count bmodels twice if some contain sky polygons (this is less technically correct, but more performance correct - it is processing the faces twice)
DrawQ_Pic won't crash if given a NULL picname now (won't draw it either)
r_cullsurfaces cvar added
r_surfacesworldnode cvar added
surface backface culling moved to PrepareSurfaces
simplified a lot of worldnode related stuff
surf->pvsframe and node->pvsframe and leaf->pvsframe simplified worldnode code, and only needs updating when leaf changes (this is partly how quake did things)
leaf->visframe no longer exists, this meant changing/cleaning a lot of code
leaf->dlightbits and leaf->dlightframe no longer exist, this meant doing TraceLine's to see if dlights should shine on models and such (but only if within radius of them)
console is forced if there's nothing else to look at, this is tracked separately from whether the user wants a console (key_consoleactive is now bits, but most code should just check if it is non-zero)
RecursiveHullCheckPoint has been enabled again, only invoked if trace length is exactly 0
SZ_GetSpace overflow warnings/errors have newlines at the end now
R_VisibleCullBox is gone (it relied on leaf->visframe), uses R_CullBox instead
move around some R_NewMap code into more suitable modules
rearranged R_RenderView code a lot, to group things more appropriately
dlights work correctly on bmodels now
PR_Crash function added, to properly shutdown progs interpreter (reset it's stack) and print out a crash report
PR_RunError went away, it has been replaced by Host_Error (which now calls PR_Crash incase it happend during progs execution)
R_ResetQuakeSky and R_ResetSkyBox added, to clean up some sky related hacks in model loading
various QC builtins added for getting info on surfaces from the engine

------------------------------------------------------------------------
r2327 | havoc | 2002-09-02 12:44:25 +0200 (Mon, 02 Sep 2002) | 9 lines

you can now open/close the console independently of menu and messagemode
console catchs input before anything else
console appears ontop of anything else
console is no longer forced fullscreen when there is nothing else to show
shuffled around the 2D drawing calls in CL_UpdateScreen
now only console pauses singleplayer, instead of console/menu/messagemode
simplified console singleplayer pausing code a bit
mouse grabbing is now only forced off when console is down, not when menu or messagemode is shown

------------------------------------------------------------------------
r2326 | havoc | 2002-09-02 08:46:43 +0200 (Mon, 02 Sep 2002) | 2 lines

make sure zFar is at least 64 units to avoid feeding a bogus value to glFrustum

------------------------------------------------------------------------
r2325 | molivier | 2002-09-02 08:20:07 +0200 (Mon, 02 Sep 2002) | 2 lines

Updated Transfusion map list

------------------------------------------------------------------------
r2324 | havoc | 2002-09-01 14:24:44 +0200 (Sun, 01 Sep 2002) | 2 lines

don't allocate resizebuffer for an R_Upload that doesn't need it (native RGB or RGBA fragment texture)

------------------------------------------------------------------------
r2323 | havoc | 2002-09-01 03:06:02 +0200 (Sun, 01 Sep 2002) | 2 lines

free texture processing buffers each frame so they don't hang around wasting memory

------------------------------------------------------------------------
r2322 | havoc | 2002-09-01 03:05:02 +0200 (Sun, 01 Sep 2002) | 2 lines

reduced default max particles from 16384 to 8192

------------------------------------------------------------------------
r2321 | havoc | 2002-08-31 11:17:29 +0200 (Sat, 31 Aug 2002) | 2 lines

improved pr_fields command to list how many entities are using each entity field and give more information on how many fields are needed and how much memory they need

------------------------------------------------------------------------
r2320 | havoc | 2002-08-31 11:15:24 +0200 (Sat, 31 Aug 2002) | 2 lines

removed console text left/right edge margins (giving an extra 2 chars per line)

------------------------------------------------------------------------
r2319 | havoc | 2002-08-30 15:18:11 +0200 (Fri, 30 Aug 2002) | 2 lines

weapon models were not being lit in maps using .lights

------------------------------------------------------------------------
r2318 | havoc | 2002-08-30 15:17:32 +0200 (Fri, 30 Aug 2002) | 2 lines

commented out bit-hacking 1/sqrt code

------------------------------------------------------------------------
r2317 | havoc | 2002-08-30 15:16:43 +0200 (Fri, 30 Aug 2002) | 2 lines

consistency cleanup of a (disabled) part of Invert_Simple

------------------------------------------------------------------------
r2316 | havoc | 2002-08-30 15:13:56 +0200 (Fri, 30 Aug 2002) | 2 lines

MSVC updated the project file, why I'm not sure, oh well...

------------------------------------------------------------------------
r2315 | havoc | 2002-08-30 15:09:25 +0200 (Fri, 30 Aug 2002) | 2 lines

changed to use C runtime library DLL instead of static linking it

------------------------------------------------------------------------
r2314 | havoc | 2002-08-30 11:33:04 +0200 (Fri, 30 Aug 2002) | 2 lines

fixed models getting dark in the distance when fogged bug (thanks to Elric for reporting this, trivial fix, was a silly mistake on my part)

------------------------------------------------------------------------
r2313 | havoc | 2002-08-30 04:20:42 +0200 (Fri, 30 Aug 2002) | 2 lines

fixed bug which caused all models to be untextured if they used internal skins

------------------------------------------------------------------------
r2312 | havoc | 2002-08-30 04:06:14 +0200 (Fri, 30 Aug 2002) | 2 lines

draw models which have no textures using the notexture checkerboard

------------------------------------------------------------------------
r2311 | havoc | 2002-08-30 03:27:17 +0200 (Fri, 30 Aug 2002) | 2 lines

support for loading external skins that don't exist inside the model

------------------------------------------------------------------------
r2310 | havoc | 2002-08-29 16:14:34 +0200 (Thu, 29 Aug 2002) | 2 lines

fixed viewmodel (it wasn't drawing because it's matrix was empty), fixed a bug with scaling in Matrix4x4_CreateFromQuakeEntity (and Matrix3x4 to match), added some extra code to Matrix4x4_Invert_Simple (and Matrix3x4) to further clarify the scaling inversion

------------------------------------------------------------------------
r2309 | havoc | 2002-08-29 14:45:24 +0200 (Thu, 29 Aug 2002) | 2 lines

fixed crash when ent->skinnum >= model->numskins

------------------------------------------------------------------------
r2308 | havoc | 2002-08-29 14:44:34 +0200 (Thu, 29 Aug 2002) | 2 lines

speed gain in lightmap updates

------------------------------------------------------------------------
r2299 | havoc | 2002-08-28 16:33:20 +0200 (Wed, 28 Aug 2002) | 4 lines

optimizations to rendering
particle lighting is no longer supported, sorry
particle visibility is no longer checked, it was wasting too much time

------------------------------------------------------------------------
r2298 | havoc | 2002-08-28 15:35:31 +0200 (Wed, 28 Aug 2002) | 2 lines

fix various fog bugs, and also fix missing colormap layer bugs (specifically if the base/merged texture is missing, as it is on a lava ball for instance)

------------------------------------------------------------------------
r2297 | havoc | 2002-08-28 14:56:12 +0200 (Wed, 28 Aug 2002) | 3 lines

no more m.transparent, transparent surfaces are sorted using MeshQueue now
glow textures were being rendered using detail texture coordinates, fixed

------------------------------------------------------------------------
r2296 | havoc | 2002-08-28 14:14:11 +0200 (Wed, 28 Aug 2002) | 2 lines

added lighting options (and explosion clipping) to effects options menu

------------------------------------------------------------------------
r2295 | havoc | 2002-08-28 13:56:00 +0200 (Wed, 28 Aug 2002) | 10 lines

most of the framework for hardware accelerated transforms is back, just the actual gl calls need to be put in, but that will be a later commit
gl_backend internal mesh structure now has a matrix stored in it
entity_render_t now has a matrix and a inverse matrix
many additions of const to various functions, this required restructuring some code
transparent mesh sorting is gone, this also means subsorting of triangles by depth is gone (meshqueue should be used for transparent mesh sorting, I have not yet written a new triangle sorter)
rewrote RSurf_ shader functions *yet again*, they are now more compact and share code (by way of using lots of function calls)
lots of changes/bugfixes/additions to matrixlib.c and .h, including an actual working Matrix4x4_Invert_Simple function
added gl_flashblend (brightens and enlarges coronas, turns off all actual lighting)
added r_coronas (can turn off coronas)

------------------------------------------------------------------------
r2294 | havoc | 2002-08-28 08:46:21 +0200 (Wed, 28 Aug 2002) | 2 lines

got rid of dlightradius variable which was never actually used

------------------------------------------------------------------------
r2293 | havoc | 2002-08-27 13:59:28 +0200 (Tue, 27 Aug 2002) | 5 lines

liquid now goes through meshqueue sorting
fixed a bunch of minor sorting consistency bugs in the meshqueue code
changed behavior of R_MeshQueue_EndScene and exposed R_MeshQueue_Render and R_MeshQueue_RenderTransparent
cleaned up liquid rendering code a bit

------------------------------------------------------------------------
r2292 | havoc | 2002-08-27 12:04:57 +0200 (Tue, 27 Aug 2002) | 2 lines

forgot a m.transparent = in the last commit, and removed a comment

------------------------------------------------------------------------
r2291 | havoc | 2002-08-27 11:49:54 +0200 (Tue, 27 Aug 2002) | 2 lines

got rid of lots of unnecessary m.transparent = lines, as well as some depthdisable =, and depthwrite =

------------------------------------------------------------------------
r2290 | havoc | 2002-08-27 11:42:59 +0200 (Tue, 27 Aug 2002) | 3 lines

engine mostly converted to use R_MeshQueue functions instead of true transparent meshs, this meant getting rid of currentrenderentity
the rest of the conversion to R_MeshQueue will be in a future commit, just wanted to get this in now

------------------------------------------------------------------------
r2289 | molivier | 2002-08-26 16:00:56 +0200 (Mon, 26 Aug 2002) | 2 lines

Added a new cvar sv_echobprint which controls the printing of broadcast messages in dedicated server mode. It's on by default.

------------------------------------------------------------------------
r2288 | molivier | 2002-08-26 08:24:30 +0200 (Mon, 26 Aug 2002) | 2 lines

Fixed a potential buffer overflow in Con_DebugLog

------------------------------------------------------------------------
r2287 | havoc | 2002-08-26 07:40:47 +0200 (Mon, 26 Aug 2002) | 2 lines

renamed mesh_ variables to gl_state. (created a struct for this purpose)

------------------------------------------------------------------------
r2285 | havoc | 2002-08-25 17:45:41 +0200 (Sun, 25 Aug 2002) | 2 lines

got rid of R_Mesh_Draw and R_Mesh_DrawPolygon, now all 3D geometry is drawn using R_Mesh_Draw_GetBuffer and R_Mesh_Render

------------------------------------------------------------------------
r2284 | havoc | 2002-08-25 14:26:23 +0200 (Sun, 25 Aug 2002) | 3 lines

batching is gone.
if you forget to call R_Mesh_Render after each mesh the backend system will yell at you.

------------------------------------------------------------------------
r2283 | havoc | 2002-08-25 13:12:01 +0200 (Sun, 25 Aug 2002) | 2 lines

monster movement interpolation now works in both protocols (shared code), this bloated the entity persistent struct a bit more unfortunately

------------------------------------------------------------------------
r2282 | havoc | 2002-08-24 09:14:15 +0200 (Sat, 24 Aug 2002) | 12 lines

detail texturing added (although with just one generated texture applied to everything)
detail texturing makes use of up to 3 texture units if you have combine
detail texturing added to effects options menu (r_detailtextures cvar)
surfvertex_t now has another set of texcoords, for detail texturing
Mod_BrushStartup and Mod_BrushShutdown functions added to alloc/free the detail texture
r_multitexture cvar renamed to r_textureunits, so you can limit number of texture units enabled for testing, rather than just as a yes/no kind of option
gl_combine is forced to 0 if r_textureunits is less than 2 (this is purely for consistency, not of any importance)
split up the wall rendering into two kinds - vertex lit with optional transparency, and opaque lightmapped with no support for transparency
R_Mesh_Draw_GetBuffer now takes a wantoverbrights parameter, if false it will not use the 4x overbright (even if combine is enabled), this is useful to improve the color precision of anything which does not need overbright
fixed crosshair brightness (it was unintentionally adjusting the alpha using m.colorscale just like the RGB portion of the color)
sprites only use overbright if they are lit (normal unlit sprites are rendered without overbright)

------------------------------------------------------------------------
r2281 | havoc | 2002-08-23 08:12:01 +0200 (Fri, 23 Aug 2002) | 3 lines

removed check for registered.integer in GAME_NORMAL naming (this means it just says DarkPlaces-Quake whether the game is registered or not)
removed support for games FiendArena (because I have not heard from the author in a long time) and Zymotic (because the game was canceled long ago)

------------------------------------------------------------------------
r2280 | molivier | 2002-08-23 08:04:40 +0200 (Fri, 23 Aug 2002) | 2 lines

Finally got rid of the last TRANSFUSION define (the key binding menu is determined at runtime now). Also a few maps won't make it for the 1.0 release, so they've been removed from the map list.

------------------------------------------------------------------------
r2279 | havoc | 2002-08-23 00:24:17 +0200 (Fri, 23 Aug 2002) | 2 lines

added DP_SV_SLOWMO to extensions list

------------------------------------------------------------------------
r2277 | havoc | 2002-08-22 23:58:33 +0200 (Thu, 22 Aug 2002) | 2 lines

made stains more small and focused

------------------------------------------------------------------------
r2276 | havoc | 2002-08-22 09:30:58 +0200 (Thu, 22 Aug 2002) | 2 lines

workaround for gcc -funroll-loops bug with RLE compressed TGA, fixed LoadTGA (by rewriting it), probably faster now too

------------------------------------------------------------------------
r2275 | molivier | 2002-08-22 08:13:21 +0200 (Thu, 22 Aug 2002) | 2 lines

Disabled crosshair during intermission

------------------------------------------------------------------------
r2274 | molivier | 2002-08-21 13:26:14 +0200 (Wed, 21 Aug 2002) | 2 lines

Fixed GetModuleFileName call

------------------------------------------------------------------------
r2273 | molivier | 2002-08-21 13:24:46 +0200 (Wed, 21 Aug 2002) | 2 lines

Refixed COM_StripExtension  :oP

------------------------------------------------------------------------
r2272 | havoc | 2002-08-21 11:43:39 +0200 (Wed, 21 Aug 2002) | 2 lines

this should fix the program name in com_argv[0], so detection of which game to run based on executable name should work now, thanks to Elric for reporting the bug

------------------------------------------------------------------------
r2271 | havoc | 2002-08-21 11:23:43 +0200 (Wed, 21 Aug 2002) | 2 lines

change default com_basedir to "." to fix the game when not using -basedir, oops.  thanks to Elric for the bug report.

------------------------------------------------------------------------
r2270 | molivier | 2002-08-21 09:49:50 +0200 (Wed, 21 Aug 2002) | 2 lines

Fixed COM_StripExtension for strings without a single dot

------------------------------------------------------------------------
r2269 | molivier | 2002-08-21 09:47:52 +0200 (Wed, 21 Aug 2002) | 2 lines

Static/floating crosshair is now an option controled by the cvar "crosshair_static"

------------------------------------------------------------------------
r2268 | havoc | 2002-08-21 02:10:30 +0200 (Wed, 21 Aug 2002) | 5 lines

no more warping meshs of any kind
sky is always of the masked variety if enabled at all
water does not move
R_Mesh_Draw is no longer used by gl_rsurf at all

------------------------------------------------------------------------
r2266 | havoc | 2002-08-21 00:47:31 +0200 (Wed, 21 Aug 2002) | 2 lines

corrected spelling of alorgithm

------------------------------------------------------------------------
r2265 | havoc | 2002-08-20 22:24:31 +0200 (Tue, 20 Aug 2002) | 2 lines

fixed menu player colormapping

------------------------------------------------------------------------
r2264 | havoc | 2002-08-20 21:54:39 +0200 (Tue, 20 Aug 2002) | 2 lines

changed color command description to mention it is 0-15 range, not 0-13

------------------------------------------------------------------------
r2263 | havoc | 2002-08-20 10:28:01 +0200 (Tue, 20 Aug 2002) | 4 lines

got rid of host_parms
added com_basedir
cleaned up gamedir related code

------------------------------------------------------------------------
r2262 | havoc | 2002-08-20 09:08:40 +0200 (Tue, 20 Aug 2002) | 2 lines

got rid of host_parms.argc and argv, now uses com_argc and com_argv directly

------------------------------------------------------------------------
r2261 | havoc | 2002-08-20 05:13:02 +0200 (Tue, 20 Aug 2002) | 2 lines

cleaned up and merged a lot of sys_*.c code into sys_shared.c

------------------------------------------------------------------------
r2260 | havoc | 2002-08-20 04:57:12 +0200 (Tue, 20 Aug 2002) | 2 lines

centered Sbar_IntermissionOverlay

------------------------------------------------------------------------
r2259 | havoc | 2002-08-20 04:50:38 +0200 (Tue, 20 Aug 2002) | 2 lines

sys_usetimegettime is now initialized at a place where it shouldn't crash anymore (this should make win32 run again)

------------------------------------------------------------------------
r2256 | havoc | 2002-08-18 01:19:47 +0200 (Sun, 18 Aug 2002) | 3 lines

removed fxmesa support (3dfx svgalib) because no one used it to my knowledge, and it probably did not even work due to poor maintenance
and cleaned up makefile a bit

------------------------------------------------------------------------
r2252 | havoc | 2002-08-16 07:59:27 +0200 (Fri, 16 Aug 2002) | 2 lines

update client color values when new values are recieved from server

------------------------------------------------------------------------
r2251 | havoc | 2002-08-16 07:57:27 +0200 (Fri, 16 Aug 2002) | 2 lines

SV_ChangeTeam now actually gets called with the right value

------------------------------------------------------------------------
r2250 | havoc | 2002-08-16 07:56:27 +0200 (Fri, 16 Aug 2002) | 2 lines

reformatted and updated extensions list

------------------------------------------------------------------------
r2249 | havoc | 2002-08-16 07:55:25 +0200 (Fri, 16 Aug 2002) | 2 lines

fix alignment of frag list, it is now centered

------------------------------------------------------------------------
r2248 | havoc | 2002-08-16 07:53:28 +0200 (Fri, 16 Aug 2002) | 2 lines

changed GL_MATRIX_MODE check to GL_PROJECTION, and removed GL_MATRIX_MODE define, this should be more compatible in identifying odd gl.h's

------------------------------------------------------------------------
r2247 | havoc | 2002-08-15 21:00:31 +0200 (Thu, 15 Aug 2002) | 2 lines

only warn about time stepping backwards if it's more than 10ms

------------------------------------------------------------------------
r2246 | havoc | 2002-08-15 20:53:25 +0200 (Thu, 15 Aug 2002) | 2 lines

added support for .colormap values >= 1024 in QC to mean direct color specification (two 0-15 values, just like SV_ChangeTeam and setcolor use)

------------------------------------------------------------------------
r2245 | havoc | 2002-08-15 20:51:33 +0200 (Thu, 15 Aug 2002) | 2 lines

cvar_vars is no longer known by files other than cvar.c, this meant adding a Cvar_FindVarAfter function to keep the server queries working correctly

------------------------------------------------------------------------
r2244 | havoc | 2002-08-15 20:49:43 +0200 (Thu, 15 Aug 2002) | 2 lines

turned #define WIN32_USETIMEGETTIME into a cvar named sys_usetimegettime, default on (used to be off by default), can be changed at any time

------------------------------------------------------------------------
r2243 | havoc | 2002-08-15 01:48:14 +0200 (Thu, 15 Aug 2002) | 2 lines

reset stack position when new progs loaded, or error occurs

------------------------------------------------------------------------
r2242 | havoc | 2002-08-15 01:29:34 +0200 (Thu, 15 Aug 2002) | 5 lines

changed fps counter behavior to be more 'traditional' (count how many frames go by in a given amount of time), this means 3 modes are now available for showfps...
showfps 1 - count frames
showfps 2 - average of recent frame times
showfps 3 - most recent frame time only

------------------------------------------------------------------------
r2234 | havoc | 2002-08-10 18:51:30 +0200 (Sat, 10 Aug 2002) | 2 lines

(patch from Elric) BloodBath renamed to Transfusion

------------------------------------------------------------------------
r2233 | havoc | 2002-08-10 18:29:27 +0200 (Sat, 10 Aug 2002) | 2 lines

converted particle rendering to use R_Mesh_Draw_GetBuffer

------------------------------------------------------------------------
r2232 | havoc | 2002-08-10 01:20:25 +0200 (Sat, 10 Aug 2002) | 2 lines

now uses R_Mesh_Draw_GetBuffer

------------------------------------------------------------------------
r2231 | havoc | 2002-08-10 01:13:48 +0200 (Sat, 10 Aug 2002) | 2 lines

changed viewblend to use R_Mesh_Draw_GetBuffer

------------------------------------------------------------------------
r2230 | havoc | 2002-08-10 00:45:03 +0200 (Sat, 10 Aug 2002) | 2 lines

converted coronas to R_Mesh_Draw_GetBuffer

------------------------------------------------------------------------
r2229 | havoc | 2002-08-10 00:19:54 +0200 (Sat, 10 Aug 2002) | 2 lines

converted skysphere to R_Mesh_Draw_GetBuffer

------------------------------------------------------------------------
r2228 | havoc | 2002-08-10 00:03:28 +0200 (Sat, 10 Aug 2002) | 2 lines

changed a bunch of #if 1's to #if USEMESHBUFFER (which is 1)

------------------------------------------------------------------------
r2227 | havoc | 2002-08-10 00:02:06 +0200 (Sat, 10 Aug 2002) | 2 lines

skybox now uses R_Mesh_Draw_GetBuffer

------------------------------------------------------------------------
r2226 | havoc | 2002-08-10 00:01:25 +0200 (Sat, 10 Aug 2002) | 2 lines

re-enable optimizations by default

------------------------------------------------------------------------
r2225 | havoc | 2002-08-09 23:48:19 +0200 (Fri, 09 Aug 2002) | 2 lines

converted code to use R_Mesh_Draw_GetBuffer

------------------------------------------------------------------------
r2224 | havoc | 2002-08-09 23:47:11 +0200 (Fri, 09 Aug 2002) | 2 lines

converted drawing code from R_Mesh_Draw to R_Mesh_Draw_GetBuffer

------------------------------------------------------------------------
r2223 | havoc | 2002-08-09 23:14:12 +0200 (Fri, 09 Aug 2002) | 8 lines

rewrote most of the RSurfShader_ functions to use R_Mesh_Draw_GetBuffer instead of R_Mesh_Draw

r_modellights replaced r_lightmodels, r_modellights sets limit on how many directional lights will be shaded onto the model (only the brightest are chosen)

cleaned up lighting code a lot, it is now consistent between static and dynamic light sources, and the light radius has been reduced

unfortunately this commit seems to have slowed down the engine a bit, and I don't know why, it should be a speed gain

------------------------------------------------------------------------
r2217 | havoc | 2002-08-07 22:31:56 +0200 (Wed, 07 Aug 2002) | 2 lines

fixed r_drawentities 0 which was forgetting to enlarge the farclip based on the world bounding box

------------------------------------------------------------------------
r2216 | havoc | 2002-08-07 22:09:46 +0200 (Wed, 07 Aug 2002) | 2 lines

support for top to bottom TGA, thanks Elric.

------------------------------------------------------------------------
r2213 | havoc | 2002-08-06 18:35:51 +0200 (Tue, 06 Aug 2002) | 2 lines

added r_sortsurfaces cvar, default off, sorting them seems to be a very minor slowdown ingame for me

------------------------------------------------------------------------
r2212 | havoc | 2002-08-06 18:04:57 +0200 (Tue, 06 Aug 2002) | 2 lines

fix for the effects menu input code, thanks Elric

------------------------------------------------------------------------
r2211 | havoc | 2002-08-06 18:01:46 +0200 (Tue, 06 Aug 2002) | 3 lines

fix for 'falling' in a corner bug, thanks to Elric for finding the fix for this.
also removed a SOLID_BSP check that shouldn't be there anymore.

------------------------------------------------------------------------
r2208 | havoc | 2002-08-06 01:23:53 +0200 (Tue, 06 Aug 2002) | 2 lines

spawned entities were often not appearing in quake protocol (demos), oops

------------------------------------------------------------------------
r2207 | havoc | 2002-08-05 21:57:04 +0200 (Mon, 05 Aug 2002) | 2 lines

the -I and -L  weren't necessary (and didn't work anyway)

------------------------------------------------------------------------
r2205 | havoc | 2002-08-05 21:18:15 +0200 (Mon, 05 Aug 2002) | 2 lines

fix for double to float warning in MSVC

------------------------------------------------------------------------
r2204 | havoc | 2002-08-05 21:17:28 +0200 (Mon, 05 Aug 2002) | 2 lines

consistency fix for GL_EXT_draw_range_elements - don't be silent about missing functions if the extension is reported

------------------------------------------------------------------------
r2203 | havoc | 2002-08-05 15:28:26 +0200 (Mon, 05 Aug 2002) | 2 lines

a rather hefty 6% speed gain by getting rid of the R_Mesh_UpdateFarClip function, and reorganizing it to use bounding boxes instead (outside of gl_backend even)

------------------------------------------------------------------------
r2202 | havoc | 2002-08-05 14:16:44 +0200 (Mon, 05 Aug 2002) | 2 lines

R_GetTexture is now named R_RealGetTexture, R_GetTexture is a macro which hardly ever calls R_RealGetTexture - this is a nice speed gain, cutting out about 2.3 million calls during timedemo bigass1

------------------------------------------------------------------------
r2201 | havoc | 2002-08-05 13:54:28 +0200 (Mon, 05 Aug 2002) | 2 lines

removed procedural texture support because it was inefficient where it was implemented - it can be implemented more efficiently in renderer code than in R_GetTexture

------------------------------------------------------------------------
r2200 | havoc | 2002-08-05 13:40:14 +0200 (Mon, 05 Aug 2002) | 2 lines

lightmaps shouldn't be procedural, because they have no generate function anyway (and are therefore not self-animating)

------------------------------------------------------------------------
r2199 | havoc | 2002-08-05 13:39:08 +0200 (Mon, 05 Aug 2002) | 2 lines

attempt to optimize SND_PaintChannelFrom8 a little bit

------------------------------------------------------------------------
r2198 | havoc | 2002-08-05 13:11:52 +0200 (Mon, 05 Aug 2002) | 2 lines

fix view_ofs when dead (negative viewheight)

------------------------------------------------------------------------
r2197 | havoc | 2002-08-05 12:58:27 +0200 (Mon, 05 Aug 2002) | 2 lines

removed support for r_ser (also known as R_Clip or "Hidden Surface Removal") as it was a slowdown for everyone I know of

------------------------------------------------------------------------
r2196 | havoc | 2002-08-05 12:20:25 +0200 (Mon, 05 Aug 2002) | 3 lines

an optimization to CL_RelinkNetworkEntities (and related code) which increases performance by 5%
(store the ent->state_current.active flags in a separate array to use less memory bandwidth)

------------------------------------------------------------------------
r2195 | havoc | 2002-08-05 11:47:21 +0200 (Mon, 05 Aug 2002) | 2 lines

optimized phys_moveentities (in cgame.c) so it doesn't waste so much time

------------------------------------------------------------------------
r2194 | havoc | 2002-08-04 22:07:11 +0200 (Sun, 04 Aug 2002) | 2 lines

fix svc_setview

------------------------------------------------------------------------
r2193 | havoc | 2002-08-04 22:04:22 +0200 (Sun, 04 Aug 2002) | 2 lines

moved the GL_CloseLibrary call a bit

------------------------------------------------------------------------
r2192 | havoc | 2002-08-04 21:37:09 +0200 (Sun, 04 Aug 2002) | 2 lines

fix mouse in win32, I had forgotten to update a lot of code

------------------------------------------------------------------------
r2191 | havoc | 2002-08-04 17:06:53 +0200 (Sun, 04 Aug 2002) | 2 lines

limit gl_mesh_batchtriangles to never go below 1, because although < 1 works it calls R_Mesh_Render twice per mesh rather than once

------------------------------------------------------------------------
r2182 | havoc | 2002-08-03 23:02:02 +0200 (Sat, 03 Aug 2002) | 2 lines

removed cl_light.h (which has already been merged into client.h)

------------------------------------------------------------------------
r2181 | havoc | 2002-08-03 22:59:29 +0200 (Sat, 03 Aug 2002) | 2 lines

now entirely dynamic OpenGL binding

------------------------------------------------------------------------
r2180 | havoc | 2002-08-03 22:51:07 +0200 (Sat, 03 Aug 2002) | 2 lines

added r_floatbuildlightmap, unfortunately using floats for the calculations is still ever so slightly slower than integer

------------------------------------------------------------------------
r2179 | havoc | 2002-08-03 22:46:17 +0200 (Sat, 03 Aug 2002) | 2 lines

optimized entity updates substantially (or rather, UpdateEnd), nice speedup

------------------------------------------------------------------------
r2178 | havoc | 2002-08-03 22:44:31 +0200 (Sat, 03 Aug 2002) | 2 lines

some optimizations (notably sparks don't have air friction anymore, which is a significant speedup to demos), a bit of reorganization

------------------------------------------------------------------------
r2177 | havoc | 2002-08-03 22:41:12 +0200 (Sat, 03 Aug 2002) | 2 lines

rearranged things a little, mostly related to particles created by EntityParticles, which should only live one frame

------------------------------------------------------------------------
r2176 | havoc | 2002-08-03 22:39:43 +0200 (Sat, 03 Aug 2002) | 2 lines

default gl_mesh_floatcolors on, and force it off on 3Dfx drivers (sure this is unnecessary unless it is specifically the windows 3Dfx drivers, as surely WickedGL and others work fine, but oh well, 3Dfx cards want byte colors anyway)

------------------------------------------------------------------------
r2175 | havoc | 2002-08-03 22:34:59 +0200 (Sat, 03 Aug 2002) | 2 lines

Lots of speedups and cleanups in client code, dynamically allocated cl_entities (and friends), rearranged some things  - sorry this commit is vague, but it's mostly just a lot of rearrangement, cleanup, etc...

------------------------------------------------------------------------
r2174 | havoc | 2002-08-03 22:27:54 +0200 (Sat, 03 Aug 2002) | 2 lines

cls.spawnparms isn't needed

------------------------------------------------------------------------
r2173 | havoc | 2002-08-03 22:26:09 +0200 (Sat, 03 Aug 2002) | 2 lines

changed linux/soundcard.h to sys/soundcard.h for more portability - doesn't work properly on FreeBSD yet, though

------------------------------------------------------------------------
r2172 | havoc | 2002-08-03 22:23:25 +0200 (Sat, 03 Aug 2002) | 2 lines

print edict responsible for "Trigger in clipping list" error

------------------------------------------------------------------------
r2170 | havoc | 2002-08-02 20:11:23 +0200 (Fri, 02 Aug 2002) | 2 lines

added a mesh queue callback system (to allow mesh rendering things in different orders, etc)

------------------------------------------------------------------------
r2167 | havoc | 2002-08-02 17:12:19 +0200 (Fri, 02 Aug 2002) | 4 lines

cleaned up vid_glx.c somewhat, it can now quit properly when the close button is pressed (what a mess talking to a window manager, sigh...)

added vid_hidden (iconified or otherwise disabled window - don't render anything) and vid_activewindow (not the active window, don't hog CPU power) to vid_* files

------------------------------------------------------------------------
r2166 | havoc | 2002-08-02 17:08:44 +0200 (Fri, 02 Aug 2002) | 6 lines

added alphafade and gravity fields to particle struct, which made most particle types redundent, now only a few remain

tweaked various effects (particularly underwater blood, bubbles, smoke effects, etc)

added effects options menu to control the many possible options

------------------------------------------------------------------------
r2165 | havoc | 2002-08-02 17:07:43 +0200 (Fri, 02 Aug 2002) | 4 lines

added cl_explosions and cl_stainmaps cvars, which will be used soon...

renamed cl_draweffects to r_draweffects and made it actually work

------------------------------------------------------------------------
r2164 | havoc | 2002-08-02 17:01:21 +0200 (Fri, 02 Aug 2002) | 6 lines

fixed a lighting bug with overbright modes when using r_quickmodels which made most models far too bright

changed directional lighting to only light vertices facing the light source (this makes for a very dramatic look)

CompleteLightPoint is now twice as bright as it used to be when running a map that uses a .lights file - more closely matchs the lightmaps

------------------------------------------------------------------------
r2163 | havoc | 2002-08-02 16:57:39 +0200 (Fri, 02 Aug 2002) | 2 lines

made liquid colors 50% thinner (it's still apparent you're in a liquid, but you can see clearly now)

------------------------------------------------------------------------
r2162 | havoc | 2002-08-02 16:55:27 +0200 (Fri, 02 Aug 2002) | 2 lines

'sock' local variable isn't needed anymore, cleaned up NET_Shutdown socket closing loop

------------------------------------------------------------------------
r2161 | havoc | 2002-08-02 16:53:33 +0200 (Fri, 02 Aug 2002) | 2 lines

fixed bug in NET_Shutdown related to freeing sockets

------------------------------------------------------------------------
r2160 | havoc | 2002-08-02 14:11:16 +0200 (Fri, 02 Aug 2002) | 3 lines

removed R_Mesh_Draw_NativeOnly (it was not used)
cleaned up modulate detection (overbright decisions)

------------------------------------------------------------------------
r2147 | havoc | 2002-08-01 08:34:46 +0200 (Thu, 01 Aug 2002) | 6 lines

cleaned up glDrawRangeElements limit checking a bit (now done in gl_backend.c)

no longer limits maxtriangles based on DrawRangeElements limits (since DrawRangeElements is required to work even if limits are exceeded, according to the OpenGL spec)

now posts startup/shutdown messages for gl_backend

------------------------------------------------------------------------
r2145 | havoc | 2002-07-31 16:04:06 +0200 (Wed, 31 Jul 2002) | 2 lines

cleaned up gl_mesh_drawmode related code, hopefully fixing various unknown bugs

------------------------------------------------------------------------
r2144 | havoc | 2002-07-31 15:46:25 +0200 (Wed, 31 Jul 2002) | 2 lines

expanded sprint/centerprint buffer from 256 chars to 4096

------------------------------------------------------------------------
r2143 | havoc | 2002-07-31 14:11:17 +0200 (Wed, 31 Jul 2002) | 3 lines

disabled 3DFX mesh size error (because it really only applies when gl_mesh_floatcolors is 1, which is not the default)
automatically grow mesh buffers based on size of meshs encountered

------------------------------------------------------------------------
r2142 | havoc | 2002-07-31 13:45:17 +0200 (Wed, 31 Jul 2002) | 2 lines

cleaned up behavior when an invalid replacement sky texture is found - now it will fall back to the texture inside the map

------------------------------------------------------------------------
r2141 | havoc | 2002-07-31 11:57:51 +0200 (Wed, 31 Jul 2002) | 2 lines

added -fno-strict-aliasing  (even though it isn't a problem with gcc 2.95.3 anyway)

------------------------------------------------------------------------
r2140 | havoc | 2002-07-31 11:43:23 +0200 (Wed, 31 Jul 2002) | 4 lines

increased name limit on engineversion string from 39 chars to 127, this fixed a bug in windows builds where the string was too long for the buffer...

also shortened the string itself to no longer mention 'GL' or 'build'

------------------------------------------------------------------------
r2137 | havoc | 2002-07-31 07:24:06 +0200 (Wed, 31 Jul 2002) | 2 lines

added the readme file to cvs (... and it needs massive updates)

------------------------------------------------------------------------
r2136 | havoc | 2002-07-31 07:15:05 +0200 (Wed, 31 Jul 2002) | 2 lines

win32 fixes and some MSVC warnings fixed

------------------------------------------------------------------------
r2134 | knghtbrd | 2002-07-31 05:07:50 +0200 (Wed, 31 Jul 2002) | 2 lines

Fix for -particles specified wrongly on the cmdline..

------------------------------------------------------------------------
r2121 | havoc | 2002-07-30 05:15:09 +0200 (Tue, 30 Jul 2002) | 2 lines

fix 'flashing' crosshair bug caused by negative colors (clamp them before drawing the sprite)

------------------------------------------------------------------------
r2119 | havoc | 2002-07-29 15:23:05 +0200 (Mon, 29 Jul 2002) | 2 lines

slight simplification/optimzation/readability enhancement/whatever to animating textures

------------------------------------------------------------------------
r2118 | havoc | 2002-07-29 15:21:56 +0200 (Mon, 29 Jul 2002) | 2 lines

fix animating textures

------------------------------------------------------------------------
r2117 | knghtbrd | 2002-07-29 13:20:46 +0200 (Mon, 29 Jul 2002) | 5 lines

Water transition splashes do not happen for lava anymore.  This means
lavaballs do not drive one ABSOLUTELY INSANE anymore.  (Except when you
get hit by them and they knock you into said lava, but that's another
story entirely..)

------------------------------------------------------------------------
r2116 | knghtbrd | 2002-07-29 13:11:59 +0200 (Mon, 29 Jul 2002) | 2 lines

Make coronas look better (it looks good in Twilight, so...)

------------------------------------------------------------------------
r2115 | havoc | 2002-07-29 12:33:39 +0200 (Mon, 29 Jul 2002) | 2 lines

Serious-Sam style crosshair (an actual sprite in the world, with slight variation in size based on distance, and is based on actual quake gun position, not center of screen)

------------------------------------------------------------------------
r2114 | havoc | 2002-07-29 12:31:57 +0200 (Mon, 29 Jul 2002) | 2 lines

much nicer rocket and grenade trails

------------------------------------------------------------------------
r2112 | havoc | 2002-07-29 12:09:45 +0200 (Mon, 29 Jul 2002) | 2 lines

corrected fullbright map handling for the case when the fullbright bmodel is not the running map, but one of the imported bmodels instead, also corrected a comment about r_ambient

------------------------------------------------------------------------
r2110 | havoc | 2002-07-29 09:06:52 +0200 (Mon, 29 Jul 2002) | 2 lines

disabled memory clumping, which surprisingly improves memory use, rather than hinders it (at least in Linux...  hopefully same in windows) and massively speeds up loading of complicated maps

------------------------------------------------------------------------
r2105 | knghtbrd | 2002-07-28 07:45:46 +0200 (Sun, 28 Jul 2002) | 2 lines

Alphabetized extensions and added TW_SV_STEPCONTROL..

------------------------------------------------------------------------
r2093 | molivier | 2002-07-26 08:18:16 +0200 (Fri, 26 Jul 2002) | 2 lines

Fixed PCX file loading for images with an odd width

------------------------------------------------------------------------
r2089 | havoc | 2002-07-25 11:58:47 +0200 (Thu, 25 Jul 2002) | 3 lines

now uses a fragment texture for the video (massive speedup)
clears audioqueue when video stops

------------------------------------------------------------------------
r2088 | havoc | 2002-07-25 11:57:41 +0200 (Thu, 25 Jul 2002) | 2 lines

fragment images made for fragment textures will now always be big enough for the fragment texture that created them

------------------------------------------------------------------------
r2084 | havoc | 2002-07-25 11:50:06 +0200 (Thu, 25 Jul 2002) | 2 lines

fix fatal bugs in S_RawSamples_Enqueue and Dequeue relating to mis-detected buffer wraps

------------------------------------------------------------------------
r2083 | havoc | 2002-07-25 11:14:48 +0200 (Thu, 25 Jul 2002) | 2 lines

.dpv video playback is now implemented.  Slow though, because it's resizing textures, this needs to be fixed...

------------------------------------------------------------------------
r2082 | havoc | 2002-07-25 04:51:20 +0200 (Thu, 25 Jul 2002) | 2 lines

whitespace

------------------------------------------------------------------------
r2081 | havoc | 2002-07-25 04:49:43 +0200 (Thu, 25 Jul 2002) | 2 lines

whitespace cleanup

------------------------------------------------------------------------
r2080 | havoc | 2002-07-25 04:43:33 +0200 (Thu, 25 Jul 2002) | 2 lines

added S_RawSamples_Enqueue, S_RawSamples_Dequeue, and S_RawSamples_ClearQueue functions to allow background music/video support, these are now used to clear the paintbuffer

------------------------------------------------------------------------
r2079 | havoc | 2002-07-25 04:03:37 +0200 (Thu, 25 Jul 2002) | 2 lines

add -fno-strict-aliasing

------------------------------------------------------------------------
r2078 | havoc | 2002-07-25 03:44:38 +0200 (Thu, 25 Jul 2002) | 2 lines

minor whitespace and comment cleanup

------------------------------------------------------------------------
r2077 | havoc | 2002-07-25 03:40:06 +0200 (Thu, 25 Jul 2002) | 2 lines

massive cleanup of S_TransferPaintBuffer and moved DirectSound locking junk into snd_win.c (adding S_LockBuffer and S_UnlockBuffer stubs for other platforms)

------------------------------------------------------------------------
r2063 | havoc | 2002-07-21 10:40:19 +0200 (Sun, 21 Jul 2002) | 2 lines

include quakedef (which drags in lots of other stuff) to hide various MSVC warnings and make sure M_PI is defined

------------------------------------------------------------------------
r2061 | havoc | 2002-07-20 03:02:11 +0200 (Sat, 20 Jul 2002) | 2 lines

fix view blends so they are alpha, not additive

------------------------------------------------------------------------
r2046 | havoc | 2002-07-17 07:29:20 +0200 (Wed, 17 Jul 2002) | 2 lines

faster static light tracing (by not doing it as often), this also means results of static light traces are cached in the entity_render_t (which is now considered semi-persistent), made light falloff in .lights file actually work (it wasn't being used by the model lighting code... oops), also made coronas twice as bright

------------------------------------------------------------------------
r2045 | havoc | 2002-07-17 07:24:16 +0200 (Wed, 17 Jul 2002) | 2 lines

merged matrix4x4 and matrix3x4 into matrixlib, updated makefiles and dsp, some cleanups to matrixlib as well

------------------------------------------------------------------------
r2044 | havoc | 2002-07-17 07:18:31 +0200 (Wed, 17 Jul 2002) | 2 lines

put parentheses around parameters to min/max/bound macros

------------------------------------------------------------------------
r2043 | havoc | 2002-07-17 07:15:21 +0200 (Wed, 17 Jul 2002) | 2 lines

scrag, hellknight, and shalrath shots now glow, also tweaked the particle colors and made them additive blend

------------------------------------------------------------------------
r2029 | knghtbrd | 2002-07-09 20:46:41 +0200 (Tue, 09 Jul 2002) | 3 lines

The Nehahra movie was borked.  They were making static ents without
models.  When you try to do this, DarkPlaces has issues!  Issues I say!

------------------------------------------------------------------------
r2020 | havoc | 2002-07-08 08:54:42 +0200 (Mon, 08 Jul 2002) | 2 lines

updated mingw makefile and MSVC project to add matrix4x4.c and matrix3x4.c

------------------------------------------------------------------------
r2019 | havoc | 2002-07-08 08:02:23 +0200 (Mon, 08 Jul 2002) | 2 lines

better check for 0 alpha (it now must be exactly 0.0f, not merely rounded off to 0 as a byte)

------------------------------------------------------------------------
r2018 | havoc | 2002-07-08 04:57:02 +0200 (Mon, 08 Jul 2002) | 2 lines

some whitespace cleanups and a correction of a comment

------------------------------------------------------------------------
r2017 | havoc | 2002-07-08 04:40:59 +0200 (Mon, 08 Jul 2002) | 2 lines

Matrix4x4_CreateRotate and Matrix3x4_CreateRotate now take degrees instead of radians for the angle

------------------------------------------------------------------------
r2016 | havoc | 2002-07-08 02:39:24 +0200 (Mon, 08 Jul 2002) | 2 lines

a minor whitespace cleanup on R_ConcatRotations

------------------------------------------------------------------------
r2015 | havoc | 2002-07-08 02:12:22 +0200 (Mon, 08 Jul 2002) | 2 lines

if the OS returns a very bogus time (or it wrapped), warn about it and keep ticking

------------------------------------------------------------------------
r2012 | havoc | 2002-07-08 02:02:54 +0200 (Mon, 08 Jul 2002) | 2 lines

updated .cvsignore so it ignores darkplaces-3dfx and gmon.out

------------------------------------------------------------------------
r2011 | havoc | 2002-07-08 02:02:03 +0200 (Mon, 08 Jul 2002) | 2 lines

added snd_null for anyone who can't use the other sound drivers, and cleaned up the notes regarding sound drivers in the makefile

------------------------------------------------------------------------
r2009 | havoc | 2002-07-08 01:42:36 +0200 (Mon, 08 Jul 2002) | 2 lines

created a couple matrix libraries (4x4 and 3x4), hopefully these will be useful

------------------------------------------------------------------------
r2008 | havoc | 2002-07-08 01:38:28 +0200 (Mon, 08 Jul 2002) | 2 lines

now includes qtypes.h

------------------------------------------------------------------------
r2007 | havoc | 2002-07-08 01:37:32 +0200 (Mon, 08 Jul 2002) | 2 lines

added a qtypes.h for little things like qbyte and such

------------------------------------------------------------------------
r1999 | knghtbrd | 2002-07-07 22:43:10 +0200 (Sun, 07 Jul 2002) | 2 lines

Make screenshot saving more like Twilight's.

------------------------------------------------------------------------
r1996 | havoc | 2002-07-06 22:23:36 +0200 (Sat, 06 Jul 2002) | 2 lines

corrected QuatMake math, and commented out the entire set of quaternion macros

------------------------------------------------------------------------
r1993 | knghtbrd | 2002-07-06 14:04:47 +0200 (Sat, 06 Jul 2002) | 2 lines

Make sure these files are marked as binary so CVS keeps the dos newlines.

------------------------------------------------------------------------
r1992 | havoc | 2002-07-06 03:48:50 +0200 (Sat, 06 Jul 2002) | 2 lines

some cleanup of map texture loading and related code (mainly better support for untextured maps), no longer uploads more than one copy of the notexture image (it used to upload one copy of it per bmodel loaded), minor optimization of animating texture support (or rather, optimization of the extremely common non-animating texture case)

------------------------------------------------------------------------
r1991 | havoc | 2002-07-06 03:45:15 +0200 (Sat, 06 Jul 2002) | 2 lines

disabled RecursiveHullCheckPoint because it probably isn't much of a speed gain really, and it could break things in rare cases

------------------------------------------------------------------------
r1990 | havoc | 2002-07-06 03:43:27 +0200 (Sat, 06 Jul 2002) | 2 lines

fix for grenades sinking into brush model floor in start.bsp

------------------------------------------------------------------------
r1985 | knghtbrd | 2002-07-05 15:28:07 +0200 (Fri, 05 Jul 2002) | 2 lines

Change to using a flash for teleport rather than a particle effect.

------------------------------------------------------------------------
r1983 | knghtbrd | 2002-07-05 05:28:10 +0200 (Fri, 05 Jul 2002) | 2 lines

Kill trigraphs.  Die die die.  Or something.

------------------------------------------------------------------------
r1969 | havoc | 2002-06-29 06:00:11 +0200 (Sat, 29 Jun 2002) | 2 lines

no longer complains about missing sounds loaded by the engine (wind2, water1, etc), only the QC

------------------------------------------------------------------------
r1965 | molivier | 2002-06-24 09:19:28 +0200 (Mon, 24 Jun 2002) | 2 lines

Fixed video modes menu on Win32

------------------------------------------------------------------------
r1954 | knghtbrd | 2002-06-14 11:49:36 +0200 (Fri, 14 Jun 2002) | 2 lines

Someone has been programming QC too long.  (At least it was QC related!)

------------------------------------------------------------------------
r1953 | lordhavoc | 2002-06-13 21:38:52 +0200 (Thu, 13 Jun 2002) | 2 lines

Fixed major bug in time wrap code, would have not advanced clock at all after wrap.  Thanks to Mercury for pointing out the bug.

------------------------------------------------------------------------
r1951 | lordhavoc | 2002-06-13 02:38:27 +0200 (Thu, 13 Jun 2002) | 2 lines

Forgot to apply Vic's axial patch for r_light.c, here it is.

------------------------------------------------------------------------
r1950 | lordhavoc | 2002-06-13 02:25:18 +0200 (Thu, 13 Jun 2002) | 2 lines

Optimized AddDynamicLights and StainNode for axial surfaces/nodes (respectively), thanks to Vic for example code.

------------------------------------------------------------------------
r1947 | molivier | 2002-06-12 14:24:09 +0200 (Wed, 12 Jun 2002) | 2 lines

Added a special key binding menu when compiling for BloodBath

------------------------------------------------------------------------
r1946 | molivier | 2002-06-12 14:22:48 +0200 (Wed, 12 Jun 2002) | 2 lines

Removed an error when compiling with MSVC

------------------------------------------------------------------------
r1943 | lordhavoc | 2002-06-10 23:43:32 +0200 (Mon, 10 Jun 2002) | 2 lines

faster stainmap code in BuildLightMap

------------------------------------------------------------------------
r1942 | lordhavoc | 2002-06-10 23:42:18 +0200 (Mon, 10 Jun 2002) | 2 lines

cleaned up order of bbox checks (whether to use the normal mins/maxs, or the clipmins/maxs, or the hullmins/maxs), and made use of areanodes culling optional (sv_useareanodes 0 will cause it to check against all entities every move, for debugging)

------------------------------------------------------------------------
r1941 | lordhavoc | 2002-06-10 23:40:10 +0200 (Mon, 10 Jun 2002) | 2 lines

cleaned up SV_Physics_Toss a bit - particularly water transitions and floating items

------------------------------------------------------------------------
r1940 | lordhavoc | 2002-06-10 21:07:21 +0200 (Mon, 10 Jun 2002) | 2 lines

get rid of velocity jittering on rain and snow, except for horizontal jitter on snow while falling (since that is a desired effect), should make snow work at low velocities

------------------------------------------------------------------------
r1939 | lordhavoc | 2002-06-10 19:21:30 +0200 (Mon, 10 Jun 2002) | 2 lines

advance angles as well as origin on clients when noclipping (why?  I don't know, consistency)

------------------------------------------------------------------------
r1934 | lordhavoc | 2002-06-09 02:36:34 +0200 (Sun, 09 Jun 2002) | 2 lines

step up stairs while flying

------------------------------------------------------------------------
r1933 | lordhavoc | 2002-06-09 02:30:10 +0200 (Sun, 09 Jun 2002) | 7 lines

SV_PointContents removed (all calls replaced with Mod_PointInLeaf, which is faster)
SV_HullPointContents removed (no longer needed)
SV_TestEntityPosition now returns an int (true if in solid) rather than an edict_t *
sv_jumpstep added - step up while airborn, for example when jumping
sv_wallfriction added - to allow it to be turned off if desired
fly and noclip movement for players is now more like swimming

------------------------------------------------------------------------
r1932 | lordhavoc | 2002-06-09 02:26:08 +0200 (Sun, 09 Jun 2002) | 2 lines

made snow smaller and slightly transparent, looks better now

------------------------------------------------------------------------
r1931 | lordhavoc | 2002-06-09 02:23:07 +0200 (Sun, 09 Jun 2002) | 3 lines

timer now simply returns the same time twice if the OS value wraps, and posts a warning (rather than Sys_Error)
whitespace cleanup

------------------------------------------------------------------------
r1930 | lordhavoc | 2002-06-09 02:20:49 +0200 (Sun, 09 Jun 2002) | 3 lines

timer now simply returns same time twice if the time input wraps, and posts a warning about this occurring, rather than doing a Sys_Error
cleaned up lots of code, mostly timer related.

------------------------------------------------------------------------
r1920 | knghtbrd | 2002-06-07 22:37:45 +0200 (Fri, 07 Jun 2002) | 2 lines

cd_null.c works now.  It's the default because cd_linux.c is Linux only.

------------------------------------------------------------------------
r1919 | lordhavoc | 2002-06-07 21:03:35 +0200 (Fri, 07 Jun 2002) | 2 lines

added back this file from stock quake, so people can build with no CD audio if desired...

------------------------------------------------------------------------
r1898 | lordhavoc | 2002-06-03 19:02:59 +0200 (Mon, 03 Jun 2002) | 2 lines

changed model lighting to match map lighting (this means it is only barely directional, sadly, but matchs the brightness of the map)

------------------------------------------------------------------------
r1895 | molivier | 2002-06-03 08:14:06 +0200 (Mon, 03 Jun 2002) | 2 lines

Updated BloodBath maps list

------------------------------------------------------------------------
r1894 | lordhavoc | 2002-06-03 05:02:21 +0200 (Mon, 03 Jun 2002) | 2 lines

make r_render skip the 3D rendering code (I forgot this before? ick)

------------------------------------------------------------------------
r1893 | lordhavoc | 2002-06-03 04:19:01 +0200 (Mon, 03 Jun 2002) | 2 lines

removed unneeded r_render check

------------------------------------------------------------------------
r1892 | lordhavoc | 2002-06-03 04:07:53 +0200 (Mon, 03 Jun 2002) | 2 lines

disable hidden surface removal by default

------------------------------------------------------------------------
r1891 | knghtbrd | 2002-06-02 21:52:39 +0200 (Sun, 02 Jun 2002) | 3 lines

A minor removal of a few pieces of dead code.  Nothing major.  This is
stage two.

------------------------------------------------------------------------
r1890 | knghtbrd | 2002-06-02 15:47:28 +0200 (Sun, 02 Jun 2002) | 2 lines

Unused.

------------------------------------------------------------------------
r1889 | knghtbrd | 2002-06-02 15:43:41 +0200 (Sun, 02 Jun 2002) | 3 lines

DP code cleanup, stage one - all headers that can be protected by ifdef
and define now are.  Some dead code found in them was also removed.

------------------------------------------------------------------------
r1886 | lordhavoc | 2002-06-01 23:30:36 +0200 (Sat, 01 Jun 2002) | 2 lines

remove unused DrawNotifyString, fix intermission screen so only the finale-style intermission screens print a message slowly onto the screen

------------------------------------------------------------------------
r1885 | lordhavoc | 2002-06-01 23:27:23 +0200 (Sat, 01 Jun 2002) | 2 lines

added -texgamma, -texcontrast, -texbrightness, these manipulate the palette (note: only affects quake palette images) in ways similar to qgamma (or so I assume, having never used it), possibly useful, sorta

------------------------------------------------------------------------
r1884 | lordhavoc | 2002-06-01 23:04:36 +0200 (Sat, 01 Jun 2002) | 2 lines

use volatile on icolor and fcolor pointers in GL_ConvertColorsFloatToByte to avoid aliasing problems (aliasing is exactly what that code is doing, after all)

------------------------------------------------------------------------
r1877 | mercury | 2002-05-29 13:28:09 +0200 (Wed, 29 May 2002) | 4 lines

I have commit access to DP? When did that happen?

Fix the flying backpacks, just moving two lines, one of which is a comment.

------------------------------------------------------------------------
r1874 | lordhavoc | 2002-05-27 08:54:54 +0200 (Mon, 27 May 2002) | 2 lines

attempt at working around a NVIDIA 23.11 TNT driver bug which causes the menu text to be squished to the top

------------------------------------------------------------------------
r1873 | lordhavoc | 2002-05-27 08:48:03 +0200 (Mon, 27 May 2002) | 2 lines

make bbox collisions work again

------------------------------------------------------------------------
r1872 | lordhavoc | 2002-05-27 08:47:22 +0200 (Mon, 27 May 2002) | 2 lines

fix for gl_mesh_maxtriangles not defaulting correctly and raised minimum limit to 1024

------------------------------------------------------------------------
r1871 | lordhavoc | 2002-05-27 08:44:59 +0200 (Mon, 27 May 2002) | 2 lines

added some smoke to the fire effect (requested for bloodbath)

------------------------------------------------------------------------
r1867 | lordhavoc | 2002-05-22 12:08:34 +0200 (Wed, 22 May 2002) | 2 lines

fix for uninitialized start/end of trace against bbox (oops!!)

------------------------------------------------------------------------
r1866 | lordhavoc | 2002-05-22 11:57:49 +0200 (Wed, 22 May 2002) | 4 lines

added RecursiveHullCheckPoint for quicker tracing of a single point (that is to say: start == end)
rewrote RecursiveHullCheck a few times trying to improve it and gave up (epsilons are finicky), mostly reverted, however the mid point calculation is more accurate
(this fixes the 'can't move' bug)

------------------------------------------------------------------------
r1865 | lordhavoc | 2002-05-22 05:17:50 +0200 (Wed, 22 May 2002) | 2 lines

fix a bunch of pointer type warnings introduced by the change to const parameters in R_ConcatRotations and R_ConcatTransforms (now take float * instead of two dimensional array)

------------------------------------------------------------------------
r1864 | lordhavoc | 2002-05-21 13:12:40 +0200 (Tue, 21 May 2002) | 2 lines

ignore various MSVC files (.opt, .plg, .ncb) and .exe

------------------------------------------------------------------------
r1863 | lordhavoc | 2002-05-21 13:10:23 +0200 (Tue, 21 May 2002) | 2 lines

ignore .o files

------------------------------------------------------------------------
r1862 | lordhavoc | 2002-05-21 12:49:48 +0200 (Tue, 21 May 2002) | 2 lines

added collision.c, cl_collision.c. collision.h, cl_collision.h

------------------------------------------------------------------------
r1861 | lordhavoc | 2002-05-21 12:47:23 +0200 (Tue, 21 May 2002) | 4 lines

split out RecursiveHullCheck and related code into collision.c (shared by client and server, doesn't care what an entity is), and cl_collision.c (CL_TraceLine and related code), this cleans up a lot of messy RecursiveHullCheck calls, replacing them with Collision_ClipTrace calls
also removed some commented out code
and fixed an epsilon glitch in RecursiveHullCheck which was mostly visible when shooting a gun along a wall at angles nearly parallel with the wall

------------------------------------------------------------------------
r1860 | lordhavoc | 2002-05-21 12:36:48 +0200 (Tue, 21 May 2002) | 2 lines

made various things take const pointers (optimizer hint), commented out and/or removed a lot of unused functions

------------------------------------------------------------------------
r1859 | lordhavoc | 2002-05-21 12:22:32 +0200 (Tue, 21 May 2002) | 2 lines

changed Length() call to VectorLength() macro in two places

------------------------------------------------------------------------
r1858 | lordhavoc | 2002-05-21 12:20:45 +0200 (Tue, 21 May 2002) | 2 lines

changed Length() call to VectorLength() macro...  inside a comment...  yes pointless I know...

------------------------------------------------------------------------
r1857 | lordhavoc | 2002-05-21 12:18:11 +0200 (Tue, 21 May 2002) | 2 lines

optimized (now does not use a sqrt for each entity) and improved findradius (now compares sphere against bboxes, rather than entity centers)

------------------------------------------------------------------------
r1856 | lordhavoc | 2002-05-21 05:51:57 +0200 (Tue, 21 May 2002) | 2 lines

build for -mwindows (so it doesn't open a console)

------------------------------------------------------------------------
r1855 | lordhavoc | 2002-05-21 04:32:04 +0200 (Tue, 21 May 2002) | 2 lines

validate animations in zym models

------------------------------------------------------------------------
r1852 | lordhavoc | 2002-05-19 03:30:53 +0200 (Sun, 19 May 2002) | 2 lines

fix for really dumb mistake (missing memset) in Mod_SplitSurfMeshIfTooBig

------------------------------------------------------------------------
r1848 | lordhavoc | 2002-05-16 08:54:20 +0200 (Thu, 16 May 2002) | 5 lines

now fetchs wgl functions
now works with all drivers I would hope (tries both wglGetProcAddress and GetProcAddress to get a function's address)
now detects both glDrawRangeElements (1.2 function) and GL_EXT_draw_range_elements (1.1 and above extension)
now tunes gl_mesh_maxtriangles based on DrawRangeElements limitations reported by driver (if available)

------------------------------------------------------------------------
r1847 | lordhavoc | 2002-05-16 08:51:15 +0200 (Thu, 16 May 2002) | 2 lines

use qglDeleteTextures, not glDeleteTextures

------------------------------------------------------------------------
r1842 | lordhavoc | 2002-05-15 11:04:56 +0200 (Wed, 15 May 2002) | 2 lines

increased MAX_SURFVERTS to hold as many as the surf mesh splitter in model_brush.c allows (and added comment saying so)

------------------------------------------------------------------------
r1841 | lordhavoc | 2002-05-15 10:56:45 +0200 (Wed, 15 May 2002) | 4 lines

muzzleflash fades out
changed .lights file format very slightly to add customizable distance bias (softness)
now splits surface meshs bigger than 1000 tris into multiple smaller ones automatically while loading

------------------------------------------------------------------------
r1840 | lordhavoc | 2002-05-15 10:53:48 +0200 (Wed, 15 May 2002) | 2 lines

reduced skysphere from 2048 triangles to 1024

------------------------------------------------------------------------
r1839 | lordhavoc | 2002-05-15 06:00:37 +0200 (Wed, 15 May 2002) | 2 lines

directional static lighting support (but not fast yet), for maps compiled with (as yet unreleased) new version of hlight

------------------------------------------------------------------------
r1838 | lordhavoc | 2002-05-15 05:58:00 +0200 (Wed, 15 May 2002) | 2 lines

change a lot of calls from gl to qgl

------------------------------------------------------------------------
r1837 | lordhavoc | 2002-05-15 05:55:53 +0200 (Wed, 15 May 2002) | 2 lines

oops forgot to commit this piece of the unsuccessful support for floating items

------------------------------------------------------------------------
r1834 | lordhavoc | 2002-05-15 04:30:05 +0200 (Wed, 15 May 2002) | 2 lines

sv_stepheight cvar, SV_Init now calls SV_Phys_Init, and another unsuccessful attempt to make items float in air if spawned on soon-deleted platforms (mapper trick for floating items)

------------------------------------------------------------------------
r1833 | lordhavoc | 2002-05-15 04:25:08 +0200 (Wed, 15 May 2002) | 2 lines

slight optimizations to GL_ConvertColorsFloattoByte

------------------------------------------------------------------------
r1830 | lordhavoc | 2002-05-14 12:43:25 +0200 (Tue, 14 May 2002) | 2 lines

search for GL functions using GetProcAddress on win32 instead of wglGetProcAddress (which only lists extensions, apparently), fixes inability to find GL 1.1.0 functions in 3dfx driver (maybe NVIDIA and others, only tested 3dfx)

------------------------------------------------------------------------
r1829 | lordhavoc | 2002-05-14 12:40:35 +0200 (Tue, 14 May 2002) | 4 lines

independent control of gl_mesh_maxtriangles and gl_mesh_transtriangles (that is to say you can have more transparent triangles than normal ones, they get rendered in batchs anyway)

also a check for meshs too big for 3DFX drivers, which might fix problems for some people, I dunno, I was unable to reproduce the problem on my voodoo2 this time (has occurred in the past, maybe something else is broken in the gl_backend preventing it from overflowing the vertex buffers of the driver)

------------------------------------------------------------------------
r1820 | lordhavoc | 2002-05-04 14:08:45 +0200 (Sat, 04 May 2002) | 3 lines

cleaned up and fixed collisions with brush models (example: you can now ramp jump and hit the light fixture in e4m1 in dp mod), now uses 3 different bounding boxes for the trace (hullmins/hullmaxs for collisions with brush models, mins/maxs for collisions with normal entities, mins2/maxs2 for collisions with monsters), and the movebounds use the largest of the bounding boxes to ensure proper collisions
items suspended in the air on a func_door (or similar) entity which is then killed by a trigger, should now continue floating in the air (this is a gross hack, to make suspended items in various maps stay in the air)

------------------------------------------------------------------------
r1819 | lordhavoc | 2002-05-04 14:04:19 +0200 (Sat, 04 May 2002) | 3 lines

mostly dynamic GL binding (more needs to be done, but it's closer)
added gl_mesh_drawmode cvar (3 = drawrangeelements (if available), 2 = drawelements, 1 = arrayelement, 0 = completely manual), 0 should get the 3dfx glquake minigl running...

------------------------------------------------------------------------
r1818 | lordhavoc | 2002-05-04 00:07:16 +0200 (Sat, 04 May 2002) | 2 lines

reverted embedded-in-other-object behavior to sticking, rather than allowing you to walk through it, to fix many maps

------------------------------------------------------------------------
r1817 | lordhavoc | 2002-05-04 00:06:05 +0200 (Sat, 04 May 2002) | 2 lines

hopefully this fixes the problem in TNT drivers with the options menu (too much text in one batch)

------------------------------------------------------------------------
r1802 | lordhavoc | 2002-04-30 09:37:35 +0200 (Tue, 30 Apr 2002) | 2 lines

i is not longer an unsigned short in Palette_Setup8to24

------------------------------------------------------------------------
r1800 | lordhavoc | 2002-04-30 08:28:21 +0200 (Tue, 30 Apr 2002) | 2 lines

more cleaning - glTexParameterf replaced with glTexParameteri

------------------------------------------------------------------------
r1799 | lordhavoc | 2002-04-30 08:24:30 +0200 (Tue, 30 Apr 2002) | 2 lines

changed texrgbscale to int rather than float, this allowed me to change all remaining glTexEnvf calls to glTexEnvi

------------------------------------------------------------------------
r1798 | lordhavoc | 2002-04-30 08:03:29 +0200 (Tue, 30 Apr 2002) | 2 lines

no longer uses glColor3f at all

------------------------------------------------------------------------
r1797 | lordhavoc | 2002-04-30 08:02:29 +0200 (Tue, 30 Apr 2002) | 2 lines

disabled lookup of unused multitexture function (glMultiTexCoord2f)

------------------------------------------------------------------------
r1796 | lordhavoc | 2002-04-30 07:43:54 +0200 (Tue, 30 Apr 2002) | 2 lines

disabled lookup of unused multitexture function (glMultiTexCoord2f)

------------------------------------------------------------------------
r1781 | lordhavoc | 2002-04-28 22:15:05 +0200 (Sun, 28 Apr 2002) | 2 lines

fix for misparsing of sound length in "data" chunk of WAVE, this should fix stereo sound crashs

------------------------------------------------------------------------
r1780 | lordhavoc | 2002-04-28 21:41:52 +0200 (Sun, 28 Apr 2002) | 2 lines

some cleaning which seems to have fixed (I hope?) a crash in stereo 16bit sound resampling when source and destination rates are the same

------------------------------------------------------------------------
r1779 | lordhavoc | 2002-04-28 21:37:59 +0200 (Sun, 28 Apr 2002) | 2 lines

fix for savegames containing newlines inside strings (now they are converted to escape codes, which COM_Parse will happily dismantle again when loading)

------------------------------------------------------------------------
r1778 | lordhavoc | 2002-04-28 21:35:17 +0200 (Sun, 28 Apr 2002) | 2 lines

minor cleaning of obsolete protocol stuff (svc_fog is now considered unused, because it really never was used)

------------------------------------------------------------------------
r1735 | lordhavoc | 2002-04-12 06:24:29 +0200 (Fri, 12 Apr 2002) | 2 lines

cleaned up the newlines (carriagereturn carriagereturn linefeed?  weird!)

------------------------------------------------------------------------
r1734 | lordhavoc | 2002-04-11 11:33:15 +0200 (Thu, 11 Apr 2002) | 2 lines

removed silly uses of 'long' (now int, or qbyte *, depending on the way it was used), and changed memheader sentinels to work on processors which can not handle unaligned memory access (Sparc for example)

------------------------------------------------------------------------
r1733 | lordhavoc | 2002-04-11 11:30:51 +0200 (Thu, 11 Apr 2002) | 2 lines

timerefresh works more sanely again

------------------------------------------------------------------------
r1715 | lordhavoc | 2002-04-06 05:43:50 +0200 (Sat, 06 Apr 2002) | 2 lines

added back the hacky NAT routing fix since it actually does work, the win32 problems were unrelated and have been fixed

------------------------------------------------------------------------
r1713 | lordhavoc | 2002-04-05 11:34:39 +0200 (Fri, 05 Apr 2002) | 2 lines

MSG_Read functions are never used inside if's anymore (this fixes some problems with MSVC)

------------------------------------------------------------------------
r1712 | lordhavoc | 2002-04-05 11:32:12 +0200 (Fri, 05 Apr 2002) | 2 lines

minor cleanup/simplification (though a bit of a de-optimization) of explosion shading, might fix a glitch or two on the edges, not sure

------------------------------------------------------------------------
r1699 | lordhavoc | 2002-04-01 11:14:45 +0200 (Mon, 01 Apr 2002) | 2 lines

newline change?

------------------------------------------------------------------------
r1697 | lordhavoc | 2002-04-01 11:00:29 +0200 (Mon, 01 Apr 2002) | 2 lines

removed hacky network code that tried to make DP work through NAT routers (but infact just broke everything, sigh)

------------------------------------------------------------------------
r1696 | lordhavoc | 2002-04-01 10:58:47 +0200 (Mon, 01 Apr 2002) | 2 lines

fix for dedicated server spewing error about cl_avidemo

------------------------------------------------------------------------
r1693 | lordhavoc | 2002-03-30 06:04:54 +0100 (Sat, 30 Mar 2002) | 2 lines

added cl_avidemo cvar (saves a series of tga images named gamedir/dpavi000000.tga and so on, the parameter to it is the framerate to save, locks framerate to this while saving, set back to 0 to stop - note there is sound saving code but it is commented out because it's always desynchronized to the video because quake has such a lousy sound engine)

------------------------------------------------------------------------
r1692 | lordhavoc | 2002-03-30 06:00:08 +0100 (Sat, 30 Mar 2002) | 2 lines

forgot to commit this before

------------------------------------------------------------------------
r1691 | lordhavoc | 2002-03-30 04:04:49 +0100 (Sat, 30 Mar 2002) | 2 lines

force filenames to lowercase in listdirectory code on windows

------------------------------------------------------------------------
r1688 | lordhavoc | 2002-03-27 11:21:45 +0100 (Wed, 27 Mar 2002) | 2 lines

-lXIE does not seem to be necessary, disabled (but left a comment incase anyone needs it)

------------------------------------------------------------------------
r1687 | lordhavoc | 2002-03-27 10:13:34 +0100 (Wed, 27 Mar 2002) | 2 lines

removed fog shaderstage, merged it into the normal stage

------------------------------------------------------------------------
r1686 | lordhavoc | 2002-03-27 04:44:35 +0100 (Wed, 27 Mar 2002) | 2 lines

reorganized shader rendering calls to process the whole surface chain multiple times in the shader function (pretty fast), rather than calling the shader function multiple times per surface (slow!)

------------------------------------------------------------------------
r1685 | lordhavoc | 2002-03-27 04:42:22 +0100 (Wed, 27 Mar 2002) | 2 lines

smoke is alpha again (not additive), rather dark in appearance, lingers longer

------------------------------------------------------------------------
r1684 | lordhavoc | 2002-03-27 04:40:26 +0100 (Wed, 27 Mar 2002) | 2 lines

massive speedups (removed a few 256k memsets)

------------------------------------------------------------------------
r1682 | lordhavoc | 2002-03-27 01:34:02 +0100 (Wed, 27 Mar 2002) | 2 lines

added some (not yet used) key config menu code, part of a redesign for loading the key config menu layout from configs (more specifically default.cfg in DP mod and any others that use it)

------------------------------------------------------------------------
r1681 | eviltypeguy | 2002-03-26 18:47:42 +0100 (Tue, 26 Mar 2002) | 2 lines

Added newline at end for lame gcc versions ;)

------------------------------------------------------------------------
r1680 | molivier | 2002-03-26 13:40:19 +0100 (Tue, 26 Mar 2002) | 2 lines

Some menu customizations for BloodBath

------------------------------------------------------------------------
r1679 | molivier | 2002-03-26 10:55:33 +0100 (Tue, 26 Mar 2002) | 2 lines

Fixed PF_registercvar

------------------------------------------------------------------------
r1678 | lordhavoc | 2002-03-26 01:47:44 +0100 (Tue, 26 Mar 2002) | 2 lines

minor speed increase in surface shaders, by splitting out surfaces with and without fullbrights into different shader code

------------------------------------------------------------------------
r1677 | lordhavoc | 2002-03-26 00:00:53 +0100 (Tue, 26 Mar 2002) | 2 lines

updated MSVC and mingw files to compile filematch.c

------------------------------------------------------------------------
r1676 | lordhavoc | 2002-03-25 23:51:57 +0100 (Mon, 25 Mar 2002) | 2 lines

now loads gamedir/*.pak instead of gamedir/pak#.pak, sorted by ASCII value (note: lowercase overrides uppercase)

------------------------------------------------------------------------
r1675 | lordhavoc | 2002-03-25 23:48:25 +0100 (Mon, 25 Mar 2002) | 2 lines

reduced the drawqueue buffer from 1mb to 256k (really it only needs about 60k)

------------------------------------------------------------------------
r1674 | lordhavoc | 2002-03-25 23:46:41 +0100 (Mon, 25 Mar 2002) | 2 lines

seed the random number generator with the current time at startup (quake never seeded it)

------------------------------------------------------------------------
r1673 | molivier | 2002-03-25 13:38:10 +0100 (Mon, 25 Mar 2002) | 2 lines

DarkPlaces should always wait for connections in BloodBath mode

------------------------------------------------------------------------
r1668 | molivier | 2002-03-22 08:12:05 +0100 (Fri, 22 Mar 2002) | 2 lines

A few minor changes for BloodBath support (including the map list); more to come

------------------------------------------------------------------------
r1665 | lordhavoc | 2002-03-20 20:06:49 +0100 (Wed, 20 Mar 2002) | 3 lines

cleaned up nehahra demo list
cleaned up level/episode system, now it is much easier (and cleaner) to add new maps/episodes/games

------------------------------------------------------------------------
r1664 | lordhavoc | 2002-03-20 20:05:16 +0100 (Wed, 20 Mar 2002) | 2 lines

added -bloodbath game

------------------------------------------------------------------------
r1663 | lordhavoc | 2002-03-20 18:31:29 +0100 (Wed, 20 Mar 2002) | 2 lines

fix for CreatePath creating a directory of the drive's letter in windows (d:\quake created a d directory, then d: (ignored), then d:\quake, now creates d: (ignored), then d:\quake)  (thanks Elric)

------------------------------------------------------------------------
r1662 | lordhavoc | 2002-03-20 18:29:43 +0100 (Wed, 20 Mar 2002) | 2 lines

fixed options menu item count (thanks Elric)

------------------------------------------------------------------------
r1661 | lordhavoc | 2002-03-17 17:32:02 +0100 (Sun, 17 Mar 2002) | 5 lines

added EF_STARDUST effect (showering golden sparks, and the entity glows)
reduced rocket glow a little
made blood stains brighter again (so you can at least see the floor)
EF_STARDUST and EF_FLAME now create a fixed size effect rather than attempting to use the model bounding box (which is too big usually)

------------------------------------------------------------------------
r1660 | lordhavoc | 2002-03-17 16:56:18 +0100 (Sun, 17 Mar 2002) | 2 lines

fix for EF_FLAME and lots of other bugs with 16bit/8bit fields (modelindex, frame, effects)

------------------------------------------------------------------------
r1659 | lordhavoc | 2002-03-16 16:00:15 +0100 (Sat, 16 Mar 2002) | 2 lines

changed protocol back to using float coordinates, unless the mod specifies EF_LOWPRECISION on an entity, then it is sent using shorts (if it is within the short range, otherwise it uses floats), this loses some bandwidth but makes everything look nice (lifts aren't jerky, etc)

------------------------------------------------------------------------
r1658 | lordhavoc | 2002-03-16 15:51:55 +0100 (Sat, 16 Mar 2002) | 2 lines

added note not to use athlon optimizations in current gcc versions

------------------------------------------------------------------------
r1657 | lordhavoc | 2002-03-16 15:49:13 +0100 (Sat, 16 Mar 2002) | 2 lines

whitespace

------------------------------------------------------------------------
r1656 | lordhavoc | 2002-03-16 15:46:57 +0100 (Sat, 16 Mar 2002) | 2 lines

don't do down traces if sitting on the floor of world (world never moves, so we can skip it), restores a lot of the speed lost in recent commits

------------------------------------------------------------------------
r1655 | lordhavoc | 2002-03-16 15:45:18 +0100 (Sat, 16 Mar 2002) | 2 lines

Check bbox for overlap even on bmodels again (disabling it was a speed loss)

------------------------------------------------------------------------
r1654 | lordhavoc | 2002-03-15 15:40:18 +0100 (Fri, 15 Mar 2002) | 2 lines

darkened blood

------------------------------------------------------------------------
r1651 | lordhavoc | 2002-03-14 20:54:08 +0100 (Thu, 14 Mar 2002) | 2 lines

changed blood settings (note: these are saved cvars, so clear your config for them to take effect)

------------------------------------------------------------------------
r1650 | lordhavoc | 2002-03-14 20:52:06 +0100 (Thu, 14 Mar 2002) | 2 lines

randomized blood and smoke color a bit (darker/brighter randomly), got rid of smoke texture color (so now it fogs for free, no state thrash), looks a bit worse on blood, but oh well

------------------------------------------------------------------------
r1649 | lordhavoc | 2002-03-14 20:46:31 +0100 (Thu, 14 Mar 2002) | 2 lines

Hide no such frame warning if developer is off

------------------------------------------------------------------------
r1648 | lordhavoc | 2002-03-14 20:26:12 +0100 (Thu, 14 Mar 2002) | 2 lines

workaround for absolutely empty sprites (Nehahra s_null.spr)

------------------------------------------------------------------------
r1647 | molivier | 2002-03-14 17:46:07 +0100 (Thu, 14 Mar 2002) | 2 lines

Removed references to r_particles.c

------------------------------------------------------------------------
r1646 | lordhavoc | 2002-03-14 14:30:03 +0100 (Thu, 14 Mar 2002) | 2 lines

Merged r_particles.c back into cl_particles.c to reduce overhead (renderparticle stuff is gone now)

------------------------------------------------------------------------
r1645 | lordhavoc | 2002-03-14 01:04:15 +0100 (Thu, 14 Mar 2002) | 2 lines

MOVETYPE_STEP entities should now fall when support is removed (even if it is not a MOVETYPE_PUSH object beneath them), and fish fall if in the air

------------------------------------------------------------------------
r1644 | lordhavoc | 2002-03-14 01:02:34 +0100 (Thu, 14 Mar 2002) | 3 lines

skip bbox check on bmodels because it is fast enough to trace against their hull and has less problem cases
commented out no longer useful clip.trace.allsolid check in SV_Move

------------------------------------------------------------------------
r1643 | lordhavoc | 2002-03-14 00:59:09 +0100 (Thu, 14 Mar 2002) | 2 lines

sprite code now uses left vector instead of right, and upright facing sprites now work correctly

------------------------------------------------------------------------
r1642 | lordhavoc | 2002-03-14 00:57:42 +0100 (Thu, 14 Mar 2002) | 2 lines

fog water when r_wateralpha is 1

------------------------------------------------------------------------
r1641 | lordhavoc | 2002-03-14 00:56:41 +0100 (Thu, 14 Mar 2002) | 2 lines

greatly improved chances of an entity being visible (in traceline test), checks nearest point (typically corner) on bbox as well as a random trace

------------------------------------------------------------------------
r1640 | lordhavoc | 2002-03-13 14:58:20 +0100 (Wed, 13 Mar 2002) | 2 lines

fix for fall-through-floor-when-embedded-in-another-entity situation (now the entity only falls through entities it is embedded in, and blocks on all others), and another fix for grenade bounce sound, also some cleanup of the toss physics code, and corpses no longer block against eachother

------------------------------------------------------------------------
r1639 | lordhavoc | 2002-03-13 14:46:05 +0100 (Wed, 13 Mar 2002) | 2 lines

added athlon CPU choice (for gcc 2.96 and up)

------------------------------------------------------------------------
r1637 | lordhavoc | 2002-03-13 13:23:18 +0100 (Wed, 13 Mar 2002) | 2 lines

fixed grenades to behave more like quake again (60 normal-dot-velocity tolerance for stopping), fixed continuous bounce sound (repeated touch when sitting on floor), you can now walk on SOLID_SLIDEBOX/SOLID_BBOX objects (like in Q2/Q3), if two objects are stacked and the bottom one moves out from under, the top one will fall (always wished quake would do that)

------------------------------------------------------------------------
r1636 | lordhavoc | 2002-03-13 11:41:45 +0100 (Wed, 13 Mar 2002) | 2 lines

knight/scrag/vore trail effects are half as intense now

------------------------------------------------------------------------
r1634 | lordhavoc | 2002-03-13 06:56:20 +0100 (Wed, 13 Mar 2002) | 2 lines

whoever last modified this forgot a rather important ;

------------------------------------------------------------------------
r1632 | lordhavoc | 2002-03-12 18:14:29 +0100 (Tue, 12 Mar 2002) | 2 lines

more subtle rocket smoke

------------------------------------------------------------------------
r1631 | lordhavoc | 2002-03-12 17:57:26 +0100 (Tue, 12 Mar 2002) | 15 lines

added cl_particles_blood_size_min, cl_particles_blood_size_max, and cl_particles_blood_alpha cvars
changed trails back to quake-style (spawn over distance, not over time)
pt_fade now takes a fade rate (in p->time2)
many tweaks to particle effets
loading screens work correctly now
cleaned up backend code a bit, now does not freak out if a texture upload occurs during rendering
added r_quickmodels (default: on) which makes single-pass models (the vast majority of models) store vertex data directly into the backend arrays (using R_Mesh_Draw_GetBuffer)
model vertex transforms are now applied *after* lighting, this avoids transforming the normals, and prepares for someday adding transforms to the backend
fixed view blend in gl_rmain.c to work correctly with fov values above 90
moved image resampling and mipmapping from gl_textures.c to image.c
now updates screen twice while connecting to a server (so it displays the 'trying...' messages)
improved directional shading of explosions
disabled r_lightmodelhardness since the default was nearly 1.0 anyway, 1.0 is a special quick case
R_LightModel now tints the model and can accept vertices/normals in either model or world coordinates (previously required world coordinates)

------------------------------------------------------------------------
r1614 | lordhavoc | 2002-03-10 06:04:22 +0100 (Sun, 10 Mar 2002) | 2 lines

check for empty submodels (lacrima.bsp for example)

------------------------------------------------------------------------
r1608 | lordhavoc | 2002-03-04 12:10:53 +0100 (Mon, 04 Mar 2002) | 2 lines

slowed down explosion so it lasts about as long as the light flash

------------------------------------------------------------------------
r1607 | lordhavoc | 2002-03-04 12:09:40 +0100 (Mon, 04 Mar 2002) | 2 lines

greatly improved movetype bounce stopping check to consider the angle of the surface

------------------------------------------------------------------------
r1606 | lordhavoc | 2002-03-04 12:08:20 +0100 (Mon, 04 Mar 2002) | 2 lines

don't send entities outside addressable origin range (+-32767)

------------------------------------------------------------------------
r1600 | lordhavoc | 2002-03-01 13:53:52 +0100 (Fri, 01 Mar 2002) | 2 lines

fix for being stuck on a loading screen when it could not find the map (and any other such failures)

------------------------------------------------------------------------
r1599 | lordhavoc | 2002-03-01 13:52:43 +0100 (Fri, 01 Mar 2002) | 2 lines

added Texture Combine option to menu

------------------------------------------------------------------------
r1598 | lordhavoc | 2002-03-01 13:27:33 +0100 (Fri, 01 Mar 2002) | 20 lines

reenabled loading plaques (and cleaned up that code a lot)
moved screenshot/envmap code from gl_backend.c to cl_screen.c (except for the GL SCR_ScreenShot function of course)
cleaned up trailing whitespace in console.c
backend between-batch overhead is now pretty much non-existent (set up state at start of frame, keep it until end of 3D rendering)
default batch size is now 0 triangles (never batch)
index array is not offset for first mesh in batch (which might be the only mesh in the batch)
does not lock arrays until it tries to render the first mesh
moved GL_LockArray/GL_UnlockArray from gl_models.c to gl_backend.c
made GL calls in r_sky.c unnecessary (now uses R_Mesh_ClearDepth)
made every enum in GL_PrintError (used by CHECKGLERROR) optional, for consistency (not that any GL headers would lack most of them)
inlined MYgluPerspective
removed a few unnecessary GL calls in frame setup code
reformatted uses of CHECKGLERROR to be on the same line as the function they are checking (looks cleaner)
increased MAX_TEXTUREUNITS from 4 to 8 (not that there is any code trying to use more than 2 textures anyway)
calling R_RenderView with no worldmodel is no longer fatal (just returns)
R_Mesh_Clear renamed to R_Mesh_Start
R_Mesh_Finish added (ends 3D rendering)
cleaned up some cruft in screen.h
moved gldepthmin/max from vid_ files to gl_backend, and then commented it out anyway (not currently used)

------------------------------------------------------------------------
r1596 | lordhavoc | 2002-03-01 01:13:42 +0100 (Fri, 01 Mar 2002) | 2 lines

changed mingw makefile to by default not compile for any specific processor

------------------------------------------------------------------------
r1595 | lordhavoc | 2002-02-28 11:36:58 +0100 (Thu, 28 Feb 2002) | 2 lines

fixed fogging on models and opaque liquids (teleport/lava)

------------------------------------------------------------------------
r1594 | lordhavoc | 2002-02-28 11:35:32 +0100 (Thu, 28 Feb 2002) | 2 lines

made sprite interpolation optional with a #define (enabled currently, looks too bad ingame without it)

------------------------------------------------------------------------
r1593 | lordhavoc | 2002-02-28 08:15:41 +0100 (Thu, 28 Feb 2002) | 2 lines

fixed some majorly messed up fixes to the angle clamping

------------------------------------------------------------------------
r1592 | lordhavoc | 2002-02-28 07:43:22 +0100 (Thu, 28 Feb 2002) | 2 lines

fixed some sloppyness in my earlier input merging

------------------------------------------------------------------------
r1590 | lordhavoc | 2002-02-28 03:58:30 +0100 (Thu, 28 Feb 2002) | 2 lines

fix mingw warnings

------------------------------------------------------------------------
r1589 | lordhavoc | 2002-02-28 02:38:47 +0100 (Thu, 28 Feb 2002) | 3 lines

cleaned up mouse input system
fixed a bug with svc_setangle on pitch (it was immediately getting clamped in some cases, which made it quite useless)

------------------------------------------------------------------------
r1583 | lordhavoc | 2002-02-27 06:07:47 +0100 (Wed, 27 Feb 2002) | 2 lines

fixed warnings in mingw

------------------------------------------------------------------------
r1582 | lordhavoc | 2002-02-27 06:06:45 +0100 (Wed, 27 Feb 2002) | 2 lines

removed unneeded protocol

------------------------------------------------------------------------
r1581 | lordhavoc | 2002-02-27 05:57:43 +0100 (Wed, 27 Feb 2002) | 2 lines

added glFlush call when done feeding geometry, to get a very nice speed boost, and removed unnecessary glFinish (since VID_Finish does one itself)

------------------------------------------------------------------------
r1580 | lordhavoc | 2002-02-27 05:00:45 +0100 (Wed, 27 Feb 2002) | 2 lines

darkplaces now compiles in mingw

------------------------------------------------------------------------
r1579 | lordhavoc | 2002-02-27 04:58:07 +0100 (Wed, 27 Feb 2002) | 2 lines

renamed byte to qbyte throughout engine to eliminate a mingw conflict

------------------------------------------------------------------------
r1578 | lordhavoc | 2002-02-27 00:20:50 +0100 (Wed, 27 Feb 2002) | 2 lines

hopeful fix for flymove !trace.ent error

------------------------------------------------------------------------
r1571 | lordhavoc | 2002-02-25 14:46:26 +0100 (Mon, 25 Feb 2002) | 2 lines

removed a few CheckSentinelsGlobal calls to get a loading speedup

------------------------------------------------------------------------
r1570 | lordhavoc | 2002-02-25 13:58:23 +0100 (Mon, 25 Feb 2002) | 2 lines

removed gl_mesh_merge feature due to unknown buggyness

------------------------------------------------------------------------
r1569 | lordhavoc | 2002-02-25 13:52:56 +0100 (Mon, 25 Feb 2002) | 2 lines

cleaned up backend code a bit more, added R_Mesh_Draw_GetBuffer (untested - returns addresses in geometry buffers to fill in, to save memcpy on singlepass objects), rewrote Q2 model loading (now Q2 models are the same as Q1 models after loading), removed Q2 model renderer (and good riddence!), changed aliasvert array from 3 float to 4 float alignment to make copies faster

------------------------------------------------------------------------
r1568 | lordhavoc | 2002-02-25 09:31:17 +0100 (Mon, 25 Feb 2002) | 2 lines

added in_pitch_min and in_pitch_max cvars to limit pitch (default: -90 to +90)

------------------------------------------------------------------------
r1567 | lordhavoc | 2002-02-25 08:14:21 +0100 (Mon, 25 Feb 2002) | 2 lines

clean up

------------------------------------------------------------------------
r1566 | lordhavoc | 2002-02-25 04:47:56 +0100 (Mon, 25 Feb 2002) | 2 lines

removed mergesky code

------------------------------------------------------------------------
r1565 | lordhavoc | 2002-02-25 04:45:00 +0100 (Mon, 25 Feb 2002) | 2 lines

removed r_mergesky

------------------------------------------------------------------------
r1564 | lordhavoc | 2002-02-25 03:06:58 +0100 (Mon, 25 Feb 2002) | 4 lines

removed gl_viewmodeldepthhack
fixed gl_mesh_merge bug (which was causing bizarre glitchs)
added mesh index validation when DEBUGGL is enabled

------------------------------------------------------------------------
r1563 | lordhavoc | 2002-02-25 00:48:19 +0100 (Mon, 25 Feb 2002) | 2 lines

improved internal texture management error messages

------------------------------------------------------------------------
r1562 | lordhavoc | 2002-02-25 00:40:11 +0100 (Mon, 25 Feb 2002) | 2 lines

Forgot to commit removal of DrawDecal

------------------------------------------------------------------------
r1560 | lordhavoc | 2002-02-24 08:22:42 +0100 (Sun, 24 Feb 2002) | 2 lines

restructured transparent mesh processing to do conversion from straight index list to transtris during AddTransparent

------------------------------------------------------------------------
r1557 | lordhavoc | 2002-02-24 06:06:26 +0100 (Sun, 24 Feb 2002) | 3 lines

cleaned up lots of unused code, restructured where certain operations are done (index lists are now relative to mesh->firstvert until R_Mesh_Render, for instance)
working toward major speed gains by avoiding geometry copying

------------------------------------------------------------------------
r1556 | lordhavoc | 2002-02-23 23:48:03 +0100 (Sat, 23 Feb 2002) | 2 lines

cleanup of float/byte colors, now colors are always floats until R_Mesh_Render converts them to bytes before use

------------------------------------------------------------------------
r1555 | lordhavoc | 2002-02-23 23:00:46 +0100 (Sat, 23 Feb 2002) | 2 lines

fix for explosions sometimes not being freed at very high framerates

------------------------------------------------------------------------
r1554 | lordhavoc | 2002-02-23 11:50:01 +0100 (Sat, 23 Feb 2002) | 2 lines

CRITICAL fix to checkextension function, it absolutely did not work until this fix.

------------------------------------------------------------------------
r1553 | lordhavoc | 2002-02-23 10:35:29 +0100 (Sat, 23 Feb 2002) | 2 lines

major cleanup to pusher and SV_Move code, major fixes to pusher code (everything should work right now)

------------------------------------------------------------------------
r1552 | lordhavoc | 2002-02-23 10:32:50 +0100 (Sat, 23 Feb 2002) | 2 lines

whitespace

------------------------------------------------------------------------
r1551 | lordhavoc | 2002-02-23 10:31:47 +0100 (Sat, 23 Feb 2002) | 2 lines

improved client number check to prevent potential crashs

------------------------------------------------------------------------
r1550 | lordhavoc | 2002-02-23 10:30:15 +0100 (Sat, 23 Feb 2002) | 2 lines

removed -zone mention from SZ_GetSpace overflow error

------------------------------------------------------------------------
r1549 | lordhavoc | 2002-02-22 11:41:18 +0100 (Fri, 22 Feb 2002) | 2 lines

fixed bugs with explosion intensity shading according to view direction

------------------------------------------------------------------------
r1544 | molivier | 2002-02-20 09:59:38 +0100 (Wed, 20 Feb 2002) | 2 lines

Modified 3 casts to get rid of a few warnings in MSVC6.

------------------------------------------------------------------------
r1543 | lordhavoc | 2002-02-20 09:08:01 +0100 (Wed, 20 Feb 2002) | 2 lines

changed clean to delete *.o

------------------------------------------------------------------------
r1539 | lordhavoc | 2002-02-19 11:56:54 +0100 (Tue, 19 Feb 2002) | 5 lines

added viewzoom extension to QC and client (smooth sniper zooming, with sensitivity scaling)
protocol should be able to masq now (not a perfect fix like net_chan, but a fix for most people - I hope) - server waits to send serverinfo until first reply from client (any clc_ message will do), client spams clc_nop every 3 seconds until it gets serverinfo (FIXME: maybe only once would do?)
upgraded aiming angles sent from client to floats in DPPROTOCOL_VERSION2 mode
updated cl_shownet 2 svc name list in cl_parse.c (it was quite outdated)

------------------------------------------------------------------------
r1537 | molivier | 2002-02-18 11:49:31 +0100 (Mon, 18 Feb 2002) | 2 lines

Updated DSP file

------------------------------------------------------------------------
r1534 | lordhavoc | 2002-02-18 07:35:09 +0100 (Mon, 18 Feb 2002) | 2 lines

new entity protocol, GREATLY improved over quake, massive net traffic reduction

------------------------------------------------------------------------
r1533 | lordhavoc | 2002-02-18 05:57:58 +0100 (Mon, 18 Feb 2002) | 2 lines

fixed dedicated erroring on startup

------------------------------------------------------------------------
r1530 | lordhavoc | 2002-02-17 21:56:00 +0100 (Sun, 17 Feb 2002) | 2 lines

new entity protocol nearly complete, but still unused

------------------------------------------------------------------------
r1527 | lordhavoc | 2002-02-16 00:50:36 +0100 (Sat, 16 Feb 2002) | 3 lines

changed bgmvolume/volume to always be registered, sliders for them always work (even with -nosound), but the items are displayed ghosted if -nosound or -nocdaudio is used
changed all Cvar_SetValue calls to Cvar_SetValueQuick

------------------------------------------------------------------------
r1526 | lordhavoc | 2002-02-16 00:21:38 +0100 (Sat, 16 Feb 2002) | 2 lines

removed (unused) quake endscreen text

------------------------------------------------------------------------
r1525 | lordhavoc | 2002-02-16 00:16:06 +0100 (Sat, 16 Feb 2002) | 2 lines

reduced view warping when underwater

------------------------------------------------------------------------
r1524 | lordhavoc | 2002-02-16 00:15:20 +0100 (Sat, 16 Feb 2002) | 2 lines

disable sliders for volume and vgmvolume (CD volume) when they do not exist

------------------------------------------------------------------------
r1523 | lordhavoc | 2002-02-15 23:28:08 +0100 (Fri, 15 Feb 2002) | 20 lines

moved a lot of 2D/screen stuff out of gl_screen.c into cl_screen.c
moved remainder of gl_screen.c into gl_backend.c
removed gl_screen.c
inlined GL_BrightenScreen in gl_draw.c
moved a lot of GL stuff out of gl_rmain.c into gl_backend.c
converted polyblend to R_Mesh based
replaced lighthalf/gl_lightmode with v_overbrightbits
renamed contrast to brightness, and brightness to contrast (to match monitor controls)
merged hardware and software brightness/contrast/gamma into v_contrast, v_brightness, v_gamma, etc, switchable using v_hwgamma (automatically forced off if hardware gamma support is unavailable)
added ghostable menu items (unavailable gamma, for example)
rearranged options menu
2D resolution slider added (from 320x240 to full resolution)
fixed misuse of strncmp for bindings menu (thanks Elric)
adjustable crosshair size
renamed GL_BeginRendering to VID_GetWindowSize
renamed GL_EndRendering to VID_Finish
made screenshot and envmap share one function for grabbing images
moved underwater warping into cl_screen code
starting work on new entity protocol (not hooked up yet)

------------------------------------------------------------------------
r1522 | lordhavoc | 2002-02-15 22:40:24 +0100 (Fri, 15 Feb 2002) | 2 lines

particle tweaks

------------------------------------------------------------------------
r1521 | lordhavoc | 2002-02-15 22:33:31 +0100 (Fri, 15 Feb 2002) | 2 lines

double precision RecursiveHullCheck

------------------------------------------------------------------------
r1520 | lordhavoc | 2002-02-15 22:29:45 +0100 (Fri, 15 Feb 2002) | 2 lines

made smoke/blood texture a little brighter

------------------------------------------------------------------------
r1519 | lordhavoc | 2002-02-15 22:28:09 +0100 (Fri, 15 Feb 2002) | 2 lines

validate more when loading zymotic models, also reverse triangles so they don't render inside out (FIXME: fix this in the converter)

------------------------------------------------------------------------
r1518 | lordhavoc | 2002-02-15 22:27:00 +0100 (Fri, 15 Feb 2002) | 2 lines

made corona texture brighter, and rendering of it darker, fixes 'white' coronas around lava balls (they needed more overbright)

------------------------------------------------------------------------
r1517 | lordhavoc | 2002-02-15 22:25:43 +0100 (Fri, 15 Feb 2002) | 2 lines

double precision RecursiveHullCheck

------------------------------------------------------------------------
r1516 | lordhavoc | 2002-02-15 22:21:31 +0100 (Fri, 15 Feb 2002) | 2 lines

cleaned up zym cruft from debugging

------------------------------------------------------------------------
r1515 | lordhavoc | 2002-02-15 22:20:12 +0100 (Fri, 15 Feb 2002) | 2 lines

added Cvar_SetQuick and Cvar_SetValueQuick (both take a cvar_t * instead of a name)

------------------------------------------------------------------------
r1514 | lordhavoc | 2002-02-15 22:19:04 +0100 (Fri, 15 Feb 2002) | 3 lines

fixed rotating+moving pushers (teleport ball in end.bsp), cleaned up code a lot
double precision RecursiveHullCheck

------------------------------------------------------------------------
r1513 | lordhavoc | 2002-02-14 01:43:48 +0100 (Thu, 14 Feb 2002) | 2 lines

fixed zymotic model transforms (lots of cruft leftover that I will clean up soon)

------------------------------------------------------------------------
r1500 | eviltypeguy | 2002-02-07 02:18:22 +0100 (Thu, 07 Feb 2002) | 2 lines

Remove pointless and wasteful variable assignment

------------------------------------------------------------------------
r1497 | lordhavoc | 2002-02-05 16:22:07 +0100 (Tue, 05 Feb 2002) | 2 lines

check if model is NULL when doing trace checking

------------------------------------------------------------------------
r1496 | lordhavoc | 2002-02-05 04:08:32 +0100 (Tue, 05 Feb 2002) | 2 lines

cleaned up entity culling in server code, implemented new option - sv_cullentities_trace - traces a line from eye to random locations in the model box, if a trace succeeds it marks the entity visibility timeout for 1 second in the future, and if it fails and the timeout has expired by then, it culls the entity.  this method works great for most cases, and is far more aggressive (and faster) than pvs culling

------------------------------------------------------------------------
r1493 | molivier | 2002-02-04 11:36:23 +0100 (Mon, 04 Feb 2002) | 2 lines

Updated DSP file. Fixed a bunch of warnings with MSVC6

------------------------------------------------------------------------
r1487 | lordhavoc | 2002-02-03 17:51:30 +0100 (Sun, 03 Feb 2002) | 2 lines

fixed numerous bugs in SV_Trace_Toss

------------------------------------------------------------------------
r1486 | lordhavoc | 2002-02-03 17:50:42 +0100 (Sun, 03 Feb 2002) | 2 lines

removed steporigin etc, they aren't used anymore

------------------------------------------------------------------------
r1485 | lordhavoc | 2002-02-03 12:34:53 +0100 (Sun, 03 Feb 2002) | 4 lines

removed decals
fixed viewmodel disappearing with masked sky (skybox or skyquality 2)
removed flare particle from rockets (might add it back later)

------------------------------------------------------------------------
r1484 | lordhavoc | 2002-02-03 11:40:46 +0100 (Sun, 03 Feb 2002) | 6 lines

rearranged r_speeds report a bit, and split up reporting of meshtris into normal and transparent categories, also displays number of meshs of each type
made byte color array format work (byte format is very slightly faster than float)
disabled float color array format to save some memory
added gl_mesh_sorttransbymesh cvar (default: on) to get a performance gain in mingled mesh conditions (by never mingling triangles of different meshs), this mode can batch render transparent triangles too (unlike the other two modes)
increased default maxtriangles to 8192

------------------------------------------------------------------------
r1483 | lordhavoc | 2002-02-03 11:34:02 +0100 (Sun, 03 Feb 2002) | 2 lines

changed back to profiling, with optimizations, and back to alsa 0.5 sound

------------------------------------------------------------------------
r1482 | lordhavoc | 2002-02-03 11:32:34 +0100 (Sun, 03 Feb 2002) | 2 lines

fixed monster interpolation in normal quake, which makes dpcrush not lerped unfortunately

------------------------------------------------------------------------
r1481 | lordhavoc | 2002-02-03 11:30:25 +0100 (Sun, 03 Feb 2002) | 2 lines

passing 0 time to CL_AllocDlight now gives a die time of 0, not cl.time + 0

------------------------------------------------------------------------
r1480 | lordhavoc | 2002-02-03 11:29:16 +0100 (Sun, 03 Feb 2002) | 2 lines

muzzleflashs do not keep stacking up on consecutive frames now

------------------------------------------------------------------------
r1479 | lordhavoc | 2002-02-03 11:27:54 +0100 (Sun, 03 Feb 2002) | 2 lines

moved viewmodel rendering to avoid polluting the main model rendering time

------------------------------------------------------------------------
r1478 | lordhavoc | 2002-02-03 11:26:48 +0100 (Sun, 03 Feb 2002) | 2 lines

removed some old commented out code

------------------------------------------------------------------------
r1477 | lordhavoc | 2002-02-03 11:25:45 +0100 (Sun, 03 Feb 2002) | 2 lines

lights should not decay now when console is down (pausing game), and cleaned up sound update call to not use renderer variables

------------------------------------------------------------------------
r1476 | lordhavoc | 2002-02-03 11:24:02 +0100 (Sun, 03 Feb 2002) | 2 lines

changed explosion color calculations, they look much better now

------------------------------------------------------------------------
r1475 | lordhavoc | 2002-02-03 11:23:09 +0100 (Sun, 03 Feb 2002) | 2 lines

made coronas small and intense, much more noticable now

------------------------------------------------------------------------
r1469 | lordhavoc | 2002-02-02 19:58:01 +0100 (Sat, 02 Feb 2002) | 2 lines

coronas now scale with the light radius

------------------------------------------------------------------------
r1468 | knghtbrd | 2002-02-01 16:28:42 +0100 (Fri, 01 Feb 2002) | 2 lines

cgame.c:60: warning: implicit declaration of function `memset', fixed

------------------------------------------------------------------------
r1467 | knghtbrd | 2002-02-01 16:22:46 +0100 (Fri, 01 Feb 2002) | 2 lines

cgamevm.h:11:6: no newline at end of file, fixed.

------------------------------------------------------------------------
r1462 | lordhavoc | 2002-02-01 12:40:21 +0100 (Fri, 01 Feb 2002) | 2 lines

added gib shower effect, they leave no trails but make blood marks where they hit...  (note: this is still highly experimental and cgame might be removed at some point, and no mods use this anyway)

------------------------------------------------------------------------
r1461 | lordhavoc | 2002-02-01 12:37:41 +0100 (Fri, 01 Feb 2002) | 2 lines

added CGVM_Stain function

------------------------------------------------------------------------
r1460 | lordhavoc | 2002-02-01 10:22:28 +0100 (Fri, 01 Feb 2002) | 2 lines

removed unnecessary if in setting up divide table for dlighting

------------------------------------------------------------------------
r1459 | molivier | 2002-02-01 08:20:26 +0100 (Fri, 01 Feb 2002) | 2 lines

Removed warnings in MSVC6. Updated the DSP file.

------------------------------------------------------------------------
r1452 | lordhavoc | 2002-01-31 17:41:59 +0100 (Thu, 31 Jan 2002) | 25 lines

got rid of buildnumber.c and buildnum program, now uses builddate.c (touched each time it is built to keep the date changing)
clientside TraceLine can now hit brush model entities (TraceLine_ScanForBModels updates list of entities to check)
added *highly experimental* clientside gamecode (currently embedded in the engine, just trying things out) which currently doesn't do anything really
made CL_RelinkEntities only called when the client is connected and there is a world model
added fractalnoisequick (variant of fractalnoise that does not allocate/free a temporary buffer, and to achieve this does not use the range remapping)
added stainmap effects (stained lightmaps), which will probably soon replace decals
spark showers now pay attention to the velocity in the TE_SPARKSHOWER packet (if the mod uses this), bullet impacts still have no velocity
added TE_PLASMABURN (combination of TE_SMALLFLASH and a stain on the walls)
added svc_cgame (DO NOT USE THIS, EXPERIMENTAL, but so is the cgame code itself)
Cmd_TokenizeString now uses a fixed size buffer instead of many little allocations (speedup by not having Z_Malloc/Z_Free happening constantly)
cvar code tries very hard to avoid reallocating string now
va() function now uses a cycling set of 8 string buffers to try to avoid conflicts
console logging no longer uses va()
reduced default mesh buffer size from 21760 triangles to 4096 (transparent triangles are costly enough it's not a good idea to exceed this anyway)
texture management code now uses 3 memory pools to give better memory reports according to type of data
R_UpdateTexture has better memory behavior on non-procedural textures now (replaces inputtexels if it has not been uploaded yet, otherwise just uploads it directly)
added -developer commandline option (which is rather hacky) to force developer on for entire startup process, to get logging before the configs are read
decals stick to brush model entities now
stains stick to embedded bmodels (ones that are part of the map, not ones instanced from outside like ammo boxes)
skingroups above 0 are not automatically precached now (if you have a lot of mods installed in your id1 directory, they tend to not use all the skins, which is wasteful)
starting a new game (from the singleplayer menu) forces deathmatch and coop to 0 now
lightmaps are precached again (can't remember why I ever disabled this)
changed VectorSet's parameter order to be more consistent with other vector ops
removed a duplicate registration of the vid_mouse cvar (in vid_glx.c)

------------------------------------------------------------------------
r1451 | lordhavoc | 2002-01-31 13:16:59 +0100 (Thu, 31 Jan 2002) | 2 lines

qsockets are now dynamically allocated/freed, this drops memory use by about 2mb

------------------------------------------------------------------------
r1447 | eviltypeguy | 2002-01-30 07:35:22 +0100 (Wed, 30 Jan 2002) | 4 lines

Fix for memset glibc bug crash

(why would it read from PROT_WRITE only memory? silly thing...)

------------------------------------------------------------------------
r1440 | lordhavoc | 2002-01-29 08:10:28 +0100 (Tue, 29 Jan 2002) | 2 lines

changed free(dat) to Mem_Free(dat) (EWWW I HAD A FREE STILL??)

------------------------------------------------------------------------
r1434 | lordhavoc | 2002-01-28 10:09:03 +0100 (Mon, 28 Jan 2002) | 2 lines

replaced a bunch of one-line 3-statement while loops, with nicer looking one-line for loops

------------------------------------------------------------------------
r1424 | lordhavoc | 2002-01-27 09:33:58 +0100 (Sun, 27 Jan 2002) | 2 lines

fix problem with dynamic lights on lightmaps wider than 18 pixels (oops!)

------------------------------------------------------------------------
r1423 | lordhavoc | 2002-01-27 08:58:52 +0100 (Sun, 27 Jan 2002) | 2 lines

halved corona size

------------------------------------------------------------------------
r1418 | lordhavoc | 2002-01-27 01:16:17 +0100 (Sun, 27 Jan 2002) | 2 lines

added coronas (glow) to dynamic lights

------------------------------------------------------------------------
r1417 | lordhavoc | 2002-01-27 01:14:21 +0100 (Sun, 27 Jan 2002) | 3 lines

added gl_mesh_dupetransverts cvar (found it is a slowdown though)
moved meshfarclip checking from R_Mesh_Draw to R_Mesh_Render

------------------------------------------------------------------------
r1415 | lordhavoc | 2002-01-27 00:36:03 +0100 (Sun, 27 Jan 2002) | 3 lines

additive water
enabled transparency on world polygons (not a good idea in existing quake maps, but maybe someday...)

------------------------------------------------------------------------
r1414 | lordhavoc | 2002-01-27 00:33:42 +0100 (Sun, 27 Jan 2002) | 2 lines

made most particles additive (speedup in fog)

------------------------------------------------------------------------
r1413 | lordhavoc | 2002-01-27 00:30:50 +0100 (Sun, 27 Jan 2002) | 2 lines

made explosions additive, softened edges (hacky but looks good enough), cleaned up some of the physics

------------------------------------------------------------------------
r1412 | lordhavoc | 2002-01-27 00:27:07 +0100 (Sun, 27 Jan 2002) | 2 lines

changed most #define macros to use (,,,) format instead of {;;;} so they will gobble a ; like a normal function

------------------------------------------------------------------------
r1411 | lordhavoc | 2002-01-27 00:25:09 +0100 (Sun, 27 Jan 2002) | 2 lines

got rid of cl_glowinglightning cvar, lightning no longer glows

------------------------------------------------------------------------
r1410 | lordhavoc | 2002-01-27 00:24:13 +0100 (Sun, 27 Jan 2002) | 3 lines

made "entities" command show scale and alpha
made rocket glow a little brighter (25%)

------------------------------------------------------------------------
r1409 | lordhavoc | 2002-01-27 00:18:22 +0100 (Sun, 27 Jan 2002) | 2 lines

renamed R_GetFragmentLocation to R_FragmentLocation

------------------------------------------------------------------------
r1397 | lordhavoc | 2002-01-26 03:20:13 +0100 (Sat, 26 Jan 2002) | 2 lines

due to Mercury's insistance you can disable bobbing by using cl_bobcycle == 0 as well as cl_bob == 0 (cl_bobcycle == 0 causes NaN bob)

------------------------------------------------------------------------
r1394 | molivier | 2002-01-25 13:33:35 +0100 (Fri, 25 Jan 2002) | 2 lines

Updated MSVC6 project files. Vanilla MSVC6 doesn't know the GL_TABLE_TOO_LARGE error... Strange.

------------------------------------------------------------------------
r1393 | lordhavoc | 2002-01-25 09:31:35 +0100 (Fri, 25 Jan 2002) | 2 lines

added back intermission overlays (oops)

------------------------------------------------------------------------
r1391 | lordhavoc | 2002-01-25 01:45:55 +0100 (Fri, 25 Jan 2002) | 36 lines

added cl_screen.c/h (eventually most 2D stuff should be moved here)
removed view.h (merged into client.h)
cleaned up the animation interpolation code (CL_LerpUpdate) a bit more
increased interpolation 'teleport' tolerance from 400 units to 1000 units per frame
changed calls to Mod_ForName to not use checkdisk (except for viewthing model changes and map changes)
added viewent to r_refdef
moved v_blend to r_refdef
all 2D art now goes through Draw_CachePic
cachepic replaced qpic (in all non-wad code)
moved all engine generated pics (mousepointer, crosshairs) to gl_draw.c (they are called by Draw_CachePic)
cachepic now uses a hash lookup instead of just a string search
added drawqueue to r_refdef
all 2D art now goes through DrawQ_ functions (drawqueue)
DrawQ_String now stretchs the character texture a tiny bit, and always uses default filtering
cleaned out some old cruft in console drawing code
fixed some silly bugs in showfps
made showfps display use only 4 characters, and made the text larger, and moved it down a little
moved showfps from gl_screen.c to sbar.c
moved Draw_ConsoleBackground to console.c
removed drawinput parameter from Con_DrawConsole (it was always true)
c_alias_polys now counts all meshs rendered (a model may be rendered multiple times), not just the total number of triangles in the model, much more accurate
r_speeds2 renamed to r_speeds
disabled all Mem_CheckSentinelsGlobal calls during gameplay (they were wasting time)
r_speeds now displays time spent throughout SCR_UpdateScreen code, not just R_RenderView
frame is now rendered in 'finish begin render' order instead of 'begin render finish' order in SCR_Updatescreen - not sure if this is a speedup or not
BLOCK_SIZE in gl_textures.c renamed to block_size and now adjustable (r_max_scrapsize cvar), r_restart for changes to take effect, 1024 (default) or less recommended
menu, r_speeds, and showfps now have a darkened (50% black) background beneath them to improve readability
menu is now centered on the screen
menu text is now white
translatepic code now updates texture rather than constantly cache mismatching
cleaned up cshift code
cleaned up viewent setup code
W_GetLumpinfo failing to find a lump is no longer fatal
added R_Mesh_DrawDecal for the highly specialized task of adding decals/particles/sprites to the mesh system (trying to get a minor speed gain)
decals, particles, and sprites now use R_Mesh_DrawDecal

------------------------------------------------------------------------
r1386 | lordhavoc | 2002-01-22 08:01:30 +0100 (Tue, 22 Jan 2002) | 2 lines

moved CHECKGLERROR to detect errors *after* rather than before uploading a texture

------------------------------------------------------------------------
r1385 | lordhavoc | 2002-01-22 07:58:49 +0100 (Tue, 22 Jan 2002) | 2 lines

made lights half as bright

------------------------------------------------------------------------
r1384 | lordhavoc | 2002-01-22 06:36:02 +0100 (Tue, 22 Jan 2002) | 2 lines

make dedicated work again

------------------------------------------------------------------------
r1383 | lordhavoc | 2002-01-22 06:34:21 +0100 (Tue, 22 Jan 2002) | 2 lines

fake answers for R_GetFragmentLocation when running dedicated

------------------------------------------------------------------------
r1382 | lordhavoc | 2002-01-22 06:33:30 +0100 (Tue, 22 Jan 2002) | 2 lines

models don't allocate a texture pool when running dedicated

------------------------------------------------------------------------
r1381 | lordhavoc | 2002-01-22 06:32:02 +0100 (Tue, 22 Jan 2002) | 2 lines

more thorough checking of 'this should never happen' cases

------------------------------------------------------------------------
r1380 | lordhavoc | 2002-01-22 06:31:25 +0100 (Tue, 22 Jan 2002) | 2 lines

flush unused models when running dedicated server

------------------------------------------------------------------------
r1379 | lordhavoc | 2002-01-22 05:46:52 +0100 (Tue, 22 Jan 2002) | 2 lines

fixed 4 warnings in MSVC related to assigning -1000 to unsigned shorts

------------------------------------------------------------------------
r1375 | lordhavoc | 2002-01-21 04:02:15 +0100 (Mon, 21 Jan 2002) | 2 lines

removed a lot of memory checks now that it works again

------------------------------------------------------------------------
r1374 | lordhavoc | 2002-01-21 03:57:28 +0100 (Mon, 21 Jan 2002) | 2 lines

fix for bug in memory checking

------------------------------------------------------------------------
r1373 | lordhavoc | 2002-01-21 03:50:07 +0100 (Mon, 21 Jan 2002) | 2 lines

yet more memory testing

------------------------------------------------------------------------
r1372 | lordhavoc | 2002-01-21 03:39:08 +0100 (Mon, 21 Jan 2002) | 2 lines

changed way windings are allocated, may fix memory corruption bug on MSVC

------------------------------------------------------------------------
r1371 | lordhavoc | 2002-01-21 03:09:24 +0100 (Mon, 21 Jan 2002) | 2 lines

added some memory corruption checks, trying to find a bug

------------------------------------------------------------------------
r1368 | lordhavoc | 2002-01-20 00:22:15 +0100 (Sun, 20 Jan 2002) | 3 lines

improved error reporting on memory functions
memlist command now has an optional 'all' parameter to list the individual allocations inside pools

------------------------------------------------------------------------
r1367 | lordhavoc | 2002-01-19 22:36:53 +0100 (Sat, 19 Jan 2002) | 2 lines

rearranged error checking during portal building so it will only Host_Error when an error occurs, and changed tempmempool allocations for portal processing to use the loadmodel mempool so portals can be freed after an error (using modelflush)

------------------------------------------------------------------------
r1366 | lordhavoc | 2002-01-19 01:31:58 +0100 (Sat, 19 Jan 2002) | 2 lines

moved cl_visedicts to r_refdef.entities

------------------------------------------------------------------------
r1365 | lordhavoc | 2002-01-18 21:33:38 +0100 (Fri, 18 Jan 2002) | 5 lines

cleaned up a lot of particle rendering properties (mainly related to rain code), rain looks nice now.
added depthdisable to rmeshinfo_t
gl_backend now uses glDrawRangeElements on non-win32 (need to use dynamic GL binding to get it on win32), nice speedup
rearranged r_speeds2 time reporting code, now times more things (in gl_screen.c especially)

------------------------------------------------------------------------
r1364 | lordhavoc | 2002-01-18 21:21:55 +0100 (Fri, 18 Jan 2002) | 2 lines

minor optimization to fogged decal rendering

------------------------------------------------------------------------
r1363 | lordhavoc | 2002-01-18 21:20:08 +0100 (Fri, 18 Jan 2002) | 2 lines

view model is no longer fully fogged (it was a divide by zero)

------------------------------------------------------------------------
r1362 | lordhavoc | 2002-01-18 21:17:58 +0100 (Fri, 18 Jan 2002) | 2 lines

grenades no longer stick when you fire down a slope

------------------------------------------------------------------------
r1360 | molivier | 2002-01-17 18:38:45 +0100 (Thu, 17 Jan 2002) | 2 lines

Fixed a couple of warnings on MSVC6

------------------------------------------------------------------------
r1353 | lordhavoc | 2002-01-17 02:30:08 +0100 (Thu, 17 Jan 2002) | 2 lines

removed no longer used static light parsing code

------------------------------------------------------------------------
r1352 | lordhavoc | 2002-01-17 02:22:52 +0100 (Thu, 17 Jan 2002) | 2 lines

made directional static lighting work, then disabled it because it is not practical without reliable data from the lighting utility

------------------------------------------------------------------------
r1351 | lordhavoc | 2002-01-17 02:09:28 +0100 (Thu, 17 Jan 2002) | 3 lines

removed (experimental, and broken) particles with polygonal explosion (after some testing I found it looked lousy)
fixed particles disappearing when using slowmo 0

------------------------------------------------------------------------
r1350 | lordhavoc | 2002-01-16 21:31:44 +0100 (Wed, 16 Jan 2002) | 2 lines

changed behavior about 'Bad Surfaces Extents', now only a warning, and such surfaces are rendered fullbright

------------------------------------------------------------------------
r1349 | lordhavoc | 2002-01-16 20:17:10 +0100 (Wed, 16 Jan 2002) | 2 lines

updated project to match added/removed files

------------------------------------------------------------------------
r1348 | lordhavoc | 2002-01-16 20:08:04 +0100 (Wed, 16 Jan 2002) | 4 lines

hushed unitialized warning on end in cl_particles.c when using MSVC
fixed direct use of glActiveTextureARB/glClientActiveTextureARB
type cast parameters to glDepthMask

------------------------------------------------------------------------
r1347 | lordhavoc | 2002-01-16 19:47:28 +0100 (Wed, 16 Jan 2002) | 2 lines

fix for missing (byte *) cast, and fix for WIN32 function lookup code in vid_shared.c

------------------------------------------------------------------------
r1346 | lordhavoc | 2002-01-16 19:41:22 +0100 (Wed, 16 Jan 2002) | 2 lines

fixed a typo in cl_particles.c that happened to work in Linux (random() instead of rand()), removed unused files, and moved CL_UpdateTEnts call

------------------------------------------------------------------------
r1344 | lordhavoc | 2002-01-16 07:20:30 +0100 (Wed, 16 Jan 2002) | 2 lines

forgot to remove these

------------------------------------------------------------------------
r1343 | lordhavoc | 2002-01-16 07:16:58 +0100 (Wed, 16 Jan 2002) | 50 lines

rewrote memory system entirely (hunk, cache, and zone are gone, memory pools replaced them all)
models can be reloaded at any time (Mod_CheckLoaded, etc)
entire renderer can be restarted using r_restart command
batch triangle mesh rendering system (gl_backend.c)
most rendering code does not touch GL anymore
gl_textures now supports procedural textures, and fragment textures (small textures combined into larger images)
lightmaps can now be mipmapped (r_miplightmaps)
broke up r_part.c and r_decals.c into cl_particles.c, r_particles.c, cl_decals.c, and r_decals.c to improve renderer/client separation, but explosions are still renderer
moved CL_NextDemo from cl_main.c to cl_demo.c
cleaned up demo stop/disconnect code
removed render modules stuff from all cl_ files
renderer uses separate light array, and recalculates radius for lights based on color, and calculates subtract value to give it a soft edge at the radius perimeter
small surfaces do not use lightmaps (unfortunately they still look slightly different in dynamic lighting)
items can now bob according to cl_itembob* cvars
moved CL_SignonReply from cl_main.c to cl_parse.c
monster movement interpolation is now done clientside instead of serverside, Nehahra movie should look better now
cvars now have a .integer field containing the integer value of their string (nearly all .value accesses have been changed to .integer for speed reasons)
pmodel is now only available in Nehahra mode (pmodel was a bad hack)
r_farclip cvar removed, farclip now dynamically adjusts to level as you explore it
parsing of wad names out of HL maps is now in renderer code
changed isworldmodel stuff in model loading
cleaned up CL_ParseUpdate a bit (related to clientside monster interpolation)
renamed r_glowinglightning to cl_glowinglightning
moved FindNonSolidLocation to bmodel code
lightning beam models are now only looked up once
entity_t now contains an entity_persistent_t which holds data persistent from frame to frame (interpolation mainly), entity_render_t is wiped every frame
marked a lot more things as static
increased command buffer (script execution buffer) from 8k to 32k
COM_LoadMallocFile has been renamed to COM_LoadFile, and all other variants are gone
rounding on MSG_Read/Write stuff has been changed to fix negative rounding (C rounds toward zero, old code assumed it always rounded down)
improved cachepic (menu images) system to load from wad
statusbar now uses cachepic system
cachepics are cleared when renderer is restarted
fixed fog on transparent objects, should always look correct now
moved R_TimeRefresh_f from gl_rmisc.c to gl_rmain.c
moved R_NewMap from gl_rmisc.c to gl_rmain.c
deleted gl_rmisc.c
removed support for glfog
masked sky rendering is now done by first rendering the sky scene, clearing the depthbuffer, rendering invisible depth polys over it, then rendering the scene, this is for more flexibility
C-code based shader system (not scripted)
deleted hcompress.c
due to more thorough memory corruption detection, a (harmless with old zone system) buffer overflow bug in the client name command was fixed
untested (and quite possibly broken) quaternion math stuff added to mathlib.h
removed support for colormod entity effect (massive mess to support it everywhere)
improved QC PR_RunError reports
moved QC opcode execution loop into pr_execprogram.h, included multiple times
fairly major sbar cleanup
rearranged GL extension detection again
added EXT_texture_env_combine support

------------------------------------------------------------------------
r1296 | eviltypeguy | 2001-12-29 22:20:49 +0100 (Sat, 29 Dec 2001) | 2 lines

Small fixes to tab completion

------------------------------------------------------------------------
r1260 | knghtbrd | 2001-12-17 09:25:27 +0100 (Mon, 17 Dec 2001) | 6 lines

-safe now does something approximately close to correct.  Not a full fix
for what it does and doesn't do, but this will suffice for now.  Added the
-nomouse flag to GLX.  Debugging is a bitch without it, really.  Also made
a few minor changes for gcc v3 building.  I'm not through with makefile
yet, though.

------------------------------------------------------------------------
r1256 | lordhavoc | 2001-12-13 19:24:05 +0100 (Thu, 13 Dec 2001) | 2 lines

forgot to add this

------------------------------------------------------------------------
r1188 | molivier | 2001-12-05 08:06:27 +0100 (Wed, 05 Dec 2001) | 2 lines

Updated MSVC6 project files

------------------------------------------------------------------------
r1185 | lordhavoc | 2001-12-04 14:28:29 +0100 (Tue, 04 Dec 2001) | 67 lines

rewrote RecursiveHullCheck, no longer gets stuck on angle changes, and is generally more correct all the time (no longer uses PointContents checks either)
added content value to RecursiveHullCheck and TraceLine, they can now treat any content change as an impact
TraceLine now can take NULL impact and normal if they are not desired
TraceLine now sets trace_endcontents to the impacted content value
rewrote nehahra/rogue/hipnotic/standard_quake variables to be gamemode (GAME_NORMAL, GAME_HIPNOTIC, GAME_ROGUE, GAME_NEHAHRA, etc)
unfinished code for directional static lighting on models (CL_ParseEntityLump)
game now uses current mode as title everywhere (window title, server title, etc), so it would say 'DarkPlaces-Hipnotic' for example
added Draw_AdditiveString variant of Draw_String, switchs to additive blending and back to alpha afterward
engineversion string is now generated in sys_shared
major rewrite of transpolyrender, now uses glDrawElements (with batching of same texture/mode) and array locking
transpolyparticle added to quickly add particles to transpoly list (30% or so savings)
split wallpolyrender into two pieces, first renders walls, second renders fog over them, decals are rendered between the two, so decals are now fogged
added field of vision distortion when underwater (in MYgluPerspective)
changed gl_lightmapalign to align to the specified byte boundary instead of pixel boundary, and removed NVIDIA mentions (it is not their problem, it is a matter of the texture unpack alignment, but I stuck with 4 byte alignment because it is likely faster for most people)
fixed animating textures
rearranged a little bmodel code (probably no effect)
got rid of r_solidworldnode and r_pvsworldnode cvars (only the fastest choices are available now)
screenshots are now corrected to match lighthalf if it is being done using hardware gamma
removed some old unused cruft from host.c
added RGB gamma correction code to image.c
added VectorRandom to mathlib.h
model skins are no longer mipmapped by default (r_mipskins 0, but this is saved in configs so most people might not notice) because quake skins were not designed for it, and it is a 25% texture memory use increase on model skins
removed old unused Mod_FloodFillSkin code
transparent textures no longer clip other geometry in the hidden surface removal (ouch this was a bug)
maps should be able to use engine fields without the mod knowing about them now (alpha, etc), engine fields are appended to the list of progs fields
particle and decal textures are now all stored in one 'particle font' texture, for a rather hefty speed gain (no texture switchs)
all particles are now alpha blended (additive wasn't necessary on them, but is still available), to kill off state changes
new splash effect from raindrops
added a few bithacking float optimizations here and there (most with alternates if you define SLOWMATH)
new explosion effect (on by default, but a major speed drain, turn off with r_particles_explosions 0)
particle textures are now all in one image (a 'particle font'), massive speed gains with mixed particle types
all particles are alpha blend now (additive still supported, just not used), for more speed gains
particles now use 24bit RGB colors, rather than palette colors (the quake palette has been included however, because many particles still use it)
a lot of old cruft has been removed from r_part
ui items can now be strings rather than pics (actually they can be both, but I have not found a real use for this, perhaps a second draw location needs to be added for the string, so a button could have a label centered on it)
unfinished X11 gamma ramp support (need to allocate colors before setting them, haven't figured this out yet)
changed pitch range in GLX to let you look straight up and down, like in wgl version
mostly redesigned animation interpolation management code (R_LerpUpdate is now CL_LerpUpdate and performed on all network entities, R_LerpAnimation has been tweaked to not crash on bmodels and is now automatically used on all visible entities in the renderer, lerping info has has been split out of entity_render_t into entity_persistent_t so that entity_render_t contains no persistent data)
renderer now only uses entity_render_t structures
renderer now uses only currentrenderentity, and rarely passes individual properties around
cleaned out some old global variables relating to rendering
moved most of glquake.h to render.h
envmap is now actually a vaguely useful command (renders cubic environment map images of the current scene, changed to write tga images rather than raw rgba, and take a basename to use, and name them like skyboxes expect, and place them in the env directory)
many things that should be private to a particular file have been marked static
models now contain a SERAddEntity function (to add themselves to the SER clipping list to verify visibility)
models now contain DrawEarly and DrawLate functions (to render before and after wallpoly/decals/skypoly/etc, respectively)
dlight management functions moved out of cl_main and into cl_light
rewrote RelinkStaticEntities (does the same, just cleaner)
renamed RelinkEntities to RelinkNetworkEntities, split out LerpPlayerVelocity, and made a RelinkEntities function which calls the various functions
rewrote or altered portions of RelinkNetworkEntities relating to origin
muzzleflash lights are now clipped to keep them out of walls
fixed up code relating to vid.conwidth/height and vid.width/height (which is now gone, converted to vid.conwidth/height) and renamed glx/gly/glwidth/glheight to vid.realx/y/width/height (updated each frame using GL_BeginRendering)
rewrote most (all?) code relating to r_refdef, it is now always recalculated as well
dynamic lights will only update a lightmap if they actually alter it (optimization)
models now have 3 bounding boxes, used depending on angles (normal, yaw rotation only, and full rotation)
bmodel bounding boxes are recalculated from vertices
server now uses model bounding box instead of entity bounding box for visibility testing (since entity bounding box is often smaller)
server no longer portal-visibility checks entities because it was FAR too slow (sv_vischeckentities is still available though)
gl_rsurf code now relies on there being a currentrenderentity (even if it is cl.worldent.render), R_SetupWorldEnt added to avoid duplicate code for this
engine no longer has a version number, only build number
makefile now uses buildnum (as was originally intended) to increment build number every time it is compiled, build numbers will be rising rapidly from now on
timedemos will now force up console instantly
rocket trails are more dense
renamed VectorMA (function) to VectorMASlow, renamed VectorMAQuick (#define) to VectorMA, don't know why I had changed it before, had already cleaned up the parameter issues where it is used
converted most of lighting in decal code to integer
added support for all sprite types (untested)

------------------------------------------------------------------------
r1042 | lordhavoc | 2001-11-12 20:33:33 +0100 (Mon, 12 Nov 2001) | 2 lines

reenabled some invisible entity checking (probably no difference)

------------------------------------------------------------------------
r1039 | lordhavoc | 2001-11-12 16:52:13 +0100 (Mon, 12 Nov 2001) | 2 lines

added comments about use of the functions, and regrouped engine-use-only ones to avoid confusion

------------------------------------------------------------------------
r1010 | lordhavoc | 2001-11-08 03:25:53 +0100 (Thu, 08 Nov 2001) | 2 lines

got rid of two trigraph warnings in gcc 3.0

------------------------------------------------------------------------
r1009 | lordhavoc | 2001-11-08 03:23:00 +0100 (Thu, 08 Nov 2001) | 2 lines

changed swapintblock loop to hopefully get rid of a gcc 3.0 warning

------------------------------------------------------------------------
r1008 | lordhavoc | 2001-11-08 03:20:07 +0100 (Thu, 08 Nov 2001) | 2 lines

fix for gcc 3.0 warnings on MSG_ReadByte in function parameters

------------------------------------------------------------------------
r1006 | molivier | 2001-11-06 08:16:21 +0100 (Tue, 06 Nov 2001) | 2 lines

Added MSVC6 project files

------------------------------------------------------------------------
r1002 | lordhavoc | 2001-11-02 13:45:53 +0100 (Fri, 02 Nov 2001) | 2 lines

two-layer sky rendering now uses GL_ARB_texture_env_combine if available to render both layers in one pass (nice speedup), and sky rendering code has been simplified a little, also optimized the per vertex direction calculations to use RSqrt code instead of normal 1/sqrt

------------------------------------------------------------------------
r1001 | lordhavoc | 2001-11-02 12:06:35 +0100 (Fri, 02 Nov 2001) | 2 lines

fixed gl_combine so it is enabled by default (if present)

------------------------------------------------------------------------
r1000 | lordhavoc | 2001-11-02 12:02:38 +0100 (Fri, 02 Nov 2001) | 5 lines

removed support for GL_SGIS_multitexture (ancient)
redesigned entire extension setup system (now resides only in vid_shared.c)
all extension functions are checked against NULL before the extension is enabled (if one is NULL it complains appropriately)
now also looks for glClientActiveTextureARB (needed for multitexture in vertex arrays)

------------------------------------------------------------------------
r999 | lordhavoc | 2001-11-02 11:54:24 +0100 (Fri, 02 Nov 2001) | 2 lines

minor buffer-size-safe improvement in Sys_Printf, and some other changes to it

------------------------------------------------------------------------
r998 | lordhavoc | 2001-11-02 11:52:41 +0100 (Fri, 02 Nov 2001) | 2 lines

possible improvement to keep camera out of walls (still ends up in a wall occasionally, just less often)

------------------------------------------------------------------------
r997 | lordhavoc | 2001-11-02 11:50:43 +0100 (Fri, 02 Nov 2001) | 2 lines

corrected a typo in a comment referring to the e4 hall in start as e1m4

------------------------------------------------------------------------
r996 | lordhavoc | 2001-11-02 11:49:31 +0100 (Fri, 02 Nov 2001) | 2 lines

fix for misnumbered video mode menu in menu key code  (it should never be misnumbered again... it is now a calculated index)

------------------------------------------------------------------------
r995 | lordhavoc | 2001-11-02 10:18:47 +0100 (Fri, 02 Nov 2001) | 2 lines

clear keybindings[] array during Key_Init (bounds checker freaks if it isn't cleared before it is used)

------------------------------------------------------------------------
r994 | lordhavoc | 2001-11-02 07:15:42 +0100 (Fri, 02 Nov 2001) | 2 lines

changed -march=686 to -march=i686

------------------------------------------------------------------------
r988 | lordhavoc | 2001-10-30 22:55:46 +0100 (Tue, 30 Oct 2001) | 2 lines

added support for GL_ARB_texture_env_combine, currently only used on wall rendering (for 4x overbright support)

------------------------------------------------------------------------
r987 | lordhavoc | 2001-10-30 22:51:37 +0100 (Tue, 30 Oct 2001) | 2 lines

added support for transparent model skins

------------------------------------------------------------------------
r986 | lordhavoc | 2001-10-30 22:48:21 +0100 (Tue, 30 Oct 2001) | 2 lines

added R_TextureHasAlpha function to check if a loaded texture has alpha

------------------------------------------------------------------------
r982 | lordhavoc | 2001-10-30 00:43:58 +0100 (Tue, 30 Oct 2001) | 2 lines

added include unistd.h and fcntl.h on non-win32

------------------------------------------------------------------------
r981 | lordhavoc | 2001-10-30 00:38:36 +0100 (Tue, 30 Oct 2001) | 2 lines

removed unused portalstack array

------------------------------------------------------------------------
r978 | lordhavoc | 2001-10-29 08:23:10 +0100 (Mon, 29 Oct 2001) | 3 lines

got rid of leafnums array in edict structure for pvs checking, pvs is now checked based on predicted locations of entities, and some reorganizational optimizations of WriteEntitiestoClient
changed an SV_Move call to use the proper MOVE_ define (no behavior change, only cleanup)

------------------------------------------------------------------------
r977 | lordhavoc | 2001-10-29 08:20:32 +0100 (Mon, 29 Oct 2001) | 2 lines

changed SV_Move calls to use MOVE_NORMAL or MOVE_NOMONSTERS instead of false/true as the type parameter (no behavior change, only cleanup)

------------------------------------------------------------------------
r976 | lordhavoc | 2001-10-29 08:17:36 +0100 (Mon, 29 Oct 2001) | 2 lines

fixed ED_Print so that it can not cause buffer overflows on large entities

------------------------------------------------------------------------
r975 | lordhavoc | 2001-10-29 08:16:35 +0100 (Mon, 29 Oct 2001) | 2 lines

moved Sys_Printf and related code/data to sys_shared.c (new), removed all uses of isDedicated (replaced with cls.state == ca_dedicated), timestamps should work on all targets now, and made some minor whitespace changes

------------------------------------------------------------------------
r974 | lordhavoc | 2001-10-29 07:51:57 +0100 (Mon, 29 Oct 2001) | 4 lines

changing all isDedicated references to cls.state == ca_dedicated

also changed where Chase_Init is called in Host_Init (no behavior change, just cleanup)

------------------------------------------------------------------------
r973 | lordhavoc | 2001-10-29 07:45:08 +0100 (Mon, 29 Oct 2001) | 2 lines

forgot to put a newline at the end of the file

------------------------------------------------------------------------
r972 | lordhavoc | 2001-10-29 07:43:57 +0100 (Mon, 29 Oct 2001) | 4 lines

fixed input reading code bug in dedicated servers (clients are not kicked off immediately on connecting now...  clearly an important fix)
minor whitespace changes
and changed a SV_Move call to use MOVE_NOMONSTERS instead of 1, no effect on code behavior

------------------------------------------------------------------------
r971 | lordhavoc | 2001-10-29 07:40:05 +0100 (Mon, 29 Oct 2001) | 2 lines

changed SV_Move call to use MOVE_NORMAL instead of false, no effect on code behavior

------------------------------------------------------------------------
r970 | lordhavoc | 2001-10-29 07:37:10 +0100 (Mon, 29 Oct 2001) | 2 lines

changed SV_Move calls to always use the correct MOVE_ defines in the type parameter (true or false were often passed, due to a legacy of it being simply 'nomonsters', apparently during quake's development), no code change, just cleanup

------------------------------------------------------------------------
r969 | lordhavoc | 2001-10-29 07:34:57 +0100 (Mon, 29 Oct 2001) | 2 lines

rearranged some variable declarations (no code changes)

------------------------------------------------------------------------
r968 | lordhavoc | 2001-10-29 07:32:06 +0100 (Mon, 29 Oct 2001) | 2 lines

minor whitespace tweak on loc1 label, removed old debugging warnings about not checking certain portals

------------------------------------------------------------------------
r967 | lordhavoc | 2001-10-29 07:30:27 +0100 (Mon, 29 Oct 2001) | 2 lines

moved ixtable definition and initialization code to mathlib (and added Mathlib_Init call to common.c), fixes bugs in dedicated server (previously ixtable was being initialized in the renderer)

------------------------------------------------------------------------
r966 | lordhavoc | 2001-10-29 07:28:36 +0100 (Mon, 29 Oct 2001) | 2 lines

removed duplicate comment on a line

------------------------------------------------------------------------
r965 | lordhavoc | 2001-10-29 07:27:54 +0100 (Mon, 29 Oct 2001) | 2 lines

changed way that "entities" (CL_PrintEntities_f) displays entities, and now skips inactive entities (forgot to update it's code a long time ago, apparently)

------------------------------------------------------------------------
r964 | lordhavoc | 2001-10-29 04:28:21 +0100 (Mon, 29 Oct 2001) | 2 lines

no longer needs ui/mousepointer.lmp

------------------------------------------------------------------------
r963 | lordhavoc | 2001-10-29 04:11:26 +0100 (Mon, 29 Oct 2001) | 2 lines

fix for snprintf check (can't check if functions exist, changed to WIN32 check)

------------------------------------------------------------------------
r962 | lordhavoc | 2001-10-29 00:06:54 +0100 (Mon, 29 Oct 2001) | 2 lines

fix for two Con_Printf calls that are passed a string as the format string

------------------------------------------------------------------------
r961 | lordhavoc | 2001-10-28 23:10:51 +0100 (Sun, 28 Oct 2001) | 2 lines

don't change gamma ramps when running dedicated

------------------------------------------------------------------------
r960 | lordhavoc | 2001-10-28 21:49:16 +0100 (Sun, 28 Oct 2001) | 2 lines

added hidden surface removal option (r_ser cvar)

------------------------------------------------------------------------
r959 | lordhavoc | 2001-10-28 21:48:43 +0100 (Sun, 28 Oct 2001) | 2 lines

added #define snprintf _snprintf for win32

------------------------------------------------------------------------
r958 | lordhavoc | 2001-10-28 21:48:05 +0100 (Sun, 28 Oct 2001) | 2 lines

add externs for window_x and window_y

------------------------------------------------------------------------
r957 | lordhavoc | 2001-10-28 21:47:32 +0100 (Sun, 28 Oct 2001) | 2 lines

forgot to update this file apparently

------------------------------------------------------------------------
r956 | lordhavoc | 2001-10-28 10:18:01 +0100 (Sun, 28 Oct 2001) | 7 lines

made the Sorted Edge Rasterizer (hidden surface removal) optional as the r_ser cvar, can be a speed difference
added back the old portal-passage worldnode code (sometimes faster)
recalculate node bounding boxes when loading (based on leaf bounding boxes which are calculated from portal generation)
added untested code for qftol (much faster double to integer conversion on x86, not used yet)
added a couple Hunk_Check calls while loading things (just to be a little more paranoid)
minor whitespace cleanup, some commented out code removed

------------------------------------------------------------------------
r953 | lordhavoc | 2001-10-26 22:17:33 +0200 (Fri, 26 Oct 2001) | 2 lines

added CVAR_SAVE and CVAR_NOTIFY flags to cvar_t structure (at the beginning), updated all cvar definitions to match, a lot more cvars are saved now.\nadded server-side portal checking of entity visibility, only entities which really are visible are sent to clients now (some slowdown on server, but reduces network traffic and makes wallhacks useless)\nadded mostly untested mouse and keyboard user interface code (input support not completely finished yet, and no code using the UI yet)\n

------------------------------------------------------------------------
r939 | lordhavoc | 2001-10-18 16:48:51 +0200 (Thu, 18 Oct 2001) | 2 lines

Forgot to update build number for 105 release

------------------------------------------------------------------------
r937 | lordhavoc | 2001-10-18 02:59:02 +0200 (Thu, 18 Oct 2001) | 2 lines

probable fix for severe model rendering bugs in 3DFX voodoo4/5 win32 drivers, and G400 win32 drivers (they don't seem to handle a sizeof == 0 case for the array pointer stepping)

------------------------------------------------------------------------
r936 | lordhavoc | 2001-10-17 21:17:21 +0200 (Wed, 17 Oct 2001) | 2 lines

little whitespace change

------------------------------------------------------------------------
r935 | lordhavoc | 2001-10-17 21:15:55 +0200 (Wed, 17 Oct 2001) | 2 lines

added force_centerview to glx (by moving it to vid_shared)

------------------------------------------------------------------------
r934 | lordhavoc | 2001-10-17 21:14:07 +0200 (Wed, 17 Oct 2001) | 2 lines

fix for cvar tab completion crash

------------------------------------------------------------------------
r933 | lordhavoc | 2001-10-17 20:43:57 +0200 (Wed, 17 Oct 2001) | 2 lines

fix for oriented sprites not appearing

------------------------------------------------------------------------
r929 | lordhavoc | 2001-10-16 14:49:07 +0200 (Tue, 16 Oct 2001) | 2 lines

forgot to commit updated makefile

------------------------------------------------------------------------
r924 | lordhavoc | 2001-10-15 19:12:15 +0200 (Mon, 15 Oct 2001) | 2 lines

mallocs, callocs, and frees changed to qmalloc/qfree

------------------------------------------------------------------------
r922 | lordhavoc | 2001-10-15 18:25:33 +0200 (Mon, 15 Oct 2001) | 2 lines

fix for command/cvar/alias completion bug (example: imp gave iimpulse)

------------------------------------------------------------------------
r921 | lordhavoc | 2001-10-15 15:41:55 +0200 (Mon, 15 Oct 2001) | 2 lines

changed defaults for chase_active camera position, and the settings are now saved to the config

------------------------------------------------------------------------
r920 | lordhavoc | 2001-10-15 15:41:25 +0200 (Mon, 15 Oct 2001) | 2 lines

move dynamic lights up 30 units for the client player when firstperson (so the gun gets lit by glow effects)

------------------------------------------------------------------------
r919 | lordhavoc | 2001-10-15 15:36:37 +0200 (Mon, 15 Oct 2001) | 2 lines

fix the off-by-one fix (oops)

------------------------------------------------------------------------
r918 | lordhavoc | 2001-10-15 15:23:19 +0200 (Mon, 15 Oct 2001) | 4 lines

fix an off-by-one issue with model->numleafs in PVS related code (dynamic lighting and world rendering), numleafs excludes leaf 0, how strange...

no missing (black) leaf bug anymore...

------------------------------------------------------------------------
r917 | lordhavoc | 2001-10-15 14:13:20 +0200 (Mon, 15 Oct 2001) | 2 lines

added function definitions for tab completion back (oops)

------------------------------------------------------------------------
r915 | lordhavoc | 2001-10-15 13:46:20 +0200 (Mon, 15 Oct 2001) | 12 lines

Major update, been neglecting CVS for some time...

clipping engine (r_clip.c) to determine exactly what is visible (this has altered MANY parts of the rendering engine)

fixed visibility bug with multiple players on a listen server

vid_glx.c has been improved/cleaned up greatly and now pays attention to vid_mouse and vid_dga and will not grab the mouse until after the first frame

snd_alsa_0_5.c has been fixed (Qprintf vs fprintf bug)

nehahra works again (was missing svc_skybox support)

------------------------------------------------------------------------
r270 | taniwha | 2001-07-20 22:25:17 +0200 (Fri, 20 Jul 2001) | 2 lines

ignore ChangeLog

------------------------------------------------------------------------
r269 | taniwha | 2001-07-20 22:24:36 +0200 (Fri, 20 Jul 2001) | 4 lines

very nice command line tab completeion from Shawn Walker
<eviltypeguy@qeradiant.com> with my later modifications so that commands
are completed as much as possible.

------------------------------------------------------------------------
r234 | lordhavoc | 2001-06-15 22:55:45 +0200 (Fri, 15 Jun 2001) | 2 lines

another attempt to fix skybox loading

------------------------------------------------------------------------
r233 | taniwha | 2001-06-10 23:21:41 +0200 (Sun, 10 Jun 2001) | 2 lines

fix loading savegames

------------------------------------------------------------------------
r232 | lordhavoc | 2001-06-10 22:03:42 +0200 (Sun, 10 Jun 2001) | 3 lines

added -lz to the non-ALSA compile line, switched to non-ALSA compile by default (to match the sound driver default being non-ALSA)
added a lot of descriptive comments

------------------------------------------------------------------------
r231 | taniwha | 2001-06-07 21:38:17 +0200 (Thu, 07 Jun 2001) | 2 lines

apply a fix for LordHavoc as his tree is not yet ready for committing

------------------------------------------------------------------------
r230 | lordhavoc | 2001-06-07 21:36:56 +0200 (Thu, 07 Jun 2001) | 2 lines

fix for skybox

------------------------------------------------------------------------
r229 | lordhavoc | 2001-06-04 01:40:51 +0200 (Mon, 04 Jun 2001) | 2 lines

added a newline to the end

------------------------------------------------------------------------
r228 | taniwha | 2001-06-03 05:18:25 +0200 (Sun, 03 Jun 2001) | 2 lines

hopefully fix external file gzip support

------------------------------------------------------------------------
r227 | lordhavoc | 2001-05-31 04:02:16 +0200 (Thu, 31 May 2001) | 2 lines

skyquality and mergesky are saved to the config now

------------------------------------------------------------------------
r226 | lordhavoc | 2001-05-30 10:36:08 +0200 (Wed, 30 May 2001) | 3 lines

fixed PCX loader bug to do with palettes
added bounds checking for PCX, TGA, and LMP loaders

------------------------------------------------------------------------
r225 | lordhavoc | 2001-05-30 10:28:52 +0200 (Wed, 30 May 2001) | 2 lines

added loadsize variable set by COM_LoadFile

------------------------------------------------------------------------
r224 | lordhavoc | 2001-05-30 10:03:02 +0200 (Wed, 30 May 2001) | 2 lines

added newline at end to appease gcc

------------------------------------------------------------------------
r223 | lordhavoc | 2001-05-30 10:02:44 +0200 (Wed, 30 May 2001) | 2 lines

fix for mistake in pcx loader (had two pointers swapped)

------------------------------------------------------------------------
r222 | lordhavoc | 2001-05-30 09:09:03 +0200 (Wed, 30 May 2001) | 2 lines

increased build number to 103

------------------------------------------------------------------------
r221 | lordhavoc | 2001-05-30 09:08:19 +0200 (Wed, 30 May 2001) | 2 lines

added sky quality and show framerate options to menu

------------------------------------------------------------------------
r220 | taniwha | 2001-05-30 08:16:04 +0200 (Wed, 30 May 2001) | 2 lines

compile dependencies

------------------------------------------------------------------------
r219 | lordhavoc | 2001-05-30 08:04:58 +0200 (Wed, 30 May 2001) | 2 lines

fixes for zlib support, eliminated win32 FAR warnings and other warnings

------------------------------------------------------------------------
r218 | taniwha | 2001-05-30 07:10:29 +0200 (Wed, 30 May 2001) | 2 lines

oops, forgot to fix the Qread and Qwrite calls

------------------------------------------------------------------------
r217 | lordhavoc | 2001-05-30 06:57:15 +0200 (Wed, 30 May 2001) | 6 lines

rearranged sky rendering code
reenabled sky sphere code
added r_skyquality cvar (0 = no sky, higher values improve quality of quake sky rendering, no change to skybox)
sky sphere uses identical texture calculations as glquake style now
added r_mergesky cvar (speed loss in my testing, but could be useful for very low fillrate cards, albeit a bit jerky)

------------------------------------------------------------------------
r216 | lordhavoc | 2001-05-30 06:50:53 +0200 (Wed, 30 May 2001) | 2 lines

added TEXF_ALWAYSPRECACHE

------------------------------------------------------------------------
r215 | taniwha | 2001-05-30 06:50:19 +0200 (Wed, 30 May 2001) | 3 lines

check in LordHavoc's changes for him after cleaning up the mess of conflicts
I caused. I hope I got it right :)

------------------------------------------------------------------------
r214 | lordhavoc | 2001-05-30 06:50:11 +0200 (Wed, 30 May 2001) | 2 lines

removed unused skytexturenum

------------------------------------------------------------------------
r213 | lordhavoc | 2001-05-30 06:44:44 +0200 (Wed, 30 May 2001) | 2 lines

removed unused skytexturenum code

------------------------------------------------------------------------
r212 | lordhavoc | 2001-05-30 06:39:22 +0200 (Wed, 30 May 2001) | 2 lines

commented out COM_LoadCacheFile

------------------------------------------------------------------------
r211 | lordhavoc | 2001-05-30 06:38:19 +0200 (Wed, 30 May 2001) | 2 lines

converted script loading to use COM_LoadMallocFile instead of COM_LoadHunkFile

------------------------------------------------------------------------
r210 | taniwha | 2001-05-30 04:36:15 +0200 (Wed, 30 May 2001) | 3 lines

gzip support from quakeforge (QFile and friends). also includes a couple of
compile fixes

------------------------------------------------------------------------
r209 | lordhavoc | 2001-05-29 18:25:03 +0200 (Tue, 29 May 2001) | 2 lines

updated to build 102

------------------------------------------------------------------------
r208 | lordhavoc | 2001-05-29 18:00:56 +0200 (Tue, 29 May 2001) | 5 lines

split render portion of entity_t struct into entity_render_t
got rid of glowsize and glowtrail fields in entity_render_t (since they were only used inside RelinkEntities anyway)
removed some commented out struct stuff
fixed mouse hide/show code in win32 (could get stuck shown)

------------------------------------------------------------------------
r207 | lordhavoc | 2001-05-27 04:50:48 +0200 (Sun, 27 May 2001) | 2 lines

cleaned up nearly all of the externs in .c files (moved to appropriate .h files)

------------------------------------------------------------------------
r206 | lordhavoc | 2001-05-27 00:24:12 +0200 (Sun, 27 May 2001) | 2 lines

added protocol.o

------------------------------------------------------------------------
r205 | lordhavoc | 2001-05-26 21:44:32 +0200 (Sat, 26 May 2001) | 28 lines

some whitespace changes
rearranged a few cvar definitions to be in more appropriate places
removed remnants of efrags system
added bitprofile command to report popularity of entity update components
fixed a number of baseline bugs and inconsistencies in the server and client (discovered using bitprofile)
general baseline generation code added (protocol.c)
added freelook cvar and menu option
exterior model capability added (so a model could be visible only when you are using chasecam, needed for visible weapon models)
fixed some inconsistencies in frame number sizes (should have been 16bit) in 16bit modelindex messages, and 8bit sound numbers that should have been 16bit
renamed Sys_FloatTime to Sys_DoubleTime
rewrote win32 Sys_DoubleTime code and minor work on UNIX Sys_DoubleTime
removed most of svc_entitiesbegin/svc_entitiesend code (big entity update protocol improvement planned)
hardware gamma/brightness/contrast support
hardware and software gamma/brightness/contrast adjustable in the menu
gl_lightmode (also known as lighthalf) switchable in the menu
can pick a crosshair in the menu
changed renderer references to r_refdef.vieworg to use r_origin instead
stripped out ancient transpoly code that was not being used
renamed qgamma array to texgamma
significant cleanup of mouse hide/show code in win32
improved eprint for better readability (better printing of floats/vectors)
added pr_fields and pr_globals commands to print a list of entity fields and global variables in loaded progs
moved some entity_state_t related stuff to protocol.c and protocol.h
made delta compression optional (sv_deltacompress cvar)
removed a lot of cruft
disabled stair step-up blending (never worked that well anyway)
removed sys_wind.c (I seriously doubt it worked)

------------------------------------------------------------------------
r204 | knghtbrd | 2001-05-26 20:26:59 +0200 (Sat, 26 May 2001) | 3 lines

Cleaned up clean target
Changed defaults to reflect the majority of systems

------------------------------------------------------------------------
r202 | lordhavoc | 2001-05-13 09:49:53 +0200 (Sun, 13 May 2001) | 2 lines

now renders inward portals rather than outward portals in r_drawportals (more useful)

------------------------------------------------------------------------
r201 | lordhavoc | 2001-05-12 17:31:17 +0200 (Sat, 12 May 2001) | 10 lines

build number 101
all leaf bounding boxes are recalculated based on portals (superior to qbsp's method)
bounding box removed from node structure
vismarkframe stuff removed from node and leaf structures
minor tweaking to some network stuff (trying to track down a bug)
R_BSPWorldmode and R_LeafWorldmode have been removed, related cvars have been removed
R_NoVisWorldnode is only used when in a solid leaf now
have been trying to track down very rare disappearing leaf bug in portal worldnode code (or portal building?), unsuccessfully
redesign of entity dlight code, much cleaner and saner (all dlight effects can be combined at once now as well, no override occurs)

------------------------------------------------------------------------
r200 | lordhavoc | 2001-05-12 13:09:25 +0200 (Sat, 12 May 2001) | 2 lines

forgot to put in extern qboolean hlbsp;

------------------------------------------------------------------------
r199 | lordhavoc | 2001-05-12 13:03:05 +0200 (Sat, 12 May 2001) | 4 lines

disabled wad3 loading from "wad" key in worldspawn of map when not loading an HL map

minor tweaks to entity update range code

------------------------------------------------------------------------
r198 | lordhavoc | 2001-05-12 12:54:51 +0200 (Sat, 12 May 2001) | 2 lines

removed net_vcr from the list of objects

------------------------------------------------------------------------
r197 | lordhavoc | 2001-05-11 10:27:05 +0200 (Fri, 11 May 2001) | 43 lines

***map loader generates portals for the map*** (can you tell this is a big deal? :)
increased build number to 100 (it's the truth)
made loadingplaque work correctly
disabled (commented out) loadingplaque
removed efrags
each model is checked against visible leafs (made efrags obsolete)
put .active field into client entity states (more correct than checking modelindex)
disabled all cachedir stuff (#if CACHEENABLE)
removed scr_copytop and other no-longer-relevant variables
removed Con_NotifyBox (wasn't used)
cleaned up visframe stuff
removed a lot of unnecessary fields from mnode_t and a few from mleaf_t
clarified r_visframecount stuff (now referred to as r_vismarkframecount, and similarly visframe field in mnode_t/mleaf_t is now called vismarkframe)
got rid of offsets[] array in texture_t
rewrote r_notexture_mip related code (fixing black default texture)
got rid of skyisvisible variable (check currentskypoly instead)
got rid of gl_texsort
simplified surface rendering process greatly (R_DrawSurfaces)
surface rendering should now be totally sequential (good for caches)
renamed r_newworldnode to r_leafworldnode (will be removed in next commit)
disabled r_oldclip code (will be removed in next commit)
renamed R_WorldNode to R_BSPWorldNode (will be removed in next commit)
renamed R_NewWorldNode to R_LeafWorldNode (will be removed in next commit)
made copy of R_WorldNode that ignores vis data, called R_NoVisWorldNode
added R_PortalWorldNode, 3-80% speed gain depending on situation, improved culling of non-relevant leafs/surfaces
added r_portalworldnode cvar to test new code (this will become the standard worldnode in next commit)
minor optimization to wateralpha code
minor redesign of R_TextureAnimation and animated texture stuff in texture_t
cleaned up timing issues in water (now synced to cl.time, not realtime) and menu code (now synced to realtime, not host_time)
removed host_time
removed SCR_ModalMessage (this got rid of the 'are you sure?' question on newgame)
changed quit messages
got rid of SCR_BringDownConsole
reorganized 2D screen drawing code (now draws console when loading plaque is displayed, etc)
some cleanup on texture loading
redesigned R_Decal to make use of BSP tree in finding nearest surfaces
renamed and redesigned R_DrawDecals to GL_DrawDecals and no longer uses transpoly
particles are now only rendered if inside a visible leaf
sprites are now only rendered if touching a visible leaf
ambient sounds no longer play after disconnecting
fixed severe delta compressed entity bugs in client
sped up MOVETYPE_NONE a bit

------------------------------------------------------------------------
r196 | lordhavoc | 2001-05-05 05:32:21 +0200 (Sat, 05 May 2001) | 3 lines

stripped out serial and modem stuff (was not supported anyway)
a little bit of new very incomplete menu code

------------------------------------------------------------------------
r195 | lordhavoc | 2001-05-04 20:52:30 +0200 (Fri, 04 May 2001) | 3 lines

No more busy-waiting when framerate cap is reached (in both Linux and win versions)
MOVETYPE_WALK on non-clients now links the edict like it should (major bugfix)

------------------------------------------------------------------------
r194 | lordhavoc | 2001-04-28 08:07:51 +0200 (Sat, 28 Apr 2001) | 2 lines

removed unused net_vcr (and all other traces of vcr system), apparently a predecessor to quake demos

------------------------------------------------------------------------
r193 | lordhavoc | 2001-04-26 07:38:37 +0200 (Thu, 26 Apr 2001) | 7 lines

a big change with a little description...

rearranged client entity_t structure
redesigned entity update system (same protocol)
added support for split entity updates in the future for rate capping
glow trails and view relative entities should work now (untested)

------------------------------------------------------------------------
r192 | lordhavoc | 2001-04-24 00:49:56 +0200 (Tue, 24 Apr 2001) | 2 lines

oops, two loop counting bugs, fixed

------------------------------------------------------------------------
r191 | lordhavoc | 2001-04-24 00:03:00 +0200 (Tue, 24 Apr 2001) | 2 lines

added back support for textures smaller than 4 pixels wide (Nehahra uses one)

------------------------------------------------------------------------
r190 | lordhavoc | 2001-04-20 17:48:49 +0200 (Fri, 20 Apr 2001) | 31 lines

added newmap function to render modules (so explosions and other things are reset on map load)
CL_AllocDlight redesigned (takes all settings for dlight on parameter line)
dlights now use a pointer to their owner entity instead of a key number
light emitting entities now glow properly (directional lighting disabled on the entity that owns the dlight)
cl_shownet no longer spews empty lines when recieving less updates from server than client framerate
some whitespace cleanup
fixed some missing parentheses on a condition in R_BuildLightmap (mixed &&, &, and ||, eek)
fixed vertex array problems with fog sky
increased MAX_TRANSPOLYS from 8192 to 65536
added a general purpose decal engine, superior to the decal particles (lower CPU use, better lighting)
added bullet hole decals and bullet hole texture generator
added r_speeds2 time reporting for moveexplosions, drawexplosions, and drawdecals
cleaned up dlight logic, all code now relies on radius, which is cleared when the dlight dies, this removed all potential flickering problems and offers a minor speedup
optimized R_ResampleTexture further to improve load times
moved heap size commandline parameter stuff from platform specific startup code to Host_Init, now all platforms understand -mem, -winmem, and -heapsize
WAD3 texture transparency now supported again
r_explosionclip cvar is now saved to config
r_drawexplosions cvar added
r_particles cvar is now saved to config
r_dynamicparticles cvar renamed to r_particles_lighting
r_particles_bloodshowers cvar added to disable blood shower effects
r_particles_blood cvar added to disable blood effects
r_particles_smoke cvar added to disable smoke effects
r_particles_sparks cvar added to disable spark effects
r_particles_bubbles cvar added to disable bubble effects
fixed smoke texture problem (0 alpha-noise portions were not written to texture, leaving portions of previous texture in buffer)
changed nearly every particle effect to look better and use less particles and fillrate, major speed gains resulted
blood particles no longer fade inflight as it made the effects less impressive and resulted in a lot of mostly transparent decals
major particle size bug fixed, all view aligned particles (everything but rain and decals) were 50% larger than they were supposed to be
particles now use transpolyvertub (unsigned byte colors) instead of transpolyvert for a speedup

------------------------------------------------------------------------
r189 | lordhavoc | 2001-04-20 17:38:28 +0200 (Fri, 20 Apr 2001) | 31 lines

added newmap function to render modules (so explosions and other things are reset on map load)
CL_AllocDlight redesigned (takes all settings for dlight on parameter line)
dlights now use a pointer to their owner entity instead of a key number
light emitting entities now glow properly (directional lighting disabled on the entity that owns the dlight)
cl_shownet no longer spews empty lines when recieving less updates from server than client framerate
some whitespace cleanup
fixed some missing parentheses on a condition in R_BuildLightmap (mixed &&, &, and ||, eek)
fixed vertex array problems with fog sky
increased MAX_TRANSPOLYS from 8192 to 65536
added a general purpose decal engine, superior to the decal particles (lower CPU use, better lighting)
added bullet hole decals and bullet hole texture generator
added r_speeds2 time reporting for moveexplosions, drawexplosions, and drawdecals
cleaned up dlight logic, all code now relies on radius, which is cleared when the dlight dies, this removed all potential flickering problems and offers a minor speedup
optimized R_ResampleTexture further to improve load times
moved heap size commandline parameter stuff from platform specific startup code to Host_Init, now all platforms understand -mem, -winmem, and -heapsize
WAD3 texture transparency now supported again
r_explosionclip cvar is now saved to config
r_drawexplosions cvar added
r_particles cvar is now saved to config
r_dynamicparticles cvar renamed to r_particles_lighting
r_particles_bloodshowers cvar added to disable blood shower effects
r_particles_blood cvar added to disable blood effects
r_particles_smoke cvar added to disable smoke effects
r_particles_sparks cvar added to disable spark effects
r_particles_bubbles cvar added to disable bubble effects
fixed smoke texture problem (0 alpha-noise portions were not written to texture, leaving portions of previous texture in buffer)
changed nearly every particle effect to look better and use less particles and fillrate, major speed gains resulted
blood particles no longer fade inflight as it made the effects less impressive and resulted in a lot of mostly transparent decals
major particle size bug fixed, all view aligned particles (everything but rain and decals) were 50% larger than they were supposed to be
particles now use transpolyvertub (unsigned byte colors) instead of transpolyvert for a speedup

------------------------------------------------------------------------
r188 | knghtbrd | 2001-04-06 05:51:39 +0200 (Fri, 06 Apr 2001) | 2 lines

gl_mtex_enum has moved to vid_shared.c

------------------------------------------------------------------------
r187 | lordhavoc | 2001-04-06 05:49:40 +0200 (Fri, 06 Apr 2001) | 2 lines

missed this one...

------------------------------------------------------------------------
r186 | lordhavoc | 2001-04-06 05:48:40 +0200 (Fri, 06 Apr 2001) | 2 lines

added default case for particles to report the error and remove the particle

------------------------------------------------------------------------
r185 | knghtbrd | 2001-04-06 05:44:45 +0200 (Fri, 06 Apr 2001) | 2 lines

Fix a couple gcc warnings

------------------------------------------------------------------------
r184 | lordhavoc | 2001-04-06 05:43:36 +0200 (Fri, 06 Apr 2001) | 2 lines

fix for lightmap update check

------------------------------------------------------------------------
r183 | lordhavoc | 2001-04-06 05:10:06 +0200 (Fri, 06 Apr 2001) | 88 lines

optimized AngleVectors calls (pass NULL for vectors that should not be generated)
added VectorVectors (takes a forward unit vector, makes right and up vectors)
corrected silly id spelling mistakes 'allready' and 'allways'
most host_frametime references changed to cl.frametime or sv.frametime
fixed movement interpolation in listen games (host client wasn't lerping the framerate capped server's frames)
added EF_FLAME effect, untested
changed svc_showlmp to use shorts, not bytes (except in nehahra compatibility mode)
broke svc_fog for now
removed svc_farclip
removed svc_playerposition
removed svc_skybox
increased maximum number of models and sounds to 1024 each (and added extra svc_ messages and update bits to handle the new limits)
made punchangle use preciseangles (on DP servers), added punchvector (view origin kick, useful for earthquakes?)
redesigned entire animation interpolation system (can lerp between independently playing framegroups)
redesigned animation scene lookup in model and sprite rendering to use a single system
added a simple clientside effect system (meant for playing sprite explosion animations entirely on the client, with very nice interpolation and framerate control)
added te_smallflash
added te_customflash
added te_flamejet (untested)
darkened lightning glow and made it adjustable (r_glowinglightning cvar is now a scaler, not just an option)
increased maximum number of clientside entities
COM_WriteFile will now create a path leading up to the file
removed cpu_*.* files
reorganized fractalnoise code, now behaves more correctly
stripped out qsg_version stuff, replaced by pr_checkextension and extensions have changed completely (extensions are documented in dpextensions.qc in DP mod and release zips)
made skin and sprite mipmapping optional (r_mipskins cvar, r_mipsprites cvar), saves about 32% of texture memory if disabled
rewrote texture management system (again), now uses flags to specify texture attributes (all textures without the PRECACHE flag are uploaded only when first used, conserves huge amounts of memory), and is cleaner code
r_precachetextures cvar controls how PRECACHE texture flag is used (0 = never precache, 1 = use PRECACHE flag, 2 = always precache)
changed way text filtering mode is decided
now requires vertex array support (standard in OpenGL 1.1 so this is not a problem)
takes advantage of GL_EXT_compiled_vertex_array extension (no speed gain for my Geforce2, may help other people)
reverted to GL transforms for models (no speed gain for my Geforce2, may help other people)
gl_transform cvar controls whether to use GL transforms (1) or software transforms (0), could not measure any speed difference in my testing
r_shadows removed due to GL transforms on models
model and sprite interpolation now handle 4 frame interpolation to accomodate new interpolation system
RSurf_Draw* functions greatly optimized
Host_Error will now Sys_Error rather than crash if Host_Frame has not yet been executed
cleaned up viewthing frame reporting code, now uses the new animation system
can now look directly up and down
ByteToNormal and NormalToByte added in mathlib.c, also moved anorms.h table to mathlib.c
added axial cases for BoxOnPlaneSide (BIG improvement)
trivert2 vertex format removed, now uses alias trivertx_t format as-is (33% less model memory usage and possibly quicker loading)
redesigned map texture loading again (particularly HL maps)
water is now lit on both sides
sprites are now cached like models
sprite loading redesigned to use new animation system
increased maximum packet size to accomodate the largest possible
PF_vectoyaw optimized a little
PF_vectoangles optimized a little
PF_findchain added
PF_findchainfloat added
PF_effect added
PF_te_blood added
PF_te_bloodshower added
PF_te_explosionrgb added
PF_te_particlecube added
PF_te_particlerain added
PF_te_particlesnow added
PF_te_spark added
PF_te_gunshotquad added
PF_te_spikequad added
PF_te_superspikequad added
PF_te_explosionquad added
PF_te_smallflash added
PF_te_customflash added
PF_te_gunshot added
PF_te_spike added
PF_te_superspike added
PF_te_explosion added
PF_te_tarexplosion added
PF_te_wizspike added
PF_te_knightspike added
PF_te_lavasplash added
PF_te_teleport added
PF_te_explosion2 added
PF_te_lightning1 added
PF_te_lightning2 added
PF_te_lightning3 added
PF_te_beam added
PF_vectorvectors added
increased maximum file path length
explosions are no longer round
removed LIGHTSCALE settings
removed r_donttransformmodels cvar
a lot of particle effect changes (bouncing sparks, blood sprays from gibs that stick on the walls)
fixed sound combining so it no longer plays past the end of the buffer
fixed sound resampling

------------------------------------------------------------------------
r182 | taniwha | 2001-04-05 19:51:30 +0200 (Thu, 05 Apr 2001) | 4 lines

while not yet used (I'd forgotten how much side work was involved in getting
zlib support into quake), these will allow dp to use compressed paks :) The
rest will be coming as soon as I get everything working.

------------------------------------------------------------------------
r181 | dabb | 2001-03-15 17:19:13 +0100 (Thu, 15 Mar 2001) | 2 lines

Compile fixes.

------------------------------------------------------------------------
r179 | lordhavoc | 2001-03-04 23:30:07 +0100 (Sun, 04 Mar 2001) | 2 lines

now supports upto 256x256 texel lightmaps (rather than 17x17), as_tundra.bsp works now

------------------------------------------------------------------------
r178 | lordhavoc | 2001-03-04 02:16:22 +0100 (Sun, 04 Mar 2001) | 2 lines

forgot this file while changing FALSE and TRUE to false and true

------------------------------------------------------------------------
r177 | lordhavoc | 2001-03-04 02:04:38 +0100 (Sun, 04 Mar 2001) | 4 lines

rewrite of map texture loading (mainly to do with HL textures and wads)

and all FALSE and TRUE changed to false and true

------------------------------------------------------------------------
r176 | lordhavoc | 2001-03-03 23:49:59 +0100 (Sat, 03 Mar 2001) | 2 lines

redesigned transparent HL texture checking again, now treats color 255 as transparent but only when the texture begins with a { character

------------------------------------------------------------------------
r175 | lordhavoc | 2001-03-03 23:10:56 +0100 (Sat, 03 Mar 2001) | 2 lines

fixed transparent color in HL textures (was red, should be blue... oops)

------------------------------------------------------------------------
r174 | lordhavoc | 2001-03-03 23:02:34 +0100 (Sat, 03 Mar 2001) | 2 lines

server speed controls fade out of damage/bonus flashs now (more reliable timedemo)

------------------------------------------------------------------------
r169 | lordhavoc | 2001-03-02 23:14:49 +0100 (Fri, 02 Mar 2001) | 2 lines

a little cleanup, and eliminated a lightstyle buffer overflow

------------------------------------------------------------------------
r168 | lordhavoc | 2001-03-02 23:03:33 +0100 (Fri, 02 Mar 2001) | 2 lines

added DPPROTOCOL support to svc_version parsing (is svc_version even used?)

------------------------------------------------------------------------
r167 | lordhavoc | 2001-03-02 22:40:19 +0100 (Fri, 02 Mar 2001) | 2 lines

added a new hack to make MSVC work which will definitely not break any other compilers

------------------------------------------------------------------------
r166 | lordhavoc | 2001-03-02 22:28:43 +0100 (Fri, 02 Mar 2001) | 2 lines

removed hack to make MSVC work as it was breaking gcc

------------------------------------------------------------------------
r165 | lordhavoc | 2001-03-02 11:52:15 +0100 (Fri, 02 Mar 2001) | 13 lines

Coordinates are now floats in network protocol (bloats it yes, but the accuracy allows unlimited map size, and smoother movement at very high framerates)
prints dump of last 32 svc messages in packet when client encounters unknown svc (corrupt or mis-parsed network stream)
some aesthetic cleanup of tempentity parsing
rewrite of COM_FileBase
default gl_lightmaprgba to 1 (driver speedup (data bloat, but drivers are often more optimized for it), thought I defaulted it to 1 all along, but apparently not)
model names no longer use COM_FileBase (thus they are the full name, like "progs/blah.mdl" rather than "blah", "maps/start.bsp" instead of "start", etc)
fixed bugs in model colormapping, and added external skin texture support (example: progs/blah.mdl_0_normal.tga and progs/blah.mdl_0_glow.tga, pants and shirts are also supported)
support for textures inside HL maps, and the transparent color has been fixed (HL checks for pure blue, not index 255)
default r_dynamicparticles to 1 (light smoke/blood)
improvement in angled corner sticking situations (still get a little bump as you pass through, but not actually stuck)
fixed rotation support in MOVETYPE_FOLLOW, now works perfectly
extended description length in hunk headers (50 characters now)

------------------------------------------------------------------------
r164 | despair | 2001-02-28 21:41:46 +0100 (Wed, 28 Feb 2001) | 3 lines

Fix for exit segfault preventing fullscreen cleanup, and for the segfault as well.
Also enables dga mouse support, and adds in_dga_mouseaccel. DGA support needs testing.

------------------------------------------------------------------------
r160 | lordhavoc | 2001-02-27 09:11:44 +0100 (Tue, 27 Feb 2001) | 2 lines

oops, hadn't finished this

------------------------------------------------------------------------
r159 | lordhavoc | 2001-02-27 09:07:57 +0100 (Tue, 27 Feb 2001) | 2 lines

forgot to commit this

------------------------------------------------------------------------
r158 | lordhavoc | 2001-02-27 09:07:34 +0100 (Tue, 27 Feb 2001) | 2 lines

clean up use of client structs in server

------------------------------------------------------------------------
r157 | despair | 2001-02-24 01:21:48 +0100 (Sat, 24 Feb 2001) | 2 lines

Minor comment update.

------------------------------------------------------------------------
r156 | despair | 2001-02-24 01:20:04 +0100 (Sat, 24 Feb 2001) | 2 lines

Remove alsa 0.6 (for some random date of cvs alsa) support, never officially released. 0.9 is out, rejoice!

------------------------------------------------------------------------
r155 | despair | 2001-02-24 01:10:10 +0100 (Sat, 24 Feb 2001) | 3 lines

Update to latest ALSA development drivers.
(Thanks again to Abramo)

------------------------------------------------------------------------
r154 | lordhavoc | 2001-02-24 01:08:51 +0100 (Sat, 24 Feb 2001) | 2 lines

added model_zymotic.h (forgot)

------------------------------------------------------------------------
r153 | lordhavoc | 2001-02-24 00:51:02 +0100 (Sat, 24 Feb 2001) | 2 lines

updated makefile and added r_explosion.c (forgot)

------------------------------------------------------------------------
r152 | lordhavoc | 2001-02-24 00:39:54 +0100 (Sat, 24 Feb 2001) | 20 lines

improved TraceLine in chase.c to be more generally useful (should move it to another file, though)
error checking in qmalloc/qfree
expanded COM_LoadFile max filename length from 32 to 1024
improved COM_LoadFile error messages
added COM_ToLowerString and COM_ToUpperString
.zym model support (not quite complete, in development)
unfinished transition to hardware model transforms (not used yet)
changed polylists to draw 5+ point polygons as GL_POLYGON instead of GL_TRIANGLE_FAN (I thought I had reverted to GL_POLYGON a long time ago... strange) for a minor speedup
new explosion effect (no particles)
reverted to lightmapped dynamic lighting effects (vertex hybrid still available as r_dlightmaps 0)
extreme speed improvements in which wall polygons are lit
minor optimization to lightmap building (memset to clear blocklights)
added and disabled texture caching to disk (it turned out to be a slowdown and a massive waste of space, but kept in source form incase it is ever useful)
much improved missing QC function errors (most notably think)
partial redesign of the skin colormapping engine (not used yet)
more consistent light falloff on different objects
created and scrapped a new particle explosion effect (way too fillrate intensive), superseded by the new explosion effect
only dynamically lights smoke and blood particles unless r_dynamicparticles is 2
possible fix for alt-tab bug in NVidia drivers (from Dabb)

------------------------------------------------------------------------
r151 | despair | 2001-02-18 16:14:25 +0100 (Sun, 18 Feb 2001) | 2 lines

Undo accidental makefile commit.

------------------------------------------------------------------------
r150 | despair | 2001-02-18 16:09:37 +0100 (Sun, 18 Feb 2001) | 2 lines

Couple of 1 liner compile fixes. Missing header and missing cast.

------------------------------------------------------------------------
r149 | lordhavoc | 2001-02-13 23:07:14 +0100 (Tue, 13 Feb 2001) | 2 lines

report name when Hunk_Alloc fails

------------------------------------------------------------------------
r148 | lordhavoc | 2001-02-12 09:24:04 +0100 (Mon, 12 Feb 2001) | 2 lines

fix for unitialized variable warnings

------------------------------------------------------------------------
r147 | lordhavoc | 2001-02-09 13:11:11 +0100 (Fri, 09 Feb 2001) | 21 lines

added back r_speeds2, with masses of information (6 lines high), and made it print to the screen rather than console print
changed fps reading to be integer, no fraction (is this desirable?) and moved it to bottom right corner
changed rendering order yet again
made sky and waterripple speed dependent on cl.time rather than realtime (undecided if this is desirable)
made console scrolling not subject to slowmo time scaling
some whitespace changes/cleanup
moved some registervariable definitions around
optional new worldnode function (r_newworldnode, defaults to off), very different approach, minimal speed differences...  sigh
added backface culling on surfaces (r_nobacks, defaults to off), barely a gain
in worldnode, made 'trivial inclusion' case for all children nodes of a completely successful CullBox test, defaults to off because it was no speed gain even on the most complex maps I could find
readability cleanup and minor speedup in lightmap conversion
added host_minfps (if framerate drops below this it will be slowmo, this replaces quake's hardcoded 10fps limit)
added host_maxfps (limit your framerate if desired, defaults to 1000, this does affect timedemo)
improved slowmo behavior
optimized out most vec3_origin uses (created VectorNegate and VectorClear for this reason)
fixed VectorDistance (old definition didn't work correctly, but never got used anyway)
darkened blood trails a bit
split R_DrawParticles into R_MoveParticles and R_DrawParticles (for speed profiling reasons)
fix for extremely rare and probably unnoticable bug in particle compacter
fixed a number of prediction issues, prediction does not occur in local games anymore, prediction also made optional (sv_predict cvar)

------------------------------------------------------------------------
r146 | lordhavoc | 2001-02-07 11:22:53 +0100 (Wed, 07 Feb 2001) | 2 lines

renamed snd_linux.c to snd_oss.c

------------------------------------------------------------------------
r145 | lordhavoc | 2001-02-06 18:26:46 +0100 (Tue, 06 Feb 2001) | 8 lines

better version reports (always mention build number)
minor cleanup of qpic system (loading and drawing)
minor improvement to lighting engine tweakability (LIGHTSCALE2)
minor cleanup to texture tracking (totaltexels now called texeldatasize)
r_texturestats texture size reports are now correct (was showing 4x what it should have)
r_texturestats report rearranged to put size on the left for easy sorting in console logs
cruft removal

------------------------------------------------------------------------
r144 | lordhavoc | 2001-02-03 16:54:34 +0100 (Sat, 03 Feb 2001) | 2 lines

increased build number to 79

------------------------------------------------------------------------
r143 | lordhavoc | 2001-02-03 16:54:06 +0100 (Sat, 03 Feb 2001) | 2 lines

removed unused cvars

------------------------------------------------------------------------
r142 | lordhavoc | 2001-01-29 12:59:51 +0100 (Mon, 29 Jan 2001) | 2 lines

got rid of Hunk_Alloc, all allocations now have a proper name (perhaps a bit too descriptive even), improved texture tally to list wasted skin layers (colormapping), made hunk names 24 characters instead of 8.

------------------------------------------------------------------------
r141 | lordhavoc | 2001-01-29 09:14:37 +0100 (Mon, 29 Jan 2001) | 2 lines

every malloc/calloc/free converted to qmalloc/qfree with tracking (memstats command), and all uses of Hunk_TempAlloc have gone away

------------------------------------------------------------------------
r140 | lordhavoc | 2001-01-29 08:00:17 +0100 (Mon, 29 Jan 2001) | 2 lines

reduced default -zone from 512k to 128k (quake used 48k)

------------------------------------------------------------------------
r139 | lordhavoc | 2001-01-29 07:49:42 +0100 (Mon, 29 Jan 2001) | 2 lines

smoke trails no longer rise (but you could hardly tell anyway, due to their short length)

------------------------------------------------------------------------
r138 | lordhavoc | 2001-01-29 07:47:40 +0100 (Mon, 29 Jan 2001) | 2 lines

smoke trails changed again, smoke texture greatly improved

------------------------------------------------------------------------
r137 | lordhavoc | 2001-01-29 07:10:57 +0100 (Mon, 29 Jan 2001) | 2 lines

make screenshots rightside up again (or rather, upside down like TGA wants, which happens to be the output format of glReadPixels, a fact I was unaware of, so the flipping was turning it to rightside up, which is upside down in TGA...  follow that logic?  good :)

------------------------------------------------------------------------
r136 | lordhavoc | 2001-01-28 12:03:49 +0100 (Sun, 28 Jan 2001) | 2 lines

smoke effects changed a bit (and the smoke texture generator as well), rockets trail sparks too

------------------------------------------------------------------------
r135 | lordhavoc | 2001-01-28 11:03:30 +0100 (Sun, 28 Jan 2001) | 2 lines

VID_CheckMultiTexture case was wrong (now VID_CheckMultitexture)

------------------------------------------------------------------------
r134 | lordhavoc | 2001-01-25 07:46:16 +0100 (Thu, 25 Jan 2001) | 2 lines

updated OBJECTS list and added cleaning of darkplaces-3dfx

------------------------------------------------------------------------
r133 | lordhavoc | 2001-01-23 01:27:41 +0100 (Tue, 23 Jan 2001) | 2 lines

removed unused gldir string

------------------------------------------------------------------------
r132 | lordhavoc | 2001-01-23 01:12:34 +0100 (Tue, 23 Jan 2001) | 2 lines

disabled unused variable

------------------------------------------------------------------------
r131 | lordhavoc | 2001-01-23 01:10:51 +0100 (Tue, 23 Jan 2001) | 2 lines

ripped out vertex array function lookup, require OpenGL 1.2.x instead.

------------------------------------------------------------------------
r130 | lordhavoc | 2001-01-23 00:58:32 +0100 (Tue, 23 Jan 2001) | 10 lines

clarifications about the format of svc_fog
precache name overflow checks
gl_screen.c - whitespace changes?
sky name overflow checks
"tell" buffer overflow improvement (not really a fix)
edict parsing buffer increase (not really a fix)
increased number of leafs per entity from 64 to 256 (mem hog...  but fixes fall2.bsp  note: quake used 16 and did not have a problem with fall2?) and added warning when it runs out
removed rotating pusher hack and added solid checking
non-working MOVETYPE_FOLLOW rotation support (in-progress)

------------------------------------------------------------------------
r129 | lordhavoc | 2001-01-23 00:15:51 +0100 (Tue, 23 Jan 2001) | 2 lines

fixed (byte *) - (char *) subtraction

------------------------------------------------------------------------
r128 | taniwha | 2001-01-23 00:13:25 +0100 (Tue, 23 Jan 2001) | 2 lines

fix a char type problem

------------------------------------------------------------------------
r127 | lordhavoc | 2001-01-12 12:36:47 +0100 (Fri, 12 Jan 2001) | 2 lines

Fix for image replacement in sprites, now the sprite extension is stripped before the frame names are generated (so naming for s_explod.spr is like s_explod_0.tga, s_explod_1.tga, etc) and the extension stripping in the image loader will only strip off .lmp or .pcx or .tga, not other extensions, the sprite extension stripper is similar but for .spr and .spr32.

------------------------------------------------------------------------
r126 | lordhavoc | 2001-01-07 17:56:48 +0100 (Sun, 07 Jan 2001) | 2 lines

workaround/fix for bounds checking warning

------------------------------------------------------------------------
r125 | lordhavoc | 2001-01-07 17:49:54 +0100 (Sun, 07 Jan 2001) | 2 lines

critical fix for COM_FileBase (could go hunting through mem for /)

------------------------------------------------------------------------
r124 | lordhavoc | 2001-01-07 17:38:16 +0100 (Sun, 07 Jan 2001) | 2 lines

workaround for bounds checking error in loading texture lump

------------------------------------------------------------------------
r123 | lordhavoc | 2001-01-07 17:11:57 +0100 (Sun, 07 Jan 2001) | 2 lines

disabled scrap system (what an eye sore that was...) and fixed interpolated text condition (now interpolated when scaling up, as it was meant to be)

------------------------------------------------------------------------
r122 | lordhavoc | 2000-12-20 23:16:15 +0100 (Wed, 20 Dec 2000) | 2 lines

smoke and blood changes

------------------------------------------------------------------------
r121 | dabb | 2000-12-10 11:59:17 +0100 (Sun, 10 Dec 2000) | 2 lines

Added palette.c and r_sprites.c. Compiles now.

------------------------------------------------------------------------
r120 | lordhavoc | 2000-12-09 19:15:30 +0100 (Sat, 09 Dec 2000) | 2 lines

build 78

------------------------------------------------------------------------
r119 | lordhavoc | 2000-12-09 19:04:45 +0100 (Sat, 09 Dec 2000) | 26 lines

bmodel rotation physics now work
new vid_glx.c (contributed by zinx)
removed DPNEHAHRA engine titling
fixed some lighthalf, fog, and sky related bugs
removed some 3D card hacks
merged GL_Init code for all targets (note: vid_glx.c and vid_3dfxsvga.c may be broken)
split sprite code out in gl_sprites.c
rearranged palette management code
removed all traces of 8bit upload support for now (may be added back)
halved memory usage (although this prevents renderer restarting for the moment)
implemented r_texturestats command
removed old texture upload code
rewrote use of host_parms
rewrote some code relating to host_basepal
bigendian support in pcx loading
changed external texture character equivilant for * from + to # to avoid conflicts with animating textures
removed cruft here and there
force all textures to lowercase to mask potentially silly wad lump names in maps
new crosshairs
more stuff is extern in includes
some general cleanup of the MOVETYPE_PUSH code
rewrote portions of vid_wgl.c
V_UpdatePalette renamed to V_UpdateBlends
removed starting dialog code in wgl
made SV_RecursiveHullCheck accessable in world.h

------------------------------------------------------------------------
r118 | taniwha | 2000-11-30 18:07:00 +0100 (Thu, 30 Nov 2000) | 2 lines

apply the 0 byte udp packet DoS fix from nuq.

------------------------------------------------------------------------
r117 | lordhavoc | 2000-11-28 14:22:31 +0100 (Tue, 28 Nov 2000) | 2 lines

made glowing lightning optional

------------------------------------------------------------------------
r116 | lordhavoc | 2000-11-27 07:46:44 +0100 (Mon, 27 Nov 2000) | 2 lines

spark showers on explosions, better sparks on bullet impacts

------------------------------------------------------------------------
r115 | lordhavoc | 2000-11-27 07:40:07 +0100 (Mon, 27 Nov 2000) | 2 lines

removed cruft from debugging

------------------------------------------------------------------------
r114 | lordhavoc | 2000-11-27 07:05:23 +0100 (Mon, 27 Nov 2000) | 2 lines

put in dprinting of model names as they are loaded

------------------------------------------------------------------------
r113 | lordhavoc | 2000-11-27 07:04:59 +0100 (Mon, 27 Nov 2000) | 2 lines

removed unused tracercount

------------------------------------------------------------------------
r112 | lordhavoc | 2000-11-27 02:47:52 +0100 (Mon, 27 Nov 2000) | 2 lines

build 77

------------------------------------------------------------------------
r111 | lordhavoc | 2000-11-27 02:37:42 +0100 (Mon, 27 Nov 2000) | 2 lines

rain splatters on the ground and water, and turns to steam on slime/lava, bubbles splatter when they leave water

------------------------------------------------------------------------
r110 | lordhavoc | 2000-11-27 00:20:07 +0100 (Mon, 27 Nov 2000) | 2 lines

fractalnoise enhancements, better smoke textures, better bubble explosions, blood in water

------------------------------------------------------------------------
r109 | lordhavoc | 2000-11-26 10:38:00 +0100 (Sun, 26 Nov 2000) | 2 lines

forgot to extern GL_LoadPicTexture

------------------------------------------------------------------------
r108 | lordhavoc | 2000-11-26 10:22:55 +0100 (Sun, 26 Nov 2000) | 2 lines

cruft removal, general cleanup, fix for delta compression bugs, generic targa writer

------------------------------------------------------------------------
r107 | lordhavoc | 2000-11-26 10:18:57 +0100 (Sun, 26 Nov 2000) | 2 lines

work around gcc lacking support for no-size arrays in structures

------------------------------------------------------------------------
r106 | dabb | 2000-11-23 16:09:05 +0100 (Thu, 23 Nov 2000) | 2 lines

Cleaned up a bit..

------------------------------------------------------------------------
r105 | dabb | 2000-11-23 16:03:59 +0100 (Thu, 23 Nov 2000) | 2 lines

Fixed some of the mess. Might work now...

------------------------------------------------------------------------
r104 | lordhavoc | 2000-11-23 14:15:01 +0100 (Thu, 23 Nov 2000) | 2 lines

build 76

------------------------------------------------------------------------
r103 | lordhavoc | 2000-11-23 14:14:31 +0100 (Thu, 23 Nov 2000) | 2 lines

minor redesign of console loading/drawing, cruft removal, change to Draw_GenericPic parameter types

------------------------------------------------------------------------
r102 | lordhavoc | 2000-11-23 09:25:57 +0100 (Thu, 23 Nov 2000) | 2 lines

cruft removal

------------------------------------------------------------------------
r101 | lordhavoc | 2000-11-23 09:24:10 +0100 (Thu, 23 Nov 2000) | 2 lines

very minor cruft removal

------------------------------------------------------------------------
r100 | dabb | 2000-11-21 16:36:32 +0100 (Tue, 21 Nov 2000) | 2 lines

Borland C++ makefile for Darkplaces. Does NOT use asm objs yet, but works otherwise.

------------------------------------------------------------------------
r99 | dabb | 2000-11-21 15:54:45 +0100 (Tue, 21 Nov 2000) | 2 lines

Borland C++ compile fix - works/compiles now.

------------------------------------------------------------------------
r98 | dabb | 2000-11-21 15:49:36 +0100 (Tue, 21 Nov 2000) | 2 lines

Borland C++ compile fixes

------------------------------------------------------------------------
r97 | lordhavoc | 2000-11-21 11:17:37 +0100 (Tue, 21 Nov 2000) | 2 lines

fix for sprite scale bug (it was scaling vup and vright!)

------------------------------------------------------------------------
r96 | lordhavoc | 2000-11-21 10:13:52 +0100 (Tue, 21 Nov 2000) | 2 lines

merged RSurf_DrawWall/EmitWall/etc back into RSurf_DrawWall for speed reasons (split version was only for profile testing)

------------------------------------------------------------------------
r95 | lordhavoc | 2000-11-21 10:12:21 +0100 (Tue, 21 Nov 2000) | 2 lines

fixed duplicate application of gamma correction

------------------------------------------------------------------------
r94 | lordhavoc | 2000-11-21 10:11:34 +0100 (Tue, 21 Nov 2000) | 2 lines

removed cruft

------------------------------------------------------------------------
r93 | lordhavoc | 2000-11-21 10:11:03 +0100 (Tue, 21 Nov 2000) | 2 lines

removed fullbright torch hack :)

------------------------------------------------------------------------
r92 | lordhavoc | 2000-11-21 10:09:46 +0100 (Tue, 21 Nov 2000) | 2 lines

skip all of Draw_String when rendering is disabled

------------------------------------------------------------------------
r91 | lordhavoc | 2000-11-21 10:02:28 +0100 (Tue, 21 Nov 2000) | 2 lines

added support to image loader for loading mask as well (used for fog effects), removed some cruft, and made sprite loader check for external textures

------------------------------------------------------------------------
r90 | lordhavoc | 2000-11-21 09:58:02 +0100 (Tue, 21 Nov 2000) | 2 lines

more particle effect changes...

------------------------------------------------------------------------
r89 | lordhavoc | 2000-11-21 09:49:51 +0100 (Tue, 21 Nov 2000) | 2 lines

fixed spelling error (allready -> already)

------------------------------------------------------------------------
r88 | lordhavoc | 2000-11-18 10:53:29 +0100 (Sat, 18 Nov 2000) | 2 lines

implemented r_render and r_upload cvar options for CPU profiling (not hardware bound), note: defining NORENDER will disable both (useful for making profile builds)

------------------------------------------------------------------------
r87 | lordhavoc | 2000-11-18 09:37:15 +0100 (Sat, 18 Nov 2000) | 2 lines

removed unused 'minlight' option from dlight struct, and made muzzleflash light maller

------------------------------------------------------------------------
r86 | lordhavoc | 2000-11-18 09:12:19 +0100 (Sat, 18 Nov 2000) | 2 lines

backport of PM_RecursiveHullCheck for speedup

------------------------------------------------------------------------
r85 | lordhavoc | 2000-11-18 09:07:18 +0100 (Sat, 18 Nov 2000) | 2 lines

removed cruft

------------------------------------------------------------------------
r84 | lordhavoc | 2000-11-18 02:08:38 +0100 (Sat, 18 Nov 2000) | 2 lines

removed cruft

------------------------------------------------------------------------
r83 | lordhavoc | 2000-11-18 02:05:02 +0100 (Sat, 18 Nov 2000) | 2 lines

light only the front faces, cuts down on noticable visdata anomolies

------------------------------------------------------------------------
r82 | lordhavoc | 2000-11-17 12:28:38 +0100 (Fri, 17 Nov 2000) | 2 lines

obliterated Draw_TransPic and relatives, also fixed Draw_TransPicTranslate, and restored pics to normal brightness

------------------------------------------------------------------------
r81 | lordhavoc | 2000-11-17 12:24:21 +0100 (Fri, 17 Nov 2000) | 2 lines

combined glClear calls, may be a speedup

------------------------------------------------------------------------
r80 | lordhavoc | 2000-11-17 12:22:19 +0100 (Fri, 17 Nov 2000) | 2 lines

removed glClearColor because it was being reset in gl_screen anyway

------------------------------------------------------------------------
r79 | lordhavoc | 2000-11-17 12:20:12 +0100 (Fri, 17 Nov 2000) | 2 lines

changed texture slots in use message (developer mode only) to not mention glquake

------------------------------------------------------------------------
r78 | lordhavoc | 2000-11-17 11:33:37 +0100 (Fri, 17 Nov 2000) | 2 lines

speedups to R_WorldNode, and some shrinkage on the surface struct

------------------------------------------------------------------------
r77 | lordhavoc | 2000-11-17 11:32:00 +0100 (Fri, 17 Nov 2000) | 2 lines

disabled Sys_PageIn for quicker startup (whether this is good or not is questionable)

------------------------------------------------------------------------
r76 | lordhavoc | 2000-11-17 09:35:39 +0100 (Fri, 17 Nov 2000) | 14 lines

updated to version 1.50, build 75.
change log as best I can remember:
rewrote model loading and rendering
multi-pass colormapping on any model (NO UPLOADS!)
fullbrights on models (feature of new multi-pass model renderer)
rewrote texture management
rewrote texture uploading
heavily optimized static light sampling
fancy new crosshair
fixed network angle rounding (shots are fired where you're pointing, not down and to the right)
HL map hull sizes are supported (still sink into grates though)
removal of some commented out junk
other minor stuff I can't remember now

------------------------------------------------------------------------
r75 | lordhavoc | 2000-11-12 23:40:11 +0100 (Sun, 12 Nov 2000) | 2 lines

increased build number to 73

------------------------------------------------------------------------
r74 | taniwha | 2000-10-31 16:33:07 +0100 (Tue, 31 Oct 2000) | 2 lines

from newtree. at worst will need a header tweek

------------------------------------------------------------------------
r73 | lordhavoc | 2000-10-31 04:31:02 +0100 (Tue, 31 Oct 2000) | 5 lines

lighthalf related transpoly cleanup
major cleanup of surface rendering code for readability sake
SV_ChangeTeam added for sake of QC in mods (allows the mod to review all color changes and decide what to do with them, setcolor is useful for this)
minor light chunk loader cleanup (including a questionable bugfix relating to .lit files for maps without light data)

------------------------------------------------------------------------
r72 | lordhavoc | 2000-10-31 04:20:58 +0100 (Tue, 31 Oct 2000) | 2 lines

incremented buildnum

------------------------------------------------------------------------
r71 | lordhavoc | 2000-10-31 02:34:09 +0100 (Tue, 31 Oct 2000) | 2 lines

added setcolor builtin

------------------------------------------------------------------------
r70 | lordhavoc | 2000-10-31 02:33:14 +0100 (Tue, 31 Oct 2000) | 2 lines

increased max pcx size to 320x256

------------------------------------------------------------------------
r69 | lordhavoc | 2000-10-28 21:04:51 +0200 (Sat, 28 Oct 2000) | 2 lines

added buildnumber.c to makefile

------------------------------------------------------------------------
r68 | lordhavoc | 2000-10-28 20:56:55 +0200 (Sat, 28 Oct 2000) | 2 lines

fix for missing \n

------------------------------------------------------------------------
r67 | lordhavoc | 2000-10-28 20:49:33 +0200 (Sat, 28 Oct 2000) | 2 lines

recursive host_error improvement (prints both error messages)

------------------------------------------------------------------------
r66 | lordhavoc | 2000-10-28 20:47:01 +0200 (Sat, 28 Oct 2000) | 2 lines

particle audit, only one kind of gravity now, many unused particle types removed, blood trails look cooler without gravity, etc

------------------------------------------------------------------------
r65 | lordhavoc | 2000-10-28 20:45:30 +0200 (Sat, 28 Oct 2000) | 2 lines

remove never used svc_playerposition code

------------------------------------------------------------------------
r64 | lordhavoc | 2000-10-26 13:57:51 +0200 (Thu, 26 Oct 2000) | 2 lines

particle effect changes and code cleanup

------------------------------------------------------------------------
r63 | lordhavoc | 2000-10-26 13:54:41 +0200 (Thu, 26 Oct 2000) | 2 lines

changes to dpprotocol code (precise aiming mainly)

------------------------------------------------------------------------
r62 | lordhavoc | 2000-10-24 12:26:19 +0200 (Tue, 24 Oct 2000) | 2 lines

fix for blob particle crash

------------------------------------------------------------------------
r61 | lordhavoc | 2000-10-21 12:25:19 +0200 (Sat, 21 Oct 2000) | 2 lines

fixed chase_active (TraceLine no longer returns '0 0 0' when there was no impact)

------------------------------------------------------------------------
r60 | lordhavoc | 2000-10-21 12:24:28 +0200 (Sat, 21 Oct 2000) | 2 lines

fix for player model tilting in chase_active mode

------------------------------------------------------------------------
r59 | lordhavoc | 2000-10-21 12:22:24 +0200 (Sat, 21 Oct 2000) | 2 lines

fix for serious bug in .nodrawtoclient, .drawonlytoclient, and .viewmodelforclient comparisons - they now work

------------------------------------------------------------------------
r58 | lordhavoc | 2000-10-21 12:15:42 +0200 (Sat, 21 Oct 2000) | 2 lines

major particle engine speedup and cleanup of old commented out code, also moved particle defines from glquake.h to r_part.c where they belong (all particle code should live in r_part.c)

------------------------------------------------------------------------
r57 | lordhavoc | 2000-10-17 11:38:38 +0200 (Tue, 17 Oct 2000) | 2 lines

increased build number, changed default lightmap format to RGB (higher quality in 16bit modes), though this is likely to break windows Matrox G400 drivers in multitexture (the reason it was defaulted to RGBA previously)

------------------------------------------------------------------------
r56 | taniwha | 2000-10-17 09:38:23 +0200 (Tue, 17 Oct 2000) | 3 lines

almost compiles on linux again. also bring in the latest and_alsa*.c from
newtree

------------------------------------------------------------------------
r55 | lordhavoc | 2000-10-17 00:13:00 +0200 (Tue, 17 Oct 2000) | 2 lines

fixed all known vertex lighting mode problems (except sorting issues)

------------------------------------------------------------------------
r54 | lordhavoc | 2000-10-17 00:11:37 +0200 (Tue, 17 Oct 2000) | 2 lines

fix for transpolys disappearing while turning

------------------------------------------------------------------------
r53 | lordhavoc | 2000-10-16 22:48:26 +0200 (Mon, 16 Oct 2000) | 5 lines

yet another rewrite of the dlight engine, this time FAST
new stuff:
much higher quality (loose shadowing)
gl_vertex cvar to try vertex lighting (warning: very obvious transpoly sorting problems)

------------------------------------------------------------------------
r52 | lordhavoc | 2000-10-16 22:46:19 +0200 (Mon, 16 Oct 2000) | 2 lines

minor speedup to VectorNormalize #define's

------------------------------------------------------------------------
r51 | lordhavoc | 2000-10-15 17:45:12 +0200 (Sun, 15 Oct 2000) | 12 lines

Gigantic commit - dlight system rewritten
added serverside prediction
removed dark light support
removed explosion sparks
removed blastparticles code
particle effects changed
added build numbering
removed SetPal
removed remnants of surface cache code
fixed SZ_Clear in Host_Spawn_f
forgot what else...

------------------------------------------------------------------------
r50 | lordhavoc | 2000-10-06 00:53:22 +0200 (Fri, 06 Oct 2000) | 2 lines

Clear message buffer before calling ClientConnect, rather than after.

------------------------------------------------------------------------
r49 | taniwha | 2000-10-03 06:00:34 +0200 (Tue, 03 Oct 2000) | 2 lines

hopefully fix the 3dfx target

------------------------------------------------------------------------
r48 | mercury | 2000-10-03 02:05:46 +0200 (Tue, 03 Oct 2000) | 3 lines

Not adding, it has been here all along, you just have not seen it.
REALLY!

------------------------------------------------------------------------
r47 | lordhavoc | 2000-09-26 21:25:13 +0200 (Tue, 26 Sep 2000) | 2 lines

epsilon checking on brightness and contrast cvars

------------------------------------------------------------------------
r46 | taniwha | 2000-09-26 04:28:20 +0200 (Tue, 26 Sep 2000) | 2 lines

ignore darkplaces-glx

------------------------------------------------------------------------
r45 | lordhavoc | 2000-09-22 06:47:32 +0200 (Fri, 22 Sep 2000) | 2 lines

raised pack file count back to 16384 and fixed stack overflow

------------------------------------------------------------------------
r44 | lordhavoc | 2000-09-22 05:52:20 +0200 (Fri, 22 Sep 2000) | 2 lines

decreased pack file count limit to 4096 due to stack overflow

------------------------------------------------------------------------
r43 | lordhavoc | 2000-09-22 05:37:57 +0200 (Fri, 22 Sep 2000) | 2 lines

upped pack file count limit to 16384 from 2048

------------------------------------------------------------------------
r42 | lordhavoc | 2000-09-22 03:44:09 +0200 (Fri, 22 Sep 2000) | 2 lines

lighting improvement in rgba mode, may crash some windows drivers

------------------------------------------------------------------------
r41 | lordhavoc | 2000-09-22 03:42:47 +0200 (Fri, 22 Sep 2000) | 2 lines

-sndspeed option in windows (default: 11025)

------------------------------------------------------------------------
r40 | lordhavoc | 2000-09-22 03:42:04 +0200 (Fri, 22 Sep 2000) | 2 lines

Fix for crashs when downsampling sounds.

------------------------------------------------------------------------
r39 | lordhavoc | 2000-09-21 05:09:22 +0200 (Thu, 21 Sep 2000) | 2 lines

disabled texcoord checks in alias models, due to CTF v_star bug

------------------------------------------------------------------------
r38 | lordhavoc | 2000-09-21 05:07:58 +0200 (Thu, 21 Sep 2000) | 2 lines

44.1khz sound, interpolated resampling, killed cvar loadas8bit

------------------------------------------------------------------------
r37 | lordhavoc | 2000-09-21 03:47:36 +0200 (Thu, 21 Sep 2000) | 2 lines

ResampleSfx clean up and a bug fix on resampled stereo

------------------------------------------------------------------------
r36 | lordhavoc | 2000-09-18 20:45:19 +0200 (Mon, 18 Sep 2000) | 2 lines

removal of various id386 junk

------------------------------------------------------------------------
r35 | lordhavoc | 2000-09-18 17:53:01 +0200 (Mon, 18 Sep 2000) | 2 lines

copyentity builtin added

------------------------------------------------------------------------
r34 | lordhavoc | 2000-09-18 17:52:24 +0200 (Mon, 18 Sep 2000) | 2 lines

explosions push away particles

------------------------------------------------------------------------
r33 | lordhavoc | 2000-09-18 17:50:22 +0200 (Mon, 18 Sep 2000) | 2 lines

minor tweak to the forcing of color 255 to black

------------------------------------------------------------------------
r32 | lordhavoc | 2000-09-18 00:30:31 +0200 (Mon, 18 Sep 2000) | 2 lines

transparent statusbar

------------------------------------------------------------------------
r31 | taniwha | 2000-09-16 21:53:55 +0200 (Sat, 16 Sep 2000) | 2 lines

add ALSA support

------------------------------------------------------------------------
r30 | taniwha | 2000-09-15 22:34:41 +0200 (Fri, 15 Sep 2000) | 2 lines

I think that this really should be in here

------------------------------------------------------------------------
r29 | lordhavoc | 2000-09-14 03:00:13 +0200 (Thu, 14 Sep 2000) | 2 lines

Implemented r_ambient (mainly for sake of Nehahra's insanely dark maps).

------------------------------------------------------------------------
r28 | deek | 2000-09-12 17:12:18 +0200 (Tue, 12 Sep 2000) | 7 lines

host.c, sys_linux.c: Clear up linefeeds in Sys_Printf() -- we don't need to
add them, they should already be in there. Also, add optional timestamping
to console - doesn't work well with messages that call Sys_Printf() multiple
times, but for the rest it works fine.

cvar names: timestamps (int), timeformat (string)

------------------------------------------------------------------------
r27 | lordhavoc | 2000-09-11 21:28:30 +0200 (Mon, 11 Sep 2000) | 2 lines

clean up, r_farclip cvar, lit particles (optional), stuff

------------------------------------------------------------------------
r26 | lordhavoc | 2000-09-11 20:23:06 +0200 (Mon, 11 Sep 2000) | 2 lines

fix for uppercase nehahra movie names (oops, 'twas Ender's code).

------------------------------------------------------------------------
r25 | mercury | 2000-09-11 19:56:42 +0200 (Mon, 11 Sep 2000) | 2 lines

-3dfx support for linux!

------------------------------------------------------------------------
r24 | lordhavoc | 2000-09-07 00:11:33 +0200 (Thu, 07 Sep 2000) | 2 lines

Various graphical tweaks (mainly particle related), some code removed.

------------------------------------------------------------------------
r23 | lordhavoc | 2000-09-06 15:24:09 +0200 (Wed, 06 Sep 2000) | 2 lines

Linux GLX, a lot of code shrinkage/cleanup, assembly support.

------------------------------------------------------------------------
r22 | dabb | 2000-09-03 11:29:58 +0200 (Sun, 03 Sep 2000) | 2 lines

Borland C++ compile fixes.

------------------------------------------------------------------------
r21 | lordhavoc | 2000-08-31 18:49:27 +0200 (Thu, 31 Aug 2000) | 2 lines

extern fix

------------------------------------------------------------------------
r20 | lordhavoc | 2000-08-31 18:48:54 +0200 (Thu, 31 Aug 2000) | 2 lines

Better smoke textures, no floodfillskin, some cleanup.

------------------------------------------------------------------------
r19 | lordhavoc | 2000-08-31 17:32:50 +0200 (Thu, 31 Aug 2000) | 2 lines

Fix for glowing objects sometimes appearing black.

------------------------------------------------------------------------
r18 | lordhavoc | 2000-08-31 17:08:25 +0200 (Thu, 31 Aug 2000) | 2 lines

Very minor speedup to fractal noise generator.

------------------------------------------------------------------------
r17 | lordhavoc | 2000-08-31 16:43:53 +0200 (Thu, 31 Aug 2000) | 2 lines

Major speedup to model loading, using lightnormalindex table now.

------------------------------------------------------------------------
r16 | lordhavoc | 2000-08-31 16:25:26 +0200 (Thu, 31 Aug 2000) | 2 lines

-noipx changed to -ipx at Dabb's request.

------------------------------------------------------------------------
r15 | lordhavoc | 2000-08-31 16:09:05 +0200 (Thu, 31 Aug 2000) | 2 lines

misc. cleanup, bubble trails fixed, improved lightmap compatibility.

------------------------------------------------------------------------
r14 | lordhavoc | 2000-08-25 14:32:44 +0200 (Fri, 25 Aug 2000) | 2 lines

pmodel fixes (now works properly in listen/singleplayer)

------------------------------------------------------------------------
r13 | lordhavoc | 2000-08-24 21:53:59 +0200 (Thu, 24 Aug 2000) | 2 lines

Fog variables redesigned slightly. (no longer cvars)

------------------------------------------------------------------------
r12 | dabb | 2000-08-24 09:17:27 +0200 (Thu, 24 Aug 2000) | 2 lines

Borland C++ compile fixes.

------------------------------------------------------------------------
r11 | lordhavoc | 2000-08-24 02:58:15 +0200 (Thu, 24 Aug 2000) | 2 lines

SVC_FOG changed (uses a short instead of a float so QC can write it).

------------------------------------------------------------------------
r10 | lordhavoc | 2000-08-24 01:42:49 +0200 (Thu, 24 Aug 2000) | 2 lines

HalfLife texture transparency fixed, pmodel enhanced (Nehahra).

------------------------------------------------------------------------
r9 | lordhavoc | 2000-08-23 13:26:56 +0200 (Wed, 23 Aug 2000) | 2 lines

Too many fixes to mention. (sys_ticrate now controls packet rates, and other stuff)

------------------------------------------------------------------------
r8 | lordhavoc | 2000-08-23 03:40:45 +0200 (Wed, 23 Aug 2000) | 2 lines

Fix for HalfLife texture transparency and renderamt (originally misunderstood).

------------------------------------------------------------------------
r7 | lordhavoc | 2000-08-23 02:57:51 +0200 (Wed, 23 Aug 2000) | 2 lines

Corrected misspelling in HL support (rendertype is now rendermode).

------------------------------------------------------------------------
r6 | lordhavoc | 2000-08-23 02:03:04 +0200 (Wed, 23 Aug 2000) | 2 lines

HalfLife renderamt support (why? boredom...)

------------------------------------------------------------------------
r5 | lordhavoc | 2000-08-23 01:27:57 +0200 (Wed, 23 Aug 2000) | 2 lines

pmodel command support for Nehahra multiplayer (select skins/models by one number - hack)

------------------------------------------------------------------------
r2 | lordhavoc | 2000-08-22 04:56:41 +0200 (Tue, 22 Aug 2000) | 2 lines

Initial revision

------------------------------------------------------------------------
